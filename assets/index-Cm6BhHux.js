(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nI(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hp={exports:{}},Yc={};var Ov;function rI(){if(Ov)return Yc;Ov=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Yc.Fragment=e,Yc.jsx=t,Yc.jsxs=t,Yc}var Vv;function sI(){return Vv||(Vv=1,Hp.exports=rI()),Hp.exports}var f=sI(),Gp={exports:{}},Le={};var Pv;function iI(){if(Pv)return Le;Pv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function N(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,U={};function B(M,ee,de){this.props=M,this.context=ee,this.refs=U,this.updater=de||P}B.prototype.isReactComponent={},B.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},B.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Z(){}Z.prototype=B.prototype;function Q(M,ee,de){this.props=M,this.context=ee,this.refs=U,this.updater=de||P}var oe=Q.prototype=new Z;oe.constructor=Q,K(oe,B.prototype),oe.isPureReactComponent=!0;var re=Array.isArray;function ue(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(M,ee,de){var ve=de.ref;return{$$typeof:i,type:M,key:ee,ref:ve!==void 0?ve:null,props:de}}function k(M,ee){return C(M.type,ee,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function L(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return ee[de]})}var R=/\/+/g;function me(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):ee.toString(36)}function he(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ue,ue):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,ee,de,ve,se){var be=typeof M;(be==="undefined"||be==="boolean")&&(M=null);var Se=!1;if(M===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(M.$$typeof){case i:case e:Se=!0;break;case v:return Se=M._init,H(Se(M._payload),ee,de,ve,se)}}if(Se)return se=se(M),Se=ve===""?"."+me(M,0):ve,re(se)?(de="",Se!=null&&(de=Se.replace(R,"$&/")+"/"),H(se,ee,de,"",function(Tt){return Tt})):se!=null&&(D(se)&&(se=k(se,de+(se.key==null||M&&M.key===se.key?"":(""+se.key).replace(R,"$&/")+"/")+Se)),ee.push(se)),1;Se=0;var nt=ve===""?".":ve+":";if(re(M))for(var Ye=0;Ye<M.length;Ye++)ve=M[Ye],be=nt+me(ve,Ye),Se+=H(ve,ee,de,be,se);else if(Ye=N(M),typeof Ye=="function")for(M=Ye.call(M),Ye=0;!(ve=M.next()).done;)ve=ve.value,be=nt+me(ve,Ye++),Se+=H(ve,ee,de,be,se);else if(be==="object"){if(typeof M.then=="function")return H(he(M),ee,de,ve,se);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Se}function le(M,ee,de){if(M==null)return M;var ve=[],se=0;return H(M,ve,"","",function(be){return ee.call(de,be,se++)}),ve}function _e(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ze={map:le,forEach:function(M,ee,de){le(M,function(){ee.apply(this,arguments)},de)},count:function(M){var ee=0;return le(M,function(){ee++}),ee},toArray:function(M){return le(M,function(ee){return ee})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Le.Activity=w,Le.Children=ze,Le.Component=B,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=Q,Le.StrictMode=r,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return S.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(M,ee,de){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ve=K({},M.props),se=M.key;if(ee!=null)for(be in ee.key!==void 0&&(se=""+ee.key),ee)!A.call(ee,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ee.ref===void 0||(ve[be]=ee[be]);var be=arguments.length-2;if(be===1)ve.children=de;else if(1<be){for(var Se=Array(be),nt=0;nt<be;nt++)Se[nt]=arguments[nt+2];ve.children=Se}return C(M.type,se,ve)},Le.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Le.createElement=function(M,ee,de){var ve,se={},be=null;if(ee!=null)for(ve in ee.key!==void 0&&(be=""+ee.key),ee)A.call(ee,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(se[ve]=ee[ve]);var Se=arguments.length-2;if(Se===1)se.children=de;else if(1<Se){for(var nt=Array(Se),Ye=0;Ye<Se;Ye++)nt[Ye]=arguments[Ye+2];se.children=nt}if(M&&M.defaultProps)for(ve in Se=M.defaultProps,Se)se[ve]===void 0&&(se[ve]=Se[ve]);return C(M,be,se)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:m,render:M}},Le.isValidElement=D,Le.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:_e}},Le.memo=function(M,ee){return{$$typeof:y,type:M,compare:ee===void 0?null:ee}},Le.startTransition=function(M){var ee=S.T,de={};S.T=de;try{var ve=M(),se=S.S;se!==null&&se(de,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(ue,Ve)}catch(be){Ve(be)}finally{ee!==null&&de.types!==null&&(ee.types=de.types),S.T=ee}},Le.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Le.use=function(M){return S.H.use(M)},Le.useActionState=function(M,ee,de){return S.H.useActionState(M,ee,de)},Le.useCallback=function(M,ee){return S.H.useCallback(M,ee)},Le.useContext=function(M){return S.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,ee){return S.H.useDeferredValue(M,ee)},Le.useEffect=function(M,ee){return S.H.useEffect(M,ee)},Le.useEffectEvent=function(M){return S.H.useEffectEvent(M)},Le.useId=function(){return S.H.useId()},Le.useImperativeHandle=function(M,ee,de){return S.H.useImperativeHandle(M,ee,de)},Le.useInsertionEffect=function(M,ee){return S.H.useInsertionEffect(M,ee)},Le.useLayoutEffect=function(M,ee){return S.H.useLayoutEffect(M,ee)},Le.useMemo=function(M,ee){return S.H.useMemo(M,ee)},Le.useOptimistic=function(M,ee){return S.H.useOptimistic(M,ee)},Le.useReducer=function(M,ee,de){return S.H.useReducer(M,ee,de)},Le.useRef=function(M){return S.H.useRef(M)},Le.useState=function(M){return S.H.useState(M)},Le.useSyncExternalStore=function(M,ee,de){return S.H.useSyncExternalStore(M,ee,de)},Le.useTransition=function(){return S.H.useTransition()},Le.version="19.2.4",Le}var Lv;function Jg(){return Lv||(Lv=1,Gp.exports=iI()),Gp.exports}var O=Jg();const aI=nI(O);var $p={exports:{}},Qc={},Kp={exports:{}},Yp={};var zv;function oI(){return zv||(zv=1,(function(i){function e(H,le){var _e=H.length;H.push(le);e:for(;0<_e;){var Ve=_e-1>>>1,ze=H[Ve];if(0<a(ze,le))H[Ve]=le,H[_e]=ze,_e=Ve;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var le=H[0],_e=H.pop();if(_e!==le){H[0]=_e;e:for(var Ve=0,ze=H.length,M=ze>>>1;Ve<M;){var ee=2*(Ve+1)-1,de=H[ee],ve=ee+1,se=H[ve];if(0>a(de,_e))ve<ze&&0>a(se,de)?(H[Ve]=se,H[ve]=_e,Ve=ve):(H[Ve]=de,H[ee]=_e,Ve=ee);else if(ve<ze&&0>a(se,_e))H[Ve]=se,H[ve]=_e,Ve=ve;else break e}}return le}function a(H,le){var _e=H.sortIndex-le.sortIndex;return _e!==0?_e:H.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var g=[],y=[],v=1,w=null,T=3,N=!1,P=!1,K=!1,U=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function oe(H){for(var le=t(y);le!==null;){if(le.callback===null)r(y);else if(le.startTime<=H)r(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(y)}}function re(H){if(K=!1,oe(H),!P)if(t(g)!==null)P=!0,ue||(ue=!0,L());else{var le=t(y);le!==null&&he(re,le.startTime-H)}}var ue=!1,S=-1,A=5,C=-1;function k(){return U?!0:!(i.unstable_now()-C<A)}function D(){if(U=!1,ue){var H=i.unstable_now();C=H;var le=!0;try{e:{P=!1,K&&(K=!1,Z(S),S=-1),N=!0;var _e=T;try{t:{for(oe(H),w=t(g);w!==null&&!(w.expirationTime>H&&k());){var Ve=w.callback;if(typeof Ve=="function"){w.callback=null,T=w.priorityLevel;var ze=Ve(w.expirationTime<=H);if(H=i.unstable_now(),typeof ze=="function"){w.callback=ze,oe(H),le=!0;break t}w===t(g)&&r(g),oe(H)}else r(g);w=t(g)}if(w!==null)le=!0;else{var M=t(y);M!==null&&he(re,M.startTime-H),le=!1}}break e}finally{w=null,T=_e,N=!1}le=void 0}}finally{le?L():ue=!1}}}var L;if(typeof Q=="function")L=function(){Q(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,me=R.port2;R.port1.onmessage=D,L=function(){me.postMessage(null)}}else L=function(){B(D,0)};function he(H,le){S=B(function(){H(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(H){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var _e=T;T=le;try{return H()}finally{T=_e}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(H,le){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var _e=T;T=H;try{return le()}finally{T=_e}},i.unstable_scheduleCallback=function(H,le,_e){var Ve=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ve+_e:Ve):_e=Ve,H){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=_e+ze,H={id:v++,callback:le,priorityLevel:H,startTime:_e,expirationTime:ze,sortIndex:-1},_e>Ve?(H.sortIndex=_e,e(y,H),t(g)===null&&H===t(y)&&(K?(Z(S),S=-1):K=!0,he(re,_e-Ve))):(H.sortIndex=ze,e(g,H),P||N||(P=!0,ue||(ue=!0,L()))),H},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(H){var le=T;return function(){var _e=T;T=le;try{return H.apply(this,arguments)}finally{T=_e}}}})(Yp)),Yp}var Uv;function lI(){return Uv||(Uv=1,Kp.exports=oI()),Kp.exports}var Qp={exports:{}},jn={};var Bv;function cI(){if(Bv)return jn;Bv=1;var i=Jg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:y,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},jn.flushSync=function(g){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=v,r.d.f()}},jn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},jn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},jn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,w=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:N}):v==="script"&&r.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},jn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},jn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=m(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},jn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},jn.requestFormReset=function(g){r.d.r(g)},jn.unstable_batchedUpdates=function(g,y){return g(y)},jn.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.2.4",jn}var Fv;function uI(){if(Fv)return Qp.exports;Fv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qp.exports=cI(),Qp.exports}var qv;function dI(){if(qv)return Qc;qv=1;var i=lI(),e=Jg(),t=uI();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return g(h),n;if(p===c)return g(h),s;p=p.sibling}throw Error(r(188))}if(o.return!==c.return)o=h,c=p;else{for(var _=!1,E=h.child;E;){if(E===o){_=!0,o=h,c=p;break}if(E===c){_=!0,c=h,o=p;break}E=E.sibling}if(!_){for(E=p.child;E;){if(E===o){_=!0,o=p,c=h;break}if(E===c){_=!0,c=p,o=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case B:return"Profiler";case U:return"StrictMode";case re:return"Suspense";case ue:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case Q:return n.displayName||"Context";case Z:return(n._context.displayName||"Context")+".Consumer";case oe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return s=n.displayName||null,s!==null?s:me(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return me(n(s))}catch{}}return null}var he=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ve=[],ze=-1;function M(n){return{current:n}}function ee(n){0>ze||(n.current=Ve[ze],Ve[ze]=null,ze--)}function de(n,s){ze++,Ve[ze]=n.current,n.current=s}var ve=M(null),se=M(null),be=M(null),Se=M(null);function nt(n,s){switch(de(be,s),de(se,n),de(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?sv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=sv(s),n=iv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(ve),de(ve,n)}function Ye(){ee(ve),ee(se),ee(be)}function Tt(n){n.memoizedState!==null&&de(Se,n);var s=ve.current,o=iv(s,n.type);s!==o&&(de(se,n),de(ve,o))}function Ar(n){se.current===n&&(ee(ve),ee(se)),Se.current===n&&(ee(Se),Hc._currentValue=_e)}var Qn,Ir;function un(n){if(Qn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Qn=s&&s[1]||"",Ir=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qn+n+Ir}var qr=!1;function Hr(n,s){if(!n||qr)return"";qr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var Y=W}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(W){Y=W}n.call(ae.prototype)}}else{try{throw Error()}catch(W){Y=W}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),_=p[0],E=p[1];if(_&&E){var j=_.split(`
`),$=E.split(`
`);for(h=c=0;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(c===j.length||h===$.length)for(c=j.length-1,h=$.length-1;1<=c&&0<=h&&j[c]!==$[h];)h--;for(;1<=c&&0<=h;c--,h--)if(j[c]!==$[h]){if(c!==1||h!==1)do if(c--,h--,0>h||j[c]!==$[h]){var te=`
`+j[c].replace(" at new "," at ");return n.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",n.displayName)),te}while(1<=c&&0<=h);break}}}finally{qr=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?un(o):""}function Rs(n,s){switch(n.tag){case 26:case 27:case 5:return un(n.type);case 16:return un("Lazy");case 13:return n.child!==s&&s!==null?un("Suspense Fallback"):un("Suspense");case 19:return un("SuspenseList");case 0:case 15:return Hr(n.type,!1);case 11:return Hr(n.type.render,!1);case 1:return Hr(n.type,!0);case 31:return un("Activity");default:return""}}function Xn(n){try{var s="",o=null;do s+=Rs(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,Nt=i.unstable_scheduleCallback,vn=i.unstable_cancelCallback,Ao=i.unstable_shouldYield,Ds=i.unstable_requestPaint,pn=i.unstable_now,He=i.unstable_getCurrentPriorityLevel,gi=i.unstable_ImmediatePriority,Ms=i.unstable_UserBlockingPriority,ur=i.unstable_NormalPriority,xa=i.unstable_LowPriority,Nr=i.unstable_IdlePriority,os=i.log,wa=i.unstable_setDisableYieldValue,Wn=null,Wt=null;function xn(n){if(typeof os=="function"&&wa(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Wn,n)}catch{}}var Dt=Math.clz32?Math.clz32:Gr,ks=Math.log,ls=Math.LN2;function Gr(n){return n>>>=0,n===0?32:31-(ks(n)/ls|0)|0}var wn=256,dr=262144,Lt=4194304;function Bn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Fn(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var h=0,p=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~p,c!==0?h=Bn(c):(_&=E,_!==0?h=Bn(_):o||(o=E&~n,o!==0&&(h=Bn(o))))):(E=c&~p,E!==0?h=Bn(E):_!==0?h=Bn(_):o||(o=c&~n,o!==0&&(h=Bn(o)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:h}function Tn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function js(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var n=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),n}function Mn(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Jn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ta(n,s,o,c,h,p){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,j=n.expirationTimes,$=n.hiddenUpdates;for(o=_&~o;0<o;){var te=31-Dt(o),ae=1<<te;E[te]=0,j[te]=-1;var Y=$[te];if(Y!==null)for($[te]=null,te=0;te<Y.length;te++){var W=Y[te];W!==null&&(W.lane&=-536870913)}o&=~ae}c!==0&&$r(n,c,0),p!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=p&~(_&~s))}function $r(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Dt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Os(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Dt(o),h=1<<c;h&s|n[c]&s&&(n[c]|=s),o&=~h}}function Vs(n,s){var o=s&-s;return o=(o&42)!==0?1:Kr(o),(o&(n.suspendedLanes|s))!==0?0:o}function Kr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function hr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function qn(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:Nv(n.type))}function Mt(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var Hn=Math.random().toString(36).slice(2),zt="__reactFiber$"+Hn,Gt="__reactProps$"+Hn,Zn="__reactContainer$"+Hn,cs="__reactEvents$"+Hn,Ee="__reactListeners$"+Hn,Fe="__reactHandles$"+Hn,Et="__reactResources$"+Hn,et="__reactMarker$"+Hn;function Cr(n){delete n[zt],delete n[Gt],delete n[cs],delete n[Ee],delete n[Fe]}function kn(n){var s=n[zt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Zn]||o[zt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=hv(n);n!==null;){if(o=n[zt])return o;n=hv(n)}return s}n=o,o=n.parentNode}return null}function St(n){if(n=n[zt]||n[Zn]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ie(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function xe(n){var s=n[Et];return s||(s=n[Et]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ge(n){n[et]=!0}var Oe=new Set,ht={};function rt(n,s){kt(n,s),kt(n+"Capture",s)}function kt(n,s){for(ht[n]=s,n=0;n<s.length;n++)Oe.add(s[n])}var En=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Me={},$t={};function Sn(n){return Rt.call($t,n)?!0:Rt.call(Me,n)?!1:En.test(n)?$t[n]=!0:(Me[n]=!0,!1)}function lt(n,s,o){if(Sn(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function st(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function At(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function jt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nc(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,p=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,p.call(this,_)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ft(n){if(!n._valueTracker){var s=bi(n)?"checked":"value";n._valueTracker=nc(n,s,""+n[s])}}function Ea(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=bi(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function us(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Sa=/[\n"\\]/g;function er(n){return n.replace(Sa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Io(n,s,o,c,h,p,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+jt(s)):n.value!==""+jt(s)&&(n.value=""+jt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?rc(n,_,jt(s)):o!=null?rc(n,_,jt(o)):c!=null&&n.removeAttribute("value"),h==null&&p!=null&&(n.defaultChecked=!!p),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+jt(E):n.removeAttribute("name")}function rd(n,s,o,c,h,p,_,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){ft(n);return}o=o!=null?""+jt(o):"",s=s!=null?""+jt(s):o,E||s===n.value||(n.value=s),n.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),ft(n)}function rc(n,s,o){s==="number"&&us(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function _i(n,s,o,c){if(n=n.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=s.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&c&&(n[o].defaultSelected=!0)}else{for(o=""+jt(o),s=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function sd(n,s,o){if(s!=null&&(s=""+jt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+jt(o):""}function vi(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(he(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=jt(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ft(n)}function tr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||id.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function ic(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&sc(n,h,c)}else for(var p in s)s.hasOwnProperty(p)&&sc(n,p,s[p])}function No(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Co(n){return xi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Yr(){}var ac=null;function Rr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wi=null,ds=null;function Aa(n){var s=St(n);if(s&&(n=s.stateNode)){var o=n[Gt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Io(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+er(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var h=c[Gt]||null;if(!h)throw Error(r(90));Io(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Ea(c)}break e;case"textarea":sd(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&_i(n,!!o.multiple,s,!1)}}}var Ro=!1;function Ti(n,s,o){if(Ro)return n(s,o);Ro=!0;try{var c=n(s);return c}finally{if(Ro=!1,(wi!==null||ds!==null)&&(Zd(),wi&&(s=wi,n=ds,ds=wi=null,Aa(s),n)))for(s=0;s<n.length;s++)Aa(n[s])}}function Qr(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Gt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ia=!1;if(Dr)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Ia=!1}var hs=null,oc=null,Na=null;function lc(){if(Na)return Na;var n,s=oc,o=s.length,c,h="value"in hs?hs.value:hs.textContent,p=h.length;for(n=0;n<o&&s[n]===h[n];n++);var _=o-n;for(c=1;c<=_&&s[o-c]===h[p-c];c++);return Na=h.slice(n,1<c?1-c:void 0)}function Ca(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ps(){return!0}function Xr(){return!1}function An(n){function s(o,c,h,p,_){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ps:Xr,this.isPropagationStopped=Xr,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),s}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=An(Ls),Ei=w({},Ls,{view:0,detail:0}),cc=An(Ei),Si,Do,ms,Mo=w({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ai,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(Si=n.screenX-ms.screenX,Do=n.screenY-ms.screenY):Do=Si=0,ms=n),Si)},movementY:function(n){return"movementY"in n?n.movementY:Do}}),uc=An(Mo),Ra=w({},Mo,{dataTransfer:0}),od=An(Ra),ld=w({},Ei,{relatedTarget:0}),Da=An(ld),dc=w({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),cd=An(dc),ko=w({},Ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ud=An(ko),dd=w({},Ls,{data:0}),ps=An(dd),hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pd(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=md[n])?!!s[n]:!1}function Ai(){return pd}var Gn=w({},Ei,{key:function(n){if(n.key){var s=hd[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ca(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ai,charCode:function(n){return n.type==="keypress"?Ca(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ca(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gd=An(Gn),yd=w({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zs=An(yd),d=w({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ai}),b=An(d),x=w({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=An(x),q=w({},Mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X=An(q),pe=w({},Ls,{newState:0,oldState:0}),Ue=An(pe),Jt=[9,13,27,32],ct=Dr&&"CompositionEvent"in window,Ut=null;Dr&&"documentMode"in document&&(Ut=document.documentMode);var Mr=Dr&&"TextEvent"in window&&!Ut,gs=Dr&&(!ct||Ut&&8<Ut&&11>=Ut),Wr=" ",Jr=!1;function Ma(n,s){switch(n){case"keyup":return Jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Oo=!1;function AS(n,s){switch(n){case"compositionend":return jo(s);case"keypress":return s.which!==32?null:(Jr=!0,Wr);case"textInput":return n=s.data,n===Wr&&Jr?null:n;default:return null}}function IS(n,s){if(Oo)return n==="compositionend"||!ct&&Ma(n,s)?(n=lc(),Na=oc=hs=null,Oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!NS[n.type]:s==="textarea"}function gy(n,s,o,c){wi?ds?ds.push(c):ds=[c]:wi=c,s=ah(s,"onChange"),0<s.length&&(o=new fs("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var hc=null,fc=null;function CS(n){J_(n,0)}function bd(n){var s=ie(n);if(Ea(s))return n}function yy(n,s){if(n==="change")return s}var by=!1;if(Dr){var Wf;if(Dr){var Jf="oninput"in document;if(!Jf){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),Jf=typeof _y.oninput=="function"}Wf=Jf}else Wf=!1;by=Wf&&(!document.documentMode||9<document.documentMode)}function vy(){hc&&(hc.detachEvent("onpropertychange",xy),fc=hc=null)}function xy(n){if(n.propertyName==="value"&&bd(fc)){var s=[];gy(s,fc,n,Rr(n)),Ti(CS,s)}}function RS(n,s,o){n==="focusin"?(vy(),hc=s,fc=o,hc.attachEvent("onpropertychange",xy)):n==="focusout"&&vy()}function DS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return bd(fc)}function MS(n,s){if(n==="click")return bd(s)}function kS(n,s){if(n==="input"||n==="change")return bd(s)}function jS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fr=typeof Object.is=="function"?Object.is:jS;function mc(n,s){if(fr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Rt.call(s,h)||!fr(n[h],s[h]))return!1}return!0}function wy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ty(n,s){var o=wy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wy(o)}}function Ey(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ey(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Sy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=us(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=us(n.document)}return s}function Zf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var OS=Dr&&"documentMode"in document&&11>=document.documentMode,Vo=null,em=null,pc=null,tm=!1;function Ay(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;tm||Vo==null||Vo!==us(c)||(c=Vo,"selectionStart"in c&&Zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pc&&mc(pc,c)||(pc=c,c=ah(em,"onSelect"),0<c.length&&(s=new fs("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Vo)))}function ka(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Po={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},nm={},Iy={};Dr&&(Iy=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function ja(n){if(nm[n])return nm[n];if(!Po[n])return n;var s=Po[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Iy)return nm[n]=s[o];return n}var Ny=ja("animationend"),Cy=ja("animationiteration"),Ry=ja("animationstart"),VS=ja("transitionrun"),PS=ja("transitionstart"),LS=ja("transitioncancel"),Dy=ja("transitionend"),My=new Map,rm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rm.push("scrollEnd");function Zr(n,s){My.set(n,s),rt(s,[n])}var _d=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},kr=[],Lo=0,sm=0;function vd(){for(var n=Lo,s=sm=Lo=0;s<n;){var o=kr[s];kr[s++]=null;var c=kr[s];kr[s++]=null;var h=kr[s];kr[s++]=null;var p=kr[s];if(kr[s++]=null,c!==null&&h!==null){var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}p!==0&&ky(o,h,p)}}function xd(n,s,o,c){kr[Lo++]=n,kr[Lo++]=s,kr[Lo++]=o,kr[Lo++]=c,sm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function im(n,s,o,c){return xd(n,s,o,c),wd(n)}function Oa(n,s){return xd(n,null,null,s),wd(n)}function ky(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var h=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(h=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,h&&s!==null&&(h=31-Dt(o),n=p.hiddenUpdates,c=n[h],c===null?n[h]=[s]:c.push(s),s.lane=o|536870912),p):null}function wd(n){if(50<Pc)throw Pc=0,mp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var zo={};function zS(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(n,s,o,c){return new zS(n,s,o,c)}function am(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Us(n,s){var o=n.alternate;return o===null?(o=mr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function jy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Td(n,s,o,c,h,p){var _=0;if(c=n,typeof n=="function")am(n)&&(_=1);else if(typeof n=="string")_=HA(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=mr(31,o,s,h),n.elementType=C,n.lanes=p,n;case K:return Va(o.children,h,p,s);case U:_=8,h|=24;break;case B:return n=mr(12,o,s,h|2),n.elementType=B,n.lanes=p,n;case re:return n=mr(13,o,s,h),n.elementType=re,n.lanes=p,n;case ue:return n=mr(19,o,s,h),n.elementType=ue,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case Z:_=9;break e;case oe:_=11;break e;case S:_=14;break e;case A:_=16,c=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=mr(_,o,s,h),s.elementType=n,s.type=c,s.lanes=p,s}function Va(n,s,o,c){return n=mr(7,n,c,s),n.lanes=o,n}function om(n,s,o){return n=mr(6,n,null,s),n.lanes=o,n}function Oy(n){var s=mr(18,null,null,0);return s.stateNode=n,s}function lm(n,s,o){return s=mr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Vy=new WeakMap;function jr(n,s){if(typeof n=="object"&&n!==null){var o=Vy.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Xn(s)},Vy.set(n,s),s)}return{value:n,source:s,stack:Xn(s)}}var Uo=[],Bo=0,Ed=null,gc=0,Or=[],Vr=0,Ii=null,ys=1,bs="";function Bs(n,s){Uo[Bo++]=gc,Uo[Bo++]=Ed,Ed=n,gc=s}function Py(n,s,o){Or[Vr++]=ys,Or[Vr++]=bs,Or[Vr++]=Ii,Ii=n;var c=ys;n=bs;var h=32-Dt(c)-1;c&=~(1<<h),o+=1;var p=32-Dt(s)+h;if(30<p){var _=h-h%5;p=(c&(1<<_)-1).toString(32),c>>=_,h-=_,ys=1<<32-Dt(s)+h|o<<h|c,bs=p+n}else ys=1<<p|o<<h|c,bs=n}function cm(n){n.return!==null&&(Bs(n,1),Py(n,1,0))}function um(n){for(;n===Ed;)Ed=Uo[--Bo],Uo[Bo]=null,gc=Uo[--Bo],Uo[Bo]=null;for(;n===Ii;)Ii=Or[--Vr],Or[Vr]=null,bs=Or[--Vr],Or[Vr]=null,ys=Or[--Vr],Or[Vr]=null}function Ly(n,s){Or[Vr++]=ys,Or[Vr++]=bs,Or[Vr++]=Ii,ys=s.id,bs=s.overflow,Ii=n}var In=null,Ot=null,Ze=!1,Ni=null,Pr=!1,dm=Error(r(519));function Ci(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yc(jr(s,n)),dm}function zy(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[zt]=n,s[Gt]=c,o){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(o=0;o<zc.length;o++)Ke(zc[o],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),rd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),vi(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||nv(s.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),c.onScroll!=null&&Ke("scroll",s),c.onScrollEnd!=null&&Ke("scrollend",s),c.onClick!=null&&(s.onclick=Yr),s=!0):s=!1,s||Ci(n,!0)}function Uy(n){for(In=n.return;In;)switch(In.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:In=In.return}}function Fo(n){if(n!==In)return!1;if(!Ze)return Uy(n),Ze=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Cp(n.type,n.memoizedProps)),o=!o),o&&Ot&&Ci(n),Uy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ot=dv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ot=dv(n)}else s===27?(s=Ot,qi(n.type)?(n=jp,jp=null,Ot=n):Ot=s):Ot=In?zr(n.stateNode.nextSibling):null;return!0}function Pa(){Ot=In=null,Ze=!1}function hm(){var n=Ni;return n!==null&&(ir===null?ir=n:ir.push.apply(ir,n),Ni=null),n}function yc(n){Ni===null?Ni=[n]:Ni.push(n)}var fm=M(null),La=null,Fs=null;function Ri(n,s,o){de(fm,s._currentValue),s._currentValue=o}function qs(n){n._currentValue=fm.current,ee(fm)}function mm(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function pm(n,s,o,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var p=h.dependencies;if(p!==null){var _=h.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=h;for(var j=0;j<s.length;j++)if(E.context===s[j]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),mm(p.return,o,n),c||(_=null);break e}p=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=o,p=_.alternate,p!==null&&(p.lanes|=o),mm(_,o,n),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===n){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function qo(n,s,o,c){n=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;fr(h.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(h===Se.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Hc):n=[Hc])}h=h.return}n!==null&&pm(s,n,o,c),s.flags|=262144}function Sd(n){for(n=n.firstContext;n!==null;){if(!fr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function za(n){La=n,Fs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Nn(n){return By(La,n)}function Ad(n,s){return La===null&&za(n),By(n,s)}function By(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Fs===null){if(n===null)throw Error(r(308));Fs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Fs=Fs.next=s;return o}var US=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},BS=i.unstable_scheduleCallback,FS=i.unstable_NormalPriority,rn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new US,data:new Map,refCount:0}}function bc(n){n.refCount--,n.refCount===0&&BS(FS,function(){n.controller.abort()})}var _c=null,ym=0,Ho=0,Go=null;function qS(n,s){if(_c===null){var o=_c=[];ym=0,Ho=vp(),Go={status:"pending",value:void 0,then:function(c){o.push(c)}}}return ym++,s.then(Fy,Fy),s}function Fy(){if(--ym===0&&_c!==null){Go!==null&&(Go.status="fulfilled");var n=_c;_c=null,Ho=0,Go=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function HS(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var qy=H.S;H.S=function(n,s){A_=pn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qS(n,s),qy!==null&&qy(n,s)};var Ua=M(null);function bm(){var n=Ua.current;return n!==null?n:It.pooledCache}function Id(n,s){s===null?de(Ua,Ua.current):de(Ua,s.pool)}function Hy(){var n=bm();return n===null?null:{parent:rn._currentValue,pool:n}}var $o=Error(r(460)),_m=Error(r(474)),Nd=Error(r(542)),Cd={then:function(){}};function Gy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function $y(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Yr,Yr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yy(n),n;default:if(typeof s.status=="string")s.then(Yr,Yr);else{if(n=It,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yy(n),n}throw Fa=s,$o}}function Ba(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fa=o,$o):o}}var Fa=null;function Ky(){if(Fa===null)throw Error(r(459));var n=Fa;return Fa=null,n}function Yy(n){if(n===$o||n===Nd)throw Error(r(483))}var Ko=null,vc=0;function Rd(n){var s=vc;return vc+=1,Ko===null&&(Ko=[]),$y(Ko,n,s)}function xc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Dd(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Qy(n){function s(z,V){if(n){var G=z.deletions;G===null?(z.deletions=[V],z.flags|=16):G.push(V)}}function o(z,V){if(!n)return null;for(;V!==null;)s(z,V),V=V.sibling;return null}function c(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function h(z,V){return z=Us(z,V),z.index=0,z.sibling=null,z}function p(z,V,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<V?(z.flags|=67108866,V):G):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function E(z,V,G,ne){return V===null||V.tag!==6?(V=om(G,z.mode,ne),V.return=z,V):(V=h(V,G),V.return=z,V)}function j(z,V,G,ne){var Re=G.type;return Re===K?te(z,V,G.props.children,ne,G.key):V!==null&&(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Ba(Re)===V.type)?(V=h(V,G.props),xc(V,G),V.return=z,V):(V=Td(G.type,G.key,G.props,null,z.mode,ne),xc(V,G),V.return=z,V)}function $(z,V,G,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=lm(G,z.mode,ne),V.return=z,V):(V=h(V,G.children||[]),V.return=z,V)}function te(z,V,G,ne,Re){return V===null||V.tag!==7?(V=Va(G,z.mode,ne,Re),V.return=z,V):(V=h(V,G),V.return=z,V)}function ae(z,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=om(""+V,z.mode,G),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case N:return G=Td(V.type,V.key,V.props,null,z.mode,G),xc(G,V),G.return=z,G;case P:return V=lm(V,z.mode,G),V.return=z,V;case A:return V=Ba(V),ae(z,V,G)}if(he(V)||L(V))return V=Va(V,z.mode,G,null),V.return=z,V;if(typeof V.then=="function")return ae(z,Rd(V),G);if(V.$$typeof===Q)return ae(z,Ad(z,V),G);Dd(z,V)}return null}function Y(z,V,G,ne){var Re=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:E(z,V,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return G.key===Re?j(z,V,G,ne):null;case P:return G.key===Re?$(z,V,G,ne):null;case A:return G=Ba(G),Y(z,V,G,ne)}if(he(G)||L(G))return Re!==null?null:te(z,V,G,ne,null);if(typeof G.then=="function")return Y(z,V,Rd(G),ne);if(G.$$typeof===Q)return Y(z,V,Ad(z,G),ne);Dd(z,G)}return null}function W(z,V,G,ne,Re){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(G)||null,E(V,z,""+ne,Re);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return z=z.get(ne.key===null?G:ne.key)||null,j(V,z,ne,Re);case P:return z=z.get(ne.key===null?G:ne.key)||null,$(V,z,ne,Re);case A:return ne=Ba(ne),W(z,V,G,ne,Re)}if(he(ne)||L(ne))return z=z.get(G)||null,te(V,z,ne,Re,null);if(typeof ne.then=="function")return W(z,V,G,Rd(ne),Re);if(ne.$$typeof===Q)return W(z,V,G,Ad(V,ne),Re);Dd(V,ne)}return null}function Te(z,V,G,ne){for(var Re=null,at=null,Ie=V,qe=V=0,Xe=null;Ie!==null&&qe<G.length;qe++){Ie.index>qe?(Xe=Ie,Ie=null):Xe=Ie.sibling;var ot=Y(z,Ie,G[qe],ne);if(ot===null){Ie===null&&(Ie=Xe);break}n&&Ie&&ot.alternate===null&&s(z,Ie),V=p(ot,V,qe),at===null?Re=ot:at.sibling=ot,at=ot,Ie=Xe}if(qe===G.length)return o(z,Ie),Ze&&Bs(z,qe),Re;if(Ie===null){for(;qe<G.length;qe++)Ie=ae(z,G[qe],ne),Ie!==null&&(V=p(Ie,V,qe),at===null?Re=Ie:at.sibling=Ie,at=Ie);return Ze&&Bs(z,qe),Re}for(Ie=c(Ie);qe<G.length;qe++)Xe=W(Ie,z,qe,G[qe],ne),Xe!==null&&(n&&Xe.alternate!==null&&Ie.delete(Xe.key===null?qe:Xe.key),V=p(Xe,V,qe),at===null?Re=Xe:at.sibling=Xe,at=Xe);return n&&Ie.forEach(function(Yi){return s(z,Yi)}),Ze&&Bs(z,qe),Re}function ke(z,V,G,ne){if(G==null)throw Error(r(151));for(var Re=null,at=null,Ie=V,qe=V=0,Xe=null,ot=G.next();Ie!==null&&!ot.done;qe++,ot=G.next()){Ie.index>qe?(Xe=Ie,Ie=null):Xe=Ie.sibling;var Yi=Y(z,Ie,ot.value,ne);if(Yi===null){Ie===null&&(Ie=Xe);break}n&&Ie&&Yi.alternate===null&&s(z,Ie),V=p(Yi,V,qe),at===null?Re=Yi:at.sibling=Yi,at=Yi,Ie=Xe}if(ot.done)return o(z,Ie),Ze&&Bs(z,qe),Re;if(Ie===null){for(;!ot.done;qe++,ot=G.next())ot=ae(z,ot.value,ne),ot!==null&&(V=p(ot,V,qe),at===null?Re=ot:at.sibling=ot,at=ot);return Ze&&Bs(z,qe),Re}for(Ie=c(Ie);!ot.done;qe++,ot=G.next())ot=W(Ie,z,qe,ot.value,ne),ot!==null&&(n&&ot.alternate!==null&&Ie.delete(ot.key===null?qe:ot.key),V=p(ot,V,qe),at===null?Re=ot:at.sibling=ot,at=ot);return n&&Ie.forEach(function(tI){return s(z,tI)}),Ze&&Bs(z,qe),Re}function wt(z,V,G,ne){if(typeof G=="object"&&G!==null&&G.type===K&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N:e:{for(var Re=G.key;V!==null;){if(V.key===Re){if(Re=G.type,Re===K){if(V.tag===7){o(z,V.sibling),ne=h(V,G.props.children),ne.return=z,z=ne;break e}}else if(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Ba(Re)===V.type){o(z,V.sibling),ne=h(V,G.props),xc(ne,G),ne.return=z,z=ne;break e}o(z,V);break}else s(z,V);V=V.sibling}G.type===K?(ne=Va(G.props.children,z.mode,ne,G.key),ne.return=z,z=ne):(ne=Td(G.type,G.key,G.props,null,z.mode,ne),xc(ne,G),ne.return=z,z=ne)}return _(z);case P:e:{for(Re=G.key;V!==null;){if(V.key===Re)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){o(z,V.sibling),ne=h(V,G.children||[]),ne.return=z,z=ne;break e}else{o(z,V);break}else s(z,V);V=V.sibling}ne=lm(G,z.mode,ne),ne.return=z,z=ne}return _(z);case A:return G=Ba(G),wt(z,V,G,ne)}if(he(G))return Te(z,V,G,ne);if(L(G)){if(Re=L(G),typeof Re!="function")throw Error(r(150));return G=Re.call(G),ke(z,V,G,ne)}if(typeof G.then=="function")return wt(z,V,Rd(G),ne);if(G.$$typeof===Q)return wt(z,V,Ad(z,G),ne);Dd(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(o(z,V.sibling),ne=h(V,G),ne.return=z,z=ne):(o(z,V),ne=om(G,z.mode,ne),ne.return=z,z=ne),_(z)):o(z,V)}return function(z,V,G,ne){try{vc=0;var Re=wt(z,V,G,ne);return Ko=null,Re}catch(Ie){if(Ie===$o||Ie===Nd)throw Ie;var at=mr(29,Ie,null,z.mode);return at.lanes=ne,at.return=z,at}}}var qa=Qy(!0),Xy=Qy(!1),Di=!1;function vm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Mi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ki(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ut&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=wd(n),ky(n,null,o),s}return xd(n,c,s,o),wd(n)}function wc(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Os(n,o)}}function wm(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=s:p=p.next=s}else h=p=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Tm=!1;function Tc(){if(Tm){var n=Go;if(n!==null)throw n}}function Ec(n,s,o,c){Tm=!1;var h=n.updateQueue;Di=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var j=E,$=j.next;j.next=null,_===null?p=$:_.next=$,_=j;var te=n.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==_&&(E===null?te.firstBaseUpdate=$:E.next=$,te.lastBaseUpdate=j))}if(p!==null){var ae=h.baseState;_=0,te=$=j=null,E=p;do{var Y=E.lane&-536870913,W=Y!==E.lane;if(W?(Qe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Ho&&(Tm=!0),te!==null&&(te=te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=n,ke=E;Y=s;var wt=o;switch(ke.tag){case 1:if(Te=ke.payload,typeof Te=="function"){ae=Te.call(wt,ae,Y);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ke.payload,Y=typeof Te=="function"?Te.call(wt,ae,Y):Te,Y==null)break e;ae=w({},ae,Y);break e;case 2:Di=!0}}Y=E.callback,Y!==null&&(n.flags|=64,W&&(n.flags|=8192),W=h.callbacks,W===null?h.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?($=te=W,j=ae):te=te.next=W,_|=Y;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;W=E,E=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);te===null&&(j=ae),h.baseState=j,h.firstBaseUpdate=$,h.lastBaseUpdate=te,p===null&&(h.shared.lanes=0),Li|=_,n.lanes=_,n.memoizedState=ae}}function Wy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Jy(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Wy(o[n],s)}var Yo=M(null),Md=M(0);function Zy(n,s){n=Js,de(Md,n),de(Yo,s),Js=n|s.baseLanes}function Em(){de(Md,Js),de(Yo,Yo.current)}function Sm(){Js=Md.current,ee(Yo),ee(Md)}var pr=M(null),Lr=null;function ji(n){var s=n.alternate;de(Zt,Zt.current&1),de(pr,n),Lr===null&&(s===null||Yo.current!==null||s.memoizedState!==null)&&(Lr=n)}function Am(n){de(Zt,Zt.current),de(pr,n),Lr===null&&(Lr=n)}function eb(n){n.tag===22?(de(Zt,Zt.current),de(pr,n),Lr===null&&(Lr=n)):Oi()}function Oi(){de(Zt,Zt.current),de(pr,pr.current)}function gr(n){ee(pr),Lr===n&&(Lr=null),ee(Zt)}var Zt=M(0);function kd(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Mp(o)||kp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hs=0,Be=null,vt=null,sn=null,jd=!1,Qo=!1,Ha=!1,Od=0,Sc=0,Xo=null,GS=0;function Kt(){throw Error(r(321))}function Im(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!fr(n[o],s[o]))return!1;return!0}function Nm(n,s,o,c,h,p){return Hs=p,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?Pb:qm,Ha=!1,p=o(c,h),Ha=!1,Qo&&(p=nb(s,o,c,h)),tb(n),p}function tb(n){H.H=Nc;var s=vt!==null&&vt.next!==null;if(Hs=0,sn=vt=Be=null,jd=!1,Sc=0,Xo=null,s)throw Error(r(300));n===null||an||(n=n.dependencies,n!==null&&Sd(n)&&(an=!0))}function nb(n,s,o,c){Be=n;var h=0;do{if(Qo&&(Xo=null),Sc=0,Qo=!1,25<=h)throw Error(r(301));if(h+=1,sn=vt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=Lb,p=s(o,c)}while(Qo);return p}function $S(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?Ac(s):s,n=n.useState()[0],(vt!==null?vt.memoizedState:null)!==n&&(Be.flags|=1024),s}function Cm(){var n=Od!==0;return Od=0,n}function Rm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Dm(n){if(jd){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}jd=!1}Hs=0,sn=vt=Be=null,Qo=!1,Sc=Od=0,Xo=null}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Be.memoizedState=sn=n:sn=sn.next=n,sn}function en(){if(vt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=sn===null?Be.memoizedState:sn.next;if(s!==null)sn=s,vt=n;else{if(n===null)throw Be.alternate===null?Error(r(467)):Error(r(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},sn===null?Be.memoizedState=sn=n:sn=sn.next=n}return sn}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(n){var s=Sc;return Sc+=1,Xo===null&&(Xo=[]),n=$y(Xo,n,s),s=Be,(sn===null?s.memoizedState:sn.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Pb:qm),n}function Pd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ac(n);if(n.$$typeof===Q)return Nn(n)}throw Error(r(438,String(n)))}function Mm(n){var s=null,o=Be.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Vd(),Be.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=k;return s.index++,o}function Gs(n,s){return typeof s=="function"?s(n):s}function Ld(n){var s=en();return km(s,vt,n)}function km(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var h=n.baseQueue,p=c.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}s.baseQueue=h=p,c.pending=null}if(p=n.baseState,h===null)n.memoizedState=p;else{s=h.next;var E=_=null,j=null,$=s,te=!1;do{var ae=$.lane&-536870913;if(ae!==$.lane?(Qe&ae)===ae:(Hs&ae)===ae){var Y=$.revertLane;if(Y===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ae===Ho&&(te=!0);else if((Hs&Y)===Y){$=$.next,Y===Ho&&(te=!0);continue}else ae={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(E=j=ae,_=p):j=j.next=ae,Be.lanes|=Y,Li|=Y;ae=$.action,Ha&&o(p,ae),p=$.hasEagerState?$.eagerState:o(p,ae)}else Y={lane:ae,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(E=j=Y,_=p):j=j.next=Y,Be.lanes|=ae,Li|=ae;$=$.next}while($!==null&&$!==s);if(j===null?_=p:j.next=E,!fr(p,n.memoizedState)&&(an=!0,te&&(o=Go,o!==null)))throw o;n.memoizedState=p,n.baseState=_,n.baseQueue=j,c.lastRenderedState=p}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function jm(n){var s=en(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,h=o.pending,p=s.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=n(p,_.action),_=_.next;while(_!==h);fr(p,s.memoizedState)||(an=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,c]}function rb(n,s,o){var c=Be,h=en(),p=Ze;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var _=!fr((vt||h).memoizedState,o);if(_&&(h.memoizedState=o,an=!0),h=h.queue,Pm(ab.bind(null,c,h,n),[n]),h.getSnapshot!==s||_||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Wo(9,{destroy:void 0},ib.bind(null,c,h,o,s),null),It===null)throw Error(r(349));p||(Hs&127)!==0||sb(c,s,o)}return o}function sb(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Be.updateQueue,s===null?(s=Vd(),Be.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function ib(n,s,o,c){s.value=o,s.getSnapshot=c,ob(s)&&lb(n)}function ab(n,s,o){return o(function(){ob(s)&&lb(n)})}function ob(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!fr(n,o)}catch{return!0}}function lb(n){var s=Oa(n,2);s!==null&&ar(s,n,2)}function Om(n){var s=$n();if(typeof n=="function"){var o=n;if(n=o(),Ha){xn(!0);try{o()}finally{xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:n},s}function cb(n,s,o,c){return n.baseState=o,km(n,vt,typeof c=="function"?c:Gs)}function KS(n,s,o,c,h){if(Bd(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};H.T!==null?o(!0):p.isTransition=!1,c(p),o=s.pending,o===null?(p.next=s.pending=p,ub(s,p)):(p.next=o.next,s.pending=o.next=p)}}function ub(n,s){var o=s.action,c=s.payload,h=n.state;if(s.isTransition){var p=H.T,_={};H.T=_;try{var E=o(h,c),j=H.S;j!==null&&j(_,E),db(n,s,E)}catch($){Vm(n,s,$)}finally{p!==null&&_.types!==null&&(p.types=_.types),H.T=p}}else try{p=o(h,c),db(n,s,p)}catch($){Vm(n,s,$)}}function db(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){hb(n,s,c)},function(c){return Vm(n,s,c)}):hb(n,s,o)}function hb(n,s,o){s.status="fulfilled",s.value=o,fb(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,ub(n,o)))}function Vm(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,fb(s),s=s.next;while(s!==c)}n.action=null}function fb(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function mb(n,s){return s}function pb(n,s){if(Ze){var o=It.formState;if(o!==null){e:{var c=Be;if(Ze){if(Ot){t:{for(var h=Ot,p=Pr;h.nodeType!==8;){if(!p){h=null;break t}if(h=zr(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Ot=zr(h.nextSibling),c=h.data==="F!";break e}}Ci(c)}c=!1}c&&(s=o[0])}}return o=$n(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mb,lastRenderedState:s},o.queue=c,o=jb.bind(null,Be,c),c.dispatch=o,c=Om(!1),p=Fm.bind(null,Be,!1,c.queue),c=$n(),h={state:s,dispatch:null,action:n,pending:null},c.queue=h,o=KS.bind(null,Be,h,p,o),h.dispatch=o,c.memoizedState=n,[s,o,!1]}function gb(n){var s=en();return yb(s,vt,n)}function yb(n,s,o){if(s=km(n,s,mb)[0],n=Ld(Gs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ac(s)}catch(_){throw _===$o?Nd:_}else c=s;s=en();var h=s.queue,p=h.dispatch;return o!==s.memoizedState&&(Be.flags|=2048,Wo(9,{destroy:void 0},YS.bind(null,h,o),null)),[c,p,n]}function YS(n,s){n.action=s}function bb(n){var s=en(),o=vt;if(o!==null)return yb(s,o,n);en(),s=s.memoizedState,o=en();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function Wo(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Vd(),Be.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function _b(){return en().memoizedState}function zd(n,s,o,c){var h=$n();Be.flags|=n,h.memoizedState=Wo(1|s,{destroy:void 0},o,c===void 0?null:c)}function Ud(n,s,o,c){var h=en();c=c===void 0?null:c;var p=h.memoizedState.inst;vt!==null&&c!==null&&Im(c,vt.memoizedState.deps)?h.memoizedState=Wo(s,p,o,c):(Be.flags|=n,h.memoizedState=Wo(1|s,p,o,c))}function vb(n,s){zd(8390656,8,n,s)}function Pm(n,s){Ud(2048,8,n,s)}function QS(n){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Vd(),Be.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function xb(n){var s=en().memoizedState;return QS({ref:s,nextImpl:n}),function(){if((ut&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function wb(n,s){return Ud(4,2,n,s)}function Tb(n,s){return Ud(4,4,n,s)}function Eb(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sb(n,s,o){o=o!=null?o.concat([n]):null,Ud(4,4,Eb.bind(null,s,n),o)}function Lm(){}function Ab(n,s){var o=en();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Im(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Ib(n,s){var o=en();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Im(s,c[1]))return c[0];if(c=n(),Ha){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[c,s],c}function zm(n,s,o){return o===void 0||(Hs&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=N_(),Be.lanes|=n,Li|=n,o)}function Nb(n,s,o,c){return fr(o,s)?o:Yo.current!==null?(n=zm(n,o,c),fr(n,s)||(an=!0),n):(Hs&42)===0||(Hs&1073741824)!==0&&(Qe&261930)===0?(an=!0,n.memoizedState=o):(n=N_(),Be.lanes|=n,Li|=n,s)}function Cb(n,s,o,c,h){var p=le.p;le.p=p!==0&&8>p?p:8;var _=H.T,E={};H.T=E,Fm(n,!1,s,o);try{var j=h(),$=H.S;if($!==null&&$(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var te=HS(j,c);Ic(n,s,te,_r(n))}else Ic(n,s,c,_r(n))}catch(ae){Ic(n,s,{then:function(){},status:"rejected",reason:ae},_r())}finally{le.p=p,_!==null&&E.types!==null&&(_.types=E.types),H.T=_}}function XS(){}function Um(n,s,o,c){if(n.tag!==5)throw Error(r(476));var h=Rb(n).queue;Cb(n,h,s,_e,o===null?XS:function(){return Db(n),o(c)})}function Rb(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Db(n){var s=Rb(n);s.next===null&&(s=n.alternate.memoizedState),Ic(n,s.next.queue,{},_r())}function Bm(){return Nn(Hc)}function Mb(){return en().memoizedState}function kb(){return en().memoizedState}function WS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=_r();n=Mi(o);var c=ki(s,n,o);c!==null&&(ar(c,s,o),wc(c,s,o)),s={cache:gm()},n.payload=s;return}s=s.return}}function JS(n,s,o){var c=_r();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Bd(n)?Ob(s,o):(o=im(n,s,o,c),o!==null&&(ar(o,n,c),Vb(o,s,c)))}function jb(n,s,o){var c=_r();Ic(n,s,o,c)}function Ic(n,s,o,c){var h={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bd(n))Ob(s,h);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var _=s.lastRenderedState,E=p(_,o);if(h.hasEagerState=!0,h.eagerState=E,fr(E,_))return xd(n,s,h,0),It===null&&vd(),!1}catch{}if(o=im(n,s,h,c),o!==null)return ar(o,n,c),Vb(o,s,c),!0}return!1}function Fm(n,s,o,c){if(c={lane:2,revertLane:vp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Bd(n)){if(s)throw Error(r(479))}else s=im(n,o,c,2),s!==null&&ar(s,n,2)}function Bd(n){var s=n.alternate;return n===Be||s!==null&&s===Be}function Ob(n,s){Qo=jd=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Vb(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Os(n,o)}}var Nc={readContext:Nn,use:Pd,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};Nc.useEffectEvent=Kt;var Pb={readContext:Nn,use:Pd,useCallback:function(n,s){return $n().memoizedState=[n,s===void 0?null:s],n},useContext:Nn,useEffect:vb,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,zd(4194308,4,Eb.bind(null,s,n),o)},useLayoutEffect:function(n,s){return zd(4194308,4,n,s)},useInsertionEffect:function(n,s){zd(4,2,n,s)},useMemo:function(n,s){var o=$n();s=s===void 0?null:s;var c=n();if(Ha){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=$n();if(o!==void 0){var h=o(s);if(Ha){xn(!0);try{o(s)}finally{xn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=JS.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var s=$n();return n={current:n},s.memoizedState=n},useState:function(n){n=Om(n);var s=n.queue,o=jb.bind(null,Be,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Lm,useDeferredValue:function(n,s){var o=$n();return zm(o,n,s)},useTransition:function(){var n=Om(!1);return n=Cb.bind(null,Be,n.queue,!0,!1),$n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Be,h=$n();if(Ze){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),It===null)throw Error(r(349));(Qe&127)!==0||sb(c,s,o)}h.memoizedState=o;var p={value:o,getSnapshot:s};return h.queue=p,vb(ab.bind(null,c,p,n),[n]),c.flags|=2048,Wo(9,{destroy:void 0},ib.bind(null,c,p,o,s),null),o},useId:function(){var n=$n(),s=It.identifierPrefix;if(Ze){var o=bs,c=ys;o=(c&~(1<<32-Dt(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Od++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=GS++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Bm,useFormState:pb,useActionState:pb,useOptimistic:function(n){var s=$n();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Fm.bind(null,Be,!0,o),o.dispatch=s,[n,s]},useMemoCache:Mm,useCacheRefresh:function(){return $n().memoizedState=WS.bind(null,Be)},useEffectEvent:function(n){var s=$n(),o={impl:n};return s.memoizedState=o,function(){if((ut&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},qm={readContext:Nn,use:Pd,useCallback:Ab,useContext:Nn,useEffect:Pm,useImperativeHandle:Sb,useInsertionEffect:wb,useLayoutEffect:Tb,useMemo:Ib,useReducer:Ld,useRef:_b,useState:function(){return Ld(Gs)},useDebugValue:Lm,useDeferredValue:function(n,s){var o=en();return Nb(o,vt.memoizedState,n,s)},useTransition:function(){var n=Ld(Gs)[0],s=en().memoizedState;return[typeof n=="boolean"?n:Ac(n),s]},useSyncExternalStore:rb,useId:Mb,useHostTransitionStatus:Bm,useFormState:gb,useActionState:gb,useOptimistic:function(n,s){var o=en();return cb(o,vt,n,s)},useMemoCache:Mm,useCacheRefresh:kb};qm.useEffectEvent=xb;var Lb={readContext:Nn,use:Pd,useCallback:Ab,useContext:Nn,useEffect:Pm,useImperativeHandle:Sb,useInsertionEffect:wb,useLayoutEffect:Tb,useMemo:Ib,useReducer:jm,useRef:_b,useState:function(){return jm(Gs)},useDebugValue:Lm,useDeferredValue:function(n,s){var o=en();return vt===null?zm(o,n,s):Nb(o,vt.memoizedState,n,s)},useTransition:function(){var n=jm(Gs)[0],s=en().memoizedState;return[typeof n=="boolean"?n:Ac(n),s]},useSyncExternalStore:rb,useId:Mb,useHostTransitionStatus:Bm,useFormState:bb,useActionState:bb,useOptimistic:function(n,s){var o=en();return vt!==null?cb(o,vt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Mm,useCacheRefresh:kb};Lb.useEffectEvent=xb;function Hm(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:w({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Gm={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=_r(),h=Mi(c);h.payload=s,o!=null&&(h.callback=o),s=ki(n,h,c),s!==null&&(ar(s,n,c),wc(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=_r(),h=Mi(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=ki(n,h,c),s!==null&&(ar(s,n,c),wc(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=_r(),c=Mi(o);c.tag=2,s!=null&&(c.callback=s),s=ki(n,c,o),s!==null&&(ar(s,n,o),wc(s,n,o))}};function zb(n,s,o,c,h,p,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,_):s.prototype&&s.prototype.isPureReactComponent?!mc(o,c)||!mc(h,p):!0}function Ub(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Gm.enqueueReplaceState(s,s.state,null)}function Ga(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=w({},o));for(var h in n)o[h]===void 0&&(o[h]=n[h])}return o}function Bb(n){_d(n)}function Fb(n){console.error(n)}function qb(n){_d(n)}function Fd(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Hb(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function $m(n,s,o){return o=Mi(o),o.tag=3,o.payload={element:null},o.callback=function(){Fd(n,s)},o}function Gb(n){return n=Mi(n),n.tag=3,n}function $b(n,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var p=c.value;n.payload=function(){return h(p)},n.callback=function(){Hb(s,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Hb(s,o,c),typeof h!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function ZS(n,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&qo(s,o,h,!0),o=pr.current,o!==null){switch(o.tag){case 31:case 13:return Lr===null?eh():o.alternate===null&&Yt===0&&(Yt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Cd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),yp(n,c,h)),!1;case 22:return o.flags|=65536,c===Cd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),yp(n,c,h)),!1}throw Error(r(435,o.tag))}return yp(n,c,h),eh(),!1}if(Ze)return s=pr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==dm&&(n=Error(r(422),{cause:c}),yc(jr(n,o)))):(c!==dm&&(s=Error(r(423),{cause:c}),yc(jr(s,o))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=jr(c,o),h=$m(n.stateNode,c,h),wm(n,h),Yt!==4&&(Yt=2)),!1;var p=Error(r(520),{cause:c});if(p=jr(p,o),Vc===null?Vc=[p]:Vc.push(p),Yt!==4&&(Yt=2),s===null)return!0;c=jr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=h&-h,o.lanes|=n,n=$m(o.stateNode,c,n),wm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(zi===null||!zi.has(p))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Gb(h),$b(h,n,o,c),wm(o,h),!1}o=o.return}while(o!==null);return!1}var Km=Error(r(461)),an=!1;function Cn(n,s,o,c){s.child=n===null?Xy(s,null,o,c):qa(s,n.child,o,c)}function Kb(n,s,o,c,h){o=o.render;var p=s.ref;if("ref"in c){var _={};for(var E in c)E!=="ref"&&(_[E]=c[E])}else _=c;return za(s),c=Nm(n,s,o,_,p,h),E=Cm(),n!==null&&!an?(Rm(n,s,h),$s(n,s,h)):(Ze&&E&&cm(s),s.flags|=1,Cn(n,s,c,h),s.child)}function Yb(n,s,o,c,h){if(n===null){var p=o.type;return typeof p=="function"&&!am(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,Qb(n,s,p,c,h)):(n=Td(o.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!tp(n,h)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:mc,o(_,c)&&n.ref===s.ref)return $s(n,s,h)}return s.flags|=1,n=Us(p,c),n.ref=s.ref,n.return=s,s.child=n}function Qb(n,s,o,c,h){if(n!==null){var p=n.memoizedProps;if(mc(p,c)&&n.ref===s.ref)if(an=!1,s.pendingProps=c=p,tp(n,h))(n.flags&131072)!==0&&(an=!0);else return s.lanes=n.lanes,$s(n,s,h)}return Ym(n,s,o,c,h)}function Xb(n,s,o,c){var h=c.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=s.child=n.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~p}else c=0,s.child=null;return Wb(n,s,p,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Id(s,p!==null?p.cachePool:null),p!==null?Zy(s,p):Em(),eb(s);else return c=s.lanes=536870912,Wb(n,s,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(Id(s,p.cachePool),Zy(s,p),Oi(),s.memoizedState=null):(n!==null&&Id(s,null),Em(),Oi());return Cn(n,s,h,o),s.child}function Cc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wb(n,s,o,c,h){var p=bm();return p=p===null?null:{parent:rn._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Id(s,null),Em(),eb(s),n!==null&&qo(n,s,c,!0),s.childLanes=h,null}function qd(n,s){return s=Gd({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Jb(n,s,o){return qa(s,n.child,null,o),n=qd(s,s.pendingProps),n.flags|=2,gr(s),s.memoizedState=null,n}function eA(n,s,o){var c=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ze){if(c.mode==="hidden")return n=qd(s,c),s.lanes=536870912,Cc(null,n);if(Am(s),(n=Ot)?(n=uv(n,Pr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ii!==null?{id:ys,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=Oy(n),o.return=s,s.child=o,In=s,Ot=null)):n=null,n===null)throw Ci(s);return s.lanes=536870912,null}return qd(s,c)}var p=n.memoizedState;if(p!==null){var _=p.dehydrated;if(Am(s),h)if(s.flags&256)s.flags&=-257,s=Jb(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(an||qo(n,s,o,!1),h=(o&n.childLanes)!==0,an||h){if(c=It,c!==null&&(_=Vs(c,o),_!==0&&_!==p.retryLane))throw p.retryLane=_,Oa(n,_),ar(c,n,_),Km;eh(),s=Jb(n,s,o)}else n=p.treeContext,Ot=zr(_.nextSibling),In=s,Ze=!0,Ni=null,Pr=!1,n!==null&&Ly(s,n),s=qd(s,c),s.flags|=4096;return s}return n=Us(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Hd(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Ym(n,s,o,c,h){return za(s),o=Nm(n,s,o,c,void 0,h),c=Cm(),n!==null&&!an?(Rm(n,s,h),$s(n,s,h)):(Ze&&c&&cm(s),s.flags|=1,Cn(n,s,o,h),s.child)}function Zb(n,s,o,c,h,p){return za(s),s.updateQueue=null,o=nb(s,c,o,h),tb(n),c=Cm(),n!==null&&!an?(Rm(n,s,p),$s(n,s,p)):(Ze&&c&&cm(s),s.flags|=1,Cn(n,s,o,p),s.child)}function e_(n,s,o,c,h){if(za(s),s.stateNode===null){var p=zo,_=o.contextType;typeof _=="object"&&_!==null&&(p=Nn(_)),p=new o(c,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=c,p.state=s.memoizedState,p.refs={},vm(s),_=o.contextType,p.context=typeof _=="object"&&_!==null?Nn(_):zo,p.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Hm(s,o,_,c),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Gm.enqueueReplaceState(p,p.state,null),Ec(s,c,p,h),Tc(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){p=s.stateNode;var E=s.memoizedProps,j=Ga(o,E);p.props=j;var $=p.context,te=o.contextType;_=zo,typeof te=="object"&&te!==null&&(_=Nn(te));var ae=o.getDerivedStateFromProps;te=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||$!==_)&&Ub(s,p,c,_),Di=!1;var Y=s.memoizedState;p.state=Y,Ec(s,c,p,h),Tc(),$=s.memoizedState,E||Y!==$||Di?(typeof ae=="function"&&(Hm(s,o,ae,c),$=s.memoizedState),(j=Di||zb(s,o,j,c,Y,$,_))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),p.props=c,p.state=$,p.context=_,c=j):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{p=s.stateNode,xm(n,s),_=s.memoizedProps,te=Ga(o,_),p.props=te,ae=s.pendingProps,Y=p.context,$=o.contextType,j=zo,typeof $=="object"&&$!==null&&(j=Nn($)),E=o.getDerivedStateFromProps,($=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==ae||Y!==j)&&Ub(s,p,c,j),Di=!1,Y=s.memoizedState,p.state=Y,Ec(s,c,p,h),Tc();var W=s.memoizedState;_!==ae||Y!==W||Di||n!==null&&n.dependencies!==null&&Sd(n.dependencies)?(typeof E=="function"&&(Hm(s,o,E,c),W=s.memoizedState),(te=Di||zb(s,o,te,c,Y,W,j)||n!==null&&n.dependencies!==null&&Sd(n.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,j)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),p.props=c,p.state=W,p.context=j,c=te):(typeof p.componentDidUpdate!="function"||_===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),c=!1)}return p=c,Hd(n,s),c=(s.flags&128)!==0,p||c?(p=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&c?(s.child=qa(s,n.child,null,h),s.child=qa(s,null,o,h)):Cn(n,s,o,h),s.memoizedState=p.state,n=s.child):n=$s(n,s,h),n}function t_(n,s,o,c){return Pa(),s.flags|=256,Cn(n,s,o,c),s.child}var Qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(n){return{baseLanes:n,cachePool:Hy()}}function Wm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=br),n}function n_(n,s,o){var c=s.pendingProps,h=!1,p=(s.flags&128)!==0,_;if((_=p)||(_=n!==null&&n.memoizedState===null?!1:(Zt.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ze){if(h?ji(s):Oi(),(n=Ot)?(n=uv(n,Pr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ii!==null?{id:ys,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=Oy(n),o.return=s,s.child=o,In=s,Ot=null)):n=null,n===null)throw Ci(s);return kp(n)?s.lanes=32:s.lanes=536870912,null}var E=c.children;return c=c.fallback,h?(Oi(),h=s.mode,E=Gd({mode:"hidden",children:E},h),c=Va(c,h,o,null),E.return=s,c.return=s,E.sibling=c,s.child=E,c=s.child,c.memoizedState=Xm(o),c.childLanes=Wm(n,_,o),s.memoizedState=Qm,Cc(null,c)):(ji(s),Jm(s,E))}var j=n.memoizedState;if(j!==null&&(E=j.dehydrated,E!==null)){if(p)s.flags&256?(ji(s),s.flags&=-257,s=Zm(n,s,o)):s.memoizedState!==null?(Oi(),s.child=n.child,s.flags|=128,s=null):(Oi(),E=c.fallback,h=s.mode,c=Gd({mode:"visible",children:c.children},h),E=Va(E,h,o,null),E.flags|=2,c.return=s,E.return=s,c.sibling=E,s.child=c,qa(s,n.child,null,o),c=s.child,c.memoizedState=Xm(o),c.childLanes=Wm(n,_,o),s.memoizedState=Qm,s=Cc(null,c));else if(ji(s),kp(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var $=_.dgst;_=$,c=Error(r(419)),c.stack="",c.digest=_,yc({value:c,source:null,stack:null}),s=Zm(n,s,o)}else if(an||qo(n,s,o,!1),_=(o&n.childLanes)!==0,an||_){if(_=It,_!==null&&(c=Vs(_,o),c!==0&&c!==j.retryLane))throw j.retryLane=c,Oa(n,c),ar(_,n,c),Km;Mp(E)||eh(),s=Zm(n,s,o)}else Mp(E)?(s.flags|=192,s.child=n.child,s=null):(n=j.treeContext,Ot=zr(E.nextSibling),In=s,Ze=!0,Ni=null,Pr=!1,n!==null&&Ly(s,n),s=Jm(s,c.children),s.flags|=4096);return s}return h?(Oi(),E=c.fallback,h=s.mode,j=n.child,$=j.sibling,c=Us(j,{mode:"hidden",children:c.children}),c.subtreeFlags=j.subtreeFlags&65011712,$!==null?E=Us($,E):(E=Va(E,h,o,null),E.flags|=2),E.return=s,c.return=s,c.sibling=E,s.child=c,Cc(null,c),c=s.child,E=n.child.memoizedState,E===null?E=Xm(o):(h=E.cachePool,h!==null?(j=rn._currentValue,h=h.parent!==j?{parent:j,pool:j}:h):h=Hy(),E={baseLanes:E.baseLanes|o,cachePool:h}),c.memoizedState=E,c.childLanes=Wm(n,_,o),s.memoizedState=Qm,Cc(n.child,c)):(ji(s),o=n.child,n=o.sibling,o=Us(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Jm(n,s){return s=Gd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Gd(n,s){return n=mr(22,n,null,s),n.lanes=0,n}function Zm(n,s,o){return qa(s,n.child,null,o),n=Jm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function r_(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),mm(n.return,s,o)}function ep(n,s,o,c,h,p){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h,treeForkCount:p}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=h,_.treeForkCount=p)}function s_(n,s,o){var c=s.pendingProps,h=c.revealOrder,p=c.tail;c=c.children;var _=Zt.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,de(Zt,_),Cn(n,s,c,o),c=Ze?gc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&r_(n,o,s);else if(n.tag===19)r_(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(o=s.child,h=null;o!==null;)n=o.alternate,n!==null&&kd(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),ep(s,!1,h,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&kd(n)===null){s.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}ep(s,!0,o,null,p,c);break;case"together":ep(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function $s(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Li|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(qo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Us(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Us(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function tp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Sd(n)))}function tA(n,s,o){switch(s.tag){case 3:nt(s,s.stateNode.containerInfo),Ri(s,rn,n.memoizedState.cache),Pa();break;case 27:case 5:Tt(s);break;case 4:nt(s,s.stateNode.containerInfo);break;case 10:Ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Am(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ji(s),s.flags|=128,null):(o&s.child.childLanes)!==0?n_(n,s,o):(ji(s),n=$s(n,s,o),n!==null?n.sibling:null);ji(s);break;case 19:var h=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(qo(n,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return s_(n,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),de(Zt,Zt.current),c)break;return null;case 22:return s.lanes=0,Xb(n,s,o,s.pendingProps);case 24:Ri(s,rn,n.memoizedState.cache)}return $s(n,s,o)}function i_(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)an=!0;else{if(!tp(n,o)&&(s.flags&128)===0)return an=!1,tA(n,s,o);an=(n.flags&131072)!==0}else an=!1,Ze&&(s.flags&1048576)!==0&&Py(s,gc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=Ba(s.elementType),s.type=n,typeof n=="function")am(n)?(c=Ga(n,c),s.tag=1,s=e_(null,s,n,c,o)):(s.tag=0,s=Ym(null,s,n,c,o));else{if(n!=null){var h=n.$$typeof;if(h===oe){s.tag=11,s=Kb(null,s,n,c,o);break e}else if(h===S){s.tag=14,s=Yb(null,s,n,c,o);break e}}throw s=me(n)||n,Error(r(306,s,""))}}return s;case 0:return Ym(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=Ga(c,s.pendingProps),e_(n,s,c,h,o);case 3:e:{if(nt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var p=s.memoizedState;h=p.element,xm(n,s),Ec(s,c,null,o);var _=s.memoizedState;if(c=_.cache,Ri(s,rn,c),c!==p.cache&&pm(s,[rn],o,!0),Tc(),c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=t_(n,s,c,o);break e}else if(c!==h){h=jr(Error(r(424)),s),yc(h),s=t_(n,s,c,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ot=zr(n.firstChild),In=s,Ze=!0,Ni=null,Pr=!0,o=Xy(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Pa(),c===h){s=$s(n,s,o);break e}Cn(n,s,c,o)}s=s.child}return s;case 26:return Hd(n,s),n===null?(o=gv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ze||(o=s.type,n=s.pendingProps,c=oh(be.current).createElement(o),c[zt]=s,c[Gt]=n,Rn(c,o,n),ge(c),s.stateNode=c):s.memoizedState=gv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Tt(s),n===null&&Ze&&(c=s.stateNode=fv(s.type,s.pendingProps,be.current),In=s,Pr=!0,h=Ot,qi(s.type)?(jp=h,Ot=zr(c.firstChild)):Ot=h),Cn(n,s,s.pendingProps.children,o),Hd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ze&&((h=c=Ot)&&(c=DA(c,s.type,s.pendingProps,Pr),c!==null?(s.stateNode=c,In=s,Ot=zr(c.firstChild),Pr=!1,h=!0):h=!1),h||Ci(s)),Tt(s),h=s.type,p=s.pendingProps,_=n!==null?n.memoizedProps:null,c=p.children,Cp(h,p)?c=null:_!==null&&Cp(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=Nm(n,s,$S,null,null,o),Hc._currentValue=h),Hd(n,s),Cn(n,s,c,o),s.child;case 6:return n===null&&Ze&&((n=o=Ot)&&(o=MA(o,s.pendingProps,Pr),o!==null?(s.stateNode=o,In=s,Ot=null,n=!0):n=!1),n||Ci(s)),null;case 13:return n_(n,s,o);case 4:return nt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=qa(s,null,c,o):Cn(n,s,c,o),s.child;case 11:return Kb(n,s,s.type,s.pendingProps,o);case 7:return Cn(n,s,s.pendingProps,o),s.child;case 8:return Cn(n,s,s.pendingProps.children,o),s.child;case 12:return Cn(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ri(s,s.type,c.value),Cn(n,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,za(s),h=Nn(h),c=c(h),s.flags|=1,Cn(n,s,c,o),s.child;case 14:return Yb(n,s,s.type,s.pendingProps,o);case 15:return Qb(n,s,s.type,s.pendingProps,o);case 19:return s_(n,s,o);case 31:return eA(n,s,o);case 22:return Xb(n,s,o,s.pendingProps);case 24:return za(s),c=Nn(rn),n===null?(h=bm(),h===null&&(h=It,p=gm(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=o),h=p),s.memoizedState={parent:c,cache:h},vm(s),Ri(s,rn,h)):((n.lanes&o)!==0&&(xm(n,s),Ec(s,null,null,o),Tc()),h=n.memoizedState,p=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ri(s,rn,c)):(c=p.cache,Ri(s,rn,c),c!==h.cache&&pm(s,[rn],o,!0))),Cn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ks(n){n.flags|=4}function np(n,s,o,c,h){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(M_())n.flags|=8192;else throw Fa=Cd,_m}else n.flags&=-16777217}function a_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xv(s))if(M_())n.flags|=8192;else throw Fa=Cd,_m}function $d(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?yi():536870912,n.lanes|=s,tl|=s)}function Rc(n,s){if(!Ze)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Vt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function nA(n,s,o){var c=s.pendingProps;switch(um(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Vt(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),qs(rn),Ye(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Fo(s)?Ks(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hm())),Vt(s),null;case 26:var h=s.type,p=s.memoizedState;return n===null?(Ks(s),p!==null?(Vt(s),a_(s,p)):(Vt(s),np(s,h,null,c,o))):p?p!==n.memoizedState?(Ks(s),Vt(s),a_(s,p)):(Vt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ks(s),Vt(s),np(s,h,n,c,o)),null;case 27:if(Ar(s),o=be.current,h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Ks(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Vt(s),null}n=ve.current,Fo(s)?zy(s):(n=fv(h,c,o),s.stateNode=n,Ks(s))}return Vt(s),null;case 5:if(Ar(s),h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Ks(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Vt(s),null}if(p=ve.current,Fo(s))zy(s);else{var _=oh(be.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?_.createElement(h,{is:c.is}):_.createElement(h)}}p[zt]=s,p[Gt]=c;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=p;e:switch(Rn(p,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ks(s)}}return Vt(s),np(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&Ks(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=be.current,Fo(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,h=In,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[zt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||nv(n.nodeValue,o)),n||Ci(s,!0)}else n=oh(n).createTextNode(c),n[zt]=s,s.stateNode=n}return Vt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=Fo(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[zt]=s}else Pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),n=!1}else o=hm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(gr(s),s):(gr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Vt(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Fo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[zt]=s}else Pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),h=!1}else h=hm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(gr(s),s):(gr(s),null)}return gr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),$d(s,s.updateQueue),Vt(s),null);case 4:return Ye(),n===null&&Ep(s.stateNode.containerInfo),Vt(s),null;case 10:return qs(s.type),Vt(s),null;case 19:if(ee(Zt),c=s.memoizedState,c===null)return Vt(s),null;if(h=(s.flags&128)!==0,p=c.rendering,p===null)if(h)Rc(c,!1);else{if(Yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=kd(n),p!==null){for(s.flags|=128,Rc(c,!1),n=p.updateQueue,s.updateQueue=n,$d(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)jy(o,n),o=o.sibling;return de(Zt,Zt.current&1|2),Ze&&Bs(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&pn()>Wd&&(s.flags|=128,h=!0,Rc(c,!1),s.lanes=4194304)}else{if(!h)if(n=kd(p),n!==null){if(s.flags|=128,h=!0,n=n.updateQueue,s.updateQueue=n,$d(s,n),Rc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Ze)return Vt(s),null}else 2*pn()-c.renderingStartTime>Wd&&o!==536870912&&(s.flags|=128,h=!0,Rc(c,!1),s.lanes=4194304);c.isBackwards?(p.sibling=s.child,s.child=p):(n=c.last,n!==null?n.sibling=p:s.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pn(),n.sibling=null,o=Zt.current,de(Zt,h?o&1|2:o&1),Ze&&Bs(s,c.treeForkCount),n):(Vt(s),null);case 22:case 23:return gr(s),Sm(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),o=s.updateQueue,o!==null&&$d(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&ee(Ua),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),qs(rn),Vt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function rA(n,s){switch(um(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return qs(rn),Ye(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ar(s),null;case 31:if(s.memoizedState!==null){if(gr(s),s.alternate===null)throw Error(r(340));Pa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(gr(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Pa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(Zt),null;case 4:return Ye(),null;case 10:return qs(s.type),null;case 22:case 23:return gr(s),Sm(),n!==null&&ee(Ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return qs(rn),null;case 25:return null;default:return null}}function o_(n,s){switch(um(s),s.tag){case 3:qs(rn),Ye();break;case 26:case 27:case 5:Ar(s);break;case 4:Ye();break;case 31:s.memoizedState!==null&&gr(s);break;case 13:gr(s);break;case 19:ee(Zt);break;case 10:qs(s.type);break;case 22:case 23:gr(s),Sm(),n!==null&&ee(Ua);break;case 24:qs(rn)}}function Dc(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&n)===n){c=void 0;var p=o.create,_=o.inst;c=p(),_.destroy=c}o=o.next}while(o!==h)}}catch(E){pt(s,s.return,E)}}function Vi(n,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&n)===n){var _=c.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=s;var j=o,$=E;try{$()}catch(te){pt(h,j,te)}}}c=c.next}while(c!==p)}}catch(te){pt(s,s.return,te)}}function l_(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Jy(s,o)}catch(c){pt(n,n.return,c)}}}function c_(n,s,o){o.props=Ga(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){pt(n,s,c)}}function Mc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(h){pt(n,s,h)}}function _s(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){pt(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){pt(n,s,h)}else o.current=null}function u_(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){pt(n,n.return,h)}}function rp(n,s,o){try{var c=n.stateNode;SA(c,n.type,o,s),c[Gt]=s}catch(h){pt(n,n.return,h)}}function d_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qi(n.type)||n.tag===4}function sp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||d_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ip(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Yr));else if(c!==4&&(c===27&&qi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ip(n,s,o),n=n.sibling;n!==null;)ip(n,s,o),n=n.sibling}function Kd(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&qi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Kd(n,s,o),n=n.sibling;n!==null;)Kd(n,s,o),n=n.sibling}function h_(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Rn(s,c,o),s[zt]=n,s[Gt]=o}catch(p){pt(n,n.return,p)}}var Ys=!1,on=!1,ap=!1,f_=typeof WeakSet=="function"?WeakSet:Set,gn=null;function sA(n,s){if(n=n.containerInfo,Ip=mh,n=Sy(n),Zf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,E=-1,j=-1,$=0,te=0,ae=n,Y=null;t:for(;;){for(var W;ae!==o||h!==0&&ae.nodeType!==3||(E=_+h),ae!==p||c!==0&&ae.nodeType!==3||(j=_+c),ae.nodeType===3&&(_+=ae.nodeValue.length),(W=ae.firstChild)!==null;)Y=ae,ae=W;for(;;){if(ae===n)break t;if(Y===o&&++$===h&&(E=_),Y===p&&++te===c&&(j=_),(W=ae.nextSibling)!==null)break;ae=Y,Y=ae.parentNode}ae=W}o=E===-1||j===-1?null:{start:E,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Np={focusedElem:n,selectionRange:o},mh=!1,gn=s;gn!==null;)if(s=gn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,gn=n;else for(;gn!==null;){switch(s=gn,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)h=n[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,h=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Te=Ga(o.type,h);n=c.getSnapshotBeforeUpdate(Te,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(ke){pt(o,o.return,ke)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,gn=n;break}gn=s.return}}function m_(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Xs(n,o),c&4&&Dc(5,o);break;case 1:if(Xs(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){pt(o,o.return,_)}else{var h=Ga(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){pt(o,o.return,_)}}c&64&&l_(o),c&512&&Mc(o,o.return);break;case 3:if(Xs(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Jy(n,s)}catch(_){pt(o,o.return,_)}}break;case 27:s===null&&c&4&&h_(o);case 26:case 5:Xs(n,o),s===null&&c&4&&u_(o),c&512&&Mc(o,o.return);break;case 12:Xs(n,o);break;case 31:Xs(n,o),c&4&&y_(n,o);break;case 13:Xs(n,o),c&4&&b_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=fA.bind(null,o),kA(n,o))));break;case 22:if(c=o.memoizedState!==null||Ys,!c){s=s!==null&&s.memoizedState!==null||on,h=Ys;var p=on;Ys=c,(on=s)&&!p?Ws(n,o,(o.subtreeFlags&8772)!==0):Xs(n,o),Ys=h,on=p}break;case 30:break;default:Xs(n,o)}}function p_(n){var s=n.alternate;s!==null&&(n.alternate=null,p_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Cr(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Bt=null,nr=!1;function Qs(n,s,o){for(o=o.child;o!==null;)g_(n,s,o),o=o.sibling}function g_(n,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Wn,o)}catch{}switch(o.tag){case 26:on||_s(o,s),Qs(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:on||_s(o,s);var c=Bt,h=nr;qi(o.type)&&(Bt=o.stateNode,nr=!1),Qs(n,s,o),Bc(o.stateNode),Bt=c,nr=h;break;case 5:on||_s(o,s);case 6:if(c=Bt,h=nr,Bt=null,Qs(n,s,o),Bt=c,nr=h,Bt!==null)if(nr)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(o.stateNode)}catch(p){pt(o,s,p)}else try{Bt.removeChild(o.stateNode)}catch(p){pt(o,s,p)}break;case 18:Bt!==null&&(nr?(n=Bt,lv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),cl(n)):lv(Bt,o.stateNode));break;case 4:c=Bt,h=nr,Bt=o.stateNode.containerInfo,nr=!0,Qs(n,s,o),Bt=c,nr=h;break;case 0:case 11:case 14:case 15:Vi(2,o,s),on||Vi(4,o,s),Qs(n,s,o);break;case 1:on||(_s(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&c_(o,s,c)),Qs(n,s,o);break;case 21:Qs(n,s,o);break;case 22:on=(c=on)||o.memoizedState!==null,Qs(n,s,o),on=c;break;default:Qs(n,s,o)}}function y_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{cl(n)}catch(o){pt(s,s.return,o)}}}function b_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{cl(n)}catch(o){pt(s,s.return,o)}}function iA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new f_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new f_),s;default:throw Error(r(435,n.tag))}}function Yd(n,s){var o=iA(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var h=mA.bind(null,n,c);c.then(h,h)}})}function rr(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],p=n,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(qi(E.type)){Bt=E.stateNode,nr=!1;break e}break;case 5:Bt=E.stateNode,nr=!1;break e;case 3:case 4:Bt=E.stateNode.containerInfo,nr=!0;break e}E=E.return}if(Bt===null)throw Error(r(160));g_(p,_,h),Bt=null,nr=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)__(s,n),s=s.sibling}var es=null;function __(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rr(s,n),sr(n),c&4&&(Vi(3,n,n.return),Dc(3,n),Vi(5,n,n.return));break;case 1:rr(s,n),sr(n),c&512&&(on||o===null||_s(o,o.return)),c&64&&Ys&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=es;if(rr(s,n),sr(n),c&512&&(on||o===null||_s(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":p=h.getElementsByTagName("title")[0],(!p||p[et]||p[zt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(c),h.head.insertBefore(p,h.querySelector("head > title"))),Rn(p,c,o),p[zt]=n,ge(p),c=p;break e;case"link":var _=_v("link","href",h).get(c+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(p=_[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}p=h.createElement(c),Rn(p,c,o),h.head.appendChild(p);break;case"meta":if(_=_v("meta","content",h).get(c+(o.content||""))){for(E=0;E<_.length;E++)if(p=_[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}p=h.createElement(c),Rn(p,c,o),h.head.appendChild(p);break;default:throw Error(r(468,c))}p[zt]=n,ge(p),c=p}n.stateNode=c}else vv(h,n.type,n.stateNode);else n.stateNode=bv(h,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?vv(h,n.type,n.stateNode):bv(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&rp(n,n.memoizedProps,o.memoizedProps)}break;case 27:rr(s,n),sr(n),c&512&&(on||o===null||_s(o,o.return)),o!==null&&c&4&&rp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(rr(s,n),sr(n),c&512&&(on||o===null||_s(o,o.return)),n.flags&32){h=n.stateNode;try{tr(h,"")}catch(Te){pt(n,n.return,Te)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,rp(n,h,o!==null?o.memoizedProps:h)),c&1024&&(ap=!0);break;case 6:if(rr(s,n),sr(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Te){pt(n,n.return,Te)}}break;case 3:if(uh=null,h=es,es=lh(s.containerInfo),rr(s,n),es=h,sr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{cl(s.containerInfo)}catch(Te){pt(n,n.return,Te)}ap&&(ap=!1,v_(n));break;case 4:c=es,es=lh(n.stateNode.containerInfo),rr(s,n),sr(n),es=c;break;case 12:rr(s,n),sr(n);break;case 31:rr(s,n),sr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yd(n,c)));break;case 13:rr(s,n),sr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Xd=pn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yd(n,c)));break;case 22:h=n.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,$=Ys,te=on;if(Ys=$||h,on=te||j,rr(s,n),on=te,Ys=$,sr(n),c&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||j||Ys||on||$a(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){j=o=s;try{if(p=j.stateNode,h)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=j.stateNode;var ae=j.memoizedProps.style,Y=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Te){pt(j,j.return,Te)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(Te){pt(j,j.return,Te)}}}else if(s.tag===18){if(o===null){j=s;try{var W=j.stateNode;h?cv(W,!0):cv(j.stateNode,!1)}catch(Te){pt(j,j.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Yd(n,o))));break;case 19:rr(s,n),sr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yd(n,c)));break;case 30:break;case 21:break;default:rr(s,n),sr(n)}}function sr(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(d_(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var h=o.stateNode,p=sp(n);Kd(n,p,h);break;case 5:var _=o.stateNode;o.flags&32&&(tr(_,""),o.flags&=-33);var E=sp(n);Kd(n,E,_);break;case 3:case 4:var j=o.stateNode.containerInfo,$=sp(n);ip(n,$,j);break;default:throw Error(r(161))}}catch(te){pt(n,n.return,te)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function v_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;v_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Xs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)m_(n,s.alternate,s),s=s.sibling}function $a(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Vi(4,s,s.return),$a(s);break;case 1:_s(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&c_(s,s.return,o),$a(s);break;case 27:Bc(s.stateNode);case 26:case 5:_s(s,s.return),$a(s);break;case 22:s.memoizedState===null&&$a(s);break;case 30:$a(s);break;default:$a(s)}n=n.sibling}}function Ws(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=n,p=s,_=p.flags;switch(p.tag){case 0:case 11:case 15:Ws(h,p,o),Dc(4,p);break;case 1:if(Ws(h,p,o),c=p,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){pt(c,c.return,$)}if(c=p,h=c.updateQueue,h!==null){var E=c.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)Wy(j[h],E)}catch($){pt(c,c.return,$)}}o&&_&64&&l_(p),Mc(p,p.return);break;case 27:h_(p);case 26:case 5:Ws(h,p,o),o&&c===null&&_&4&&u_(p),Mc(p,p.return);break;case 12:Ws(h,p,o);break;case 31:Ws(h,p,o),o&&_&4&&y_(h,p);break;case 13:Ws(h,p,o),o&&_&4&&b_(h,p);break;case 22:p.memoizedState===null&&Ws(h,p,o),Mc(p,p.return);break;case 30:break;default:Ws(h,p,o)}s=s.sibling}}function op(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&bc(o))}function lp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&bc(n))}function ts(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x_(n,s,o,c),s=s.sibling}function x_(n,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:ts(n,s,o,c),h&2048&&Dc(9,s);break;case 1:ts(n,s,o,c);break;case 3:ts(n,s,o,c),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&bc(n)));break;case 12:if(h&2048){ts(n,s,o,c),n=s.stateNode;try{var p=s.memoizedProps,_=p.id,E=p.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){pt(s,s.return,j)}}else ts(n,s,o,c);break;case 31:ts(n,s,o,c);break;case 13:ts(n,s,o,c);break;case 23:break;case 22:p=s.stateNode,_=s.alternate,s.memoizedState!==null?p._visibility&2?ts(n,s,o,c):kc(n,s):p._visibility&2?ts(n,s,o,c):(p._visibility|=2,Jo(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),h&2048&&op(_,s);break;case 24:ts(n,s,o,c),h&2048&&lp(s.alternate,s);break;default:ts(n,s,o,c)}}function Jo(n,s,o,c,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,_=s,E=o,j=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:Jo(p,_,E,j,h),Dc(8,_);break;case 23:break;case 22:var te=_.stateNode;_.memoizedState!==null?te._visibility&2?Jo(p,_,E,j,h):kc(p,_):(te._visibility|=2,Jo(p,_,E,j,h)),h&&$&2048&&op(_.alternate,_);break;case 24:Jo(p,_,E,j,h),h&&$&2048&&lp(_.alternate,_);break;default:Jo(p,_,E,j,h)}s=s.sibling}}function kc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,h=c.flags;switch(c.tag){case 22:kc(o,c),h&2048&&op(c.alternate,c);break;case 24:kc(o,c),h&2048&&lp(c.alternate,c);break;default:kc(o,c)}s=s.sibling}}var jc=8192;function Zo(n,s,o){if(n.subtreeFlags&jc)for(n=n.child;n!==null;)w_(n,s,o),n=n.sibling}function w_(n,s,o){switch(n.tag){case 26:Zo(n,s,o),n.flags&jc&&n.memoizedState!==null&&GA(o,es,n.memoizedState,n.memoizedProps);break;case 5:Zo(n,s,o);break;case 3:case 4:var c=es;es=lh(n.stateNode.containerInfo),Zo(n,s,o),es=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=jc,jc=16777216,Zo(n,s,o),jc=c):Zo(n,s,o));break;default:Zo(n,s,o)}}function T_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Oc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];gn=c,S_(c,n)}T_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)E_(n),n=n.sibling}function E_(n){switch(n.tag){case 0:case 11:case 15:Oc(n),n.flags&2048&&Vi(9,n,n.return);break;case 3:Oc(n);break;case 12:Oc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Qd(n)):Oc(n);break;default:Oc(n)}}function Qd(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];gn=c,S_(c,n)}T_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Vi(8,s,s.return),Qd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Qd(s));break;default:Qd(s)}n=n.sibling}}function S_(n,s){for(;gn!==null;){var o=gn;switch(o.tag){case 0:case 11:case 15:Vi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:bc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gn=c;else e:for(o=n;gn!==null;){c=gn;var h=c.sibling,p=c.return;if(p_(c),c===o){gn=null;break e}if(h!==null){h.return=p,gn=h;break e}gn=p}}}var aA={getCacheForType:function(n){var s=Nn(rn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Nn(rn).controller.signal}},oA=typeof WeakMap=="function"?WeakMap:Map,ut=0,It=null,$e=null,Qe=0,mt=0,yr=null,Pi=!1,el=!1,cp=!1,Js=0,Yt=0,Li=0,Ka=0,up=0,br=0,tl=0,Vc=null,ir=null,dp=!1,Xd=0,A_=0,Wd=1/0,Jd=null,zi=null,dn=0,Ui=null,nl=null,Zs=0,hp=0,fp=null,I_=null,Pc=0,mp=null;function _r(){return(ut&2)!==0&&Qe!==0?Qe&-Qe:H.T!==null?vp():qn()}function N_(){if(br===0)if((Qe&536870912)===0||Ze){var n=dr;dr<<=1,(dr&3932160)===0&&(dr=262144),br=n}else br=536870912;return n=pr.current,n!==null&&(n.flags|=32),br}function ar(n,s,o){(n===It&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(rl(n,0),Bi(n,Qe,br,!1)),Jn(n,o),((ut&2)===0||n!==It)&&(n===It&&((ut&2)===0&&(Ka|=o),Yt===4&&Bi(n,Qe,br,!1)),vs(n))}function C_(n,s,o){if((ut&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Tn(n,s),h=c?uA(n,s):gp(n,s,!0),p=c;do{if(h===0){el&&!c&&Bi(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!lA(o)){h=gp(n,s,!1),p=!1;continue}if(h===2){if(p=s,n.errorRecoveryDisabledLanes&p)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=n;h=Vc;var j=E.current.memoizedState.isDehydrated;if(j&&(rl(E,_).flags|=256),_=gp(E,_,!1),_!==2){if(cp&&!j){E.errorRecoveryDisabledLanes|=p,Ka|=p,h=4;break e}p=ir,ir=h,p!==null&&(ir===null?ir=p:ir.push.apply(ir,p))}h=_}if(p=!1,h!==2)continue}}if(h===1){rl(n,0),Bi(n,s,0,!0);break}e:{switch(c=n,p=h,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Bi(c,s,br,!Pi);break e;case 2:ir=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Xd+300-pn(),10<h)){if(Bi(c,s,br,!Pi),Fn(c,0,!0)!==0)break e;Zs=s,c.timeoutHandle=av(R_.bind(null,c,o,ir,Jd,dp,s,br,Ka,tl,Pi,p,"Throttled",-0,0),h);break e}R_(c,o,ir,Jd,dp,s,br,Ka,tl,Pi,p,null,-0,0)}}break}while(!0);vs(n)}function R_(n,s,o,c,h,p,_,E,j,$,te,ae,Y,W){if(n.timeoutHandle=-1,ae=s.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yr},w_(s,p,ae);var Te=(p&62914560)===p?Xd-pn():(p&4194048)===p?A_-pn():0;if(Te=$A(ae,Te),Te!==null){Zs=p,n.cancelPendingCommit=Te(L_.bind(null,n,s,p,o,c,h,_,E,j,te,ae,null,Y,W)),Bi(n,p,_,!$);return}}L_(n,s,p,o,c,h,_,E,j)}function lA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],p=h.getSnapshot;h=h.value;try{if(!fr(p(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bi(n,s,o,c){s&=~up,s&=~Ka,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var h=s;0<h;){var p=31-Dt(h),_=1<<p;c[p]=-1,h&=~_}o!==0&&$r(n,o,s)}function Zd(){return(ut&6)===0?(Lc(0),!1):!0}function pp(){if($e!==null){if(mt===0)var n=$e.return;else n=$e,Fs=La=null,Dm(n),Ko=null,vc=0,n=$e;for(;n!==null;)o_(n.alternate,n),n=n.return;$e=null}}function rl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,NA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Zs=0,pp(),It=n,$e=o=Us(n.current,null),Qe=s,mt=0,yr=null,Pi=!1,el=Tn(n,s),cp=!1,tl=br=up=Ka=Li=Yt=0,ir=Vc=null,dp=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var h=31-Dt(c),p=1<<h;s|=n[h],c&=~p}return Js=s,vd(),o}function D_(n,s){Be=null,H.H=Nc,s===$o||s===Nd?(s=Ky(),mt=3):s===_m?(s=Ky(),mt=4):mt=s===Km?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yr=s,$e===null&&(Yt=1,Fd(n,jr(s,n.current)))}function M_(){var n=pr.current;return n===null?!0:(Qe&4194048)===Qe?Lr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===Lr:!1}function k_(){var n=H.H;return H.H=Nc,n===null?Nc:n}function j_(){var n=H.A;return H.A=aA,n}function eh(){Yt=4,Pi||(Qe&4194048)!==Qe&&pr.current!==null||(el=!0),(Li&134217727)===0&&(Ka&134217727)===0||It===null||Bi(It,Qe,br,!1)}function gp(n,s,o){var c=ut;ut|=2;var h=k_(),p=j_();(It!==n||Qe!==s)&&(Jd=null,rl(n,s)),s=!1;var _=Yt;e:do try{if(mt!==0&&$e!==null){var E=$e,j=yr;switch(mt){case 8:pp(),_=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(s=!0);var $=mt;if(mt=0,yr=null,sl(n,E,j,$),o&&el){_=0;break e}break;default:$=mt,mt=0,yr=null,sl(n,E,j,$)}}cA(),_=Yt;break}catch(te){D_(n,te)}while(!0);return s&&n.shellSuspendCounter++,Fs=La=null,ut=c,H.H=h,H.A=p,$e===null&&(It=null,Qe=0,vd()),_}function cA(){for(;$e!==null;)O_($e)}function uA(n,s){var o=ut;ut|=2;var c=k_(),h=j_();It!==n||Qe!==s?(Jd=null,Wd=pn()+500,rl(n,s)):el=Tn(n,s);e:do try{if(mt!==0&&$e!==null){s=$e;var p=yr;t:switch(mt){case 1:mt=0,yr=null,sl(n,s,p,1);break;case 2:case 9:if(Gy(p)){mt=0,yr=null,V_(s);break}s=function(){mt!==2&&mt!==9||It!==n||(mt=7),vs(n)},p.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Gy(p)?(mt=0,yr=null,V_(s)):(mt=0,yr=null,sl(n,s,p,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var E=$e;if(_?xv(_):E.stateNode.complete){mt=0,yr=null;var j=E.sibling;if(j!==null)$e=j;else{var $=E.return;$!==null?($e=$,th($)):$e=null}break t}}mt=0,yr=null,sl(n,s,p,5);break;case 6:mt=0,yr=null,sl(n,s,p,6);break;case 8:pp(),Yt=6;break e;default:throw Error(r(462))}}dA();break}catch(te){D_(n,te)}while(!0);return Fs=La=null,H.H=c,H.A=h,ut=o,$e!==null?0:(It=null,Qe=0,vd(),Yt)}function dA(){for(;$e!==null&&!Ao();)O_($e)}function O_(n){var s=i_(n.alternate,n,Js);n.memoizedProps=n.pendingProps,s===null?th(n):$e=s}function V_(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Zb(o,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=Zb(o,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:Dm(s);default:o_(o,s),s=$e=jy(s,Js),s=i_(o,s,Js)}n.memoizedProps=n.pendingProps,s===null?th(n):$e=s}function sl(n,s,o,c){Fs=La=null,Dm(s),Ko=null,vc=0;var h=s.return;try{if(ZS(n,h,s,o,Qe)){Yt=1,Fd(n,jr(o,n.current)),$e=null;return}}catch(p){if(h!==null)throw $e=h,p;Yt=1,Fd(n,jr(o,n.current)),$e=null;return}s.flags&32768?(Ze||c===1?n=!0:el||(Qe&536870912)!==0?n=!1:(Pi=n=!0,(c===2||c===9||c===3||c===6)&&(c=pr.current,c!==null&&c.tag===13&&(c.flags|=16384))),P_(s,n)):th(s)}function th(n){var s=n;do{if((s.flags&32768)!==0){P_(s,Pi);return}n=s.return;var o=nA(s.alternate,s,Js);if(o!==null){$e=o;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=n}while(s!==null);Yt===0&&(Yt=5)}function P_(n,s){do{var o=rA(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Yt=6,$e=null}function L_(n,s,o,c,h,p,_,E,j){n.cancelPendingCommit=null;do nh();while(dn!==0);if((ut&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=sm,Ta(n,o,p,_,E,j),n===It&&($e=It=null,Qe=0),nl=s,Ui=n,Zs=o,hp=p,fp=h,I_=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,pA(ur,function(){return q_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,h=le.p,le.p=2,_=ut,ut|=4;try{sA(n,s,o)}finally{ut=_,le.p=h,H.T=c}}dn=1,z_(),U_(),B_()}}function z_(){if(dn===1){dn=0;var n=Ui,s=nl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=le.p;le.p=2;var h=ut;ut|=4;try{__(s,n);var p=Np,_=Sy(n.containerInfo),E=p.focusedElem,j=p.selectionRange;if(_!==E&&E&&E.ownerDocument&&Ey(E.ownerDocument.documentElement,E)){if(j!==null&&Zf(E)){var $=j.start,te=j.end;if(te===void 0&&(te=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(te,E.value.length);else{var ae=E.ownerDocument||document,Y=ae&&ae.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Te=E.textContent.length,ke=Math.min(j.start,Te),wt=j.end===void 0?ke:Math.min(j.end,Te);!W.extend&&ke>wt&&(_=wt,wt=ke,ke=_);var z=Ty(E,ke),V=Ty(E,wt);if(z&&V&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==V.node||W.focusOffset!==V.offset)){var G=ae.createRange();G.setStart(z.node,z.offset),W.removeAllRanges(),ke>wt?(W.addRange(G),W.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),W.addRange(G))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var ne=ae[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}mh=!!Ip,Np=Ip=null}finally{ut=h,le.p=c,H.T=o}}n.current=s,dn=2}}function U_(){if(dn===2){dn=0;var n=Ui,s=nl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=le.p;le.p=2;var h=ut;ut|=4;try{m_(n,s.alternate,s)}finally{ut=h,le.p=c,H.T=o}}dn=3}}function B_(){if(dn===4||dn===3){dn=0,Ds();var n=Ui,s=nl,o=Zs,c=I_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dn=5:(dn=0,nl=Ui=null,F_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(zi=null),hr(o),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Wn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=H.T,h=le.p,le.p=2,H.T=null;try{for(var p=n.onRecoverableError,_=0;_<c.length;_++){var E=c[_];p(E.value,{componentStack:E.stack})}}finally{H.T=s,le.p=h}}(Zs&3)!==0&&nh(),vs(n),h=n.pendingLanes,(o&261930)!==0&&(h&42)!==0?n===mp?Pc++:(Pc=0,mp=n):Pc=0,Lc(0)}}function F_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,bc(s)))}function nh(){return z_(),U_(),B_(),q_()}function q_(){if(dn!==5)return!1;var n=Ui,s=hp;hp=0;var o=hr(Zs),c=H.T,h=le.p;try{le.p=32>o?32:o,H.T=null,o=fp,fp=null;var p=Ui,_=Zs;if(dn=0,nl=Ui=null,Zs=0,(ut&6)!==0)throw Error(r(331));var E=ut;if(ut|=4,E_(p.current),x_(p,p.current,_,o),ut=E,Lc(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Wn,p)}catch{}return!0}finally{le.p=h,H.T=c,F_(n,s)}}function H_(n,s,o){s=jr(o,s),s=$m(n.stateNode,s,2),n=ki(n,s,2),n!==null&&(Jn(n,2),vs(n))}function pt(n,s,o){if(n.tag===3)H_(n,n,o);else for(;s!==null;){if(s.tag===3){H_(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(zi===null||!zi.has(c))){n=jr(o,n),o=Gb(2),c=ki(s,o,2),c!==null&&($b(o,c,s,n),Jn(c,2),vs(c));break}}s=s.return}}function yp(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new oA;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(cp=!0,h.add(o),n=hA.bind(null,n,s,o),s.then(n,n))}function hA(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,It===n&&(Qe&o)===o&&(Yt===4||Yt===3&&(Qe&62914560)===Qe&&300>pn()-Xd?(ut&2)===0&&rl(n,0):up|=o,tl===Qe&&(tl=0)),vs(n)}function G_(n,s){s===0&&(s=yi()),n=Oa(n,s),n!==null&&(Jn(n,s),vs(n))}function fA(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),G_(n,o)}function mA(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),G_(n,o)}function pA(n,s){return Nt(n,s)}var rh=null,il=null,bp=!1,sh=!1,_p=!1,Fi=0;function vs(n){n!==il&&n.next===null&&(il===null?rh=il=n:il=il.next=n),sh=!0,bp||(bp=!0,yA())}function Lc(n,s){if(!_p&&sh){_p=!0;do for(var o=!1,c=rh;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var p=0;else{var _=c.suspendedLanes,E=c.pingedLanes;p=(1<<31-Dt(42|n)+1)-1,p&=h&~(_&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Q_(c,p))}else p=Qe,p=Fn(c,c===It?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Tn(c,p)||(o=!0,Q_(c,p));c=c.next}while(o);_p=!1}}function gA(){$_()}function $_(){sh=bp=!1;var n=0;Fi!==0&&IA()&&(n=Fi);for(var s=pn(),o=null,c=rh;c!==null;){var h=c.next,p=K_(c,s);p===0?(c.next=null,o===null?rh=h:o.next=h,h===null&&(il=o)):(o=c,(n!==0||(p&3)!==0)&&(sh=!0)),c=h}dn!==0&&dn!==5||Lc(n),Fi!==0&&(Fi=0)}function K_(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var _=31-Dt(p),E=1<<_,j=h[_];j===-1?((E&o)===0||(E&c)!==0)&&(h[_]=js(E,s)):j<=s&&(n.expiredLanes|=E),p&=~E}if(s=It,o=Qe,o=Fn(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&vn(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Tn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&vn(c),hr(o)){case 2:case 8:o=Ms;break;case 32:o=ur;break;case 268435456:o=Nr;break;default:o=ur}return c=Y_.bind(null,n),o=Nt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&vn(c),n.callbackPriority=2,n.callbackNode=null,2}function Y_(n,s){if(dn!==0&&dn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(nh()&&n.callbackNode!==o)return null;var c=Qe;return c=Fn(n,n===It?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(C_(n,c,s),K_(n,pn()),n.callbackNode!=null&&n.callbackNode===o?Y_.bind(null,n):null)}function Q_(n,s){if(nh())return null;C_(n,s,!0)}function yA(){CA(function(){(ut&6)!==0?Nt(gi,gA):$_()})}function vp(){if(Fi===0){var n=Ho;n===0&&(n=wn,wn<<=1,(wn&261888)===0&&(wn=256)),Fi=n}return Fi}function X_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Co(""+n)}function W_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function bA(n,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var p=X_((h[Gt]||null).action),_=c.submitter;_&&(s=(s=_[Gt]||null)?X_(s.formAction):_.getAttribute("formAction"),s!==null&&(p=s,_=null));var E=new fs("action","action",null,c,h);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fi!==0){var j=_?W_(h,_):new FormData(h);Um(o,{pending:!0,data:j,method:h.method,action:p},null,j)}}else typeof p=="function"&&(E.preventDefault(),j=_?W_(h,_):new FormData(h),Um(o,{pending:!0,data:j,method:h.method,action:p},p,j))},currentTarget:h}]})}}for(var xp=0;xp<rm.length;xp++){var wp=rm[xp],_A=wp.toLowerCase(),vA=wp[0].toUpperCase()+wp.slice(1);Zr(_A,"on"+vA)}Zr(Ny,"onAnimationEnd"),Zr(Cy,"onAnimationIteration"),Zr(Ry,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(VS,"onTransitionRun"),Zr(PS,"onTransitionStart"),Zr(LS,"onTransitionCancel"),Zr(Dy,"onTransitionEnd"),kt("onMouseEnter",["mouseout","mouseover"]),kt("onMouseLeave",["mouseout","mouseover"]),kt("onPointerEnter",["pointerout","pointerover"]),kt("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function J_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],h=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var _=c.length-1;0<=_;_--){var E=c[_],j=E.instance,$=E.currentTarget;if(E=E.listener,j!==p&&h.isPropagationStopped())break e;p=E,h.currentTarget=$;try{p(h)}catch(te){_d(te)}h.currentTarget=null,p=j}else for(_=0;_<c.length;_++){if(E=c[_],j=E.instance,$=E.currentTarget,E=E.listener,j!==p&&h.isPropagationStopped())break e;p=E,h.currentTarget=$;try{p(h)}catch(te){_d(te)}h.currentTarget=null,p=j}}}}function Ke(n,s){var o=s[cs];o===void 0&&(o=s[cs]=new Set);var c=n+"__bubble";o.has(c)||(Z_(s,n,2,!1),o.add(c))}function Tp(n,s,o){var c=0;s&&(c|=4),Z_(o,n,c,s)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Ep(n){if(!n[ih]){n[ih]=!0,Oe.forEach(function(o){o!=="selectionchange"&&(xA.has(o)||Tp(o,!1,n),Tp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ih]||(s[ih]=!0,Tp("selectionchange",!1,s))}}function Z_(n,s,o,c){switch(Nv(s)){case 2:var h=QA;break;case 8:h=XA;break;default:h=zp}o=h.bind(null,s,o,n),h=void 0,!Ia||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,o,{capture:!0,passive:h}):n.addEventListener(s,o,!0):h!==void 0?n.addEventListener(s,o,{passive:h}):n.addEventListener(s,o,!1)}function Sp(n,s,o,c,h){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var E=c.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=c.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=kn(E),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){c=p=_;continue e}E=E.parentNode}}c=c.return}Ti(function(){var $=p,te=Rr(o),ae=[];e:{var Y=My.get(n);if(Y!==void 0){var W=fs,Te=n;switch(n){case"keypress":if(Ca(o)===0)break e;case"keydown":case"keyup":W=gd;break;case"focusin":Te="focus",W=Da;break;case"focusout":Te="blur",W=Da;break;case"beforeblur":case"afterblur":W=Da;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=b;break;case Ny:case Cy:case Ry:W=cd;break;case Dy:W=I;break;case"scroll":case"scrollend":W=cc;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=zs;break;case"toggle":case"beforetoggle":W=Ue}var ke=(s&4)!==0,wt=!ke&&(n==="scroll"||n==="scrollend"),z=ke?Y!==null?Y+"Capture":null:Y;ke=[];for(var V=$,G;V!==null;){var ne=V;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||z===null||(ne=Qr(V,z),ne!=null&&ke.push(Uc(V,ne,G))),wt)break;V=V.return}0<ke.length&&(Y=new W(Y,Te,null,o,te),ae.push({event:Y,listeners:ke}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Y&&o!==ac&&(Te=o.relatedTarget||o.fromElement)&&(kn(Te)||Te[Zn]))break e;if((W||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Te=o.relatedTarget||o.toElement,W=$,Te=Te?kn(Te):null,Te!==null&&(wt=l(Te),ke=Te.tag,Te!==wt||ke!==5&&ke!==27&&ke!==6)&&(Te=null)):(W=null,Te=$),W!==Te)){if(ke=uc,ne="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ke=zs,ne="onPointerLeave",z="onPointerEnter",V="pointer"),wt=W==null?Y:ie(W),G=Te==null?Y:ie(Te),Y=new ke(ne,V+"leave",W,o,te),Y.target=wt,Y.relatedTarget=G,ne=null,kn(te)===$&&(ke=new ke(z,V+"enter",Te,o,te),ke.target=G,ke.relatedTarget=wt,ne=ke),wt=ne,W&&Te)t:{for(ke=wA,z=W,V=Te,G=0,ne=z;ne;ne=ke(ne))G++;ne=0;for(var Re=V;Re;Re=ke(Re))ne++;for(;0<G-ne;)z=ke(z),G--;for(;0<ne-G;)V=ke(V),ne--;for(;G--;){if(z===V||V!==null&&z===V.alternate){ke=z;break t}z=ke(z),V=ke(V)}ke=null}else ke=null;W!==null&&ev(ae,Y,W,ke,!1),Te!==null&&wt!==null&&ev(ae,wt,Te,ke,!0)}}e:{if(Y=$?ie($):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var at=yy;else if(py(Y))if(by)at=kS;else{at=DS;var Ie=RS}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&No($.elementType)&&(at=yy):at=MS;if(at&&(at=at(n,$))){gy(ae,at,o,te);break e}Ie&&Ie(n,Y,$),n==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&rc(Y,"number",Y.value)}switch(Ie=$?ie($):window,n){case"focusin":(py(Ie)||Ie.contentEditable==="true")&&(Vo=Ie,em=$,pc=null);break;case"focusout":pc=em=Vo=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,Ay(ae,o,te);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Ay(ae,o,te)}var qe;if(ct)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Oo?Ma(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(gs&&o.locale!=="ko"&&(Oo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Oo&&(qe=lc()):(hs=te,oc="value"in hs?hs.value:hs.textContent,Oo=!0)),Ie=ah($,Xe),0<Ie.length&&(Xe=new ps(Xe,n,null,o,te),ae.push({event:Xe,listeners:Ie}),qe?Xe.data=qe:(qe=jo(o),qe!==null&&(Xe.data=qe)))),(qe=Mr?AS(n,o):IS(n,o))&&(Xe=ah($,"onBeforeInput"),0<Xe.length&&(Ie=new ps("onBeforeInput","beforeinput",null,o,te),ae.push({event:Ie,listeners:Xe}),Ie.data=qe)),bA(ae,n,$,o,te)}J_(ae,s)})}function Uc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ah(n,s){for(var o=s+"Capture",c=[];n!==null;){var h=n,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Qr(n,o),h!=null&&c.unshift(Uc(n,h,p)),h=Qr(n,s),h!=null&&c.push(Uc(n,h,p))),n.tag===3)return c;n=n.return}return[]}function wA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ev(n,s,o,c,h){for(var p=s._reactName,_=[];o!==null&&o!==c;){var E=o,j=E.alternate,$=E.stateNode;if(E=E.tag,j!==null&&j===c)break;E!==5&&E!==26&&E!==27||$===null||(j=$,h?($=Qr(o,p),$!=null&&_.unshift(Uc(o,$,j))):h||($=Qr(o,p),$!=null&&_.push(Uc(o,$,j)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var TA=/\r\n?/g,EA=/\u0000|\uFFFD/g;function tv(n){return(typeof n=="string"?n:""+n).replace(TA,`
`).replace(EA,"")}function nv(n,s){return s=tv(s),tv(n)===s}function xt(n,s,o,c,h,p){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||tr(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&tr(n,""+c);break;case"className":st(n,"class",c);break;case"tabIndex":st(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":st(n,o,c);break;case"style":ic(n,c,p);break;case"data":if(s!=="object"){st(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Co(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&xt(n,s,"name",h.name,h,null),xt(n,s,"formEncType",h.formEncType,h,null),xt(n,s,"formMethod",h.formMethod,h,null),xt(n,s,"formTarget",h.formTarget,h,null)):(xt(n,s,"encType",h.encType,h,null),xt(n,s,"method",h.method,h,null),xt(n,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Co(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Yr);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Co(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),lt(n,"popover",c);break;case"xlinkActuate":At(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":At(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":At(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":At(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":At(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":At(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":At(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":At(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":At(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":lt(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ad.get(o)||o,lt(n,o,c))}}function Ap(n,s,o,c,h,p){switch(o){case"style":ic(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?tr(n,c):(typeof c=="number"||typeof c=="bigint")&&tr(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ht.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),p=n[Gt]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,h),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,h);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):lt(n,o,c)}}}function Rn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,h=!1,p;for(p in o)if(o.hasOwnProperty(p)){var _=o[p];if(_!=null)switch(p){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(n,s,p,_,o,null)}}h&&xt(n,s,"srcSet",o.srcSet,o,null),c&&xt(n,s,"src",o.src,o,null);return;case"input":Ke("invalid",n);var E=p=_=h=null,j=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var te=o[c];if(te!=null)switch(c){case"name":h=te;break;case"type":_=te;break;case"checked":j=te;break;case"defaultChecked":$=te;break;case"value":p=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:xt(n,s,c,te,o,null)}}rd(n,p,E,j,$,_,h,!1);return;case"select":Ke("invalid",n),c=_=p=null;for(h in o)if(o.hasOwnProperty(h)&&(E=o[h],E!=null))switch(h){case"value":p=E;break;case"defaultValue":_=E;break;case"multiple":c=E;default:xt(n,s,h,E,o,null)}s=p,o=_,n.multiple=!!c,s!=null?_i(n,!!c,s,!1):o!=null&&_i(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),p=h=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":c=E;break;case"defaultValue":h=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:xt(n,s,_,E,o,null)}vi(n,c,h,p);return;case"option":for(j in o)o.hasOwnProperty(j)&&(c=o[j],c!=null)&&(j==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":xt(n,s,j,c,o,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<zc.length;c++)Ke(zc[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(n,s,$,c,o,null)}return;default:if(No(s)){for(te in o)o.hasOwnProperty(te)&&(c=o[te],c!==void 0&&Ap(n,s,te,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&xt(n,s,E,c,o,null))}function SA(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,_=null,E=null,j=null,$=null,te=null;for(W in o){var ae=o[W];if(o.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=ae;default:c.hasOwnProperty(W)||xt(n,s,W,null,c,ae)}}for(var Y in c){var W=c[Y];if(ae=o[Y],c.hasOwnProperty(Y)&&(W!=null||ae!=null))switch(Y){case"type":p=W;break;case"name":h=W;break;case"checked":$=W;break;case"defaultChecked":te=W;break;case"value":_=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:W!==ae&&xt(n,s,Y,W,c,ae)}}Io(n,_,E,j,$,te,p,h);return;case"select":W=_=E=Y=null;for(p in o)if(j=o[p],o.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":W=j;default:c.hasOwnProperty(p)||xt(n,s,p,null,c,j)}for(h in c)if(p=c[h],j=o[h],c.hasOwnProperty(h)&&(p!=null||j!=null))switch(h){case"value":Y=p;break;case"defaultValue":E=p;break;case"multiple":_=p;default:p!==j&&xt(n,s,h,p,c,j)}s=E,o=_,c=W,Y!=null?_i(n,!!o,Y,!1):!!c!=!!o&&(s!=null?_i(n,!!o,s,!0):_i(n,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(E in o)if(h=o[E],o.hasOwnProperty(E)&&h!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:xt(n,s,E,null,c,h)}for(_ in c)if(h=c[_],p=o[_],c.hasOwnProperty(_)&&(h!=null||p!=null))switch(_){case"value":Y=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==p&&xt(n,s,_,h,c,p)}sd(n,Y,W);return;case"option":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:xt(n,s,Te,null,c,Y));for(j in c)Y=c[j],W=o[j],c.hasOwnProperty(j)&&Y!==W&&(Y!=null||W!=null)&&(j==="selected"?n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":xt(n,s,j,Y,c,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in o)Y=o[ke],o.hasOwnProperty(ke)&&Y!=null&&!c.hasOwnProperty(ke)&&xt(n,s,ke,null,c,Y);for($ in c)if(Y=c[$],W=o[$],c.hasOwnProperty($)&&Y!==W&&(Y!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:xt(n,s,$,Y,c,W)}return;default:if(No(s)){for(var wt in o)Y=o[wt],o.hasOwnProperty(wt)&&Y!==void 0&&!c.hasOwnProperty(wt)&&Ap(n,s,wt,void 0,c,Y);for(te in c)Y=c[te],W=o[te],!c.hasOwnProperty(te)||Y===W||Y===void 0&&W===void 0||Ap(n,s,te,Y,c,W);return}}for(var z in o)Y=o[z],o.hasOwnProperty(z)&&Y!=null&&!c.hasOwnProperty(z)&&xt(n,s,z,null,c,Y);for(ae in c)Y=c[ae],W=o[ae],!c.hasOwnProperty(ae)||Y===W||Y==null&&W==null||xt(n,s,ae,Y,c,W)}function rv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var h=o[c],p=h.transferSize,_=h.initiatorType,E=h.duration;if(p&&E&&rv(_)){for(_=0,E=h.responseEnd,c+=1;c<o.length;c++){var j=o[c],$=j.startTime;if($>E)break;var te=j.transferSize,ae=j.initiatorType;te&&rv(ae)&&(j=j.responseEnd,_+=te*(j<E?1:(E-$)/(j-$)))}if(--c,s+=8*(p+_)/(h.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ip=null,Np=null;function oh(n){return n.nodeType===9?n:n.ownerDocument}function sv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Cp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rp=null;function IA(){var n=window.event;return n&&n.type==="popstate"?n===Rp?!1:(Rp=n,!0):(Rp=null,!1)}var av=typeof setTimeout=="function"?setTimeout:void 0,NA=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,CA=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(n){return ov.resolve(null).then(n).catch(RA)}:av;function RA(n){setTimeout(function(){throw n})}function qi(n){return n==="head"}function lv(n,s){var o=s,c=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(h),cl(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Bc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Bc(o);for(var p=o.firstChild;p;){var _=p.nextSibling,E=p.nodeName;p[et]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=_}}else o==="body"&&Bc(n.ownerDocument.body);o=h}while(o);cl(s)}function cv(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Dp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dp(o),Cr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function DA(n,s,o,c){for(;n.nodeType===1;){var h=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[et])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=zr(n.nextSibling),n===null)break}return null}function MA(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=zr(n.nextSibling),n===null))return null;return n}function uv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=zr(n.nextSibling),n===null))return null;return n}function Mp(n){return n.data==="$?"||n.data==="$~"}function kp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function kA(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function zr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var jp=null;function dv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return zr(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function hv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function fv(n,s,o){switch(s=oh(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Bc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Cr(n)}var Ur=new Map,mv=new Set;function lh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ei=le.d;le.d={f:jA,r:OA,D:VA,C:PA,L:LA,m:zA,X:BA,S:UA,M:FA};function jA(){var n=ei.f(),s=Zd();return n||s}function OA(n){var s=St(n);s!==null&&s.tag===5&&s.type==="form"?Db(s):ei.r(n)}var al=typeof document>"u"?null:document;function pv(n,s,o){var c=al;if(c&&typeof s=="string"&&s){var h=er(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),mv.has(h)||(mv.add(h),n={rel:n,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),Rn(s,"link",n),ge(s),c.head.appendChild(s)))}}function VA(n){ei.D(n),pv("dns-prefetch",n,null)}function PA(n,s){ei.C(n,s),pv("preconnect",n,s)}function LA(n,s,o){ei.L(n,s,o);var c=al;if(c&&n&&s){var h='link[rel="preload"][as="'+er(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+er(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+er(o.imageSizes)+'"]')):h+='[href="'+er(n)+'"]';var p=h;switch(s){case"style":p=ol(n);break;case"script":p=ll(n)}Ur.has(p)||(n=w({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Ur.set(p,n),c.querySelector(h)!==null||s==="style"&&c.querySelector(Fc(p))||s==="script"&&c.querySelector(qc(p))||(s=c.createElement("link"),Rn(s,"link",n),ge(s),c.head.appendChild(s)))}}function zA(n,s){ei.m(n,s);var o=al;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+er(c)+'"][href="'+er(n)+'"]',p=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ll(n)}if(!Ur.has(p)&&(n=w({rel:"modulepreload",href:n},s),Ur.set(p,n),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(qc(p)))return}c=o.createElement("link"),Rn(c,"link",n),ge(c),o.head.appendChild(c)}}}function UA(n,s,o){ei.S(n,s,o);var c=al;if(c&&n){var h=xe(c).hoistableStyles,p=ol(n);s=s||"default";var _=h.get(p);if(!_){var E={loading:0,preload:null};if(_=c.querySelector(Fc(p)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Ur.get(p))&&Op(n,o);var j=_=c.createElement("link");ge(j),Rn(j,"link",n),j._p=new Promise(function($,te){j.onload=$,j.onerror=te}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ch(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(p,_)}}}function BA(n,s){ei.X(n,s);var o=al;if(o&&n){var c=xe(o).hoistableScripts,h=ll(n),p=c.get(h);p||(p=o.querySelector(qc(h)),p||(n=w({src:n,async:!0},s),(s=Ur.get(h))&&Vp(n,s),p=o.createElement("script"),ge(p),Rn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function FA(n,s){ei.M(n,s);var o=al;if(o&&n){var c=xe(o).hoistableScripts,h=ll(n),p=c.get(h);p||(p=o.querySelector(qc(h)),p||(n=w({src:n,async:!0,type:"module"},s),(s=Ur.get(h))&&Vp(n,s),p=o.createElement("script"),ge(p),Rn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function gv(n,s,o,c){var h=(h=be.current)?lh(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ol(o.href),o=xe(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ol(o.href);var p=xe(h).hoistableStyles,_=p.get(n);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,_),(p=h.querySelector(Fc(n)))&&!p._p&&(_.instance=p,_.state.loading=5),Ur.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ur.set(n,o),p||qA(h,n,o,_.state))),s&&c===null)throw Error(r(528,""));return _}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ll(o),o=xe(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ol(n){return'href="'+er(n)+'"'}function Fc(n){return'link[rel="stylesheet"]['+n+"]"}function yv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function qA(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Rn(s,"link",o),ge(s),n.head.appendChild(s))}function ll(n){return'[src="'+er(n)+'"]'}function qc(n){return"script[async]"+n}function bv(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+er(o.href)+'"]');if(c)return s.instance=c,ge(c),c;var h=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),ge(c),Rn(c,"style",h),ch(c,o.precedence,n),s.instance=c;case"stylesheet":h=ol(o.href);var p=n.querySelector(Fc(h));if(p)return s.state.loading|=4,s.instance=p,ge(p),p;c=yv(o),(h=Ur.get(h))&&Op(c,h),p=(n.ownerDocument||n).createElement("link"),ge(p);var _=p;return _._p=new Promise(function(E,j){_.onload=E,_.onerror=j}),Rn(p,"link",c),s.state.loading|=4,ch(p,o.precedence,n),s.instance=p;case"script":return p=ll(o.src),(h=n.querySelector(qc(p)))?(s.instance=h,ge(h),h):(c=o,(h=Ur.get(p))&&(c=w({},o),Vp(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),ge(h),Rn(h,"link",c),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ch(c,o.precedence,n));return s.instance}function ch(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,p=h,_=0;_<c.length;_++){var E=c[_];if(E.dataset.precedence===s)p=E;else if(p!==h)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Op(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Vp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var uh=null;function _v(n,s,o){if(uh===null){var c=new Map,h=uh=new Map;h.set(o,c)}else h=uh,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),h=0;h<o.length;h++){var p=o[h];if(!(p[et]||p[zt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(s)||"";_=n+_;var E=c.get(_);E?E.push(p):c.set(_,[p])}}return c}function vv(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function HA(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function GA(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=ol(c.href),p=s.querySelector(Fc(h));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=dh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,ge(p);return}p=s.ownerDocument||s,c=yv(c),(h=Ur.get(h))&&Op(c,h),p=p.createElement("link"),ge(p);var _=p;_._p=new Promise(function(E,j){_.onload=E,_.onerror=j}),Rn(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=dh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Pp=0;function $A(n,s){return n.stylesheets&&n.count===0&&fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&fh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Pp===0&&(Pp=62500*AA());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&fh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Pp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function fh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,s.forEach(KA,n),hh=null,dh.call(n))}function KA(n,s){if(!(s.state.loading&4)){var o=hh.get(n);if(o)var c=o.get(null);else{o=new Map,hh.set(n,o);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var _=h[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}h=s.instance,_=h.getAttribute("data-precedence"),p=o.get(_)||c,p===c&&o.set(null,h),o.set(_,h),this.count++,c=dh.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),p?p.parentNode.insertBefore(h,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Hc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function YA(n,s,o,c,h,p,_,E,j){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mn(0),this.hiddenUpdates=Mn(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function wv(n,s,o,c,h,p,_,E,j,$,te,ae){return n=new YA(n,s,o,_,j,$,te,ae,E),s=1,p===!0&&(s|=24),p=mr(3,null,null,s),n.current=p,p.stateNode=n,s=gm(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:s},vm(p),n}function Tv(n){return n?(n=zo,n):zo}function Ev(n,s,o,c,h,p){h=Tv(h),c.context===null?c.context=h:c.pendingContext=h,c=Mi(s),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=ki(n,c,s),o!==null&&(ar(o,n,s),wc(o,n,s))}function Sv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Lp(n,s){Sv(n,s),(n=n.alternate)&&Sv(n,s)}function Av(n){if(n.tag===13||n.tag===31){var s=Oa(n,67108864);s!==null&&ar(s,n,67108864),Lp(n,67108864)}}function Iv(n){if(n.tag===13||n.tag===31){var s=_r();s=Kr(s);var o=Oa(n,s);o!==null&&ar(o,n,s),Lp(n,s)}}var mh=!0;function QA(n,s,o,c){var h=H.T;H.T=null;var p=le.p;try{le.p=2,zp(n,s,o,c)}finally{le.p=p,H.T=h}}function XA(n,s,o,c){var h=H.T;H.T=null;var p=le.p;try{le.p=8,zp(n,s,o,c)}finally{le.p=p,H.T=h}}function zp(n,s,o,c){if(mh){var h=Up(c);if(h===null)Sp(n,s,c,ph,o),Cv(n,c);else if(JA(h,n,s,o,c))c.stopPropagation();else if(Cv(n,c),s&4&&-1<WA.indexOf(n)){for(;h!==null;){var p=St(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=Bn(p.pendingLanes);if(_!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var j=1<<31-Dt(_);E.entanglements[1]|=j,_&=~j}vs(p),(ut&6)===0&&(Wd=pn()+500,Lc(0))}}break;case 31:case 13:E=Oa(p,2),E!==null&&ar(E,p,2),Zd(),Lp(p,2)}if(p=Up(c),p===null&&Sp(n,s,c,ph,o),p===h)break;h=p}h!==null&&c.stopPropagation()}else Sp(n,s,c,null,o)}}function Up(n){return n=Rr(n),Bp(n)}var ph=null;function Bp(n){if(ph=null,n=kn(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=m(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ph=n,null}function Nv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case gi:return 2;case Ms:return 8;case ur:case xa:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var Fp=!1,Hi=null,Gi=null,$i=null,Gc=new Map,$c=new Map,Ki=[],WA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cv(n,s){switch(n){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Gc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(s.pointerId)}}function Kc(n,s,o,c,h,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},s!==null&&(s=St(s),s!==null&&Av(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function JA(n,s,o,c,h){switch(s){case"focusin":return Hi=Kc(Hi,n,s,o,c,h),!0;case"dragenter":return Gi=Kc(Gi,n,s,o,c,h),!0;case"mouseover":return $i=Kc($i,n,s,o,c,h),!0;case"pointerover":var p=h.pointerId;return Gc.set(p,Kc(Gc.get(p)||null,n,s,o,c,h)),!0;case"gotpointercapture":return p=h.pointerId,$c.set(p,Kc($c.get(p)||null,n,s,o,c,h)),!0}return!1}function Rv(n){var s=kn(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,Mt(n.priority,function(){Iv(o)});return}}else if(s===31){if(s=m(o),s!==null){n.blockedOn=s,Mt(n.priority,function(){Iv(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Up(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);ac=c,o.target.dispatchEvent(c),ac=null}else return s=St(o),s!==null&&Av(s),n.blockedOn=o,!1;s.shift()}return!0}function Dv(n,s,o){gh(n)&&o.delete(s)}function ZA(){Fp=!1,Hi!==null&&gh(Hi)&&(Hi=null),Gi!==null&&gh(Gi)&&(Gi=null),$i!==null&&gh($i)&&($i=null),Gc.forEach(Dv),$c.forEach(Dv)}function yh(n,s){n.blockedOn===s&&(n.blockedOn=null,Fp||(Fp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ZA)))}var bh=null;function Mv(n){bh!==n&&(bh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){bh===n&&(bh=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],h=n[s+2];if(typeof c!="function"){if(Bp(c||o)===null)continue;break}var p=St(o);p!==null&&(n.splice(s,3),s-=3,Um(p,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function cl(n){function s(j){return yh(j,n)}Hi!==null&&yh(Hi,n),Gi!==null&&yh(Gi,n),$i!==null&&yh($i,n),Gc.forEach(s),$c.forEach(s);for(var o=0;o<Ki.length;o++){var c=Ki[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ki.length&&(o=Ki[0],o.blockedOn===null);)Rv(o),o.blockedOn===null&&Ki.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],p=o[c+1],_=h[Gt]||null;if(typeof p=="function")_||Mv(o);else if(_){var E=null;if(p&&p.hasAttribute("formAction")){if(h=p,_=p[Gt]||null)E=_.formAction;else if(Bp(h)!==null)continue}else E=_.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),Mv(o)}}}function kv(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function qp(n){this._internalRoot=n}_h.prototype.render=qp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=_r();Ev(o,c,n,s,null,null)},_h.prototype.unmount=qp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ev(n.current,2,null,n,null,null),Zd(),s[Zn]=null}};function _h(n){this._internalRoot=n}_h.prototype.unstable_scheduleHydration=function(n){if(n){var s=qn();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ki.length&&s!==0&&s<Ki[o].priority;o++);Ki.splice(o,0,n),o===0&&Rv(n)}};var jv=e.version;if(jv!=="19.2.4")throw Error(r(527,jv,"19.2.4"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var eI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{Wn=vh.inject(eI),Wt=vh}catch{}}return Qc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",h=Bb,p=Fb,_=qb;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=wv(n,1,!1,null,null,o,c,null,h,p,_,kv),n[Zn]=s.current,Ep(n),new qp(s)},Qc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,h="",p=Bb,_=Fb,E=qb,j=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),s=wv(n,1,!0,s,o??null,c,h,j,p,_,E,kv),s.context=Tv(null),o=s.current,c=_r(),c=Kr(c),h=Mi(c),h.callback=null,ki(o,h,c),o=c,s.current.lanes=o,Jn(s,o),vs(s),n[Zn]=s.current,Ep(n),new _h(s)},Qc.version="19.2.4",Qc}var Hv;function hI(){if(Hv)return $p.exports;Hv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),$p.exports=dI(),$p.exports}var fI=hI();const mI="modulepreload",pI=function(i){return"/themesTaskmanager/"+i},Gv={},Bu=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=u?.nonce||u?.getAttribute("nonce");a=g(t.map(y=>{if(y=pI(y),y in Gv)return;Gv[y]=!0;const v=y.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":mI,v||(T.as="script"),T.crossOrigin="",T.href=y,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((N,P)=>{T.addEventListener("load",N),T.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return a.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},gI=()=>{};var $v={};const Jw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},yI=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],u=i[t++],m=i[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=i[t++],u=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],u=a+1<i.length,m=u?i[a+1]:0,g=a+2<i.length,y=g?i[a+2]:0,v=l>>2,w=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,N=y&63;g||(N=64,u||(T=64)),r.push(t[v],t[w],t[T],t[N])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Jw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):yI(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],m=a<i.length?t[i.charAt(a)]:0;++a;const y=a<i.length?t[i.charAt(a)]:64;++a;const w=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||m==null||y==null||w==null)throw new bI;const T=l<<2|m>>4;if(r.push(T),y!==64){const N=m<<4&240|y>>2;if(r.push(N),w!==64){const P=y<<6&192|w;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class bI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _I=function(i){const e=Jw(i);return Zw.encodeByteArray(e,!0)},Kh=function(i){return _I(i).replace(/\./g,"")},e1=function(i){try{return Zw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function t1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const vI=()=>t1().__FIREBASE_DEFAULTS__,xI=()=>{if(typeof process>"u"||typeof $v>"u")return;const i=$v.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},wI=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&e1(i[1]);return e&&JSON.parse(e)},vf=()=>{try{return gI()||vI()||xI()||wI()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},n1=i=>vf()?.emulatorHosts?.[i],TI=i=>{const e=n1(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},r1=()=>vf()?.config,s1=i=>vf()?.[`_${i}`];class EI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Eo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zg(i){return(await fetch(i,{credentials:"include"})).ok}function SI(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Kh(JSON.stringify(t)),Kh(JSON.stringify(u)),""].join(".")}const cu={};function AI(){const i={prod:[],emulator:[]};for(const e of Object.keys(cu))cu[e]?i.emulator.push(e):i.prod.push(e);return i}function II(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Kv=!1;function i1(i,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||cu[i]===e||cu[i]||Kv)return;cu[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=AI().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Kv=!0,u()},T}function v(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=II(r),N=t("text"),P=document.getElementById(N)||document.createElement("span"),K=t("learnmore"),U=document.getElementById(K)||document.createElement("a"),B=t("preprendIcon"),Z=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;m(Q),v(U,K);const oe=y();g(Z,B),Q.append(Z,P,U,oe),document.body.appendChild(Q)}l?(P.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function a1(){const i=vf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RI(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function DI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function o1(){return!a1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l1(){return!a1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function c1(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const jI="FirebaseError";class hi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jI,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?OI(l,r):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new hi(a,m,r)}}function OI(i,e){return i.replace(VI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const VI=/\{\$([^}]+)}/g;function PI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ai(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],u=e[a];if(Yv(l)&&Yv(u)){if(!ai(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Yv(i){return i!==null&&typeof i=="object"}function qu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function ru(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function LI(i,e){const t=new zI(i,e);return t.subscribe.bind(t)}class zI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");UI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Xp),a.error===void 0&&(a.error=Xp),a.complete===void 0&&(a.complete=Xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Xp(){}function fn(i){return i&&i._delegate?i._delegate:i}class uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qa="[DEFAULT]";class BI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new EI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qI(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FI(i){return i===Qa?void 0:i}function qI(i){return i.instantiationMode==="EAGER"}class HI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var We;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(We||(We={}));const GI={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},$I=We.INFO,KI={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},YI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=KI[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e0{constructor(e){this.name=e,this._logLevel=$I,this._logHandler=YI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const QI=(i,e)=>e.some(t=>i instanceof t);let Qv,Xv;function XI(){return Qv||(Qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u1=new WeakMap,fg=new WeakMap,d1=new WeakMap,Wp=new WeakMap,t0=new WeakMap;function JI(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(sa(i.result)),a()},u=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&u1.set(t,i)}).catch(()=>{}),t0.set(e,i),e}function ZI(i){if(fg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});fg.set(i,e)}let mg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return fg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||d1.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function e2(i){mg=i(mg)}function t2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Jp(this),e,...t);return d1.set(r,e.sort?e.sort():[e]),sa(r)}:WI().includes(i)?function(...e){return i.apply(Jp(this),e),sa(u1.get(this))}:function(...e){return sa(i.apply(Jp(this),e))}}function n2(i){return typeof i=="function"?t2(i):(i instanceof IDBTransaction&&ZI(i),QI(i,XI())?new Proxy(i,mg):i)}function sa(i){if(i instanceof IDBRequest)return JI(i);if(Wp.has(i))return Wp.get(i);const e=n2(i);return e!==i&&(Wp.set(i,e),t0.set(e,i)),e}const Jp=i=>t0.get(i);function r2(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(i,e),m=sa(u);return r&&u.addEventListener("upgradeneeded",g=>{r(sa(u.result),g.oldVersion,g.newVersion,sa(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const s2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],Zp=new Map;function Wv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Zp.get(e))return Zp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=i2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||s2.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&g.done]))[0]};return Zp.set(e,l),l}e2(i=>({...i,get:(e,t,r)=>Wv(e,t)||i.get(e,t,r),has:(e,t)=>!!Wv(e,t)||i.has(e,t)}));class a2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(o2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function o2(i){return i.getComponent()?.type==="VERSION"}const pg="@firebase/app",Jv="0.14.8";const oi=new e0("@firebase/app"),l2="@firebase/app-compat",c2="@firebase/analytics-compat",u2="@firebase/analytics",d2="@firebase/app-check-compat",h2="@firebase/app-check",f2="@firebase/auth",m2="@firebase/auth-compat",p2="@firebase/database",g2="@firebase/data-connect",y2="@firebase/database-compat",b2="@firebase/functions",_2="@firebase/functions-compat",v2="@firebase/installations",x2="@firebase/installations-compat",w2="@firebase/messaging",T2="@firebase/messaging-compat",E2="@firebase/performance",S2="@firebase/performance-compat",A2="@firebase/remote-config",I2="@firebase/remote-config-compat",N2="@firebase/storage",C2="@firebase/storage-compat",R2="@firebase/firestore",D2="@firebase/ai",M2="@firebase/firestore-compat",k2="firebase",j2="12.9.0";const gg="[DEFAULT]",O2={[pg]:"fire-core",[l2]:"fire-core-compat",[u2]:"fire-analytics",[c2]:"fire-analytics-compat",[h2]:"fire-app-check",[d2]:"fire-app-check-compat",[f2]:"fire-auth",[m2]:"fire-auth-compat",[p2]:"fire-rtdb",[g2]:"fire-data-connect",[y2]:"fire-rtdb-compat",[b2]:"fire-fn",[_2]:"fire-fn-compat",[v2]:"fire-iid",[x2]:"fire-iid-compat",[w2]:"fire-fcm",[T2]:"fire-fcm-compat",[E2]:"fire-perf",[S2]:"fire-perf-compat",[A2]:"fire-rc",[I2]:"fire-rc-compat",[N2]:"fire-gcs",[C2]:"fire-gcs-compat",[R2]:"fire-fst",[M2]:"fire-fst-compat",[D2]:"fire-vertex","fire-js":"fire-js",[k2]:"fire-js-all"};const xu=new Map,V2=new Map,yg=new Map;function Zv(i,e){try{i.container.addComponent(e)}catch(t){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Cl(i){const e=i.name;if(yg.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;yg.set(e,i);for(const t of xu.values())Zv(t,i);for(const t of V2.values())Zv(t,i);return!0}function xf(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function wr(i){return i==null?!1:i.settings!==void 0}const P2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new Fu("app","Firebase",P2);class L2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}const Kl=j2;function n0(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:gg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=r1()),!t)throw ia.create("no-options");const l=xu.get(a);if(l){if(ai(t,l.options)&&ai(r,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new HI(a);for(const g of yg.values())u.addComponent(g);const m=new L2(t,r,u);return xu.set(a,m),m}function r0(i=gg){const e=xu.get(i);if(!e&&i===gg&&r1())return n0();if(!e)throw ia.create("no-app",{appName:i});return e}function z2(){return Array.from(xu.values())}function aa(i,e,t){let r=O2[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(u.join(" "));return}Cl(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const U2="firebase-heartbeat-database",B2=1,wu="firebase-heartbeat-store";let eg=null;function h1(){return eg||(eg=r2(U2,B2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ia.create("idb-open",{originalErrorMessage:i.message})})),eg}async function F2(i){try{const t=(await h1()).transaction(wu),r=await t.objectStore(wu).get(f1(i));return await t.done,r}catch(e){if(e instanceof hi)oi.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e?.message});oi.warn(t.message)}}}async function ex(i,e){try{const r=(await h1()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,f1(i)),await r.done}catch(t){if(t instanceof hi)oi.warn(t.message);else{const r=ia.create("idb-set",{originalErrorMessage:t?.message});oi.warn(r.message)}}}function f1(i){return`${i.name}!${i.options.appId}`}const q2=1024,H2=30;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new K2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>H2){const a=Y2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){oi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tx(),{heartbeatsToSend:t,unsentEntries:r}=$2(this._heartbeatsCache.heartbeats),a=Kh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return oi.warn(e),""}}}function tx(){return new Date().toISOString().substring(0,10)}function $2(i,e=q2){const t=[];let r=i.slice();for(const a of i){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),nx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),nx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class K2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c1()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await F2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nx(i){return Kh(JSON.stringify({version:2,heartbeats:i})).length}function Y2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function Q2(i){Cl(new uo("platform-logger",e=>new a2(e),"PRIVATE")),Cl(new uo("heartbeat",e=>new G2(e),"PRIVATE")),aa(pg,Jv,i),aa(pg,Jv,"esm2020"),aa("fire-js","")}Q2("");var rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,m1;(function(){var i;function e(S,A){function C(){}C.prototype=A.prototype,S.F=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(k,D,L){for(var R=Array(arguments.length-2),me=2;me<arguments.length;me++)R[me-2]=arguments[me];return A.prototype[D].apply(k,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,A,C){C||(C=0);const k=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)k[D]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(D=0;D<16;++D)k[D]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],D=S.g[2];let L=S.g[3],R;R=A+(L^C&(D^L))+k[0]+3614090360&4294967295,A=C+(R<<7&4294967295|R>>>25),R=L+(D^A&(C^D))+k[1]+3905402710&4294967295,L=A+(R<<12&4294967295|R>>>20),R=D+(C^L&(A^C))+k[2]+606105819&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(A^D&(L^A))+k[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=A+(L^C&(D^L))+k[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=L+(D^A&(C^D))+k[5]+1200080426&4294967295,L=A+(R<<12&4294967295|R>>>20),R=D+(C^L&(A^C))+k[6]+2821735955&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(A^D&(L^A))+k[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=A+(L^C&(D^L))+k[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=L+(D^A&(C^D))+k[9]+2336552879&4294967295,L=A+(R<<12&4294967295|R>>>20),R=D+(C^L&(A^C))+k[10]+4294925233&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(A^D&(L^A))+k[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=A+(L^C&(D^L))+k[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=L+(D^A&(C^D))+k[13]+4254626195&4294967295,L=A+(R<<12&4294967295|R>>>20),R=D+(C^L&(A^C))+k[14]+2792965006&4294967295,D=L+(R<<17&4294967295|R>>>15),R=C+(A^D&(L^A))+k[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=A+(D^L&(C^D))+k[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(A^C))+k[6]+3225465664&4294967295,L=A+(R<<9&4294967295|R>>>23),R=D+(A^C&(L^A))+k[11]+643717713&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^A&(D^L))+k[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=A+(D^L&(C^D))+k[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(A^C))+k[10]+38016083&4294967295,L=A+(R<<9&4294967295|R>>>23),R=D+(A^C&(L^A))+k[15]+3634488961&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^A&(D^L))+k[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=A+(D^L&(C^D))+k[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(A^C))+k[14]+3275163606&4294967295,L=A+(R<<9&4294967295|R>>>23),R=D+(A^C&(L^A))+k[3]+4107603335&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^A&(D^L))+k[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=A+(D^L&(C^D))+k[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=L+(C^D&(A^C))+k[2]+4243563512&4294967295,L=A+(R<<9&4294967295|R>>>23),R=D+(A^C&(L^A))+k[7]+1735328473&4294967295,D=L+(R<<14&4294967295|R>>>18),R=C+(L^A&(D^L))+k[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=A+(C^D^L)+k[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=L+(A^C^D)+k[8]+2272392833&4294967295,L=A+(R<<11&4294967295|R>>>21),R=D+(L^A^C)+k[11]+1839030562&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^A)+k[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=A+(C^D^L)+k[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=L+(A^C^D)+k[4]+1272893353&4294967295,L=A+(R<<11&4294967295|R>>>21),R=D+(L^A^C)+k[7]+4139469664&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^A)+k[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=A+(C^D^L)+k[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=L+(A^C^D)+k[0]+3936430074&4294967295,L=A+(R<<11&4294967295|R>>>21),R=D+(L^A^C)+k[3]+3572445317&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^A)+k[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=A+(C^D^L)+k[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=L+(A^C^D)+k[12]+3873151461&4294967295,L=A+(R<<11&4294967295|R>>>21),R=D+(L^A^C)+k[15]+530742520&4294967295,D=L+(R<<16&4294967295|R>>>16),R=C+(D^L^A)+k[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=A+(D^(C|~L))+k[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=L+(C^(A|~D))+k[7]+1126891415&4294967295,L=A+(R<<10&4294967295|R>>>22),R=D+(A^(L|~C))+k[14]+2878612391&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~A))+k[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=A+(D^(C|~L))+k[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=L+(C^(A|~D))+k[3]+2399980690&4294967295,L=A+(R<<10&4294967295|R>>>22),R=D+(A^(L|~C))+k[10]+4293915773&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~A))+k[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=A+(D^(C|~L))+k[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=L+(C^(A|~D))+k[15]+4264355552&4294967295,L=A+(R<<10&4294967295|R>>>22),R=D+(A^(L|~C))+k[6]+2734768916&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~A))+k[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=A+(D^(C|~L))+k[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=L+(C^(A|~D))+k[11]+3174756917&4294967295,L=A+(R<<10&4294967295|R>>>22),R=D+(A^(L|~C))+k[2]+718787259&4294967295,D=L+(R<<15&4294967295|R>>>17),R=C+(L^(D|~A))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+L&4294967295}r.prototype.v=function(S,A){A===void 0&&(A=S.length);const C=A-this.blockSize,k=this.C;let D=this.h,L=0;for(;L<A;){if(D==0)for(;L<=C;)a(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<A;)if(k[D++]=S.charCodeAt(L++),D==this.blockSize){a(this,k),D=0;break}}else for(;L<A;)if(k[D++]=S[L++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)S[A++]=this.g[C]>>>k&255;return S};function l(S,A){var C=m;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function u(S,A){this.h=A;const C=[];let k=!0;for(let D=S.length-1;D>=0;D--){const L=S[D]|0;k&&L==A||(C[D]=L,k=!1)}this.g=C}var m={};function g(S){return-128<=S&&S<128?l(S,function(A){return new u([A|0],A<0?-1:0)}):new u([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return U(y(-S));const A=[];let C=1;for(let k=0;S>=C;k++)A[k]=S/C|0,C*=4294967296;return new u(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return U(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(A,8));let k=w;for(let L=0;L<S.length;L+=8){var D=Math.min(8,S.length-L);const R=parseInt(S.substring(L,L+D),A);D<8?(D=y(Math.pow(A,D)),k=k.j(D).add(y(R))):(k=k.j(C),k=k.add(y(R)))}return k}var w=g(0),T=g(1),N=g(16777216);i=u.prototype,i.m=function(){if(K(this))return-U(this).m();let S=0,A=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);S+=(k>=0?k:4294967296+k)*A,A*=4294967296}return S},i.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P(this))return"0";if(K(this))return"-"+U(this).toString(S);const A=y(Math.pow(S,6));var C=this;let k="";for(;;){const D=oe(C,A).g;C=B(C,D.j(A));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=D,P(C))return L+k;for(;L.length<6;)L="0"+L;k=L+k}},i.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function P(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function K(S){return S.h==-1}i.l=function(S){return S=B(this,S),K(S)?-1:P(S)?0:1};function U(S){const A=S.g.length,C=[];for(let k=0;k<A;k++)C[k]=~S.g[k];return new u(C,~S.h).add(T)}i.abs=function(){return K(this)?U(this):this},i.add=function(S){const A=Math.max(this.g.length,S.g.length),C=[];let k=0;for(let D=0;D<=A;D++){let L=k+(this.i(D)&65535)+(S.i(D)&65535),R=(L>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);k=R>>>16,L&=65535,R&=65535,C[D]=R<<16|L}return new u(C,C[C.length-1]&-2147483648?-1:0)};function B(S,A){return S.add(U(A))}i.j=function(S){if(P(this)||P(S))return w;if(K(this))return K(S)?U(this).j(U(S)):U(U(this).j(S));if(K(S))return U(this.j(U(S)));if(this.l(N)<0&&S.l(N)<0)return y(this.m()*S.m());const A=this.g.length+S.g.length,C=[];for(var k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<S.g.length;D++){const L=this.i(k)>>>16,R=this.i(k)&65535,me=S.i(D)>>>16,he=S.i(D)&65535;C[2*k+2*D]+=R*he,Z(C,2*k+2*D),C[2*k+2*D+1]+=L*he,Z(C,2*k+2*D+1),C[2*k+2*D+1]+=R*me,Z(C,2*k+2*D+1),C[2*k+2*D+2]+=L*me,Z(C,2*k+2*D+2)}for(S=0;S<A;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=A;S<2*A;S++)C[S]=0;return new u(C,0)};function Z(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function Q(S,A){this.g=S,this.h=A}function oe(S,A){if(P(A))throw Error("division by zero");if(P(S))return new Q(w,w);if(K(S))return A=oe(U(S),A),new Q(U(A.g),U(A.h));if(K(A))return A=oe(S,U(A)),new Q(U(A.g),A.h);if(S.g.length>30){if(K(S)||K(A))throw Error("slowDivide_ only works with positive integers.");for(var C=T,k=A;k.l(S)<=0;)C=re(C),k=re(k);var D=ue(C,1),L=ue(k,1);for(k=ue(k,2),C=ue(C,2);!P(k);){var R=L.add(k);R.l(S)<=0&&(D=D.add(C),L=R),k=ue(k,1),C=ue(C,1)}return A=B(S,D.j(A)),new Q(D,A)}for(D=w;S.l(A)>=0;){for(C=Math.max(1,Math.floor(S.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),L=y(C),R=L.j(A);K(R)||R.l(S)>0;)C-=k,L=y(C),R=L.j(A);P(L)&&(L=T),D=D.add(L),S=B(S,R)}return new Q(D,S)}i.B=function(S){return oe(this,S).h},i.and=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)&S.i(k);return new u(C,this.h&S.h)},i.or=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)|S.i(k);return new u(C,this.h|S.h)},i.xor=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)^S.i(k);return new u(C,this.h^S.h)};function re(S){const A=S.g.length+1,C=[];for(let k=0;k<A;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new u(C,S.h)}function ue(S,A){const C=A>>5;A%=32;const k=S.g.length-C,D=[];for(let L=0;L<k;L++)D[L]=A>0?S.i(L+C)>>>A|S.i(L+C+1)<<32-A:S.i(L+C);return new u(D,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,m1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,oa=u}).apply(typeof rx<"u"?rx:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var p1,su,g1,Ch,bg,y1,b1,_1;(function(){var i,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var b=0;b<d.length;++b){var x=d[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,b){if(b)e:{var x=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var q=d[I];if(!(q in x))break e;x=x[q]}d=d[d.length-1],I=x[d],b=b(I),b!=I&&b!=null&&e(x,d,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(b){var x=[],I;for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&x.push([I,b[I]]);return x}});var l=l||{},u=this||self;function m(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,x){return d.call.apply(d.bind,arguments)}function y(d,b,x){return y=g,y.apply(null,arguments)}function v(d,b){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function w(d,b){function x(){}x.prototype=b.prototype,d.Z=b.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(I,q,X){for(var pe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)pe[Ue-2]=arguments[Ue];return b.prototype[q].apply(I,pe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function N(d){const b=d.length;if(b>0){const x=Array(b);for(let I=0;I<b;I++)x[I]=d[I];return x}return[]}function P(d,b){for(let I=1;I<arguments.length;I++){const q=arguments[I];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=d.length||0;const X=q.length||0;d.length=x+X;for(let pe=0;pe<X;pe++)d[x+pe]=q[pe]}else d.push(q)}}class K{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function U(d){u.setTimeout(()=>{throw d},0)}function B(){var d=S;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Z{constructor(){this.h=this.g=null}add(b,x){const I=Q.get();I.set(b,x),this.h?this.h.next=I:this.g=I,this.h=I}}var Q=new K(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ue=!1,S=new Z,A=()=>{const d=Promise.resolve(void 0);re=()=>{d.then(C)}};function C(){for(var d;d=B();){try{d.h.call(d.g)}catch(x){U(x)}var b=Q;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}ue=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,b),u.removeEventListener("test",x,b)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function me(d,b){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}w(me,D),me.prototype.init=function(d,b){const x=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(x=="mouseover"?b=d.fromElement:x=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),H=0;function le(d,b,x,I,q){this.listener=d,this.proxy=null,this.src=b,this.type=x,this.capture=!!I,this.ha=q,this.key=++H,this.da=this.fa=!1}function _e(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d,b,x){for(const I in d)b.call(x,d[I],I,d)}function ze(d,b){for(const x in d)b.call(void 0,d[x],x,d)}function M(d){const b={};for(const x in d)b[x]=d[x];return b}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(d,b){let x,I;for(let q=1;q<arguments.length;q++){I=arguments[q];for(x in I)d[x]=I[x];for(let X=0;X<ee.length;X++)x=ee[X],Object.prototype.hasOwnProperty.call(I,x)&&(d[x]=I[x])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,b,x,I,q){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const pe=be(d,b,I,q);return pe>-1?(b=d[pe],x||(b.fa=!1)):(b=new le(b,this.src,X,!!I,q),b.fa=x,d.push(b)),b};function se(d,b){const x=b.type;if(x in d.g){var I=d.g[x],q=Array.prototype.indexOf.call(I,b,void 0),X;(X=q>=0)&&Array.prototype.splice.call(I,q,1),X&&(_e(b),d.g[x].length==0&&(delete d.g[x],d.h--))}}function be(d,b,x,I){for(let q=0;q<d.length;++q){const X=d[q];if(!X.da&&X.listener==b&&X.capture==!!x&&X.ha==I)return q}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),nt={};function Ye(d,b,x,I,q){if(Array.isArray(b)){for(let X=0;X<b.length;X++)Ye(d,b[X],x,I,q);return null}return x=Xn(x),d&&d[he]?d.J(b,x,m(I)?!!I.capture:!1,q):Tt(d,b,x,!1,I,q)}function Tt(d,b,x,I,q,X){if(!b)throw Error("Invalid event type");const pe=m(q)?!!q.capture:!!q;let Ue=Hr(d);if(Ue||(d[Se]=Ue=new ve(d)),x=Ue.add(b,x,I,pe,X),x.proxy)return x;if(I=Ar(),x.proxy=I,I.src=d,I.listener=x,d.addEventListener)L||(q=pe),q===void 0&&(q=!1),d.addEventListener(b.toString(),I,q);else if(d.attachEvent)d.attachEvent(un(b.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ar(){function d(x){return b.call(d.src,d.listener,x)}const b=qr;return d}function Qn(d,b,x,I,q){if(Array.isArray(b))for(var X=0;X<b.length;X++)Qn(d,b[X],x,I,q);else I=m(I)?!!I.capture:!!I,x=Xn(x),d&&d[he]?(d=d.i,X=String(b).toString(),X in d.g&&(b=d.g[X],x=be(b,x,I,q),x>-1&&(_e(b[x]),Array.prototype.splice.call(b,x,1),b.length==0&&(delete d.g[X],d.h--)))):d&&(d=Hr(d))&&(b=d.g[b.toString()],d=-1,b&&(d=be(b,x,I,q)),(x=d>-1?b[d]:null)&&Ir(x))}function Ir(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[he])se(b.i,d);else{var x=d.type,I=d.proxy;b.removeEventListener?b.removeEventListener(x,I,d.capture):b.detachEvent?b.detachEvent(un(x),I):b.addListener&&b.removeListener&&b.removeListener(I),(x=Hr(b))?(se(x,d),x.h==0&&(x.src=null,b[Se]=null)):_e(d)}}}function un(d){return d in nt?nt[d]:nt[d]="on"+d}function qr(d,b){if(d.da)d=!0;else{b=new me(b,this);const x=d.listener,I=d.ha||d.src;d.fa&&Ir(d),d=x.call(I,b)}return d}function Hr(d){return d=d[Se],d instanceof ve?d:null}var Rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xn(d){return typeof d=="function"?d:(d[Rs]||(d[Rs]=function(b){return d.handleEvent(b)}),d[Rs])}function Rt(){k.call(this),this.i=new ve(this),this.M=this,this.G=null}w(Rt,k),Rt.prototype[he]=!0,Rt.prototype.removeEventListener=function(d,b,x,I){Qn(this,d,b,x,I)};function Nt(d,b){var x,I=d.G;if(I)for(x=[];I;I=I.G)x.push(I);if(d=d.M,I=b.type||b,typeof b=="string")b=new D(b,d);else if(b instanceof D)b.target=b.target||d;else{var q=b;b=new D(I,d),de(b,q)}q=!0;let X,pe;if(x)for(pe=x.length-1;pe>=0;pe--)X=b.g=x[pe],q=vn(X,I,!0,b)&&q;if(X=b.g=d,q=vn(X,I,!0,b)&&q,q=vn(X,I,!1,b)&&q,x)for(pe=0;pe<x.length;pe++)X=b.g=x[pe],q=vn(X,I,!1,b)&&q}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const x=d.g[b];for(let I=0;I<x.length;I++)_e(x[I]);delete d.g[b],d.h--}}this.G=null},Rt.prototype.J=function(d,b,x,I){return this.i.add(String(d),b,!1,x,I)},Rt.prototype.K=function(d,b,x,I){return this.i.add(String(d),b,!0,x,I)};function vn(d,b,x,I){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let q=!0;for(let X=0;X<b.length;++X){const pe=b[X];if(pe&&!pe.da&&pe.capture==x){const Ue=pe.listener,Jt=pe.ha||pe.src;pe.fa&&se(d.i,pe),q=Ue.call(Jt,I)!==!1&&q}}return q&&!I.defaultPrevented}function Ao(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(d,b||0)}function Ds(d){d.g=Ao(()=>{d.g=null,d.i&&(d.i=!1,Ds(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class pn extends k{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ds(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(d){k.call(this),this.h=d,this.g={}}w(He,k);var gi=[];function Ms(d){Ve(d.g,function(b,x){this.g.hasOwnProperty(x)&&Ir(b)},d),d.g={}}He.prototype.N=function(){He.Z.N.call(this),Ms(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=u.JSON.stringify,xa=u.JSON.parse,Nr=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function os(){}function wa(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){D.call(this,"d")}w(Wt,D);function xn(){D.call(this,"c")}w(xn,D);var Dt={},ks=null;function ls(){return ks=ks||new Rt}Dt.Ia="serverreachability";function Gr(d){D.call(this,Dt.Ia,d)}w(Gr,D);function wn(d){const b=ls();Nt(b,new Gr(b))}Dt.STAT_EVENT="statevent";function dr(d,b){D.call(this,Dt.STAT_EVENT,d),this.stat=b}w(dr,D);function Lt(d){const b=ls();Nt(b,new dr(b,d))}Dt.Ja="timingevent";function Bn(d,b){D.call(this,Dt.Ja,d),this.size=b}w(Bn,D);function Fn(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},b)}function Tn(){this.g=!0}Tn.prototype.ua=function(){this.g=!1};function js(d,b,x,I,q,X){d.info(function(){if(d.g)if(X){var pe="",Ue=X.split("&");for(let ct=0;ct<Ue.length;ct++){var Jt=Ue[ct].split("=");if(Jt.length>1){const Ut=Jt[0];Jt=Jt[1];const Mr=Ut.split("_");pe=Mr.length>=2&&Mr[1]=="type"?pe+(Ut+"="+Jt+"&"):pe+(Ut+"=redacted&")}}}else pe=null;else pe=X;return"XMLHTTP REQ ("+I+") [attempt "+q+"]: "+b+`
`+x+`
`+pe})}function yi(d,b,x,I,q,X,pe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+q+"]: "+b+`
`+x+`
`+X+" "+pe})}function Mn(d,b,x,I){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ta(d,x)+(I?" "+I:"")})}function Jn(d,b){d.info(function(){return"TIMEOUT: "+b})}Tn.prototype.info=function(){};function Ta(d,b){if(!d.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var x=X[d];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var q=I[0];if(q!="noop"&&q!="stop"&&q!="close")for(let pe=1;pe<I.length;pe++)I[pe]=""}}}}return ur(X)}catch{return b}}var $r={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Os={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vs;function Kr(){}w(Kr,os),Kr.prototype.g=function(){return new XMLHttpRequest},Vs=new Kr;function hr(d){return encodeURIComponent(String(d))}function qn(d){var b=1;d=d.split(":");const x=[];for(;b>0&&d.length;)x.push(d.shift()),b--;return d.length&&x.push(d.join(":")),x}function Mt(d,b,x,I){this.j=d,this.i=b,this.l=x,this.S=I||1,this.V=new He(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hn}function Hn(){this.i=null,this.g="",this.h=!1}var zt={},Gt={};function Zn(d,b,x){d.M=1,d.A=Ea(At(b)),d.u=x,d.R=!0,cs(d,null)}function cs(d,b){d.F=Date.now(),et(d),d.B=At(d.A);var x=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),No(x.i,"t",I),d.C=0,x=d.j.L,d.h=new Hn,d.g=md(d.j,x?b:null,!d.u),d.P>0&&(d.O=new pn(y(d.Y,d,d.g),d.P)),b=d.V,x=d.g,I=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(gi[0]=q.toString()),q=gi);for(let X=0;X<q.length;X++){const pe=Ye(x,q[X],I||b.handleEvent,!1,b.h||b);if(!pe)break;b.g[pe.key]=pe}b=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),wn(),js(d.i,d.v,d.B,d.l,d.S,d.u)}Mt.prototype.ba=function(d){d=d.target;const b=this.O;b&&Xr(d)==3?b.j():this.Y(d)},Mt.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Xr(this.g),Jt=this.g.ya(),ct=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Ue!=4||Jt==7||(Jt==8||ct<=0?wn(3):wn(2)),kn(this);var b=this.g.ca();this.X=b;var x=Ee(this);if(this.o=b==200,yi(this.i,this.v,this.B,this.l,this.S,Ue,b),this.o){if(this.U&&!this.L){t:{if(this.g){var I,q=this.g;if((I=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var X=I;break t}}X=null}if(d=X)Mn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,d);else{this.o=!1,this.m=3,Lt(12),ie(this),St(this);break e}}if(this.R){d=!0;let Ut;for(;!this.K&&this.C<x.length;)if(Ut=Et(this,x),Ut==Gt){Ue==4&&(this.m=4,Lt(14),d=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==zt){this.m=4,Lt(15),Mn(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Mn(this.i,this.l,Ut,null),xe(this,Ut);if(Fe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||x.length!=0||this.h.h||(this.m=1,Lt(16),d=!1),this.o=this.o&&d,!d)Mn(this.i,this.l,x,"[Invalid Chunked Response]"),ie(this),St(this);else if(x.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),dc(pe),pe.P=!0,Lt(11))}}else Mn(this.i,this.l,x,null),xe(this,x);Ue==4&&ie(this),this.o&&!this.K&&(Ue==4?ud(this.j,this):(this.o=!1,et(this)))}else Ls(this.g),b==400&&x.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),ie(this),St(this)}}}catch{}};function Ee(d){if(!Fe(d))return d.g.la();const b=An(d.g);if(b==="")return"";let x="";const I=b.length,q=Xr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ie(d),St(d),"";d.h.i=new u.TextDecoder}for(let X=0;X<I;X++)d.h.h=!0,x+=d.h.i.decode(b[X],{stream:!(q&&X==I-1)});return b.length=0,d.h.g+=x,d.C=0,d.h.g}function Fe(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Et(d,b){var x=d.C,I=b.indexOf(`
`,x);return I==-1?Gt:(x=Number(b.substring(x,I)),isNaN(x)?zt:(I+=1,I+x>b.length?Gt:(b=b.slice(I,I+x),d.C=I+x,b)))}Mt.prototype.cancel=function(){this.K=!0,ie(this)};function et(d){d.T=Date.now()+d.H,Cr(d,d.H)}function Cr(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fn(y(d.aa,d),b)}function kn(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Mt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Jn(this.i,this.B),this.M!=2&&(wn(),Lt(17)),ie(this),this.m=2,St(this)):Cr(this,this.T-d)};function St(d){d.j.I==0||d.K||ud(d.j,d)}function ie(d){kn(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Ms(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function xe(d,b){try{var x=d.j;if(x.I!=0&&(x.g==d||kt(x.h,d))){if(!d.L&&kt(x.h,d)&&x.I==3){try{var I=x.Ba.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var q=I;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)ko(x),Si(x);else break e;Da(x),Lt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Fn(y(x.Va,x),6e3));rt(x.h)<=1&&x.ta&&(x.ta=void 0)}else ps(x,11)}else if((d.L||x.g==d)&&ko(x),!R(b))for(q=x.Ba.g.parse(b),b=0;b<q.length;b++){let ct=q[b];const Ut=ct[0];if(!(Ut<=x.K))if(x.K=Ut,ct=ct[1],x.I==2)if(ct[0]=="c"){x.M=ct[1],x.ba=ct[2];const Mr=ct[3];Mr!=null&&(x.ka=Mr,x.j.info("VER="+x.ka));const gs=ct[4];gs!=null&&(x.za=gs,x.j.info("SVER="+x.za));const Wr=ct[5];Wr!=null&&typeof Wr=="number"&&Wr>0&&(I=1.5*Wr,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Jr=d.g;if(Jr){const Ma=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var X=I.h;X.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(En(X,X.h),X.h=null))}if(I.G){const jo=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(I.wa=jo,ft(I.J,I.G,jo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var pe=d;if(I.na=fd(I,I.L?I.ba:null,I.W),pe.L){Me(I.h,pe);var Ue=pe,Jt=I.O;Jt&&(Ue.H=Jt),Ue.D&&(kn(Ue),et(Ue)),I.g=pe}else ld(I);x.i.length>0&&ms(x)}else ct[0]!="stop"&&ct[0]!="close"||ps(x,7);else x.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ps(x,7):cc(x):ct[0]!="noop"&&x.l&&x.l.qa(ct),x.A=0)}}wn(4)}catch{}}var ge=class{constructor(d,b){this.g=d,this.map=b}};function Oe(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ht(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function rt(d){return d.h?1:d.g?d.g.size:0}function kt(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function En(d,b){d.g?d.g.add(b):d.h=b}function Me(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Oe.prototype.cancel=function(){if(this.i=$t(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $t(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const x of d.g.values())b=b.concat(x.G);return b}return N(d.i)}var Sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lt(d,b){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const I=d[x].indexOf("=");let q,X=null;I>=0?(q=d[x].substring(0,I),X=d[x].substring(I+1)):q=d[x],b(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function st(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof st?(this.l=d.l,jt(this,d.j),this.o=d.o,this.g=d.g,bi(this,d.u),this.h=d.h,nc(this,ad(d.i)),this.m=d.m):d&&(b=String(d).match(Sn))?(this.l=!1,jt(this,b[1]||"",!0),this.o=us(b[2]||""),this.g=us(b[3]||"",!0),bi(this,b[4]),this.h=us(b[5]||"",!0),nc(this,b[6]||"",!0),this.m=us(b[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}st.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(Sa(b,Io,!0),":");var x=this.g;return(x||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Sa(b,Io,!0),"@"),d.push(hr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Sa(x,x.charAt(0)=="/"?rc:rd,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Sa(x,sd)),d.join("")},st.prototype.resolve=function(d){const b=At(this);let x=!!d.j;x?jt(b,d.j):x=!!d.o,x?b.o=d.o:x=!!d.g,x?b.g=d.g:x=d.u!=null;var I=d.h;if(x)bi(b,d.u);else if(x=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var q=b.h.lastIndexOf("/");q!=-1&&(I=b.h.slice(0,q+1)+I)}if(q=I,q==".."||q==".")I="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){I=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let pe=0;pe<q.length;){const Ue=q[pe++];Ue=="."?I&&pe==q.length&&X.push(""):Ue==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),I&&pe==q.length&&X.push("")):(X.push(Ue),I=!0)}I=X.join("/")}else I=q}return x?b.h=I:x=d.i.toString()!=="",x?nc(b,ad(d.i)):x=!!d.m,x&&(b.m=d.m),b};function At(d){return new st(d)}function jt(d,b,x){d.j=x?us(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function bi(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function nc(d,b,x){b instanceof vi?(d.i=b,Co(d.i,d.l)):(x||(b=Sa(b,_i)),d.i=new vi(b,d.l))}function ft(d,b,x){d.i.set(b,x)}function Ea(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function us(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sa(d,b,x){return typeof d=="string"?(d=encodeURI(d).replace(b,er),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function er(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Io=/[#\/\?@]/g,rd=/[#\?:]/g,rc=/[#\?]/g,_i=/[#\?@]/g,sd=/#/g;function vi(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function tr(d){d.g||(d.g=new Map,d.h=0,d.i&&lt(d.i,function(b,x){d.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}i=vi.prototype,i.add=function(d,b){tr(this),this.i=null,d=xi(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(b),this.h+=1,this};function id(d,b){tr(d),b=xi(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function sc(d,b){return tr(d),b=xi(d,b),d.g.has(b)}i.forEach=function(d,b){tr(this),this.g.forEach(function(x,I){x.forEach(function(q){d.call(b,q,I,this)},this)},this)};function ic(d,b){tr(d);let x=[];if(typeof b=="string")sc(d,b)&&(x=x.concat(d.g.get(xi(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)x=x.concat(d[b]);return x}i.set=function(d,b){return tr(this),this.i=null,d=xi(this,d),sc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},i.get=function(d,b){return d?(d=ic(this,d),d.length>0?String(d[0]):b):b};function No(d,b,x){id(d,b),x.length>0&&(d.i=null,d.g.set(xi(d,b),N(x)),d.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let I=0;I<b.length;I++){var x=b[I];const q=hr(x);x=ic(this,x);for(let X=0;X<x.length;X++){let pe=q;x[X]!==""&&(pe+="="+hr(x[X])),d.push(pe)}}return this.i=d.join("&")};function ad(d){const b=new vi;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function xi(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Co(d,b){b&&!d.j&&(tr(d),d.i=null,d.g.forEach(function(x,I){const q=I.toLowerCase();I!=q&&(id(this,I),No(this,q,x))},d)),d.j=b}function Yr(d,b){const x=new Tn;if(u.Image){const I=new Image;I.onload=v(Rr,x,"TestLoadImage: loaded",!0,b,I),I.onerror=v(Rr,x,"TestLoadImage: error",!1,b,I),I.onabort=v(Rr,x,"TestLoadImage: abort",!1,b,I),I.ontimeout=v(Rr,x,"TestLoadImage: timeout",!1,b,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else b(!1)}function ac(d,b){const x=new Tn,I=new AbortController,q=setTimeout(()=>{I.abort(),Rr(x,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:I.signal}).then(X=>{clearTimeout(q),X.ok?Rr(x,"TestPingServer: ok",!0,b):Rr(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(q),Rr(x,"TestPingServer: error",!1,b)})}function Rr(d,b,x,I,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),I(x)}catch{}}function wi(){this.g=new Nr}function ds(d){this.i=d.Sb||null,this.h=d.ab||!1}w(ds,os),ds.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(d,b){Rt.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Aa,Rt),i=Aa.prototype,i.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,Qr(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ro(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ro(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Ti(this):Qr(this),this.readyState==3&&Ro(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Ti(this))},i.Na=function(d){this.g&&(this.response=d,Ti(this))},i.ga=function(){this.g&&Ti(this)};function Ti(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Qr(d)}i.setRequestHeader=function(d,b){this.A.append(d,b)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=b.next();return d.join(`\r
`)};function Qr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Dr(d){let b="";return Ve(d,function(x,I){b+=I,b+=":",b+=x,b+=`\r
`}),b}function Ia(d,b,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Dr(x),typeof d=="string"?x!=null&&hr(x):ft(d,b,x))}function _t(d){Rt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(_t,Rt);var hs=/^https?$/i,oc=["POST","PUT"];i=_t.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,b,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vs.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(X){Na(this,X);return}if(d=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var q in I)x.set(q,I[q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())x.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),q=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(oc,b,void 0)>=0)||I||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,pe]of x)this.g.setRequestHeader(X,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Na(this,X)}};function Na(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,lc(d),Ps(d)}function lc(d){d.A||(d.A=!0,Nt(d,"complete"),Nt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Nt(this,"complete"),Nt(this,"abort"),Ps(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),_t.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ca(this):this.Xa())},i.Xa=function(){Ca(this)};function Ca(d){if(d.h&&typeof l<"u"){if(d.v&&Xr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Nt(d,"readystatechange"),Xr(d)==4){d.h=!1;try{const X=d.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var I;if(I=X===0){let pe=String(d.D).match(Sn)[1]||null;!pe&&u.self&&u.self.location&&(pe=u.self.location.protocol.slice(0,-1)),I=!hs.test(pe?pe.toLowerCase():"")}x=I}if(x)Nt(d,"complete"),Nt(d,"success");else{d.o=6;try{var q=Xr(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",lc(d)}}finally{Ps(d)}}}}function Ps(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,b||Nt(d,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xr(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),xa(b)}};function An(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ls(d){const b={};d=(d.g&&Xr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(R(d[I]))continue;var x=qn(d[I]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=b[q]||[];b[q]=X,X.push(x)}ze(b,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(d,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||b}function Ei(d){this.za=0,this.i=[],this.j=new Tn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,d),this.Za=fs("retryDelaySeedMs",1e4,d),this.Ta=fs("forwardChannelMaxRetries",2,d),this.va=fs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Oe(d&&d.concurrentRequestLimit),this.Ba=new wi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ei.prototype,i.ka=8,i.I=1,i.connect=function(d,b,x,I){Lt(0),this.W=d,this.H=b||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=fd(this,null,this.W),ms(this)};function cc(d){if(Do(d),d.I==3){var b=d.V++,x=At(d.J);if(ft(x,"SID",d.M),ft(x,"RID",b),ft(x,"TYPE","terminate"),Ra(d,x),b=new Mt(d,d.j,b),b.M=2,b.A=Ea(At(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=b.A,x=!0),x||(b.g=md(b.j,null),b.g.ea(b.A)),b.F=Date.now(),et(b)}hd(d)}function Si(d){d.g&&(dc(d),d.g.cancel(),d.g=null)}function Do(d){Si(d),d.v&&(u.clearTimeout(d.v),d.v=null),ko(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ms(d){if(!ht(d.h)&&!d.m){d.m=!0;var b=d.Ea;re||A(),ue||(re(),ue=!0),S.add(b,d),d.D=0}}function Mo(d,b){return rt(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Fn(y(d.Ea,d,b),dd(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new Mt(this,this.j,d);let X=this.o;if(this.U&&(X?(X=M(X),de(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(b+=I,b>4096){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=od(this,q,b),x=At(this.J),ft(x,"RID",d),ft(x,"CVER",22),this.G&&ft(x,"X-HTTP-Session-Id",this.G),Ra(this,x),X&&(this.R?b="headers="+hr(Dr(X))+"&"+b:this.u&&Ia(x,this.u,X)),En(this.h,q),this.Ra&&ft(x,"TYPE","init"),this.S?(ft(x,"$req",b),ft(x,"SID","null"),q.U=!0,Zn(q,x,null)):Zn(q,x,b),this.I=2}}else this.I==3&&(d?uc(this,d):this.i.length==0||ht(this.h)||uc(this))};function uc(d,b){var x;b?x=b.l:x=d.V++;const I=At(d.J);ft(I,"SID",d.M),ft(I,"RID",x),ft(I,"AID",d.K),Ra(d,I),d.u&&d.o&&Ia(I,d.u,d.o),x=new Mt(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),b&&(d.i=b.G.concat(d.i)),b=od(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),En(d.h,x),Zn(x,I,b)}function Ra(d,b){d.H&&Ve(d.H,function(x,I){ft(b,I,x)}),d.l&&Ve({},function(x,I){ft(b,I,x)})}function od(d,b,x){x=Math.min(d.i.length,x);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var q=d.i;let Ue=-1;for(;;){const Jt=["count="+x];Ue==-1?x>0?(Ue=q[0].g,Jt.push("ofs="+Ue)):Ue=0:Jt.push("ofs="+Ue);let ct=!0;for(let Ut=0;Ut<x;Ut++){var X=q[Ut].g;const Mr=q[Ut].map;if(X-=Ue,X<0)Ue=Math.max(0,q[Ut].g-100),ct=!1;else try{X="req"+X+"_"||"";try{var pe=Mr instanceof Map?Mr:Object.entries(Mr);for(const[gs,Wr]of pe){let Jr=Wr;m(Wr)&&(Jr=ur(Wr)),Jt.push(X+gs+"="+encodeURIComponent(Jr))}}catch(gs){throw Jt.push(X+"type="+encodeURIComponent("_badmap")),gs}}catch{I&&I(Mr)}}if(ct){pe=Jt.join("&");break e}}pe=void 0}return d=d.i.splice(0,x),b.G=d,pe}function ld(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;re||A(),ue||(re(),ue=!0),S.add(b,d),d.A=0}}function Da(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Fn(y(d.Da,d),dd(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,cd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fn(y(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Si(this),cd(this))};function dc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function cd(d){d.g=new Mt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=At(d.na);ft(b,"RID","rpc"),ft(b,"SID",d.M),ft(b,"AID",d.K),ft(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(b,"TO",d.ia),ft(b,"TYPE","xmlhttp"),Ra(d,b),d.u&&d.o&&Ia(b,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Ea(At(b)),x.u=null,x.R=!0,cs(x,d)}i.Va=function(){this.C!=null&&(this.C=null,Si(this),Da(this),Lt(19))};function ko(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function ud(d,b){var x=null;if(d.g==b){ko(d),dc(d),d.g=null;var I=2}else if(kt(d.h,b))x=b.G,Me(d.h,b),I=1;else return;if(d.I!=0){if(b.o)if(I==1){x=b.u?b.u.length:0,b=Date.now()-b.F;var q=d.D;I=ls(),Nt(I,new Bn(I,x)),ms(d)}else ld(d);else if(q=b.m,q==3||q==0&&b.X>0||!(I==1&&Mo(d,b)||I==2&&Da(d)))switch(x&&x.length>0&&(b=d.h,b.i=b.i.concat(x)),q){case 1:ps(d,5);break;case 4:ps(d,10);break;case 3:ps(d,6);break;default:ps(d,2)}}}function dd(d,b){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*b}function ps(d,b){if(d.j.info("Error code "+b),b==2){var x=y(d.bb,d),I=d.Ua;const q=!I;I=new st(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jt(I,"https"),Ea(I),q?Yr(I.toString(),x):ac(I.toString(),x)}else Lt(2);d.I=0,d.l&&d.l.pa(b),hd(d),Do(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function hd(d){if(d.I=0,d.ja=[],d.l){const b=$t(d.h);(b.length!=0||d.i.length!=0)&&(P(d.ja,b),P(d.ja,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.oa()}}function fd(d,b,x){var I=x instanceof st?At(x):new st(x);if(I.g!="")b&&(I.g=b+"."+I.g),bi(I,I.u);else{var q=u.location;I=q.protocol,b=b?b+"."+q.hostname:q.hostname,q=+q.port;const X=new st(null);I&&jt(X,I),b&&(X.g=b),q&&bi(X,q),x&&(X.h=x),I=X}return x=d.G,b=d.wa,x&&b&&ft(I,x,b),ft(I,"VER",d.ka),Ra(d,I),I}function md(d,b,x){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new _t(new ds({ab:x})):new _t(d.ma),b.Fa(d.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function pd(){}i=pd.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ai(){}Ai.prototype.g=function(d,b){return new Gn(d,b)};function Gn(d,b){Rt.call(this),this.g=new Ei(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!R(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new zs(this)}w(Gn,Rt),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){cc(this.g)},Gn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=ur(d),d=x);b.i.push(new ge(b.Ya++,d)),b.I==3&&ms(b)},Gn.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Gn.Z.N.call(this)};function gd(d){Wt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const x in b){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}w(gd,Wt);function yd(){xn.call(this),this.status=1}w(yd,xn);function zs(d){this.g=d}w(zs,pd),zs.prototype.ra=function(){Nt(this.g,"a")},zs.prototype.qa=function(d){Nt(this.g,new gd(d))},zs.prototype.pa=function(d){Nt(this.g,new yd)},zs.prototype.oa=function(){Nt(this.g,"b")},Ai.prototype.createWebChannel=Ai.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,_1=function(){return new Ai},b1=function(){return ls()},y1=Dt,bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,Ch=$r,Os.COMPLETE="complete",g1=Os,wa.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,su=wa,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,p1=_t}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Yl="12.9.0";function X2(i){Yl=i}const ho=new e0("@firebase/firestore");function bl(){return ho.logLevel}function ce(i,...e){if(ho.logLevel<=We.DEBUG){const t=e.map(s0);ho.debug(`Firestore (${Yl}): ${i}`,...t)}}function tn(i,...e){if(ho.logLevel<=We.ERROR){const t=e.map(s0);ho.error(`Firestore (${Yl}): ${i}`,...t)}}function fo(i,...e){if(ho.logLevel<=We.WARN){const t=e.map(s0);ho.warn(`Firestore (${Yl}): ${i}`,...t)}}function s0(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function we(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,v1(i,r,t)}function v1(i,e,t){let r=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw tn(r),new Error(r)}function Ne(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||v1(e,a,r)}function Ae(i,e){return i}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class x1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class J2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ss,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ss)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new x1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class eN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class i0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=rN(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Pe(i,e){return i<e?-1:i>e?1:0}function _g(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return tg(a)===tg(l)?Pe(a,l):tg(a)?1:-1}return Pe(i.length,e.length)}const sN=55296,iN=57343;function tg(i){const e=i.charCodeAt(0);return e>=sN&&e<=iN}function Rl(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function w1(i){return i+"\0"}const ix="__name__";class xs{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=xs.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const r=xs.isNumericId(e),a=xs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?xs.extractNumericId(e).compare(xs.extractNumericId(t)):_g(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class dt extends xs{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const aN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends xs{construct(e,t,r){return new Ht(e,t,r)}static isValidIdentifier(e){return aN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ix}static keyField(){return new Ht([ix])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new fe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(r+=m,a++):(l(),a++)}if(l(),u)throw new fe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(dt.fromString(e))}static fromName(e){return new ye(dt.fromString(e).popFirst(5))}static empty(){return new ye(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new dt(e.slice()))}}function T1(i,e,t){if(!t)throw new fe(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function oN(i,e,t,r){if(e===!0&&r===!0)throw new fe(J.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ax(i){if(!ye.isDocumentKey(i))throw new fe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ox(i){if(ye.isDocumentKey(i))throw new fe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function E1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function wf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function cr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wf(i);throw new fe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function lN(i,e){if(e<=0)throw new fe(J.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function cn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Hu(i,e){if(!E1(i))throw new fe(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(J.INVALID_ARGUMENT,t);return!0}const lx=-62135596800,cx=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cx);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lx)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cx}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:cn("string",gt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new gt(0,0))}static max(){return new De(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dl=-1;class Yh{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function vg(i){return i.fields.find((e=>e.kind===2))}function Xa(i){return i.fields.filter((e=>e.kind!==2))}Yh.UNKNOWN_ID=-1;class Rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tu(0,Sr.min())}}function S1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=De.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Sr(a,ye.empty(),e)}function A1(i){return new Sr(i.readTime,i.key,Dl)}class Sr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sr(De.min(),ye.empty(),Dl)}static max(){return new Sr(De.max(),ye.empty(),Dl)}}function a0(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(i.documentKey,e.documentKey),t!==0?t:Pe(i.largestBatchId,e.largestBatchId))}const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ma(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==I1)throw i;ce("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let a=0,l=0,u=!1;e.forEach((m=>{++a,m.next((()=>{++l,u&&l===a&&t()}),(g=>r(g)))})),u=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((a=>a?F.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,a)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{u[y]=v,++m,m===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new F(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const xr="SimpleDb";class Tf{static open(e,t,r,a){try{return new Tf(t,e.transaction(a,r))}catch(l){throw new uu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ss,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new uu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=o0(r.target.error);this.S.reject(new uu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(xr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uN(t)}}class la{static delete(e){return ce(xr,"Removing database:",e),Ja(t1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!c1())return!1;if(la.F())return!0;const e=hn(),t=la.M(e),r=0<t&&t<10,a=C1(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,la.M(hn())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(xr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new fe(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new fe(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new uu(e,u))},a.onupgradeneeded=l=>{ce(xr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ce(xr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const m=Tf.open(this.db,e,l?"readonly":"readwrite",r),g=a(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),F.reject(y)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,y=g.name!=="FirebaseError"&&u<3;if(ce(xr,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function C1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class cN{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ja(this.U.delete())}}class uu extends fe{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pa(i){return i.name==="IndexedDbTransactionError"}class uN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(xr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(xr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ja(r)}add(e){return ce(xr,"ADD",this.store.name,e,e),Ja(this.store.add(e))}get(e){return Ja(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(xr,"GET",this.store.name,e,t),t)))}delete(e){return ce(xr,"DELETE",this.store.name,e),Ja(this.store.delete(e))}count(){return ce(xr,"COUNT",this.store.name),Ja(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new F(((u,m)=>{l.onerror=g=>{m(g.target.error)},l.onsuccess=g=>{u(g.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((m,g)=>{u.push(g)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){ce(xr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new F(((r,a)=>{t.onerror=l=>{const u=o0(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((m=>{m?u.continue():r()})):r()}}))}J(e,t){const r=[];return new F(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void a();const g=new cN(m),y=t(m.primaryKey,m.value,g);if(y instanceof F){const v=y.catch((w=>(g.done(),F.reject(w))));r.push(v)}g.isDone?a():g.G===null?m.continue():m.continue(g.G)}})).next((()=>F.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ja(i){return new F(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=o0(r.target.error);t(a)}}))}let ux=!1;function o0(i){const e=la.M(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ux||(ux=!0,setTimeout((()=>{throw r}),0)),r}}return i}const du="IndexBackfiller";class dN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(du,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(du,`Documents written: ${t}`)}catch(t){pa(t)?ce(du,"Ignoring IndexedDB error during index backfill: ",t):await ma(t)}await this.re(6e4)}))}}class hN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ce(du,`Processing collection: ${u}`),this.oe(e,u,a).next((m=>{a-=m,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((m=>(ce(du,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=A1(l);a0(u,r)>0&&(r=u)})),new Sr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}or.ce=-1;const so=-1;function Ef(i){return i==null}function Eu(i){return i===0&&1/i==-1/0}function R1(i){return typeof i=="number"&&Number.isInteger(i)&&!Eu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Qh="";function Un(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=dx(e)),e=fN(i.get(t),e);return dx(e)}function fN(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Qh:t+="";break;default:t+=l}}return t}function dx(i){return i+Qh+""}function Ts(i){const e=i.length;if(Ne(e>=2,64408,{path:i}),e===2)return Ne(i.charAt(0)===Qh&&i.charAt(1)==="",56145,{path:i}),dt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=i.indexOf(Qh,l);switch((u<0||u>t)&&we(50515,{path:i}),i.charAt(u+1)){case"":const m=i.substring(l,u);let g;a.length===0?g=m:(a+=m,g=a,a=""),r.push(g);break;case"":a+=i.substring(l,u),a+="\0";break;case"":a+=i.substring(l,u+1);break;default:we(61167,{path:i})}l=u+2}return new dt(r)}const Wa="remoteDocuments",Gu="owner",ul="owner",Su="mutationQueues",mN="userId",ns="mutations",hx="batchId",no="userMutationsIndex",fx=["userId","batchId"];function Dh(i,e){return[i,Un(e)]}function D1(i,e,t){return[i,Un(e),t]}const pN={},Ml="documentMutations",Xh="remoteDocumentsV14",gN=["prefixPath","collectionGroup","readTime","documentId"],Mh="documentKeyIndex",yN=["prefixPath","collectionGroup","documentId"],M1="collectionGroupIndex",bN=["collectionGroup","readTime","prefixPath","documentId"],Au="remoteDocumentGlobal",xg="remoteDocumentGlobalKey",kl="targets",k1="queryTargetsIndex",_N=["canonicalId","targetId"],jl="targetDocuments",vN=["targetId","path"],l0="documentTargetsIndex",xN=["path","targetId"],Wh="targetGlobalKey",io="targetGlobal",Iu="collectionParents",wN=["collectionId","parent"],Ol="clientMetadata",TN="clientId",Sf="bundles",EN="bundleId",Af="namedQueries",SN="name",c0="indexConfiguration",AN="indexId",wg="collectionGroupIndex",IN="collectionGroup",hu="indexState",NN=["indexId","uid"],j1="sequenceNumberIndex",CN=["uid","sequenceNumber"],fu="indexEntries",RN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O1="documentKeyIndex",DN=["indexId","uid","orderedDocumentKey"],If="documentOverlays",MN=["userId","collectionPath","documentId"],Tg="collectionPathOverlayIndex",kN=["userId","collectionPath","largestBatchId"],V1="collectionGroupOverlayIndex",jN=["userId","collectionGroup","largestBatchId"],u0="globals",ON="name",P1=[Su,ns,Ml,Wa,kl,Gu,io,jl,Ol,Au,Iu,Sf,Af],VN=[...P1,If],L1=[Su,ns,Ml,Xh,kl,Gu,io,jl,Ol,Au,Iu,Sf,Af,If],z1=L1,d0=[...z1,c0,hu,fu],PN=d0,U1=[...d0,u0],LN=U1;class Eg extends N1{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mn(i,e){const t=Ae(i);return la.O(t.le,e)}function mx(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ga(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function B1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ct{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=a??Dn.EMPTY,this.right=l??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Dn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new px(this.data.getIterator())}getIteratorFrom(e){return new px(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class px{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dl(i){return i.hasNext()?i.getNext():void 0}class lr{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new lr([])}unionWith(e){let t=new bt(Ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class F1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new F1("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const zN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(i){if(Ne(!!i,39018),typeof i=="string"){let e=0;const t=zN.exec(i);if(Ne(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(i.seconds),nanos:qt(i.nanos)}}function qt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ci(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}const q1="server_timestamp",H1="__type__",G1="__previous_value__",$1="__local_write_time__";function h0(i){return(i?.mapValue?.fields||{})[H1]?.stringValue===q1}function Nf(i){const e=i.mapValue.fields[G1];return h0(e)?Nf(e):e}function Nu(i){const e=li(i.mapValue.fields[$1].timestampValue);return new gt(e.seconds,e.nanos)}class UN{constructor(e,t,r,a,l,u,m,g,y,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v,this.apiKey=w}}const Cu="(default)";class mo{constructor(e,t){this.projectId=e,this.database=t||Cu}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===Cu}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function BN(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(i.options.projectId,e)}const f0="__type__",K1="__max__",ra={mapValue:{fields:{__type__:{stringValue:K1}}}},m0="__vector__",Vl="value",kh={nullValue:"NULL_VALUE"};function ua(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?h0(i)?4:Y1(i)?9007199254740991:Cf(i)?10:11:we(28295,{value:i})}function Cs(i,e){if(i===e)return!0;const t=ua(i);if(t!==ua(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Nu(i).isEqual(Nu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=li(a.timestampValue),m=li(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return ci(a.bytesValue).isEqual(ci(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return qt(a.geoPointValue.latitude)===qt(l.geoPointValue.latitude)&&qt(a.geoPointValue.longitude)===qt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return qt(a.integerValue)===qt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=qt(a.doubleValue),m=qt(l.doubleValue);return u===m?Eu(u)===Eu(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return Rl(i.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(mx(u)!==mx(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!Cs(u[g],m[g])))return!1;return!0})(i,e);default:return we(52216,{left:i})}}function Ru(i,e){return(i.values||[]).find((t=>Cs(t,e)))!==void 0}function da(i,e){if(i===e)return 0;const t=ua(i),r=ua(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return(function(l,u){const m=qt(l.integerValue||l.doubleValue),g=qt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return gx(i.timestampValue,e.timestampValue);case 4:return gx(Nu(i),Nu(e));case 5:return _g(i.stringValue,e.stringValue);case 6:return(function(l,u){const m=ci(l),g=ci(u);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=Pe(m[y],g[y]);if(v!==0)return v}return Pe(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,u){const m=Pe(qt(l.latitude),qt(u.latitude));return m!==0?m:Pe(qt(l.longitude),qt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return yx(i.arrayValue,e.arrayValue);case 10:return(function(l,u){const m=l.fields||{},g=u.fields||{},y=m[Vl]?.arrayValue,v=g[Vl]?.arrayValue,w=Pe(y?.values?.length||0,v?.values?.length||0);return w!==0?w:yx(y,v)})(i.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ra.mapValue&&u===ra.mapValue)return 0;if(l===ra.mapValue)return 1;if(u===ra.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const T=_g(g[w],v[w]);if(T!==0)return T;const N=da(m[g[w]],y[v[w]]);if(N!==0)return N}return Pe(g.length,v.length)})(i.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function gx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const t=li(i),r=li(e),a=Pe(t.seconds,r.seconds);return a!==0?a:Pe(t.nanos,r.nanos)}function yx(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=da(t[a],r[a]);if(l)return l}return Pe(t.length,r.length)}function Pl(i){return Sg(i)}function Sg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=li(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ci(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ye.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Sg(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${Sg(t.fields[u])}`;return a+"}"})(i.mapValue):we(61005,{value:i})}function jh(i){switch(ua(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(i);return e?16+jh(e):16;case 5:return 2*i.stringValue.length;case 6:return ci(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+jh(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return ga(r.fields,((l,u)=>{a+=l.length+jh(u)})),a})(i.mapValue);default:throw we(13486,{value:i})}}function Du(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ag(i){return!!i&&"integerValue"in i}function Mu(i){return!!i&&"arrayValue"in i}function bx(i){return!!i&&"nullValue"in i}function _x(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Oh(i){return!!i&&"mapValue"in i}function Cf(i){return(i?.mapValue?.fields||{})[f0]?.stringValue===m0}function mu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ga(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=mu(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(i.arrayValue.values[t]);return e}return{...i}}function Y1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===K1}const Q1={mapValue:{fields:{[f0]:{stringValue:m0},[Vl]:{arrayValue:{}}}}};function FN(i){return"nullValue"in i?kh:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Du(mo.empty(),ye.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Cf(i)?Q1:{mapValue:{}}:we(35942,{value:i})}function qN(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Du(mo.empty(),ye.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Q1:"mapValue"in i?Cf(i)?{mapValue:{}}:ra:we(61959,{value:i})}function vx(i,e){const t=da(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function xx(i,e){const t=da(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=Ht.emptyPath(),r={},a=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,a),r={},a=[],t=m.popLast()}u?r[m.lastSegment()]=mu(u):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ga(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Ln(mu(this.value))}}function X1(i){const e=[];return ga(i.fields,((t,r)=>{const a=new Ht([t]);if(Oh(r)){const l=X1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new lr(e)}class Qt{constructor(e,t,r,a,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Qt(e,0,De.min(),De.min(),De.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,a){return new Qt(e,1,t,De.min(),r,a,0)}static newNoDocument(e,t){return new Qt(e,2,t,De.min(),De.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,De.min(),De.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ll{constructor(e,t){this.position=e,this.inclusive=t}}function wx(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],u=i.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=da(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Cs(i.position[t],e.position[t]))return!1;return!0}class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function HN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class W1{}class Je extends W1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new GN(e,t,r):t==="array-contains"?new YN(e,r):t==="in"?new rT(e,r):t==="not-in"?new QN(e,r):t==="array-contains-any"?new XN(e,r):new Je(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $N(e,r):new KN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(da(t,this.value)):t!==null&&ua(this.value)===ua(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends W1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yt(e,t)}matches(e){return zl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zl(i){return i.op==="and"}function Ig(i){return i.op==="or"}function p0(i){return J1(i)&&zl(i)}function J1(i){for(const e of i.filters)if(e instanceof yt)return!1;return!0}function Ng(i){if(i instanceof Je)return i.field.canonicalString()+i.op.toString()+Pl(i.value);if(p0(i))return i.filters.map((e=>Ng(e))).join(",");{const e=i.filters.map((t=>Ng(t))).join(",");return`${i.op}(${e})`}}function Z1(i,e){return i instanceof Je?(function(r,a){return a instanceof Je&&r.op===a.op&&r.field.isEqual(a.field)&&Cs(r.value,a.value)})(i,e):i instanceof yt?(function(r,a){return a instanceof yt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,m)=>l&&Z1(u,a.filters[m])),!0):!1})(i,e):void we(19439)}function eT(i,e){const t=i.filters.concat(e);return yt.create(t,i.op)}function tT(i){return i instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${Pl(t.value)}`})(i):i instanceof yt?(function(t){return t.op.toString()+" {"+t.getFilters().map(tT).join(" ,")+"}"})(i):"Filter"}class GN extends Je{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class $N extends Je{constructor(e,t){super(e,"in",t),this.keys=nT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KN extends Je{constructor(e,t){super(e,"not-in",t),this.keys=nT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function nT(i,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class YN extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mu(t)&&Ru(t.arrayValue,this.value)}}class rT extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ru(this.value.arrayValue,t)}}class QN extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ru(this.value.arrayValue,t)}}class XN extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ru(this.value.arrayValue,r)))}}class WN{constructor(e,t=null,r=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function Cg(i,e=null,t=[],r=[],a=null,l=null,u=null){return new WN(i,e,t,r,a,l,u)}function po(i){const e=Ae(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ng(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Pl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Pl(r))).join(",")),e.Te=t}return e.Te}function $u(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!HN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Z1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Tx(i.startAt,e.startAt)&&Tx(i.endAt,e.endAt)}function Jh(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Zh(i,e){return i.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function Ex(i,e,t){let r=kh,a=!0;for(const l of Zh(i,e)){let u=kh,m=!0;switch(l.op){case"<":case"<=":u=FN(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,m=!1;break;case"!=":case"not-in":u=kh}vx({value:r,inclusive:a},{value:u,inclusive:m})<0&&(r=u,a=m)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];vx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function Sx(i,e,t){let r=ra,a=!0;for(const l of Zh(i,e)){let u=ra,m=!0;switch(l.op){case">=":case">":u=qN(l.value),m=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,m=!1;break;case"!=":case"not-in":u=ra}xx({value:r,inclusive:a},{value:u,inclusive:m})>0&&(r=u,a=m)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];xx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class Ql{constructor(e,t=null,r=[],a=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sT(i,e,t,r,a,l,u,m){return new Ql(i,e,t,r,a,l,u,m)}function Ku(i){return new Ql(i)}function Ax(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function JN(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function iT(i){return i.collectionGroup!==null}function pu(i){const e=Ae(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new bt(Ht.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ku(l,r))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new ku(Ht.keyField(),r))}return e.Ie}function Er(i){const e=Ae(i);return e.Ee||(e.Ee=ZN(e,pu(i))),e.Ee}function ZN(i,e){if(i.limitType==="F")return Cg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ku(a.field,l)}));const t=i.endAt?new Ll(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ll(i.startAt.position,i.startAt.inclusive):null;return Cg(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Rg(i,e){const t=i.filters.concat([e]);return new Ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function eC(i,e){const t=i.explicitOrderBy.concat([e]);return new Ql(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function ef(i,e,t){return new Ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Rf(i,e){return $u(Er(i),Er(e))&&i.limitType===e.limitType}function aT(i){return`${po(Er(i))}|lt:${i.limitType}`}function _l(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>tT(a))).join(", ")}]`),Ef(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Pl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Pl(a))).join(",")),`Target(${r})`})(Er(i))}; limitType=${i.limitType})`}function Yu(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of pu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(u,m,g){const y=wx(u,m,g);return u.inclusive?y<=0:y<0})(r.startAt,pu(r),a)||r.endAt&&!(function(u,m,g){const y=wx(u,m,g);return u.inclusive?y>=0:y>0})(r.endAt,pu(r),a))})(i,e)}function oT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lT(i){return(e,t)=>{let r=!1;for(const a of pu(i)){const l=tC(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function tC(i,e,t){const r=i.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?da(g,y):we(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:i.dir})}}class fi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ga(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return B1(this.inner)}size(){return this.innerSize}}const nC=new Ct(ye.comparator);function Tr(){return nC}const cT=new Ct(ye.comparator);function iu(...i){let e=cT;for(const t of i)e=e.insert(t.key,t);return e}function uT(i){let e=cT;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Es(){return gu()}function dT(){return gu()}function gu(){return new fi((i=>i.toString()),((i,e)=>i.isEqual(e)))}const rC=new Ct(ye.comparator),sC=new bt(ye.comparator);function Ge(...i){let e=sC;for(const t of i)e=e.add(t);return e}const iC=new bt(Pe);function g0(){return iC}function y0(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function hT(i){return{integerValue:""+i}}function fT(i,e){return R1(e)?hT(e):y0(i,e)}class Df{constructor(){this._=void 0}}function aC(i,e,t){return i instanceof ju?(function(a,l){const u={fields:{[H1]:{stringValue:q1},[$1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&h0(l)&&(l=Nf(l)),l&&(u.fields[G1]=l),{mapValue:u}})(t,e):i instanceof go?pT(i,e):i instanceof Ul?gT(i,e):(function(a,l){const u=mT(a,l),m=Ix(u)+Ix(a.Ae);return Ag(u)&&Ag(a.Ae)?hT(m):y0(a.serializer,m)})(i,e)}function oC(i,e,t){return i instanceof go?pT(i,e):i instanceof Ul?gT(i,e):t}function mT(i,e){return i instanceof Bl?(function(r){return Ag(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class ju extends Df{}class go extends Df{constructor(e){super(),this.elements=e}}function pT(i,e){const t=yT(e);for(const r of i.elements)t.some((a=>Cs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Ul extends Df{constructor(e){super(),this.elements=e}}function gT(i,e){let t=yT(e);for(const r of i.elements)t=t.filter((a=>!Cs(a,r)));return{arrayValue:{values:t}}}class Bl extends Df{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ix(i){return qt(i.integerValue||i.doubleValue)}function yT(i){return Mu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class b0{constructor(e,t){this.field=e,this.transform=t}}function lC(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof go&&a instanceof go||r instanceof Ul&&a instanceof Ul?Rl(r.elements,a.elements,Cs):r instanceof Bl&&a instanceof Bl?Cs(r.Ae,a.Ae):r instanceof ju&&a instanceof ju})(i.transform,e.transform)}class cC{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mf{}function bT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new kf(i.key,zn.none()):new Xl(i.key,i.data,zn.none());{const t=i.data,r=Ln.empty();let a=new bt(Ht.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new mi(i.key,r,new lr(a.toArray()),zn.none())}}function uC(i,e,t){i instanceof Xl?(function(a,l,u){const m=a.value.clone(),g=Cx(a.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof mi?(function(a,l,u){if(!Vh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=Cx(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(_T(a)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function yu(i,e,t,r){return i instanceof Xl?(function(l,u,m,g){if(!Vh(l.precondition,u))return m;const y=l.value.clone(),v=Rx(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,t,r):i instanceof mi?(function(l,u,m,g){if(!Vh(l.precondition,u))return m;const y=Rx(l.fieldTransforms,g,u),v=u.data;return v.setAll(_T(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(i,e,t,r):(function(l,u,m){return Vh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function dC(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=mT(r.transform,a||null);l!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,l))}return t||null}function Nx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Rl(r,a,((l,u)=>lC(l,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Xl extends Mf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class mi extends Mf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _T(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Cx(i,e,t){const r=new Map;Ne(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],u=l.transform,m=e.data.field(l.field);r.set(l.field,oC(u,m,t[a]))}return r}function Rx(i,e,t){const r=new Map;for(const a of i){const l=a.transform,u=t.data.field(a.field);r.set(a.field,aC(l,u,e))}return r}class kf extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vT extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&uC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const g=bT(u,m);g!==null&&r.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((t,r)=>Nx(t,r)))&&Rl(this.baseMutations,e.baseMutations,((t,r)=>Nx(t,r)))}}class v0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return rC})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new v0(e,t,r,a)}}class x0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hC{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,tt;function fC(i){switch(i){case J.OK:return we(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function xT(i){if(i===void 0)return tn("GRPC error has no .code"),J.UNKNOWN;switch(i){case ln.OK:return J.OK;case ln.CANCELLED:return J.CANCELLED;case ln.UNKNOWN:return J.UNKNOWN;case ln.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ln.INTERNAL:return J.INTERNAL;case ln.UNAVAILABLE:return J.UNAVAILABLE;case ln.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ln.NOT_FOUND:return J.NOT_FOUND;case ln.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ln.ABORTED:return J.ABORTED;case ln.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ln.DATA_LOSS:return J.DATA_LOSS;default:return we(39323,{code:i})}}(tt=ln||(ln={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function mC(){return new TextEncoder}const pC=new oa([4294967295,4294967295],0);function Dx(i){const e=mC().encode(i),t=new m1;return t.update(e),new Uint8Array(t.digest())}function Mx(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new oa([t,r],0),new oa([a,l],0)]}class w0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(r<0)throw new au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(oa.fromNumber(r)));return a.compare(pC)===1&&(a=new oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Dx(e),[r,a]=Mx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new w0(l,a,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=Dx(e),[r,a]=Mx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qu{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qu(De.min(),a,new Ct(Pe),Tr(),Ge())}}class Xu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xu(r,t,Ge(),Ge(),Ge())}}class Ph{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class wT{constructor(e,t){this.targetId=e,this.Ce=t}}class TT{constructor(e,t,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class kx{constructor(){this.ve=0,this.Fe=jx(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),r=Ge();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:we(38017,{changeType:l})}})),new Xu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=jx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tr(),this.He=Th(),this.Je=Th(),this.Ze=new Ct(Pe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Jh(l))if(r===0){const u=new ye(l.path);this.et(t,u,Qt.newNoDocument(u,De.min()))}else Ne(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=ci(r).toUint8Array()}catch(g){if(g instanceof F1)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new w0(u,a,l)}catch(g){return fo(g instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const m=this.ot(u);if(m){if(l.current&&Jh(m.target)){const g=new ye(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Qt.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=Ge();this.Je.forEach(((l,u)=>{let m=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Qu(e,t,this.Ze,this.je,r);return this.je=Tr(),this.He=Th(),this.Je=Th(),this.Ze=new Ct(Pe),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new kx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new bt(Pe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new bt(Pe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Th(){return new Ct(ye.comparator)}function jx(){return new Ct(ye.comparator)}const yC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class vC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dg(i,e){return i.useProto3Json||Ef(e)?e:{value:e}}function Fl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ET(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function xC(i,e){return Fl(i,e.toTimestamp())}function Yn(i){return Ne(!!i,49232),De.fromTimestamp((function(t){const r=li(t);return new gt(r.seconds,r.nanos)})(i))}function T0(i,e){return Mg(i,e).canonicalString()}function Mg(i,e){const t=(function(a){return new dt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function ST(i){const e=dt.fromString(i);return Ne(jT(e),10190,{key:e.toString()}),e}function tf(i,e){return T0(i.databaseId,e.path)}function ao(i,e){const t=ST(e);if(t.get(1)!==i.databaseId.projectId)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ye(NT(t))}function AT(i,e){return T0(i.databaseId,e)}function IT(i){const e=ST(i);return e.length===4?dt.emptyPath():NT(e)}function kg(i){return new dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function NT(i){return Ne(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Ox(i,e,t){return{name:tf(i,e),fields:t.value.mapValue.fields}}function wC(i,e,t){const r=ao(i,e.name),a=Yn(e.updateTime),l=e.createTime?Yn(e.createTime):De.min(),u=new Ln({mapValue:{fields:e.fields}}),m=Qt.newFoundDocument(r,a,l,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function TC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(Ne(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(Ne(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const v=y.code===void 0?J.UNKNOWN:xT(y.code);return new fe(v,y.message||"")})(u);t=new TT(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=ao(i,r.document.name),l=Yn(r.document.updateTime),u=r.document.createTime?Yn(r.document.createTime):De.min(),m=new Ln({mapValue:{fields:r.document.fields}}),g=Qt.newFoundDocument(a,l,u,m),y=r.targetIds||[],v=r.removedTargetIds||[];t=new Ph(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=ao(i,r.document),l=r.readTime?Yn(r.readTime):De.min(),u=Qt.newNoDocument(a,l),m=r.removedTargetIds||[];t=new Ph([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=ao(i,r.document),l=r.removedTargetIds||[];t=new Ph([],l,a,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new hC(a,l),m=r.targetId;t=new wT(m,u)}}return t}function nf(i,e){let t;if(e instanceof Xl)t={update:Ox(i,e.key,e.value)};else if(e instanceof kf)t={delete:tf(i,e.key)};else if(e instanceof mi)t={update:Ox(i,e.key,e.data),updateMask:CC(e.fieldMask)};else{if(!(e instanceof vT))return we(16599,{dt:e.type});t={verify:tf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const m=u.transform;if(m instanceof ju)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof go)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ul)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bl)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:xC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(i,e.precondition)),t}function jg(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?zn.updateTime(Yn(l.updateTime)):l.exists!==void 0?zn.exists(l.exists):zn.none()})(e.currentDocument):zn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,m){let g=null;if("setToServerValue"in m)Ne(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new ju;else if("appendMissingElements"in m){const v=m.appendMissingElements.values||[];g=new go(v)}else if("removeAllFromArray"in m){const v=m.removeAllFromArray.values||[];g=new Ul(v)}else"increment"in m?g=new Bl(u,m.increment):we(16584,{proto:m});const y=Ht.fromServerFormat(m.fieldPath);return new b0(y,g)})(i,a))):[];if(e.update){e.update.name;const a=ao(i,e.update.name),l=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(g){const y=g.fieldPaths||[];return new lr(y.map((v=>Ht.fromServerFormat(v))))})(e.updateMask);return new mi(a,l,u,t,r)}return new Xl(a,l,t,r)}if(e.delete){const a=ao(i,e.delete);return new kf(a,t)}if(e.verify){const a=ao(i,e.verify);return new vT(a,t)}return we(1463,{proto:e})}function EC(i,e){return i&&i.length>0?(Ne(e!==void 0,14353),i.map((t=>(function(a,l){let u=a.updateTime?Yn(a.updateTime):Yn(l);return u.isEqual(De.min())&&(u=Yn(l)),new cC(u,a.transformResults||[])})(t,e)))):[]}function CT(i,e){return{documents:[AT(i,e.path)]}}function RT(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=AT(i,a);const l=(function(y){if(y.length!==0)return kT(yt.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:vl(T.field),direction:AC(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Dg(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function DT(i){let e=IT(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ne(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(w){const T=MT(w);return T instanceof yt&&p0(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(P){return new ku(xl(P.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let m=null;t.limit&&(m=(function(w){let T;return T=typeof w=="object"?w.value:w,Ef(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(w){const T=!!w.before,N=w.values||[];return new Ll(N,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const T=!w.before,N=w.values||[];return new Ll(N,T)})(t.endAt)),sT(e,a,u,l,m,"F",g,y)}function SC(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xl(t.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=xl(t.unaryFilter.field);return Je.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xl(t.unaryFilter.field);return Je.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=xl(t.unaryFilter.field);return Je.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Je.create(xl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return yt.create(t.compositeFilter.filters.map((r=>MT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(i):we(30097,{filter:i})}function AC(i){return yC[i]}function IC(i){return bC[i]}function NC(i){return _C[i]}function vl(i){return{fieldPath:i.canonicalString()}}function xl(i){return Ht.fromServerFormat(i.fieldPath)}function kT(i){return i instanceof Je?(function(t){if(t.op==="=="){if(_x(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NAN"}};if(bx(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_x(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NAN"}};if(bx(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(t.field),op:IC(t.op),value:t.value}}})(i):i instanceof yt?(function(t){const r=t.getFilters().map((a=>kT(a)));return r.length===1?r[0]:{compositeFilter:{op:NC(t.op),filters:r}}})(i):we(54877,{filter:i})}function CC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function jT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function OT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class ni{constructor(e,t,r,a,l=De.min(),u=De.min(),m=nn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VT{constructor(e){this.yt=e}}function RC(i,e){let t;if(e.document)t=wC(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=bo(e.noDocument.readTime);t=Qt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=bo(e.unknownDocument.version);t=Qt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new gt(a[0],a[1]);return De.fromTimestamp(l)})(e.readTime)),t}function Vx(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:tf(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Fl(l,u.version.toTimestamp()),createTime:Fl(l,u.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yo(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:yo(e.version)}}return r}function rf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yo(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bo(i){const e=new gt(i.seconds,i.nanoseconds);return De.fromTimestamp(e)}function Za(i,e){const t=(e.baseMutations||[]).map((l=>jg(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const m=e.mutations[l+1];u.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>jg(i.yt,l))),a=gt.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,a,t,r)}function ou(i){const e=bo(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?bo(i.lastLimboFreeSnapshotVersion):De.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const u=l.documents.length;return Ne(u===1,1966,{count:u}),Er(Ku(IT(l.documents[0])))})(i.query):(function(l){return Er(DT(l))})(i.query),new ni(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,nn.fromBase64String(i.resumeToken))}function PT(i,e){const t=yo(e.snapshotVersion),r=yo(e.lastLimboFreeSnapshotVersion);let a;a=Jh(e.target)?CT(i.yt,e.target):RT(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:po(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function LT(i){const e=DT({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ef(e,e.limit,"L"):e}function ng(i,e){return new x0(e.largestBatchId,jg(i.yt,e.overlayMutation))}function Px(i,e){const t=e.path.lastSegment();return[i,Un(e.path.popLast()),t]}function Lx(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:yo(r.readTime),documentKey:Un(r.documentKey.path),largestBatchId:r.largestBatchId}}class DC{getBundleMetadata(e,t){return zx(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:bo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return zx(e).put((function(a){return{bundleId:a.id,createTime:yo(Yn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Ux(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:LT(l.bundledQuery),readTime:bo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return Ux(e).put((function(a){return{name:a.name,readTime:yo(Yn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function zx(i){return mn(i,Sf)}function Ux(i){return mn(i,Af)}class jf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new jf(e,r)}getOverlay(e,t){return Xc(e).get(Px(this.userId,t)).next((r=>r?ng(this.serializer,r):null))}getOverlays(e,t){const r=Es();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const m=new x0(t,u);a.push(this.bt(e,m))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Un(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Xc(e).X(Tg,m))})),F.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Es(),l=Un(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Xc(e).H(Tg,u).next((m=>{for(const g of m){const y=ng(this.serializer,g);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Es();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xc(e).ee({index:V1,range:m},((g,y,v)=>{const w=ng(this.serializer,y);l.size()<a||w.largestBatchId===u?(l.set(w.getKey(),w),u=w.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Xc(e).put((function(a,l,u){const[m,g,y]=Px(l,u.mutation.key);return{userId:l,collectionPath:g,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:nf(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Xc(i){return mn(i,If)}class MC{St(e){return mn(e,u0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?nn.fromUint8Array(r):nn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class eo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(qt(e.integerValue));else if("doubleValue"in e){const r=qt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Eu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=li(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ci(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Y1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Cf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):we(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Vl,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(qt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}eo.Wt=new eo;const hl=255;function kC(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Bx(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=kC(255&r[l]);if(a+=u,u!==8)break}return a})(i);return Math.ceil(e/8)}class jC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=Bx(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=Bx(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(hl),this.sn(255)}_n(){this.an(hl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===hl?(this.sn(hl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===hl?(this.an(hl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class OC{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class VC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Wc{constructor(){this.cn=new jC,this.ascending=new OC(this.cn),this.descending=new VC(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class to{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new to(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Lh(this.Tn),directionalValue:Lh(this.In),orderedDocumentKey:Lh(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Qi(i,e){let t=i.hn-e.hn;return t!==0?t:(t=Fx(i.Tn,e.Tn),t!==0?t:(t=Fx(i.In,e.In),t!==0?t:ye.comparator(i.Pn,e.Pn)))}function Fx(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Lh(i){return l1()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function qx(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class Hx{constructor(e){this.Vn=new bt(((t,r)=>Ht.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ne(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=vg(e);if(t!==void 0&&!this.pn(t))return!1;const r=Xa(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const g=r[l];if(!this.yn(m,g)||!this.wn(this.dn[u++],g))return!1}++l}for(;l<r.length;++l){const m=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new bt(Ht.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Rh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Rh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Rh(r.field,r.dir==="asc"?0:1)));return new Yh(Yh.UNKNOWN_ID,this.collectionId,t,Tu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function zT(i){if(Ne(i instanceof Je||i instanceof yt,20012),i instanceof Je){if(i instanceof rT){const t=i.value.arrayValue?.values?.map((r=>Je.create(i.field,"==",r)))||[];return yt.create(t,"or")}return i}const e=i.filters.map((t=>zT(t)));return yt.create(e,i.op)}function PC(i){if(i.getFilters().length===0)return[];const e=Pg(zT(i));return Ne(UT(e),7391),Og(e)||Vg(e)?[e]:e.getFilters()}function Og(i){return i instanceof Je}function Vg(i){return i instanceof yt&&p0(i)}function UT(i){return Og(i)||Vg(i)||(function(t){if(t instanceof yt&&Ig(t)){for(const r of t.getFilters())if(!Og(r)&&!Vg(r))return!1;return!0}return!1})(i)}function Pg(i){if(Ne(i instanceof Je||i instanceof yt,34018),i instanceof Je)return i;if(i.filters.length===1)return Pg(i.filters[0]);const e=i.filters.map((r=>Pg(r)));let t=yt.create(e,i.op);return t=sf(t),UT(t)?t:(Ne(t instanceof yt,64498),Ne(zl(t),40251),Ne(t.filters.length>1,57927),t.filters.reduce(((r,a)=>E0(r,a))))}function E0(i,e){let t;return Ne(i instanceof Je||i instanceof yt,38388),Ne(e instanceof Je||e instanceof yt,25473),t=i instanceof Je?e instanceof Je?(function(a,l){return yt.create([a,l],"and")})(i,e):Gx(i,e):e instanceof Je?Gx(e,i):(function(a,l){if(Ne(a.filters.length>0&&l.filters.length>0,48005),zl(a)&&zl(l))return eT(a,l.getFilters());const u=Ig(a)?a:l,m=Ig(a)?l:a,g=u.filters.map((y=>E0(y,m)));return yt.create(g,"or")})(i,e),sf(t)}function Gx(i,e){if(zl(e))return eT(e,i.getFilters());{const t=e.filters.map((r=>E0(i,r)));return yt.create(t,"or")}}function sf(i){if(Ne(i instanceof Je||i instanceof yt,11850),i instanceof Je)return i;const e=i.getFilters();if(e.length===1)return sf(e[0]);if(J1(i))return i;const t=e.map((a=>sf(a))),r=[];return t.forEach((a=>{a instanceof Je?r.push(a):a instanceof yt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:yt.create(r,i.op)}class LC{constructor(){this.Sn=new S0}addToCollectionParentIndex(e,t){return this.Sn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Sr.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class S0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new bt(dt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new bt(dt.comparator)).toArray()}}const $x="IndexedDbIndexManager",Eh=new Uint8Array(0);class zC{constructor(e,t){this.databaseId=t,this.Dn=new S0,this.Cn=new fi((r=>po(r)),((r,a)=>$u(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:Un(a)};return Kx(e).put(l)}return F.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[w1(t),""],!1,!0);return Kx(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Ts(u.parent))}return r}))}addFieldIndex(e,t){const r=Jc(e),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=ml(e);return l.next((m=>{u.put(Lx(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Jc(e),a=ml(e),l=fl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jc(e),r=fl(e),a=ml(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return F.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new Hx(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=fl(e);let a=!0;const l=new Map;return F.forEach(this.vn(t),(u=>this.Fn(e,u).next((m=>{a&&(a=!!m),l.set(u,m)})))).next((()=>{if(a){let u=Ge();const m=[];return F.forEach(l,((g,y)=>{ce($x,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((oe=>`${oe.fieldPath}:${oe.kind}`)).join(",")}`})(g)} to execute ${po(t)}`);const v=(function(Q,oe){const re=vg(oe);if(re===void 0)return null;for(const ue of Zh(Q,re.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(y,g),w=(function(Q,oe){const re=new Map;for(const ue of Xa(oe))for(const S of Zh(Q,ue.fieldPath))switch(S.op){case"==":case"in":re.set(ue.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return re.set(ue.fieldPath.canonicalString(),S.value),Array.from(re.values())}return null})(y,g),T=(function(Q,oe){const re=[];let ue=!0;for(const S of Xa(oe)){const A=S.kind===0?Ex(Q,S.fieldPath,Q.startAt):Sx(Q,S.fieldPath,Q.startAt);re.push(A.value),ue&&(ue=A.inclusive)}return new Ll(re,ue)})(y,g),N=(function(Q,oe){const re=[];let ue=!0;for(const S of Xa(oe)){const A=S.kind===0?Sx(Q,S.fieldPath,Q.endAt):Ex(Q,S.fieldPath,Q.endAt);re.push(A.value),ue&&(ue=A.inclusive)}return new Ll(re,ue)})(y,g),P=this.Mn(g,y,T),K=this.Mn(g,y,N),U=this.xn(g,y,w),B=this.On(g.indexId,v,P,T.inclusive,K,N.inclusive,U);return F.forEach(B,(Z=>r.Z(Z,t.limit).next((Q=>{Q.forEach((oe=>{const re=ye.fromSegments(oe.documentKey);u.has(re)||(u=u.add(re),m.push(re))}))}))))})).next((()=>m))}return F.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=PC(yt.create(e.filters,"and")).map((r=>Cg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,m){const g=(t!=null?t.length:1)*Math.max(r.length,l.length),y=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const T=t?this.Nn(t[w/y]):Eh,N=this.Bn(e,T,r[w%y],a),P=this.Ln(e,T,l[w%y],u),K=m.map((U=>this.Bn(e,T,U,!0)));v.push(...this.createRange(N,P,K))}return v}Bn(e,t,r,a){const l=new to(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new to(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new Hx(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const m of l)r.gn(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return F.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(g){let y=new bt(Ht.comparator),v=!1;for(const w of g.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:y=y.add(T.field));for(const w of g.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Wc;for(const a of Xa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);eo.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new Wc;return eo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Wc;return eo.Wt.Dt(Du(this.databaseId,t),r.ln((function(l){const u=Xa(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Wc);let l=0;for(const u of Xa(e)){const m=r[l++];for(const g of a)if(this.qn(t,u.fieldPath)&&Mu(m))a=this.Un(a,u,m);else{const y=g.ln(u.kind);eo.Wt.Dt(m,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const m of a){const g=new Wc;g.seed(m.un()),eo.Wt.Dt(u,g.ln(t.kind)),l.push(g)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Je&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Jc(e),a=ml(e);return(t?r.H(wg,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return F.forEach(l,(m=>a.get([m.indexId,this.uid]).next((g=>{u.push((function(v,w){const T=w?new Tu(w.sequenceNumber,new Sr(bo(w.readTime),new ye(Ts(w.documentKey)),w.largestBatchId)):Tu.empty(),N=v.fields.map((([P,K])=>new Rh(Ht.fromServerFormat(P),K)));return new Yh(v.indexId,v.collectionGroup,N,T)})(m,g))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Pe(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Jc(e),l=ml(e);return this.Wn(e).next((u=>a.H(wg,IDBKeyRange.bound(t,t)).next((m=>F.forEach(m,(g=>l.put(Lx(g.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?F.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((m=>(r.set(a.collectionGroup,m),F.forEach(m,(g=>this.Qn(e,a,g).next((y=>{const v=this.Gn(l,g);return y.isEqual(v)?F.resolve():this.zn(e,l,g,y,v)})))))))}))}jn(e,t,r,a){return fl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return fl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=fl(e);let l=new bt(Qi);return a.ee({index:O1,range:IDBKeyRange.only([r.indexId,this.uid,Lh(this.Kn(r,t))])},((u,m)=>{l=l.add(new to(r.indexId,t,qx(m.arrayValue),qx(m.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new bt(Qi);const a=this.kn(t,e);if(a==null)return r;const l=vg(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Mu(u))for(const m of u.arrayValue.values||[])r=r.add(new to(t.indexId,e.key,this.Nn(m),a))}else r=r.add(new to(t.indexId,e.key,Eh,a));return r}zn(e,t,r,a,l){ce($x,"Updating index entries for document '%s'",t.key);const u=[];return(function(g,y,v,w,T){const N=g.getIterator(),P=y.getIterator();let K=dl(N),U=dl(P);for(;K||U;){let B=!1,Z=!1;if(K&&U){const Q=v(K,U);Q<0?Z=!0:Q>0&&(B=!0)}else K!=null?Z=!0:B=!0;B?(w(U),U=dl(P)):Z?(T(K),K=dl(N)):(K=dl(N),U=dl(P))}})(a,l,Qi,(m=>{u.push(this.jn(e,t,r,m))}),(m=>{u.push(this.Hn(e,t,r,m))})),F.waitFor(u)}Wn(e){let t=1;return ml(e).ee({index:j1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,m)=>Qi(u,m))).filter(((u,m,g)=>!m||Qi(u,g[m-1])!==0));const a=[];a.push(e);for(const u of r){const m=Qi(u,e),g=Qi(u,t);if(m===0)a[0]=e.En();else if(m>0&&g<0)a.push(u),a.push(u.En());else if(g>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const m=a[u].An(this.uid,Eh,ye.empty()),g=a[u+1].An(this.uid,Eh,ye.empty());l.push(IDBKeyRange.bound(m,g))}return l}Jn(e,t){return Qi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yx)}getMinOffset(e,t){return F.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||we(44426))))).next(Yx)}}function Kx(i){return mn(i,Iu)}function fl(i){return mn(i,fu)}function Jc(i){return mn(i,c0)}function ml(i){return mn(i,hu)}function Yx(i){Ne(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;a0(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Sr(e.readTime,e.documentKey,t)}const Qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BT=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function FT(i,e,t){const r=i.store(ns),a=i.store(Ml),l=[],u=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:u},((v,w,T)=>(m++,T.delete())));l.push(g.next((()=>{Ne(m===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const w=D1(e,v.key.path,t.batchId);l.push(a.delete(w)),y.push(v.key)}return F.waitFor(l).next((()=>y))}function af(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw we(14731);e=i.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(BT,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Of{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ne(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Of(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).ee({index:no,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=wl(e),u=Xi(e);return u.add({}).next((m=>{Ne(typeof m=="number",49019);const g=new _0(m,t,r,a),y=(function(N,P,K){const U=K.baseMutations.map((Z=>nf(N.yt,Z))),B=K.mutations.map((Z=>nf(N.yt,Z)));return{userId:P,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:U,mutations:B}})(this.serializer,this.userId,g),v=[];let w=new bt(((T,N)=>Pe(T.canonicalString(),N.canonicalString())));for(const T of a){const N=D1(this.userId,T.key.path,m);w=w.add(T.key.path.popLast()),v.push(u.put(y)),v.push(l.put(N,pN))}return w.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[m]=g.keys()})),F.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return Xi(e).get(t).next((r=>r?(Ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Za(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?F.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Xi(e).ee({index:no,range:a},((u,m,g)=>{m.userId===this.userId&&(Ne(m.batchId>=r,47524,{Yn:r}),l=Za(this.serializer,m)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=so;return Xi(e).ee({index:no,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,so],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).H(no,t).next((r=>r.map((a=>Za(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Dh(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return wl(e).ee({range:a},((u,m,g)=>{const[y,v,w]=u,T=Ts(v);if(y===this.userId&&t.path.isEqual(T))return Xi(e).get(w).next((N=>{if(!N)throw we(61480,{er:u,batchId:w});Ne(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:w}),l.push(Za(this.serializer,N))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Pe);const a=[];return t.forEach((l=>{const u=Dh(this.userId,l.path),m=IDBKeyRange.lowerBound(u),g=wl(e).ee({range:m},((y,v,w)=>{const[T,N,P]=y,K=Ts(N);T===this.userId&&l.path.isEqual(K)?r=r.add(P):w.done()}));a.push(g)})),F.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Dh(this.userId,r),u=IDBKeyRange.lowerBound(l);let m=new bt(Pe);return wl(e).ee({range:u},((g,y,v)=>{const[w,T,N]=g,P=Ts(T);w===this.userId&&r.isPrefixOf(P)?P.length===a&&(m=m.add(N)):v.done()})).next((()=>this.tr(e,m)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Xi(e).get(l).next((u=>{if(u===null)throw we(35274,{batchId:l});Ne(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(Za(this.serializer,u))})))})),F.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return FT(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),F.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return wl(e).ee({range:r},((l,u,m)=>{if(l[0]===this.userId){const g=Ts(l[1]);a.push(g)}else m.done()})).next((()=>{Ne(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return qT(e,this.userId,t)}ir(e){return HT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:so,lastStreamToken:""}))}}function qT(i,e,t){const r=Dh(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return wl(i).ee({range:l,Y:!0},((m,g,y)=>{const[v,w,T]=m;v===e&&w===a&&(u=!0),y.done()})).next((()=>u))}function Xi(i){return mn(i,ns)}function wl(i){return mn(i,Ml)}function HT(i){return mn(i,Su)}class _o{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _o(0)}static ar(){return new _o(-1)}}class UC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new _o(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>De.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>pl(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ne(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return pl(e).ee(((u,m)=>{const g=ou(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return pl(e).ee(((r,a)=>{const l=ou(a);t(l)}))}ur(e){return Xx(e).get(Wh).next((t=>(Ne(t!==null,2888),t)))}cr(e,t){return Xx(e).put(Wh,t)}lr(e,t){return pl(e).put(PT(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=po(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return pl(e).ee({range:a,index:k1},((u,m,g)=>{const y=ou(m);$u(t,y.target)&&(l=y,g.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Zi(e);return t.forEach((u=>{const m=Un(u.path);a.push(l.put({targetId:r,path:m})),a.push(this.referenceDelegate.addReference(e,r,u))})),F.waitFor(a)}removeMatchingKeys(e,t,r){const a=Zi(e);return F.forEach(t,(l=>{const u=Un(l.path);return F.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Zi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zi(e);let l=Ge();return a.ee({range:r,Y:!0},((u,m,g)=>{const y=Ts(u[1]),v=new ye(y);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=Un(t.path),a=IDBKeyRange.bound([r],[w1(r)],!1,!0);let l=0;return Zi(e).ee({index:l0,Y:!0,range:a},(([u,m],g,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return pl(e).get(t).next((r=>r?ou(r):null))}}function pl(i){return mn(i,kl)}function Xx(i){return mn(i,io)}function Zi(i){return mn(i,jl)}const Wx="LruGarbageCollector",GT=1048576;function Jx([i,e],[t,r]){const a=Pe(i,t);return a===0?Pe(e,r):a}class BC{constructor(e){this.Pr=e,this.buffer=new bt(Jx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $T{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(Wx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pa(t)?ce(Wx,"Ignoring IndexedDB error during garbage collection: ",t):await ma(t)}await this.Ar(3e5)}))}}class FC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(or.ce);const r=new BC(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Qx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,u=Date.now(),this.nthSequenceNumber(e,a)))).next((w=>(r=w,m=Date.now(),this.removeTargets(e,r,t)))).next((w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),bl()<=We.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w}))))}}function KT(i,e){return new FC(i,e)}class qC{constructor(e,t){this.db=e,this.garbageCollector=KT(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Sh(e,r)}removeReference(e,t,r){return Sh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sh(e,t)}wr(e,t){return(function(a,l){let u=!1;return HT(a).te((m=>qT(a,m,l).next((g=>(g&&(u=!0),F.resolve(!g)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,m)=>{if(m<=t){const g=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,De.min()),Zi(e).delete((function(w){return[0,Un(w.path)]})(u)))))}));a.push(g)}})).next((()=>F.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sh(e,t)}yr(e,t){const r=Zi(e);let a,l=or.ce;return r.ee({index:l0},(([u,m],{path:g,sequenceNumber:y})=>{u===0?(l!==or.ce&&t(new ye(Ts(a)),l),l=y,a=g):l=or.ce})).next((()=>{l!==or.ce&&t(new ye(Ts(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sh(i,e){return Zi(i).put((function(r,a){return{targetId:0,path:Un(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}class YT{constructor(){this.changes=new fi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ya(e).put(r)}removeEntry(e,t,r){return Ya(e).delete((function(l,u){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],rf(u),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Qt.newInvalidDocument(t);return Ya(e).ee({index:Mh,range:IDBKeyRange.only(Zc(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Qt.newInvalidDocument(t)};return Ya(e).ee({index:Mh,range:IDBKeyRange.only(Zc(t))},((a,l)=>{r={document:this.Sr(t,l),size:af(l)}})).next((()=>r))}getEntries(e,t){let r=Tr();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=Tr(),a=new Ct(ye.comparator);return this.Cr(e,t,((l,u)=>{const m=this.Sr(l,u);r=r.insert(l,m),a=a.insert(l,af(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return F.resolve();let a=new bt(tw);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(Zc(a.first()),Zc(a.last())),u=a.getIterator();let m=u.getNext();return Ya(e).ee({index:Mh,range:l},((g,y,v)=>{const w=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&tw(m,w)<0;)r(m,null),m=u.getNext();m&&m.isEqual(w)&&(r(m,y),m=u.hasNext()?u.getNext():null),m?v.j(Zc(m)):v.done()})).next((()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,m=[u.popLast().toArray(),u.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ya(e).H(IDBKeyRange.bound(m,g,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let v=Tr();for(const w of y){const T=this.Sr(ye.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Yu(t,T)||a.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=Tr();const u=ew(t,r),m=ew(t,Sr.max());return Ya(e).ee({index:M1,range:IDBKeyRange.bound(u,m,!0)},((g,y,v)=>{const w=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(w.key,w),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new GC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Zx(e).get(xg).next((t=>(Ne(!!t,20021),t)))}br(e,t){return Zx(e).put(xg,t)}Sr(e,t){if(t){const r=RC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return Qt.newInvalidDocument(e)}}function QT(i){return new HC(i)}class GC extends YT{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new fi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new bt(((l,u)=>Pe(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const m=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,m.readTime)),u.isValidDocument()){const g=Vx(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=af(g);r+=y-m.size,t.push(this.Mr.addEntry(e,l,g))}else if(r-=m.size,this.trackRemovals){const g=Vx(this.Mr.serializer,u.convertToNoDocument(De.min()));t.push(this.Mr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function Zx(i){return mn(i,Au)}function Ya(i){return mn(i,Xh)}function Zc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ew(i,e){const t=e.documentKey.path.toArray();return[i,rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tw(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Pe(t[l],r[l]),a)return a;return a=Pe(t.length,r.length),a||(a=Pe(t[t.length-2],r[r.length-2]),a||Pe(t[t.length-1],r[r.length-1]))}class $C{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class XT{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&yu(r.mutation,a,lr.empty(),gt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const a=Es();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=iu();return l.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Es();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,a){let l=Tr();const u=gu(),m=(function(){return gu()})();return t.forEach(((g,y)=>{const v=r.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof mi)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),yu(v.mutation,y,v.mutation.getFieldMask(),gt.now())):u.set(y.key,lr.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>m.set(y,new $C(v,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=gu();let a=new Ct(((u,m)=>u-m)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=r.get(g)||lr.empty();v=m.applyToLocalView(y,v),r.set(g,v);const w=(a.get(m.batchId)||Ge()).add(g);a=a.insert(m.batchId,w)}))})).next((()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,w=dT();v.forEach((T=>{if(!l.has(T)){const N=bT(t.get(T),r.get(T));N!==null&&w.set(T,N),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return F.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return JN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):F.resolve(Es());let m=Dl,g=l;return u.next((y=>F.forEach(y,((v,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),l.get(v)?F.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Ge()))).next((v=>({batchId:m,changes:uT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=iu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((m=>F.forEach(m,(g=>{const y=(function(w,T){return new Ql(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((v=>{v.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Qt.newInvalidDocument(v)))}));let m=iu();return u.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&yu(v.mutation,y,lr.empty(),gt.now()),Yu(t,y)&&(m=m.insert(g,y))})),m}))}}class KC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return F.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:LT(a.bundledQuery),readTime:Yn(a.readTime)}})(t)),F.resolve()}}class YC{constructor(){this.overlays=new Ct(ye.comparator),this.Lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Es();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const a=Es(),l=t.length+1,u=new ye(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Ct(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=Es(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=Es(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>m.set(y,v))),!(m.size()>=a)););return F.resolve(m)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new x0(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ge(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class QC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}class A0{constructor(){this.kr=new bt(yn.Kr),this.qr=new bt(yn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new yn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new dt([])),r=new yn(t,e),a=new yn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new dt([])),r=new yn(t,e),a=new yn(t,e+1);let l=Ge();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new yn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class XC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new bt(yn.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new _0(l,t,r,a);this.mutationQueue.push(u);for(const m of a)this.Jr=this.Jr.add(new yn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return F.resolve(u)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?so:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),a=new yn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const m=this.Zr(u.Hr);l.push(m)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Pe);return t.forEach((a=>{const l=new yn(a,0),u=new yn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(m=>{r=r.add(m.Hr)}))})),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new yn(new ye(l),0);let m=new bt(Pe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Hr)),!0)}),u),F.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ne(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(t.mutations,(a=>{const l=new yn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new yn(t,0),a=this.Jr.firstAfterOrEqual(r);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WC{constructor(e){this.ti=e,this.docs=(function(){return new Ct(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let r=Tr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Qt.newInvalidDocument(a))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Tr();const u=t.path,m=new ye(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||a0(A1(v),r)<=0||(a.has(v.key)||Yu(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,r,a){we(9500)}ni(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new JC(this)}getSize(e){return F.resolve(this.size)}}class JC extends YT{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class ZC{constructor(e){this.persistence=e,this.ri=new fi((t=>po(t)),$u),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new A0,this.targetCount=0,this.oi=_o._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),F.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.lr(t),F.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.si.containsKey(t))}}class I0{constructor(e,t){this._i={},this.overlays={},this.ai=new or(0),this.ui=!1,this.ui=!0,this.ci=new QC,this.referenceDelegate=e(this),this.li=new ZC(this),this.indexManager=new LC,this.remoteDocumentCache=(function(a){return new WC(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new VT(t),this.Pi=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new XC(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new eR(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return F.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class eR extends N1{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new A0,this.Ai=null}static Vi(e){return new Vf(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,De.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class of{constructor(e,t){this.persistence=e,this.fi=new fi((r=>Un(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=KT(this,t)}static Vi(e,t){return new of(e,t)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return F.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(r++,l.removeEntry(u,De.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}wr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return F.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class tR{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Tf("createOrUpgrade",t);r<1&&a>=1&&((function(g){g.createObjectStore(Gu)})(e),(function(g){g.createObjectStore(Su,{keyPath:mN}),g.createObjectStore(ns,{keyPath:hx,autoIncrement:!0}).createIndex(no,fx,{unique:!0}),g.createObjectStore(Ml)})(e),nw(e),(function(g){g.createObjectStore(Wa)})(e));let u=F.resolve();return r<3&&a>=3&&(r!==0&&((function(g){g.deleteObjectStore(jl),g.deleteObjectStore(kl),g.deleteObjectStore(io)})(e),nw(e)),u=u.next((()=>(function(g){const y=g.store(io),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return y.put(Wh,v)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(g,y){return y.store(ns).H().next((w=>{g.deleteObjectStore(ns),g.createObjectStore(ns,{keyPath:hx,autoIncrement:!0}).createIndex(no,fx,{unique:!0});const T=y.store(ns),N=w.map((P=>T.put(P)));return F.waitFor(N)}))})(e,l)))),u=u.next((()=>{(function(g){g.createObjectStore(Ol,{keyPath:TN})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(g){g.createObjectStore(Au)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(g){g.createObjectStore(Sf,{keyPath:EN})})(e),(function(g){g.createObjectStore(Af,{keyPath:SN})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(g){const y=g.createObjectStore(If,{keyPath:MN});y.createIndex(Tg,kN,{unique:!1}),y.createIndex(V1,jN,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(g){const y=g.createObjectStore(Xh,{keyPath:gN});y.createIndex(Mh,yN),y.createIndex(M1,bN)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Wa)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(g){g.createObjectStore(c0,{keyPath:AN,autoIncrement:!0}).createIndex(wg,IN,{unique:!1}),g.createObjectStore(hu,{keyPath:NN}).createIndex(j1,CN,{unique:!1}),g.createObjectStore(fu,{keyPath:RN}).createIndex(O1,DN,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(hu).clear()})).next((()=>{t.objectStore(fu).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(g){g.createObjectStore(u0,{keyPath:ON})})(e)}))),r<18&&a>=18&&l1()&&(u=u.next((()=>{t.objectStore(hu).clear()})).next((()=>{t.objectStore(fu).clear()}))),u}pi(e){let t=0;return e.store(Wa).ee(((r,a)=>{t+=af(a)})).next((()=>{const r={byteSize:t};return e.store(Au).put(xg,r)}))}gi(e){const t=e.store(Su),r=e.store(ns);return t.H().next((a=>F.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,so],[l.userId,l.lastAcknowledgedBatchId]);return r.H(no,u).next((m=>F.forEach(m,(g=>{Ne(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=Za(this.serializer,g);return FT(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(jl),r=e.store(Wa);return e.store(io).get(Wh).next((a=>{const l=[];return r.ee(((u,m)=>{const g=new dt(u),y=(function(w){return[0,Un(w)]})(g);l.push(t.get(y).next((v=>v?F.resolve():(w=>t.put({targetId:0,path:Un(w),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>F.waitFor(l)))}))}wi(e,t){e.createObjectStore(Iu,{keyPath:wN});const r=t.store(Iu),a=new S0,l=u=>{if(a.add(u)){const m=u.lastSegment(),g=u.popLast();return r.put({collectionId:m,parent:Un(g)})}};return t.store(Wa).ee({Y:!0},((u,m)=>{const g=new dt(u);return l(g.popLast())})).next((()=>t.store(Ml).ee({Y:!0},(([u,m,g],y)=>{const v=Ts(m);return l(v.popLast())}))))}bi(e){const t=e.store(kl);return t.ee(((r,a)=>{const l=ou(a),u=PT(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(Wa),a=[];return r.ee(((l,u)=>{const m=t.store(Xh),g=(function(w){return w.document?new ye(dt.fromString(w.document.name).popFirst(5)):w.noDocument?ye.fromSegments(w.noDocument.path):w.unknownDocument?ye.fromSegments(w.unknownDocument.path):we(36783)})(u).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(m.put(y))})).next((()=>F.waitFor(a)))}Di(e,t){const r=t.store(ns),a=QT(this.serializer),l=new I0(Vf.Vi,this.serializer.yt);return r.H().next((u=>{const m=new Map;return u.forEach((g=>{let y=m.get(g.userId)??Ge();Za(this.serializer,g).keys().forEach((v=>y=y.add(v))),m.set(g.userId,y)})),F.forEach(m,((g,y)=>{const v=new bn(y),w=jf.wt(this.serializer,v),T=l.getIndexManager(v),N=Of.wt(v,this.serializer,T,l.referenceDelegate);return new XT(a,N,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Eg(t,or.ce),g).next()}))}))}}function nw(i){i.createObjectStore(jl,{keyPath:vN}).createIndex(l0,xN,{unique:!0}),i.createObjectStore(kl,{keyPath:"targetId"}).createIndex(k1,_N,{unique:!0}),i.createObjectStore(io)}const Wi="IndexedDbPersistence",rg=18e5,sg=5e3,ig="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nR="main";class N0{constructor(e,t,r,a,l,u,m,g,y,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=m,this.Fi=y,this.Mi=v,this.xi=w,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!N0.v())throw new fe(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qC(this,a),this.Ki=t+nR,this.serializer=new VT(g),this.qi=new la(this.Ki,this.xi,new tR(this.serializer)),this.ci=new MC,this.li=new UC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QT(this.serializer),this.Pi=new DC,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&tn(Wi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(J.FAILED_PRECONDITION,ig);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new or(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(pa(e))return ce(Wi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Wi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return eu(e).get(ul).next((t=>F.resolve(this.Xi(t))))}Yi(e){return Ah(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,rg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=mn(t,Ol);return r.H().next((a=>{const l=this.ns(a,rg),u=a.filter((m=>l.indexOf(m)===-1));return F.forEach(u,(m=>r.delete(m.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?F.resolve(!0):eu(e).get(ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,sg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new fe(J.FAILED_PRECONDITION,ig);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).H().next((r=>this.ns(r,sg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||u&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Wi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Gu,Ol],(e=>{const t=new Eg(e,or.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Ah(e).H().next((t=>this.ns(t,rg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Of.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(Wi,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?LN:g===17?U1:g===16?PN:g===15?d0:g===14?z1:g===13?L1:g===12?VN:g===11?P1:void we(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(m=>(u=new Eg(m,this.ai?this.ai.next():or.ce),t==="readwrite-primary"?this.ji(u).next((g=>!!g||this.Hi(u))).next((g=>{if(!g)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new fe(J.FAILED_PRECONDITION,I1);return r(u)})).next((g=>this.Zi(u).next((()=>g)))):this.Ps(u).next((()=>r(u)))))).then((m=>(u.raiseOnCommittedEvent(),m)))}Ps(e){return eu(e).get(ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,sg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(J.FAILED_PRECONDITION,ig)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eu(e).put(ul,t)}static v(){return la.v()}Ji(e){const t=eu(e);return t.get(ul).next((r=>this.Xi(r)?(ce(Wi,"Releasing primary lease."),t.delete(ul)):F.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;o1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ce(Wi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return tn(Wi,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eu(i){return mn(i,Gu)}function Ah(i){return mn(i,Ol)}function WT(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class C0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ge(),a=Ge();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new C0(e,t.fromCache,r,a)}}class rR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class JT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return o1()?8:C1(hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new rR;return this.ys(e,t,u).next((m=>{if(l.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(bl()<=We.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",_l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(bl()<=We.DEBUG&&ce("QueryEngine","Query:",_l(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(bl()<=We.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",_l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):F.resolve())}gs(e,t){if(Ax(t))return F.resolve(null);let r=Er(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ef(t,null,"F"),r=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Ge(...l);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(t,m);return this.Ss(t,y,u,g.readTime)?this.gs(e,ef(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,r,a){return Ax(t)||a.isEqual(De.min())?F.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?F.resolve(null):(bl()<=We.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_l(t)),this.Ds(e,u,t,S1(a,Dl)).next((m=>m)))}))}bs(e,t){let r=new bt(lT(e));return t.forEach(((a,l)=>{Yu(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return bl()<=We.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",_l(t)),this.fs.getDocumentsMatchingQuery(e,t,Sr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const R0="LocalStore",sR=3e8;class iR{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Ct(Pe),this.Fs=new fi((l=>po(l)),$u),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function ZT(i,e,t,r){return new iR(i,e,t,r)}async function eE(i,e){const t=Ae(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],m=[];let g=Ge();for(const y of a){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function aR(i,e){const t=Ae(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,v){const w=y.batch,T=w.keys();let N=F.resolve();return T.forEach((P=>{N=N.next((()=>v.getEntry(g,P))).next((K=>{const U=y.docVersions.get(P);Ne(U!==null,48541),K.version.compareTo(U)<0&&(w.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),v.addEntry(K)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,w)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ge();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function tE(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function oR(i,e){const t=Ae(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const m=[];e.targetChanges.forEach(((v,w)=>{const T=a.get(w);if(!T)return;m.push(t.li.removeMatchingKeys(l,v.removedDocuments,w).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,w))));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?N=N.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),a=a.insert(w,N),(function(K,U,B){return K.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=sR?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,N,v)&&m.push(t.li.updateTargetData(l,N))}));let g=Tr(),y=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(lR(l,u,e.documentUpdates).next((v=>{g=v.Bs,y=v.Ls}))),!r.isEqual(De.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((w=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(v)}return F.waitFor(m).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function lR(i,e,t){let r=Ge(),a=Ge();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let u=Tr();return t.forEach(((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):ce(R0,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function cR(i,e){const t=Ae(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=so),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function lf(i,e){const t=Ae(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,F.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ni(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ql(i,e,t){const r=Ae(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!pa(u))throw u;ce(R0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Lg(i,e,t){const r=Ae(i);let a=De.min(),l=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,v){const w=Ae(g),T=w.Fs.get(v);return T!==void 0?F.resolve(w.vs.get(T)):w.li.getTargetData(y,v)})(r,u,Er(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,m.targetId).next((g=>{l=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:De.min(),t?l:Ge()))).next((m=>(sE(r,oT(e),m),{documents:m,ks:l})))))}function nE(i,e){const t=Ae(i),r=Ae(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function rE(i,e){const t=Ae(i),r=t.Ms.get(e)||De.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,S1(r,Dl),Number.MAX_SAFE_INTEGER))).then((a=>(sE(t,e,a),a)))}function sE(i,e,t){let r=i.Ms.get(e)||De.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}const iE="firestore_clients";function rw(i,e){return`${iE}_${i}_${e}`}const aE="firestore_mutations";function sw(i,e,t){let r=`${aE}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const oE="firestore_targets";function ag(i,e){return`${oE}_${i}_${e}`}const ws="SharedClientState";class cf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new fe(a.error.code,a.error.message))),u?new cf(e,t,a.state,l):(tn(ws,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new fe(r.error.code,r.error.message))),l?new bu(e,r.state,a):(tn(ws,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=g0();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=R1(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new uf(e,l):(tn(ws,`Failed to parse client data for instance '${e}': ${t}`),null)}}class D0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new D0(t.clientId,t.onlineState):(tn(ws,`Failed to parse online state: ${e}`),null)}}class zg{constructor(){this.activeTargetIds=g0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class og{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Ct(Pe),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=rw(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zg),this.eo=new RegExp(`^${iE}_${u}_([^_]*)$`),this.no=new RegExp(`^${aE}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${oE}_${u}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(rw(this.persistenceKey,r));if(a){const l=uf.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ag(this.persistenceKey,e));if(a){const l=bu.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ag(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(ws,"READ",e,t),t}setItem(e,t){ce(ws,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(ws,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(ws,"EVENT",t.key,t.newValue),t.key===this.Xs)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=or.ce;if(l!=null)try{const m=JSON.parse(l);Ne(typeof m=="number",30636,{yo:l}),u=m}catch(m){tn(ws,"Failed to read sequence number from WebStorage",m)}return u})(t.newValue);r!==or.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new cf(this.currentUser,e,t,r),l=sw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=sw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=ag(this.persistenceKey,e),l=new bu(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return uf.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return cf.$s(new bn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return bu.$s(a,t)}_o(e){return D0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(ws,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],m=[];return l.forEach((g=>{a.has(g)||u.push(g)})),a.forEach((g=>{l.has(g)||m.push(g)})),this.syncEngine.Co(u,m).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=g0();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class lE{constructor(){this.vo=new zg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uR{Mo(e){}shutdown(){}}const iw="ConnectivityMonitor";class aw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(iw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ih=null;function Ug(){return Ih===null?Ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ih++,"0x"+Ih.toString(16)}const lg="RestConnection",dR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Cu?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=Ug(),m=this.Qo(e,t.toUriEncodedString());ce(lg,`Sending RPC '${e}' ${u}:`,m,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(m),v=Eo(y);return this.zo(e,m,g,r,v).then((w=>(ce(lg,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw fo(lg,`RPC '${e}' ${u} failed with error: `,w,"url: ",m,"request:",r),w}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=dR[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class fR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const On="WebChannelConnection",tu=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class El extends hR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!El.c_){const e=b1();tu(e,y1.STAT_EVENT,(t=>{t.stat===bg.PROXY?ce(On,"STAT_EVENT: detected buffering proxy"):t.stat===bg.NOPROXY&&ce(On,"STAT_EVENT: detected no buffering proxy")})),El.c_=!0}}zo(e,t,r,a,l){const u=Ug();return new Promise(((m,g)=>{const y=new p1;y.setWithCredentials(!0),y.listenOnce(g1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ch.NO_ERROR:const w=y.getResponseJson();ce(On,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),m(w);break;case Ch.TIMEOUT:ce(On,`RPC '${e}' ${u} timed out`),g(new fe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const T=y.getStatus();if(ce(On,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const P=N?.error;if(P&&P.status&&P.message){const K=(function(B){const Z=B.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Z)>=0?Z:J.UNKNOWN})(P.status);g(new fe(K,P.message))}else g(new fe(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(J.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(On,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ce(On,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Ug(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");ce(On,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);this.I_(v);let w=!1,T=!1;const N=new fR({Ho:P=>{T?ce(On,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(w||(ce(On,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),ce(On,`RPC '${e}' stream ${a} sending:`,P),v.send(P))},Jo:()=>v.close()});return tu(v,su.EventType.OPEN,(()=>{T||(ce(On,`RPC '${e}' stream ${a} transport opened.`),N.i_())})),tu(v,su.EventType.CLOSE,(()=>{T||(T=!0,ce(On,`RPC '${e}' stream ${a} transport closed`),N.o_(),this.E_(v))})),tu(v,su.EventType.ERROR,(P=>{T||(T=!0,fo(On,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),N.o_(new fe(J.UNAVAILABLE,"The operation could not be completed")))})),tu(v,su.EventType.MESSAGE,(P=>{if(!T){const K=P.data[0];Ne(!!K,16349);const U=K,B=U?.error||U[0]?.error;if(B){ce(On,`RPC '${e}' stream ${a} received error:`,B);const Z=B.status;let Q=(function(ue){const S=ln[ue];if(S!==void 0)return xT(S)})(Z),oe=B.message;Z==="NOT_FOUND"&&oe.includes("database")&&oe.includes("does not exist")&&oe.includes(this.databaseId.database)&&fo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Q===void 0&&(Q=J.INTERNAL,oe="Unknown error status: "+Z+" with message "+B.message),T=!0,N.o_(new fe(Q,oe)),v.close()}else ce(On,`RPC '${e}' stream ${a} received:`,K),N.__(K)}})),El.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _1()}}function mR(i){return new El(i)}function cE(){return typeof window<"u"?window:null}function zh(){return typeof document<"u"?document:null}function Pf(i){return new vC(i,!0)}El.c_=!1;class uE{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const ow="PersistentStream";class dE{constructor(e,t,r,a,l,u,m,g){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new fe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(ow,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(ow,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pR extends dE{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TC(this.serializer,e),r=(function(l){if(!("targetChange"in l))return De.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Yn(u.readTime):De.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=kg(this.serializer),t.addTarget=(function(l,u){let m;const g=u.target;if(m=Jh(g)?{documents:CT(l,g)}:{query:RT(l,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=ET(l,u.resumeToken);const y=Dg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(De.min())>0){m.readTime=Fl(l,u.snapshotVersion.toTimestamp());const y=Dg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=SC(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=kg(this.serializer),t.removeTarget=e,this.K_(t)}}class gR extends dE{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EC(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=kg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>nf(this.serializer,r)))};this.K_(t)}}class yR{}class bR extends yR{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Mg(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(J.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,Mg(t,r),a,u,m,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(J.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _R(i,e,t,r){return new bR(i,e,t,r)}class vR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tn(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class xR{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{So(this)&&(ce(vo,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await Wu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Lf(y)})(this))}))})),this.Va=new vR(r,a)}}async function Lf(i){if(So(i))for(const e of i.Ra)await e(!0)}async function Wu(i){for(const e of i.Ra)await e(!1)}function zf(i,e){const t=Ae(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),j0(t)?k0(t):Jl(t).O_()&&M0(t,e))}function Hl(i,e){const t=Ae(i),r=Jl(t);t.Ia.delete(e),r.O_()&&hE(t,e),t.Ia.size===0&&(r.O_()?r.L_():So(t)&&t.Va.set("Unknown"))}function M0(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jl(i).Z_(e)}function hE(i,e){i.da.$e(e),Jl(i).X_(e)}function k0(i){i.da=new gC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Jl(i).start(),i.Va.ua()}function j0(i){return So(i)&&!Jl(i).x_()&&i.Ia.size>0}function So(i){return Ae(i).Ea.size===0}function fE(i){i.da=void 0}async function wR(i){i.Va.set("Online")}async function TR(i){i.Ia.forEach(((e,t)=>{M0(i,e)}))}async function ER(i,e){fE(i),j0(i)?(i.Va.ha(e),k0(i)):i.Va.set("Unknown")}async function SR(i,e,t){if(i.Va.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.da.removeTarget(m))})(i,e)}catch(r){ce(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await df(i,r)}else if(e instanceof Ph?i.da.Xe(e):e instanceof wT?i.da.st(e):i.da.tt(e),!t.isEqual(De.min()))try{const r=await tE(i.localStore);t.compareTo(r)>=0&&await(function(l,u){const m=l.da.Tt(u);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),hE(l,g);const w=new ni(v.target,g,y,v.sequenceNumber);M0(l,w)})),l.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(r){ce(vo,"Failed to raise snapshot:",r),await df(i,r)}}async function df(i,e,t){if(!pa(e))throw e;i.Ea.add(1),await Wu(i),i.Va.set("Offline"),t||(t=()=>tE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ce(vo,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Lf(i)}))}function mE(i,e){return e().catch((t=>df(i,t,e)))}async function Wl(i){const e=Ae(i),t=ha(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:so;for(;AR(e);)try{const a=await cR(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,IR(e,a)}catch(a){await df(e,a)}pE(e)&&gE(e)}function AR(i){return So(i)&&i.Ta.length<10}function IR(i,e){i.Ta.push(e);const t=ha(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function pE(i){return So(i)&&!ha(i).x_()&&i.Ta.length>0}function gE(i){ha(i).start()}async function NR(i){ha(i).ra()}async function CR(i){const e=ha(i);for(const t of i.Ta)e.ea(t.mutations)}async function RR(i,e,t){const r=i.Ta.shift(),a=v0.from(r,e,t);await mE(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Wl(i)}async function DR(i,e){e&&ha(i).Y_&&await(async function(r,a){if((function(u){return fC(u)&&u!==J.ABORTED})(a.code)){const l=r.Ta.shift();ha(r).B_(),await mE(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Wl(r)}})(i,e),pE(i)&&gE(i)}async function lw(i,e){const t=Ae(i);t.asyncQueue.verifyOperationInProgress(),ce(vo,"RemoteStore received new credentials");const r=So(t);t.Ea.add(3),await Wu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lf(t)}async function Bg(i,e){const t=Ae(i);e?(t.Ea.delete(2),await Lf(t)):e||(t.Ea.add(2),await Wu(t),t.Va.set("Unknown"))}function Jl(i){return i.ma||(i.ma=(function(t,r,a){const l=Ae(t);return l.sa(),new pR(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:wR.bind(null,i),Yo:TR.bind(null,i),t_:ER.bind(null,i),J_:SR.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),j0(i)?k0(i):i.Va.set("Unknown")):(await i.ma.stop(),fE(i))}))),i.ma}function ha(i){return i.fa||(i.fa=(function(t,r,a){const l=Ae(t);return l.sa(),new gR(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:NR.bind(null,i),t_:DR.bind(null,i),ta:CR.bind(null,i),na:RR.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Wl(i)):(await i.fa.stop(),i.Ta.length>0&&(ce(vo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class O0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,m=new O0(e,t,u,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V0(i,e){if(tn("AsyncQueue",`${e}: ${i}`),pa(i))return new fe(J.UNAVAILABLE,`${e}: ${i}`);throw i}class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=iu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cw{constructor(){this.ga=new Ct(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Gl{constructor(e,t,r,a,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new Gl(e,t,Sl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class MR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kR{constructor(){this.queries=uw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Ae(t),l=a.queries;a.queries=uw(),l.forEach(((u,m)=>{for(const g of m.ba)g.onError(r)}))})(this,new fe(J.ABORTED,"Firestore shutting down"))}}function uw(){return new fi((i=>aT(i)),Rf)}async function P0(i,e){const t=Ae(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new MR,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=V0(u,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&z0(t)}async function L0(i,e){const t=Ae(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function jR(i,e){const t=Ae(i);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.ba)m.Fa(a)&&(r=!0);u.wa=a}}r&&z0(t)}function OR(i,e,t){const r=Ae(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function z0(i){i.Ca.forEach((e=>{e.next()}))}var Fg,dw;(dw=Fg||(Fg={})).Ma="default",dw.Cache="cache";class U0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fg.Cache}}class yE{constructor(e){this.key=e}}class bE{constructor(e){this.key=e}}class VR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=lT(e),this.tu=new Sl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new cw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,w)=>{const T=a.get(v),N=Yu(this.query,w)?w:null,P=!!T&&this.mutatedKeys.has(T.key),K=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;T&&N?T.data.isEqual(N.data)?P!==K&&(r.track({type:3,doc:N}),U=!0):this.su(T,N)||(r.track({type:2,doc:N}),U=!0,(g&&this.eu(N,g)>0||y&&this.eu(N,y)<0)&&(m=!0)):!T&&N?(r.track({type:0,doc:N}),U=!0):T&&!N&&(r.track({type:1,doc:T}),U=!0,(g||y)&&(m=!0)),U&&(N?(u=u.add(N),l=K?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,w)=>(function(N,P){const K=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:U})}};return K(N)-K(P)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new Gl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new bE(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new yE(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zl="SyncEngine";class PR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LR{constructor(e){this.key=e,this.hu=!1}}class zR{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new fi((m=>aT(m)),Rf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ct(ye.comparator),this.Au=new Map,this.Vu=new A0,this.du={},this.mu=new Map,this.fu=_o.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UR(i,e,t=!0){const r=Uf(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await _E(r,e,t,!0),a}async function BR(i,e){const t=Uf(i);await _E(t,e,!0,!1)}async function _E(i,e,t,r){const a=await lf(i.localStore,Er(e)),l=a.targetId,u=i.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await B0(i,e,l,u==="current",a.resumeToken)),i.isPrimaryClient&&t&&zf(i.remoteStore,a),m}async function B0(i,e,t,r,a){i.pu=(w,T,N)=>(async function(K,U,B,Z){let Q=U.view.ru(B);Q.Ss&&(Q=await Lg(K.localStore,U.query,!1).then((({documents:S})=>U.view.ru(S,Q))));const oe=Z&&Z.targetChanges.get(U.targetId),re=Z&&Z.targetMismatches.get(U.targetId)!=null,ue=U.view.applyChanges(Q,K.isPrimaryClient,oe,re);return qg(K,U.targetId,ue.au),ue.snapshot})(i,w,T,N);const l=await Lg(i.localStore,e,!0),u=new VR(e,l.ks),m=u.ru(l.documents),g=Xu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),y=u.applyChanges(m,i.isPrimaryClient,g);qg(i,t,y.au);const v=new PR(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function FR(i,e,t){const r=Ae(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!Rf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ql(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Hl(r.remoteStore,a.targetId),$l(r,a.targetId)})).catch(ma)):($l(r,a.targetId),await ql(r.localStore,a.targetId,!0))}async function qR(i,e){const t=Ae(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hl(t.remoteStore,r.targetId))}async function HR(i,e,t){const r=G0(i);try{const a=await(function(u,m){const g=Ae(u),y=gt.now(),v=m.reduce(((N,P)=>N.add(P.key)),Ge());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let P=Tr(),K=Ge();return g.xs.getEntries(N,v).next((U=>{P=U,P.forEach(((B,Z)=>{Z.isValidDocument()||(K=K.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,P))).next((U=>{w=U;const B=[];for(const Z of m){const Q=dC(Z,w.get(Z.key).overlayedDocument);Q!=null&&B.push(new mi(Z.key,Q,X1(Q.value.mapValue),zn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,B,m)})).next((U=>{T=U;const B=U.applyToLocalDocumentSet(w,K);return g.documentOverlayCache.saveOverlays(N,U.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:uT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,m,g){let y=u.du[u.currentUser.toKey()];y||(y=new Ct(Pe)),y=y.insert(m,g),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await ya(r,a.changes),await Wl(r.remoteStore)}catch(a){const l=V0(a,"Failed to persist write");t.reject(l)}}async function vE(i,e){const t=Ae(i);try{const r=await oR(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Ne(u.hu,14607):a.removedDocuments.size>0&&(Ne(u.hu,42227),u.hu=!1))})),await ya(t,r,e)}catch(r){await ma(r)}}function hw(i,e,t){const r=Ae(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(u,m){const g=Ae(u);g.onlineState=m;let y=!1;g.queries.forEach(((v,w)=>{for(const T of w.ba)T.va(m)&&(y=!0)})),y&&z0(g)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GR(i,e,t){const r=Ae(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new Ct(ye.comparator);u=u.insert(l,Qt.newNoDocument(l,De.min()));const m=Ge().add(l),g=new Qu(De.min(),new Map,new Ct(Pe),u,m);await vE(r,g),r.Ru=r.Ru.remove(l),r.Au.delete(e),H0(r)}else await ql(r.localStore,e,!1).then((()=>$l(r,e,t))).catch(ma)}async function $R(i,e){const t=Ae(i),r=e.batch.batchId;try{const a=await aR(t.localStore,e);q0(t,r,null),F0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ya(t,a)}catch(a){await ma(a)}}async function KR(i,e,t){const r=Ae(i);try{const a=await(function(u,m){const g=Ae(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next((w=>(Ne(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);q0(r,e,t),F0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ya(r,a)}catch(a){await ma(a)}}function F0(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function q0(i,e,t){const r=Ae(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function $l(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||xE(i,r)}))}function xE(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Hl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),H0(i))}function qg(i,e,t){for(const r of t)r instanceof yE?(i.Vu.addReference(r.key,e),YR(i,r)):r instanceof bE?(ce(Zl,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||xE(i,r.key)):we(19791,{wu:r})}function YR(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(ce(Zl,"New document in limbo: "+t),i.Eu.add(r),H0(i))}function H0(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ye(dt.fromString(e)),r=i.fu.next();i.Au.set(r,new LR(t)),i.Ru=i.Ru.insert(t,r),zf(i.remoteStore,new ni(Er(Ku(t.path)),r,"TargetPurposeLimboResolution",or.ce))}}async function ya(i,e,t){const r=Ae(i),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{u.push(r.pu(g,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){a.push(y);const v=C0.Es(g.targetId,y);l.push(v)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(g,y){const v=Ae(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>F.forEach(y,(T=>F.forEach(T.Ts,(N=>v.persistence.referenceDelegate.addReference(w,T.targetId,N))).next((()=>F.forEach(T.Is,(N=>v.persistence.referenceDelegate.removeReference(w,T.targetId,N)))))))))}catch(w){if(!pa(w))throw w;ce(R0,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const N=v.vs.get(T),P=N.snapshotVersion,K=N.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(T,K)}}})(r.localStore,l))}async function QR(i,e){const t=Ae(i);if(!t.currentUser.isEqual(e)){ce(Zl,"User change. New user:",e.toKey());const r=await eE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new fe(J.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ya(t,r.Ns)}}function XR(i,e){const t=Ae(i),r=t.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let a=Ge();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}async function WR(i,e){const t=Ae(i),r=await Lg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&qg(t,e.targetId,a.au),a}async function JR(i,e){const t=Ae(i);return rE(t.localStore,e).then((r=>ya(t,r)))}async function ZR(i,e,t,r){const a=Ae(i),l=await(function(m,g){const y=Ae(m),v=Ae(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.Xn(w,g).next((T=>T?y.localDocuments.getDocuments(w,T):F.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Wl(a.remoteStore):t==="acknowledged"||t==="rejected"?(q0(a,e,r||null),F0(a,e),(function(m,g){Ae(Ae(m).mutationQueue).nr(g)})(a.localStore,e)):we(6720,"Unknown batchState",{bu:t}),await ya(a,l)):ce(Zl,"Cannot apply mutation batch with id: "+e)}async function e5(i,e){const t=Ae(i);if(Uf(t),G0(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await fw(t,r.toArray());t.gu=!0,await Bg(t.remoteStore,!0);for(const l of a)zf(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>($l(t,u),ql(t.localStore,u,!0)))),Hl(t.remoteStore,u)})),await a,await fw(t,r),(function(u){const m=Ae(u);m.Au.forEach(((g,y)=>{Hl(m.remoteStore,y)})),m.Vu.zr(),m.Au=new Map,m.Ru=new Ct(ye.comparator)})(t),t.gu=!1,await Bg(t.remoteStore,!1)}}async function fw(i,e,t){const r=Ae(i),a=[],l=[];for(const u of e){let m;const g=r.Iu.get(u);if(g&&g.length!==0){m=await lf(r.localStore,Er(g[0]));for(const y of g){const v=r.Tu.get(y),w=await WR(r,v);w.snapshot&&l.push(w.snapshot)}}else{const y=await nE(r.localStore,u);m=await lf(r.localStore,y),await B0(r,wE(y),u,!1,m.resumeToken)}a.push(m)}return r.Pu.J_(l),a}function wE(i){return sT(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function t5(i){return(function(t){return Ae(Ae(t).persistence).hs()})(Ae(i).localStore)}async function n5(i,e,t,r){const a=Ae(i);if(a.gu)return void ce(Zl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await rE(a.localStore,oT(l[0])),m=Qu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",nn.EMPTY_BYTE_STRING);await ya(a,u,m);break}case"rejected":await ql(a.localStore,e,!0),$l(a,e,r);break;default:we(64155,t)}}async function r5(i,e,t){const r=Uf(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Zl,"Adding an already active target "+a);continue}const l=await nE(r.localStore,a),u=await lf(r.localStore,l);await B0(r,wE(l),u.targetId,!1,u.resumeToken),zf(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await ql(r.localStore,a,!1).then((()=>{Hl(r.remoteStore,a),$l(r,a)})).catch(ma)}}function Uf(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GR.bind(null,e),e.Pu.J_=jR.bind(null,e.eventManager),e.Pu.yu=OR.bind(null,e.eventManager),e}function G0(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KR.bind(null,e),e}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ZT(this.persistence,new JT,e.initialUser,this.serializer)}Cu(e){return new I0(Vf.Vi,this.serializer)}Du(e){return new lE}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class s5 extends Ou{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ne(this.persistence.referenceDelegate instanceof of,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $T(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new I0((r=>of.Vi(r,t)),this.serializer)}}class TE extends Ou{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await G0(this.xu.syncEngine),await Wl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ZT(this.persistence,new JT,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new $T(r,e.asyncQueue,t)}Mu(e,t){const r=new hN(t,this.persistence);return new dN(e.asyncQueue,r)}Cu(e){const t=WT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new N0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cE(),zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new lE}}class i5 extends TE{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof og&&(this.sharedClientState.syncEngine={So:ZR.bind(null,t),Do:n5.bind(null,t),Co:r5.bind(null,t),hs:t5.bind(null,t),bo:JR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await e5(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=cE();if(!og.v(t))throw new fe(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new og(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QR.bind(null,this.syncEngine),await Bg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kR})()}createDatastore(e){const t=Pf(e.databaseInfo.databaseId),r=mR(e.databaseInfo);return _R(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,m){return new xR(r,a,l,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>hw(this.syncEngine,t,0)),(function(){return aw.v()?new aw:new uR})())}createSyncEngine(e,t){return(function(a,l,u,m,g,y,v){const w=new zR(a,l,u,m,g,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ae(t);ce(vo,"RemoteStore shutting down."),r.Ea.add(5),await Wu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vu.provider={build:()=>new Vu};class $0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const fa="FirestoreClient";class a5{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=i0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ce(fa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(fa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=V0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cg(i,e){i.asyncQueue.verifyOperationInProgress(),ce(fa,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await eE(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function mw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await o5(i);ce(fa,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>lw(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>lw(e.remoteStore,a))),i._onlineComponents=e}async function o5(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(fa,"Using user provided OfflineComponentProvider");try{await cg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),await cg(i,new Ou)}}else ce(fa,"Using default OfflineComponentProvider"),await cg(i,new s5(void 0));return i._offlineComponents}async function EE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(fa,"Using user provided OnlineComponentProvider"),await mw(i,i._uninitializedComponentsProvider._online)):(ce(fa,"Using default OnlineComponentProvider"),await mw(i,new Vu))),i._onlineComponents}function l5(i){return EE(i).then((e=>e.syncEngine))}async function hf(i){const e=await EE(i),t=e.eventManager;return t.onListen=UR.bind(null,e.syncEngine),t.onUnlisten=FR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qR.bind(null,e.syncEngine),t}function c5(i,e,t,r){const a=new $0(r),l=new U0(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>P0(await hf(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>L0(await hf(i),l)))}}function u5(i,e,t={}){const r=new Ss;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const v=new $0({next:T=>{v.Nu(),u.enqueueAndForget((()=>L0(l,w)));const N=T.docs.has(m);!N&&T.fromCache?y.reject(new fe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&g&&g.source==="server"?y.reject(new fe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new U0(Ku(m.path),v,{includeMetadataChanges:!0,Ka:!0});return P0(l,w)})(await hf(i),i.asyncQueue,e,t,r))),r.promise}function d5(i,e,t={}){const r=new Ss;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const v=new $0({next:T=>{v.Nu(),u.enqueueAndForget((()=>L0(l,w))),T.fromCache&&g.source==="server"?y.reject(new fe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new U0(m,v,{includeMetadataChanges:!0,Ka:!0});return P0(l,w)})(await hf(i),i.asyncQueue,e,t,r))),r.promise}function h5(i,e){const t=new Ss;return i.asyncQueue.enqueueAndForget((async()=>HR(await l5(i),e,t))),t.promise}function SE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const f5="ComponentProvider",pw=new Map;function m5(i,e,t,r,a){return new UN(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,SE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const AE="firestore.googleapis.com",gw=!0;class yw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AE,this.ssl=gw}else this.host=e.host,this.ssl=e.ssl??gw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GT)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bf{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new W2;switch(r.type){case"firstParty":return new tN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=pw.get(t);r&&(ce(f5,"Removing Datastore"),pw.delete(t),r.terminate())})(this),Promise.resolve()}}function p5(i,e,t,r={}){i=cr(i,Bf);const a=Eo(e),l=i._getSettings(),u={...l,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;a&&(Zg(`https://${m}`),i1("Firestore",!0)),l.host!==AE&&l.host!==m&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:r};if(!ai(g,u)&&(i._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=bn.MOCK_USER;else{y=SI(r.mockUserToken,i._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new fe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new bn(w)}i._authCredentials=new J2(new x1(y,v))}}class pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class Xt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hu(t,Xt._jsonSchema))return new Xt(e,r||null,new ye(dt.fromString(t.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:cn("string",Xt._jsonSchemaVersion),referencePath:cn("string")};class ca extends pi{constructor(e,t,r){super(e,t,Ku(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ye(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function Pt(i,e,...t){if(i=fn(i),T1("collection","path",e),i instanceof Bf){const r=dt.fromString(e,...t);return ox(r),new ca(i,null,r)}{if(!(i instanceof Xt||i instanceof ca))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(dt.fromString(e,...t));return ox(r),new ca(i.firestore,null,r)}}function it(i,e,...t){if(i=fn(i),arguments.length===1&&(e=i0.newId()),T1("doc","path",e),i instanceof Bf){const r=dt.fromString(e,...t);return ax(r),new Xt(i,null,new ye(r))}{if(!(i instanceof Xt||i instanceof ca))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(dt.fromString(e,...t));return ax(r),new Xt(i.firestore,i instanceof ca?i.converter:null,new ye(r))}}const bw="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uE(this,"async_queue_retry"),this._c=()=>{const r=zh();r&&ce(bw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!pa(e))throw e;ce(bw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,tn("INTERNAL UNHANDLED ERROR: ",vw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=O0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ui extends Bf{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new _w,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function g5(i,e,t){t||(t=Cu);const r=xf(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(ai(l,e))return a;throw new fe(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GT)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Eo(e.host)&&Zg(e.host),r.initialize({options:e,instanceIdentifier:t})}function IE(i,e){const t=typeof i=="object"?i:r0(),r=typeof i=="string"?i:Cu,a=xf(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=TI("firestore");l&&p5(a,...l)}return a}function Ff(i){if(i._terminated)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||y5(i),i._firestoreClient}function y5(i){const e=i._freezeSettings(),t=m5(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new a5(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(i._componentsProvider))}class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(nn.fromBase64String(e))}catch(t){throw new fe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Br(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:cn("string",Br._jsonSchemaVersion),bytes:cn("string")};class K0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ju{constructor(e){this._methodName=e}}class As{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:cn("string",As._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class is{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new is(e.vectorValues);throw new fe(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}is._jsonSchemaVersion="firestore/vectorValue/1.0",is._jsonSchema={type:cn("string",is._jsonSchemaVersion),vectorValues:cn("object")};const b5=/^__.*__$/;class _5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class NE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:i})}}class qf{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ff(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(CE(this.dataSource)&&b5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class v5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pf(e)}createContext(e,t,r,a=!1){return new qf({dataSource:e,methodName:t,targetDoc:r,path:Ht.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(i){const e=i._freezeSettings(),t=Pf(i._databaseId);return new v5(i._databaseId,!!e.ignoreUndefinedProperties,t)}function RE(i,e,t,r,a,l={}){const u=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);X0("Data must be an object, but it was:",u,r);const m=DE(r,u);let g,y;if(l.merge)g=new lr(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const T=xo(e,w,t);if(!u.contains(T))throw new fe(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);jE(v,T)||v.push(T)}g=new lr(v),y=u.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=u.fieldTransforms;return new _5(new Ln(m),g,y)}class Gf extends Ju{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function x5(i,e,t){return new qf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y0 extends Ju{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=x5(this,e,!0),r=this.Ac.map((l=>ec(l,t))),a=new go(r);return new b0(e.path,a)}isEqual(e){return e instanceof Y0&&ai(this.Ac,e.Ac)}}class Q0 extends Ju{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Bl(e.serializer,fT(e.serializer,this.Vc));return new b0(e.path,t)}isEqual(e){return e instanceof Q0&&this.Vc===e.Vc}}function w5(i,e,t,r){const a=i.createContext(1,e,t);X0("Data must be an object, but it was:",a,r);const l=[],u=Ln.empty();ga(r,((g,y)=>{const v=kE(e,g,t);y=fn(y);const w=a.childContextForFieldPath(v);if(y instanceof Gf)l.push(v);else{const T=ec(y,w);T!=null&&(l.push(v),u.set(v,T))}}));const m=new lr(l);return new NE(u,m,a.fieldTransforms)}function T5(i,e,t,r,a,l){const u=i.createContext(1,e,t),m=[xo(e,r,t)],g=[a];if(l.length%2!=0)throw new fe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(xo(e,l[T])),g.push(l[T+1]);const y=[],v=Ln.empty();for(let T=m.length-1;T>=0;--T)if(!jE(y,m[T])){const N=m[T];let P=g[T];P=fn(P);const K=u.childContextForFieldPath(N);if(P instanceof Gf)y.push(N);else{const U=ec(P,K);U!=null&&(y.push(N),v.set(N,U))}}const w=new lr(y);return new NE(v,w,u.fieldTransforms)}function E5(i,e,t,r=!1){return ec(t,i.createContext(r?4:3,e))}function ec(i,e){if(ME(i=fn(i)))return X0("Unsupported field value:",e,i),DE(i,e);if(i instanceof Ju)return(function(r,a){if(!CE(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const m of r){let g=ec(m,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=gt.fromDate(r);return{timestampValue:Fl(a.serializer,l)}}if(r instanceof gt){const l=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(a.serializer,l)}}if(r instanceof As)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:ET(a.serializer,r._byteString)};if(r instanceof Xt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:T0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof is)return(function(u,m){const g=u instanceof is?u.toArray():u;return{mapValue:{fields:{[f0]:{stringValue:m0},[Vl]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw m.createError("VectorValues must only contain numeric values.");return y0(m.serializer,v)}))}}}}}})(r,a);if(OT(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${wf(r)}`)})(i,e)}function DE(i,e){const t={};return B1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ga(i,((r,a)=>{const l=ec(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function ME(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof As||i instanceof Br||i instanceof Xt||i instanceof Ju||i instanceof is||OT(i))}function X0(i,e,t){if(!ME(t)||!E1(t)){const r=wf(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function xo(i,e,t){if((e=fn(e))instanceof K0)return e._internalPath;if(typeof e=="string")return kE(i,e);throw ff("Field path arguments must be of type string or ",i,!1,void 0,t)}const S5=new RegExp("[~\\*/\\[\\]]");function kE(i,e,t){if(e.search(S5)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new K0(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ff(i,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${r}`),u&&(g+=` in document ${a}`),g+=")"),new fe(J.INVALID_ARGUMENT,m+i+g)}function jE(i,e){return i.some((t=>t.isEqual(e)))}class A5{convertValue(e,t="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ga(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Vl].arrayValue?.values?.map((r=>qt(r.doubleValue)));return new is(t)}convertGeoPoint(e){return new As(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=li(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Ne(jT(r),9688,{name:e});const a=new mo(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||tn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class W0 extends A5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}}function Ek(...i){return new Y0("arrayUnion",i)}function gl(i){return new Q0("increment",i)}const xw="@firebase/firestore",ww="4.11.0";function Tw(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}class OE{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(xo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I5 extends OE{data(){return super.data()}}function VE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J0{}class Z0 extends J0{}function _n(i,e,...t){let r=[];e instanceof J0&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((g=>g instanceof ey)).length,m=l.filter((g=>g instanceof $f)).length;if(u>1||u>0&&m>0)throw new fe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class $f extends Z0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new $f(e,t,r)}_apply(e){const t=this._parse(e);return PE(e._query,t),new pi(e.firestore,e.converter,Rg(e._query,t))}_parse(e){const t=Hf(e.firestore);return(function(l,u,m,g,y,v,w){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Sw(w,v);const P=[];for(const K of w)P.push(Ew(g,l,K));T={arrayValue:{values:P}}}else T=Ew(g,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Sw(w,v),T=E5(m,u,w,v==="in"||v==="not-in");return Je.create(y,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ft(i,e,t){const r=e,a=xo("where",i);return $f._create(a,r,t)}class ey extends J0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ey(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const m=l.getFlattenedFilters();for(const g of m)PE(u,g),u=Rg(u,g)})(e._query,t),new pi(e.firestore,e.converter,Rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends Z0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ty(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new fe(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(l,u)})(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,eC(e._query,t))}}function oo(i,e="asc"){const t=e,r=xo("orderBy",i);return ty._create(r,t)}class ny extends Z0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ny(e,t,r)}_apply(e){return new pi(e.firestore,e.converter,ef(e._query,this._limit,this._limitType))}}function Hg(i){return lN("limit",i),ny._create("limit",i,"F")}function Ew(i,e,t){if(typeof(t=fn(t))=="string"){if(t==="")throw new fe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(e)&&t.indexOf("/")!==-1)throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!ye.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Du(i,new ye(r))}if(t instanceof Xt)return Du(i,t._key);throw new fe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(t)}.`)}function Sw(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PE(i,e){const t=(function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function LE(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class N5{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=M5(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function C5(i){return new N5(i)}class R5{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vu.provider,this._offlineComponentProvider={build:t=>new TE(t,e?.cacheSizeBytes,this.forceOwnership)}}}class D5{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vu.provider,this._offlineComponentProvider={build:t=>new i5(t,e?.cacheSizeBytes)}}}function M5(i){return new R5(i?.forceOwnership)}function k5(){return new D5}class lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends OE{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:cn("string",lo._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Uh extends lo{data(e={}){return super.data(e)}}class co{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Uh(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((m=>{const g=new Uh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new lu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Uh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new lu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:j5(m.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j5(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:cn("string",co._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};function ry(i){i=cr(i,Xt);const e=cr(i.firestore,ui),t=Ff(e);return u5(t,i._key).then((r=>zE(e,i,r)))}function Bh(i){i=cr(i,pi);const e=cr(i.firestore,ui),t=Ff(e),r=new W0(e);return VE(i._query),d5(t,i._query).then((a=>new co(e,r,i,a)))}function Is(i,e,t){i=cr(i,Xt);const r=cr(i.firestore,ui),a=LE(i.converter,e,t),l=Hf(r);return Kf(r,[RE(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,zn.none())])}function vr(i,e,t,...r){i=cr(i,Xt);const a=cr(i.firestore,ui),l=Hf(a);let u;return u=typeof(e=fn(e))=="string"||e instanceof K0?T5(l,"updateDoc",i._key,e,t,r):w5(l,"updateDoc",i._key,e),Kf(a,[u.toMutation(i._key,zn.exists(!0))])}function Tl(i){return Kf(cr(i.firestore,ui),[new kf(i._key,zn.none())])}function Pu(i,e){const t=cr(i.firestore,ui),r=it(i),a=LE(i.converter,e),l=Hf(i.firestore);return Kf(t,[RE(l,"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function Kn(i,...e){i=fn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Tw(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Tw(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,m;if(i instanceof Xt)u=cr(i.firestore,ui),m=Ku(i._key.path),l={next:y=>{e[r]&&e[r](zE(u,i,y))},error:e[r+1],complete:e[r+2]};else{const y=cr(i,pi);u=cr(y.firestore,ui),m=y._query;const v=new W0(u);l={next:w=>{e[r]&&e[r](new co(u,v,y,w))},error:e[r+1],complete:e[r+2]},VE(i._query)}const g=Ff(u);return c5(g,m,a,l)}function Kf(i,e){const t=Ff(i);return h5(t,e)}function zE(i,e,t){const r=t.docs.get(e._key),a=new W0(i);return new lo(i,a,e._key,r,new lu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){X2(Kl),Cl(new uo("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new ui(new Z2(r.getProvider("auth-internal")),new nN(u,r.getProvider("app-check-internal")),BN(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),aa(xw,ww,e),aa(xw,ww,"esm2020")})();var O5="firebase",V5="12.9.0";aa(O5,V5,"app");function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P5=UE,BE=new Fu("auth","Firebase",UE());const mf=new e0("@firebase/auth");function L5(i,...e){mf.logLevel<=We.WARN&&mf.warn(`Auth (${Kl}): ${i}`,...e)}function Fh(i,...e){mf.logLevel<=We.ERROR&&mf.error(`Auth (${Kl}): ${i}`,...e)}function Fr(i,...e){throw iy(i,...e)}function as(i,...e){return iy(i,...e)}function sy(i,e,t){const r={...P5(),[e]:t};return new Fu("auth","Firebase",r).create(e,{appName:i.name})}function ii(i){return sy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z5(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(i,"argument-error"),sy(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iy(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return BE.create(i,...e)}function je(i,e,...t){if(!i)throw iy(e,...t)}function ri(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Fh(e),new Error(e)}function di(i,e){i||ri(e)}function Gg(){return typeof self<"u"&&self.location?.href||""}function U5(){return Aw()==="http:"||Aw()==="https:"}function Aw(){return typeof self<"u"&&self.location?.protocol||null}function B5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U5()||RI()||"connection"in navigator)?navigator.onLine:!0}function F5(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,di(t>e,"Short delay should be less than long delay!"),this.isMobile=NI()||DI()}get(){return B5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ay(i,e){di(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class FE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const q5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const H5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G5=new Zu(3e4,6e4);function ba(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function _a(i,e,t,r,a={}){return qE(i,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=qu({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...l};return CI()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(y.credentials="include"),FE.fetch()(await HE(i,i.config.apiHost,t,m),y)})}async function qE(i,e,t){i._canInitEmulator=!1;const r={...q5,...e};try{const a=new K5(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Nh(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Nh(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw Nh(i,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw sy(i,v,y);Fr(i,v)}}catch(a){if(a instanceof hi)throw a;Fr(i,"network-request-failed",{message:String(a)})}}async function ed(i,e,t,r,a={}){const l=await _a(i,e,t,r,a);return"mfaPendingCredential"in l&&Fr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function HE(i,e,t,r){const a=`${e}${t}?${r}`,l=i,u=l.config.emulator?ay(i.config,a):`${i.config.apiScheme}://${a}`;return H5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function $5(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class K5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(as(this.auth,"network-request-failed")),G5.get())})}}function Nh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=as(i,e,r);return a.customData._tokenResponse=t,a}function Iw(i){return i!==void 0&&i.enterprise!==void 0}class Y5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q5(i,e){return _a(i,"GET","/v2/recaptchaConfig",ba(i,e))}async function X5(i,e){return _a(i,"POST","/v1/accounts:delete",e)}async function pf(i,e){return _a(i,"POST","/v1/accounts:lookup",e)}function _u(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W5(i,e=!1){const t=fn(i),r=await t.getIdToken(e),a=oy(r);je(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:_u(ug(a.auth_time)),issuedAtTime:_u(ug(a.iat)),expirationTime:_u(ug(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ug(i){return Number(i)*1e3}function oy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const a=e1(t);return a?JSON.parse(a):(Fh("Failed to decode base64 JWT payload"),null)}catch(a){return Fh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Nw(i){const e=oy(i);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Lu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hi&&J5(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function J5({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class Z5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $g{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gf(i){const e=i.auth,t=await i.getIdToken(),r=await Lu(i,pf(e,{idToken:t}));je(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?GE(a.providerUserInfo):[],u=tD(i.providerData,l),m=i.isAnonymous,g=!(i.email&&a.passwordHash)&&!u?.length,y=m?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new $g(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function eD(i){const e=fn(i);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tD(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function GE(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function nD(i,e){const t=await qE(i,{},async()=>{const r=qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,u=await HE(i,a,"/v1/token",`key=${l}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(g.credentials="include"),FE.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rD(i,e){return _a(i,"POST","/v2/accounts:revokeToken",ba(i,e))}class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=Nw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await nD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Al;return r&&(je(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(je(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(je(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return ri("not implemented")}}function Ji(i,e){je(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ss{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new Z5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $g(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lu(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return W5(this,e)}reload(){return eD(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await Lu(this,X5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:N,providerData:P,stsTokenManager:K}=t;je(w&&K,e,"internal-error");const U=Al.fromJSON(this.name,K);je(typeof w=="string",e,"internal-error"),Ji(r,e.name),Ji(a,e.name),je(typeof T=="boolean",e,"internal-error"),je(typeof N=="boolean",e,"internal-error"),Ji(l,e.name),Ji(u,e.name),Ji(m,e.name),Ji(g,e.name),Ji(y,e.name),Ji(v,e.name);const B=new ss({uid:w,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:N,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:U,createdAt:y,lastLoginAt:v});return P&&Array.isArray(P)&&(B.providerData=P.map(Z=>({...Z}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,r=!1){const a=new Al;a.updateFromServerResponse(t);const l=new ss({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await gf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];je(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?GE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,m=new Al;m.updateFromIdToken(r);const g=new ss({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new $g(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const Cw=new Map;function si(i){di(i instanceof Function,"Expected a class definition");let e=Cw.get(i);return e?(di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Cw.set(i,e),e)}class $E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$E.type="NONE";const Rw=$E;function qh(i,e,t){return`firebase:${i}:${e}:${t}`}class Il{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=qh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pf(this.auth,{idToken:e}).catch(()=>{});return t?ss._fromGetAccountInfoResponse(this.auth,t,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Il(si(Rw),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||si(Rw);const u=qh(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let w;if(typeof v=="string"){const T=await pf(e,{idToken:v}).catch(()=>{});if(!T)break;w=await ss._fromGetAccountInfoResponse(e,T,v)}else w=ss._fromJSON(e,v);y!==l&&(m=w),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Il(l,e,r):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Il(l,e,r))}}function Dw(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JE(e))return"Blackberry";if(ZE(e))return"Webos";if(YE(e))return"Safari";if((e.includes("chrome/")||QE(e))&&!e.includes("edge/"))return"Chrome";if(WE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function KE(i=hn()){return/firefox\//i.test(i)}function YE(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QE(i=hn()){return/crios\//i.test(i)}function XE(i=hn()){return/iemobile/i.test(i)}function WE(i=hn()){return/android/i.test(i)}function JE(i=hn()){return/blackberry/i.test(i)}function ZE(i=hn()){return/webos/i.test(i)}function ly(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function sD(i=hn()){return ly(i)&&!!window.navigator?.standalone}function iD(){return MI()&&document.documentMode===10}function eS(i=hn()){return ly(i)||WE(i)||ZE(i)||JE(i)||/windows phone/i.test(i)||XE(i)}function tS(i,e=[]){let t;switch(i){case"Browser":t=Dw(hn());break;case"Worker":t=`${Dw(hn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${r}`}class aD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function oD(i,e={}){return _a(i,"GET","/v2/passwordPolicy",ba(i,e))}const lD=6;class cD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class uD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mw(this),this.idTokenSubscription=new Mw(this),this.beforeStateQueue=new aD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pf(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===u)&&m?.user&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(ii(this));const t=e?fn(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oD(this),t=new cD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await rD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&si(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function va(i){return fn(i)}class Mw{constructor(e){this.auth=e,this.observer=null,this.addObserver=LI(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dD(i){Yf=i}function nS(i){return Yf.loadJS(i)}function hD(){return Yf.recaptchaEnterpriseScript}function fD(){return Yf.gapiScript}function mD(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class pD{constructor(){this.enterprise=new gD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class gD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yD="recaptcha-enterprise",rS="NO_RECAPTCHA";class bD{constructor(e){this.type=yD,this.auth=va(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{Q5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new Y5(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{m(g)})})}function a(l,u,m){const g=window.grecaptcha;Iw(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(rS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&Iw(window.grecaptcha))a(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=hD();g.length!==0&&(g+=m),nS(g).then(()=>{a(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function kw(i,e,t,r=!1,a=!1){const l=new bD(i);let u;if(a)u=rS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Kg(i,e,t,r,a){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await kw(i,e,t,t==="getOobCode");return r(i,l)}else return r(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await kw(i,e,t,t==="getOobCode");return r(i,u)}else return Promise.reject(l)})}function _D(i,e){const t=xf(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ai(l,e??{}))return a;Fr(a,"already-initialized")}return t.initialize({options:e})}function vD(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(si);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function xD(i,e,t){const r=va(i);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=sS(e),{host:u,port:m}=wD(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(ai(y,r.config.emulator)&&ai(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Eo(u)?(Zg(`${l}//${u}${g}`),i1("Auth",!0)):TD()}function sS(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function wD(i){const e=sS(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:jw(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:jw(u)}}}function jw(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function TD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}async function ED(i,e){return _a(i,"POST","/v1/accounts:signUp",e)}async function SD(i,e){return ed(i,"POST","/v1/accounts:signInWithPassword",ba(i,e))}async function AD(i,e){return ed(i,"POST","/v1/accounts:signInWithEmailLink",ba(i,e))}async function ID(i,e){return ed(i,"POST","/v1/accounts:signInWithEmailLink",ba(i,e))}class zu extends cy{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new zu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new zu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,t,"signInWithPassword",SD);case"emailLink":return AD(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,r,"signUpPassword",ED);case"emailLink":return ID(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nl(i,e){return ed(i,"POST","/v1/accounts:signInWithIdp",ba(i,e))}const ND="http://localhost";class wo extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new wo(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Nl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Nl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Nl(e,t)}buildRequest(){const e={requestUri:ND,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qu(t)}return e}}function CD(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RD(i){const e=nu(ru(i)).link,t=e?nu(ru(e)).deep_link_id:null,r=nu(ru(i)).deep_link_id;return(r?nu(ru(r)).link:null)||r||t||e||i}class uy{constructor(e){const t=nu(ru(e)),r=t.apiKey??null,a=t.oobCode??null,l=CD(t.mode??null);je(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=RD(e);try{return new uy(t)}catch{return null}}}class tc{constructor(){this.providerId=tc.PROVIDER_ID}static credential(e,t){return zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=uy.parseLink(t);return je(r,"argument-error"),zu._fromEmailAndCode(e,r.code,r.tenantId)}}tc.PROVIDER_ID="password";tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class td extends dy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends td{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";ea.PROVIDER_ID="facebook.com";class rs extends td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return rs.credential(t,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";class ta extends td{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";class na extends td{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return na.credential(t,r)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";async function DD(i,e){return ed(i,"POST","/v1/accounts:signUp",ba(i,e))}class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ss._fromIdTokenResponse(e,r,a),u=Ow(r);return new To({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Ow(r);return new To({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Ow(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class yf extends hi{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new yf(e,t,r,a)}}function iS(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(i,l,e,r):l})}async function MD(i,e,t=!1){const r=await Lu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return To._forOperation(i,"link",r)}async function kD(i,e,t=!1){const{auth:r}=i;if(wr(r.app))return Promise.reject(ii(r));const a="reauthenticate";try{const l=await Lu(i,iS(r,a,e,i),t);je(l.idToken,r,"internal-error");const u=oy(l.idToken);je(u,r,"internal-error");const{sub:m}=u;return je(i.uid===m,r,"user-mismatch"),To._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Fr(r,"user-mismatch"),l}}async function aS(i,e,t=!1){if(wr(i.app))return Promise.reject(ii(i));const r="signIn",a=await iS(i,r,e),l=await To._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function jD(i,e){return aS(va(i),e)}async function oS(i){const e=va(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OD(i,e,t){if(wr(i.app))return Promise.reject(ii(i));const r=va(i),u=await Kg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&oS(i),g}),m=await To._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function VD(i,e,t){return wr(i.app)?Promise.reject(ii(i)):jD(fn(i),tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oS(i),r})}function PD(i,e,t,r){return fn(i).onIdTokenChanged(e,t,r)}function LD(i,e,t){return fn(i).beforeAuthStateChanged(e,t)}function zD(i,e,t,r){return fn(i).onAuthStateChanged(e,t,r)}function UD(i){return fn(i).signOut()}const bf="__sak";class lS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BD=1e3,FD=10;class cS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);iD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,FD):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cS.type="LOCAL";const qD=cS;class uS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uS.type="SESSION";const dS=uS;function HD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await HD(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];function hy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class GD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=hy("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ns(){return window}function $D(i){Ns().location.href=i}function hS(){return typeof Ns().WorkerGlobalScope<"u"&&typeof Ns().importScripts=="function"}async function KD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YD(){return navigator?.serviceWorker?.controller||null}function QD(){return hS()?self:null}const fS="firebaseLocalStorageDb",XD=1,_f="firebaseLocalStorage",mS="fbase_key";class nd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xf(i,e){return i.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function WD(){const i=indexedDB.deleteDatabase(fS);return new nd(i).toPromise()}function Yg(){const i=indexedDB.open(fS,XD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(_f,{keyPath:mS})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await WD(),e(await Yg()))})})}async function Vw(i,e,t){const r=Xf(i,!0).put({[mS]:e,value:t});return new nd(r).toPromise()}async function JD(i,e){const t=Xf(i,!1).get(e),r=await new nd(t).toPromise();return r===void 0?null:r.value}function Pw(i,e){const t=Xf(i,!0).delete(e);return new nd(t).toPromise()}const ZD=800,e4=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>e4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(QD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KD(),!this.activeServiceWorker)return;this.sender=new GD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yg();return await Vw(e,bf,"1"),await Pw(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>JD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Pw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Xf(a,!1).getAll();return new nd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const t4=pS;new Zu(3e4,6e4);function gS(i,e){return e?si(e):(je(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class fy extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n4(i){return aS(i.auth,new fy(i),i.bypassAuthState)}function r4(i){const{auth:e,user:t}=i;return je(t,e,"internal-error"),kD(t,new fy(i),i.bypassAuthState)}async function s4(i){const{auth:e,user:t}=i;return je(t,e,"internal-error"),MD(t,new fy(i),i.bypassAuthState)}class yS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n4;case"linkViaPopup":case"linkViaRedirect":return s4;case"reauthViaPopup":case"reauthViaRedirect":return r4;default:Fr(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const i4=new Zu(2e3,1e4);async function a4(i,e,t){if(wr(i.app))return Promise.reject(as(i,"operation-not-supported-in-this-environment"));const r=va(i);z5(i,e,dy);const a=gS(r,t);return new ro(r,"signInViaPopup",e,a).executeNotNull()}class ro extends yS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(as(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(as(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(as(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i4.get())};e()}}ro.currentPopupAction=null;const o4="pendingRedirect",Hh=new Map;class l4 extends yS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const r=await c4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function c4(i,e){const t=h4(e),r=d4(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function u4(i,e){Hh.set(i._key(),e)}function d4(i){return si(i._redirectPersistence)}function h4(i){return qh(o4,i.config.apiKey,i.name)}async function f4(i,e,t=!1){if(wr(i.app))return Promise.reject(ii(i));const r=va(i),a=gS(r,e),u=await new l4(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const m4=600*1e3;class p4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!bS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(as(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lw(e))}saveEventToCache(e){this.cachedEventUids.add(Lw(e)),this.lastProcessedEventTime=Date.now()}}function Lw(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function bS({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function g4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bS(i);default:return!1}}async function y4(i,e={}){return _a(i,"GET","/v1/projects",e)}const b4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_4=/^https?/;async function v4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await y4(i);for(const t of e)try{if(x4(t))return}catch{}Fr(i,"unauthorized-domain")}function x4(i){const e=Gg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!_4.test(t))return!1;if(b4.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const w4=new Zu(3e4,6e4);function zw(){const i=Ns().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function T4(i){return new Promise((e,t)=>{function r(){zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zw(),t(as(i,"network-request-failed"))},timeout:w4.get()})}if(Ns().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ns().gapi?.load)r();else{const a=mD("iframefcb");return Ns()[a]=()=>{gapi.load?r():t(as(i,"network-request-failed"))},nS(`${fD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function E4(i){return Gh=Gh||T4(i),Gh}const S4=new Zu(5e3,15e3),A4="__/auth/iframe",I4="emulator/auth/iframe",N4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R4(i){const e=i.config;je(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ay(e,I4):`https://${i.config.authDomain}/${A4}`,r={apiKey:e.apiKey,appName:i.name,v:Kl},a=C4.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${qu(r).slice(1)}`}async function D4(i){const e=await E4(i),t=Ns().gapi;return je(t,i,"internal-error"),e.open({where:document.body,url:R4(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N4,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=as(i,"network-request-failed"),m=Ns().setTimeout(()=>{l(u)},S4.get());function g(){Ns().clearTimeout(m),a(r)}r.ping(g).then(g,()=>{l(u)})}))}const M4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k4=500,j4=600,O4="_blank",V4="http://localhost";class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P4(i,e,t,r=k4,a=j4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...M4,width:r.toString(),height:a.toString(),top:l,left:u},y=hn().toLowerCase();t&&(m=QE(y)?O4:t),KE(y)&&(e=e||V4,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[N,P])=>`${T}${N}=${P},`,"");if(sD(y)&&m!=="_self")return L4(e||"",m),new Uw(null);const w=window.open(e||"",m,v);je(w,i,"popup-blocked");try{w.focus()}catch{}return new Uw(w)}function L4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const z4="__/auth/handler",U4="emulator/auth/handler",B4=encodeURIComponent("fac");async function Bw(i,e,t,r,a,l){je(i.config.authDomain,i,"auth-domain-config-required"),je(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Kl,eventId:a};if(e instanceof dy){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",PI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof td){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await i._getAppCheckToken(),y=g?`#${B4}=${encodeURIComponent(g)}`:"";return`${F4(i)}?${qu(m).slice(1)}${y}`}function F4({config:i}){return i.emulator?ay(i,U4):`https://${i.authDomain}/${z4}`}const dg="webStorageSupport";class q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dS,this._completeRedirectFn=f4,this._overrideRedirectResult=u4}async _openPopup(e,t,r,a){di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Bw(e,t,r,Gg(),a);return P4(e,l,hy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Bw(e,t,r,Gg(),a);return $D(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(di(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await D4(e),r=new p4(e);return t.register("authEvent",a=>(je(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dg,{type:dg},a=>{const l=a?.[0]?.[dg];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=v4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||YE()||ly()}}const H4=q4;var Fw="@firebase/auth",qw="1.12.0";class G4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K4(i){Cl(new uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;je(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(i)},y=new uD(r,a,l,g);return vD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cl(new uo("auth-internal",e=>{const t=va(e.getProvider("auth").getImmediate());return(r=>new G4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(Fw,qw,$4(i)),aa(Fw,qw,"esm2020")}const Y4=300,Q4=s1("authIdTokenMaxAge")||Y4;let Hw=null;const X4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Q4)return;const a=t?.token;Hw!==a&&(Hw=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function _S(i=r0()){const e=xf(i,"auth");if(e.isInitialized())return e.getImmediate();const t=_D(i,{popupRedirectResolver:H4,persistence:[t4,qD,dS]}),r=s1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=X4(l.toString());LD(t,u,()=>u(t.currentUser)),PD(t,m=>u(m))}}const a=n1("auth");return a&&xD(t,`http://${a}`),t}function W4(){return document.getElementsByTagName("head")?.[0]??document}dD({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=as("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",W4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K4("Browser");const J4={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},vS=n0(J4),Ce=IE(vS),$h=_S(vS);new rs;const my=i=>i?typeof i=="number"?i:i.val?my(i.val):Number(i.value)||Number(i.coins)||Number(i.lofiCoins)||0:0,Gw=async i=>{try{const e=it(Ce,"users",i,"data","wallet"),t=await ry(e);return t.exists()?my(t.data()):0}catch(e){throw console.error("Error en servicio getWalletBalance:",e),e}},Z4=async(i,e)=>{const t=typeof e=="object"?my(e):Number(e),r=it(Ce,"users",i,"data","wallet");return await Is(r,{val:{value:t,coins:t,lofiCoins:t},value:t,coins:t,lofiCoins:t}),t},eM=i=>{const[e,t]=O.useState(0),[r,a]=O.useState(!0),l=O.useRef(null),u=O.useRef(null);O.useEffect(()=>{if(!i?.uid)return;(async()=>{try{a(!0);const w=await Gw(i.uid);t(w),u.current=w}catch{console.error("Fall la carga de billetera")}finally{a(!1)}})()},[i]);const m=O.useCallback(v=>{i?.uid&&(t(v),u.current=v,l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const w=u.current;await Z4(i.uid,w),console.log(" Saldo guardado en Firebase:",w)}catch{console.error("Error guardando saldo, revertimos...");const T=await Gw(i.uid);t(T)}},2e3))},[i]);return{balance:e,loading:r,updateBalance:m,addCoins:v=>m(e+v),spendCoins:v=>e>=v?(m(e-v),!0):!1}},tM={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},Qg=z2().length>0?r0():n0(tM);let Xg;try{Xg=g5(Qg,{localCache:C5({tabManager:k5()})})}catch{Xg=IE(Qg)}const vu=_S(Qg);new rs;const nM=()=>{const[i,e]=O.useState(null),[t,r]=O.useState(!0);return O.useEffect(()=>{const a=zD(vu,l=>{e(l),r(!1)});return()=>a()},[]),{user:i,loading:t}},ti=(i,e,t,r)=>{const[a,l]=O.useState(t),[u,m]=O.useState(!0),g=O.useCallback(()=>r?it(Xg,"users",r.uid,i,e):null,[r,i,e]);return O.useEffect(()=>{const v=g();if(!v){m(!1);return}const w=Kn(v,T=>{m(!1),T.exists()?l(T.data().val):l(t)},T=>{console.error("Firestore read error",T),m(!1)});return()=>w()},[g]),[a,async v=>{const w=g();if(w){l(v);try{await Is(w,{val:v},{merge:!0})}catch(T){console.error("Error writing to Firestore",T)}}},u]},rM=[{name:"Seba y Estefania",date:"12-08"},{name:"Bianca",date:"12-18"},{name:"Mica",date:"08-01"},{name:"Arturo",date:"04-01"},{name:"Mica",date:"11-21"},{name:"Angie",date:"11-19"},{name:"Dana",date:"08-28"},{name:"Luciano",date:"07-07"}],xS=["Tienda Lujosa","Clara Tienda","Clara Tierra","Bella Divina"],wS=["Columna CONFIRMADO","Columna POR UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Chat en vivo (filtro Pendiente)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats","Meeting"],Wg=[],sM=i=>{const[e,t]=ti("data","tasks",[],i),[r,a]=O.useState(""),[l,u]=O.useState(null),m=O.useRef(e);O.useEffect(()=>{m.current=e},[e]);const[,g]=O.useState(0);O.useEffect(()=>{const S=setInterval(()=>{m.current&&m.current.some(A=>A.running)&&g(A=>A+1)},1e3);return()=>clearInterval(S)},[]);const y=O.useCallback(()=>{const S=Date.now();return e.map(A=>A.running?{...A,elapsedTime:A.elapsedTime+(S-A.lastTime)}:A)},[e]),v=O.useCallback(S=>{const A=[],C=new Set(e.map(D=>D.name.toLowerCase()));let k=0;return S.forEach((D,L)=>{const{shopInput:R,taskName:me}=D,he=`${me} [${R}]`;if(C.has(he.toLowerCase())){k++;return}const H=!wS.includes(me)&&!Object.values(Wg).includes(me),le={id:Date.now()+L+Math.random(),name:he,rawTaskName:me,shop:R,quantity:null,elapsedTime:0,running:!1,lastTime:null,isCustom:H};A.push(le),C.add(he.toLowerCase())}),A.length>0?(t([...e,...A]),a(""),!0):(k>0&&a("Esas tareas ya existen en la lista."),!1)},[e,t]),w=O.useCallback(S=>v([S]),[v]),T=O.useCallback(S=>t(e.filter(A=>A.id!==S)),[e,t]),N=O.useCallback(()=>{t([]),a("")},[t]),P=O.useCallback(S=>{const A=Date.now(),C=e.map(k=>k.running&&k.id!==S?{...k,running:!1,elapsedTime:k.elapsedTime+(A-k.lastTime),lastTime:null}:k.id===S?k.running?{...k,running:!1,elapsedTime:k.elapsedTime+(A-k.lastTime),lastTime:null}:{...k,running:!0,lastTime:A}:k);t(C)},[e,t]),K=O.useCallback(()=>{let S=!1,A=null;const C=Date.now(),k=e.map(D=>D.running?(S=!0,A=D.id,{...D,running:!1,elapsedTime:D.elapsedTime+(C-D.lastTime),lastTime:null}):D);if(!S){u({text:"No hay tareas activas.",taskIdToResume:null});return}t(k),u({text:"Tareas detenidas.",taskIdToResume:A})},[e,t]),U=O.useCallback(()=>{!l||l.taskIdToResume===null||(P(l.taskIdToResume),u(null))},[l,P]),B=O.useCallback(()=>{u(null)},[]),Z=O.useCallback(S=>{t(e.map(A=>A.id===S?{...A,elapsedTime:0,running:!1,lastTime:null,quantity:null}:A))},[e,t]),Q=O.useCallback((S,A)=>{t(e.map(C=>{if(C.id===S){const k=A.rawTaskName!==void 0?A.rawTaskName:C.rawTaskName,D=A.shop!==void 0?A.shop:C.shop,L=k?`${k} [${D}]`:C.name;return{...C,...A,rawTaskName:k,shop:D,name:L}}return C}))},[e,t]),oe=O.useCallback(()=>t([...e].sort((S,A)=>S.shop.localeCompare(A.shop))),[e,t]),re=O.useCallback((S,A)=>{if(!S||S.length===0)return;const C=Math.floor(A/S.length),k=A%S.length;let D=!1;const L=e.map(R=>{if(S.includes(R.id)){let me=C;D||(me+=k,D=!0);const he=Math.max(0,R.elapsedTime+me);return{...R,elapsedTime:he}}return R});t(L)},[e,t]),ue=O.useCallback((S,A,C)=>{if(typeof S=="number"){const he=S;if(e.length===0)return;const H=Math.floor(he/e.length),le=he%e.length;let _e=!1;const Ve=e.map((ze,M)=>{let ee=H;_e||(ee+=le,_e=!0);const de=Math.max(0,ze.elapsedTime+ee);return{...ze,elapsedTime:de}});t(Ve);return}let k=0;const D=S.toString().trim();if(D.includes(":")){const he=D.split(":"),H=parseInt(he[0]||"0",10),le=parseInt(he[1]||"0",10);k=H*3600*1e3+le*60*1e3}else{const he=parseFloat(D);isNaN(he)||(k=he*60*1e3)}const L=e.reduce((he,H)=>he+H.elapsedTime,0),R=k-L;if(Math.abs(R)<1e3)return;let me=[...e];if(A==="all"){if(me.length===0)return;const he=me.length,H=Math.floor(R/he),le=R%he;me=me.map((_e,Ve)=>{let ze=H+(Ve===0?le:0),M=Math.max(0,_e.elapsedTime+ze);return{..._e,elapsedTime:M}})}else A==="single"&&C&&(me=me.map(he=>{if(he.id===C){let H=Math.max(0,he.elapsedTime+R);return{...he,elapsedTime:H}}return he}));t(me)},[e,t]);return{tasks:y(),errorMessage:r,setErrorMessage:a,addTask:w,addMultipleTasks:v,deleteTask:T,deleteAllTasks:N,toggleTimer:P,updateTaskDetails:Q,sortTasksByShop:oe,resetTaskTimer:Z,stopAllTimers:K,statusMessage:l,resumeStoppedTimers:U,clearStatusMessage:B,syncTasksTime:ue,distributeTasksTime:re}},Vn={seasonal_valentines:{id:"seasonal_valentines",name:"valentines",label:" San Valentn",hidden:!0,type:"theme",bodyBg:"bg-pink-950",rawBg:"radial-gradient(circle at 50% 10%, #be185d 0%, #831843 40%, #000000 100%)",cardBg:"bg-pink-900/60 backdrop-blur-md shadow-[0_0_40px_rgba(236,72,153,0.3)] border border-pink-500/30",primaryText:"text-pink-100",secondaryText:"text-pink-200",accentText:"text-white font-bold drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]",inputBorder:"border-pink-500 focus:border-pink-300 bg-pink-900/50",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-400 hover:to-rose-400 text-white shadow-lg shadow-pink-900/50",buttonAdd:"bg-rose-600 hover:bg-rose-700 text-white shadow-md",modalBg:"bg-pink-950 border-pink-500",customCss:`cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%23ec4899" stroke="white" stroke-width="1.5" stroke-linejoin="round"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg>') 0 0, auto !important;`,activeEffects:["valentine_hearts"]},seasonal_halloween:{id:"seasonal_halloween",name:"halloween",label:" Halloween",hidden:!0,type:"theme",bodyBg:"bg-gray-950",rawBg:"linear-gradient(to bottom, #1a0b00 0%, #000000 100%)",cardBg:"bg-[#0a0a0a] shadow-2xl border border-orange-600/50",primaryText:"text-orange-500",secondaryText:"text-gray-400",accentText:"text-yellow-400 font-bold tracking-widest",inputBorder:"border-gray-700 focus:border-orange-500 bg-gray-900",shopSelectBorder:"border-orange-500",buttonAction:"bg-purple-700 hover:bg-purple-800 text-white border border-orange-500 shadow-[0_0_15px_rgba(255,165,0,0.4)]",buttonAdd:"bg-orange-600 hover:bg-orange-700 text-white",modalBg:"bg-gray-900 border-orange-600",activeEffects:["ghost","spiderweb"]},seasonal_christmas:{id:"seasonal_christmas",name:"christmas",label:" Navidad",hidden:!0,type:"theme",bodyBg:"bg-red-950",rawBg:"linear-gradient(to bottom, #022c22 0%, #14532d 100%)",cardBg:"bg-green-900/90 backdrop-blur-sm border border-yellow-400/30",primaryText:"text-white",secondaryText:"text-gray-200",accentText:"text-yellow-300 font-bold",inputBorder:"border-red-400 focus:border-yellow-300 bg-red-900/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-yellow-500 hover:bg-yellow-600 text-green-900 font-bold shadow-lg",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-green-900 border-yellow-400",activeEffects:["snow","lights"]},seasonal_bianca_bday:{id:"seasonal_bianca_bday",name:"biancaBday",label:" Cumple Bianca",hidden:!0,type:"theme",bodyBg:"bg-black",rawBg:"radial-gradient(circle at top right, #4c1d95, #000)",cardBg:"bg-gray-900/90 backdrop-blur-sm shadow-2xl shadow-purple-500/30 border border-purple-500/50",primaryText:"text-purple-400",secondaryText:"text-pink-300",accentText:"text-pink-400 font-bold animate-pulse",inputBorder:"border-gray-700 focus:border-purple-500 bg-gray-800",shopSelectBorder:"border-pink-400",buttonAction:"bg-purple-600 hover:bg-purple-700 text-white shadow-[0_0_15px_rgba(192,132,252,0.5)]",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-gray-900 border-pink-500",activeEffects:["mickey_confetti"]},seasonal_party:{id:"seasonal_party",name:"party",label:" Cumpleaos",hidden:!0,type:"theme",bodyBg:"bg-slate-900",cardBg:"bg-gray-900/80 backdrop-blur-sm border border-fuchsia-500/30",primaryText:"text-fuchsia-400",secondaryText:"text-gray-200",accentText:"text-cyan-400 font-bold",inputBorder:"border-gray-600 focus:border-fuchsia-500 bg-gray-800",shopSelectBorder:"border-cyan-500",buttonAction:"bg-gradient-to-r from-fuchsia-600 to-cyan-600 text-white",buttonAdd:"bg-fuchsia-600 hover:bg-fuchsia-700 text-white",modalBg:"bg-gray-900 border-fuchsia-500",activeEffects:["mickey_confetti"]},default:{id:"default",name:"default",label:" Default Nexus",type:"theme",price:0,bodyBg:"bg-gradient-to-b from-slate-900 via-[#0f172a] to-[#020617]",cardBg:"bg-slate-800/95 backdrop-blur-sm border border-slate-700 shadow-xl",primaryText:"text-slate-100 tracking-wide",secondaryText:"text-slate-400",accentText:"text-blue-400 font-semibold drop-shadow-sm",inputBorder:"border-slate-600 focus:border-blue-500 bg-slate-950/50",shopSelectBorder:"border-blue-500/30",buttonAction:"bg-blue-600 hover:bg-blue-500 text-white shadow-md border border-blue-500/20",buttonAdd:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-md",modalBg:"bg-slate-900 border-slate-700",activeEffects:[]},lofi:{id:"lofi",name:"lofi",label:" Lofi Chill",type:"theme",price:500,bodyBg:"bg-black",cardBg:"bg-[#1a120e]/85 backdrop-blur-xl border border-[#d1c4e9]/30 shadow-2xl",primaryText:"text-[#efebe9]",secondaryText:"text-[#a1887f]",accentText:"text-[#d1c4e9] font-bold",inputBorder:"border-[#5d4037] bg-[#3e2723]/50",shopSelectBorder:"border-[#d1c4e9]/40",buttonAction:"bg-[#3e2723] hover:bg-[#4e342e] text-[#efebe9] border border-[#d1c4e9]/30",buttonAdd:"bg-[#d97706] text-white",modalBg:"bg-[#1a120e] border-[#d1c4e9]/40",activeEffects:["lofi_notes","cozy_lights","rain"]},neon:{id:"neon",name:"neon",label:" Neon Metropolis",type:"theme",price:650,bodyBg:"bg-black",rawBg:null,cardBg:"bg-black/80 backdrop-blur-xl border-2 border-cyan-500/50 shadow-[0_0_50px_rgba(6,182,212,0.4)]",primaryText:"text-cyan-400 font-mono tracking-widest uppercase",secondaryText:"text-fuchsia-400",accentText:"text-yellow-300 font-bold",inputBorder:"border-cyan-600 bg-slate-900/90",shopSelectBorder:"border-cyan-500",buttonAction:"bg-cyan-700 hover:bg-cyan-600 text-white border border-cyan-400",buttonAdd:"bg-fuchsia-700 hover:bg-fuchsia-600 text-white",modalBg:"bg-slate-900 border-2 border-cyan-500",activeEffects:["neon_grid","rain"]},neko:{id:"neko",name:"neko",label:" Neko Cafe",type:"theme",price:600,bodyBg:"bg-pink-50",rawBg:null,cardBg:"bg-white/60 backdrop-blur-xl border-4 border-pink-300 shadow-xl rounded-[2rem]",primaryText:"text-pink-600 font-sans font-bold",secondaryText:"text-orange-400",accentText:"text-pink-500 font-bold",inputBorder:"border-pink-300 bg-white/80 rounded-xl",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-400 to-orange-300 text-white rounded-full shadow-lg",buttonAdd:"bg-pink-500 text-white rounded-full",modalBg:"bg-pink-50 border-pink-300",customCss:`body { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23f472b6" stroke="white" stroke-width="2"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto !important; }`,activeEffects:["neko_pattern","valentine_hearts"]},winter:{id:"winter",name:"winter",label:" Winter",type:"theme",price:200,bodyBg:"bg-black",rawBg:"linear-gradient(to bottom, #020617 0%, #0f172a 60%, #1e3a8a 100%)",cardBg:"bg-slate-900/50 backdrop-blur-lg border border-cyan-200/20 shadow-[0_0_30px_rgba(165,243,252,0.15)]",primaryText:"text-cyan-50",secondaryText:"text-blue-200",accentText:"text-cyan-300 drop-shadow-[0_0_10px_rgba(103,232,249,0.8)]",inputBorder:"border-blue-400/30",shopSelectBorder:"border-cyan-400/50",buttonAction:"bg-cyan-900/80 hover:bg-cyan-800 text-white border border-cyan-500/40",buttonAdd:"bg-blue-700 hover:bg-blue-600 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)]",modalBg:"bg-slate-900 border-cyan-500",activeEffects:["snow_effect"]},crimson:{id:"crimson",name:"crimson",label:" Vampire Lord",type:"theme",price:250,bodyBg:"bg-black",rawBg:"linear-gradient(to bottom, #2a0a0a 0%, #000000 100%)",cardBg:"bg-red-950/20 backdrop-blur-md border border-red-900/80 shadow-[0_0_50px_rgba(153,27,27,0.4)]",primaryText:"text-red-50 font-serif tracking-widest",secondaryText:"text-red-400",accentText:"text-red-600 font-bold drop-shadow-[0_0_8px_rgba(220,38,38,1)]",inputBorder:"border-red-900/60 focus:border-red-600",shopSelectBorder:"border-red-800",buttonAction:"bg-red-950 hover:bg-red-900 text-red-100 border border-red-800",buttonAdd:"bg-red-800 hover:bg-red-700 text-white shadow-[0_0_15px_#b91c1c]",modalBg:"bg-black border-red-900",activeEffects:["mystic_fog","vampire_bats"],customCss:`
            .app-card { animation: heartbeat 4s infinite ease-in-out; }
            @keyframes heartbeat {
                0%, 100% { box-shadow: 0 0 30px rgba(153, 27, 27, 0.3); border-color: rgba(127, 29, 29, 0.6); }
                50% { box-shadow: 0 0 60px rgba(220, 38, 38, 0.5); border-color: rgba(220, 38, 38, 0.8); }
            }
        `},royal:{id:"royal",name:"royal",label:" Royal",type:"theme",price:500,bodyBg:"bg-black",rawBg:"radial-gradient(ellipse at center, #713f12 0%, #312e81 40%, #020617 100%)",cardBg:"bg-indigo-950/60 backdrop-blur-xl border-2 border-yellow-500/70 shadow-[0_0_50px_rgba(234,179,8,0.4)]",primaryText:"text-indigo-50 font-serif",secondaryText:"text-yellow-200/60",accentText:"text-yellow-400 font-bold uppercase tracking-widest",inputBorder:"border-yellow-600/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-indigo-900 hover:bg-indigo-800 text-yellow-100 border border-yellow-600",buttonAdd:"bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-white border border-yellow-300 shadow-[0_0_20px_rgba(234,179,8,0.5)]",modalBg:"bg-indigo-950 border-yellow-500",activeEffects:["golden_dust"]},forest:{id:"forest",name:"forest",label:" Mystic Forest",type:"theme",price:150,bodyBg:"bg-black",rawBg:"linear-gradient(180deg, #022c22 0%, #052e16 100%)",cardBg:"bg-[#064e3b]/30 backdrop-blur-md border border-emerald-800/50 shadow-2xl",primaryText:"text-emerald-50",secondaryText:"text-emerald-400/80",accentText:"text-emerald-300 drop-shadow-[0_0_10px_rgba(52,211,153,0.6)]",inputBorder:"border-emerald-900",shopSelectBorder:"border-emerald-700/50",buttonAction:"bg-emerald-950 hover:bg-emerald-900 text-emerald-100 border border-emerald-800",buttonAdd:"bg-emerald-700 hover:bg-emerald-600 text-white shadow-lg",modalBg:"bg-gray-900 border-emerald-800",activeEffects:["pine_forest","mystic_fog","forest_flora"]},beach:{name:"Lanterns: Fuego",emoji:"",price:1200,category:"theme",description:"Atardecer carmes. Pasin y calidez.",rawBg:"linear-gradient(180deg, #240b0b 0%, #751010 40%, #d94f04 70%, #ffca28 100%)",cardBg:"bg-[#3b0a0a]/60 backdrop-blur-md border border-orange-500/30 shadow-[0_0_40px_rgba(255,69,0,0.3)]",primaryText:"text-orange-50 font-bold",secondaryText:"text-orange-200",accentText:"text-yellow-400",itemBg:"bg-red-950/40 hover:bg-red-900/60 border-l-2 border-orange-500",buttonAction:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white",borderClass:"border-l-4 border-orange-500",activeEffects:["lanterns"],customCss:`
            @keyframes warm-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: warm-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #ffca28; }
        `},beach_night:{name:"Lanterns: Mstico",emoji:"",price:1200,category:"theme",description:"Noche profunda y magia arcana.",rawBg:"linear-gradient(180deg, #020024 0%, #090979 40%, #2a004e 100%)",cardBg:"bg-[#1a0b2e]/60 backdrop-blur-md border border-purple-500/30 shadow-[0_0_40px_rgba(147,51,234,0.3)]",primaryText:"text-purple-100 font-bold",secondaryText:"text-indigo-200",accentText:"text-pink-400",itemBg:"bg-indigo-950/40 hover:bg-indigo-900/60 border-l-2 border-purple-500",buttonAction:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",borderClass:"border-l-4 border-purple-500",activeEffects:["lanterns"],customCss:`
            @keyframes night-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: night-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #d8b4fe; }
            
            /* TRUCO: Cambiamos el color de las linternas rojas a rosadas/violetas con un filtro */
            .lantern-item { filter: hue-rotate(280deg) drop-shadow(0 0 10px #d8b4fe) !important; }
        `},beach_spirit:{name:"Lanterns: Zen",emoji:"",price:1200,category:"theme",description:"Bosque sagrado. Luces fatuas y serenidad.",rawBg:"linear-gradient(180deg, #011810 0%, #064e3b 40%, #115e59 70%, #0f393b 100%)",cardBg:"bg-[#062c1b]/70 backdrop-blur-md border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.2)]",primaryText:"text-emerald-50 font-medium tracking-widest",secondaryText:"text-emerald-200/80",accentText:"text-teal-300 drop-shadow-[0_0_8px_rgba(45,212,191,0.8)]",itemBg:"bg-emerald-950/50 hover:bg-emerald-900/70 border-l-2 border-emerald-400 transition-all",buttonAction:"bg-gradient-to-r from-teal-700 to-emerald-600 hover:from-teal-600 hover:to-emerald-500 text-white shadow-lg shadow-emerald-900/40",borderClass:"border-l-4 border-emerald-500",activeEffects:["lanterns","forest_flora"],customCss:`
            /* Animacin de respiracin lenta para el fondo */
            @keyframes forest-breath { 
                0% { background-position: 0% 50%; } 
                50% { background-position: 100% 50%; } 
                100% { background-position: 0% 50%; } 
            }
            body { 
                background-size: 200% 200% !important; 
                animation: forest-breath 30s ease-in-out infinite; 
            }
            ::-webkit-scrollbar-thumb { background: #34d399; }

            /* TRUCO: Linternas color "Luz Fatu" (Verde espectral) + Desenfoque leve */
            .lantern-item { 
                filter: hue-rotate(85deg) brightness(1.2) drop-shadow(0 0 15px #34d399) !important; 
                opacity: 0.8; 
            }
        `},galaxy:{id:"galaxy",name:"galaxy",label:" Galaxy",type:"theme",price:300,bodyBg:"bg-black",rawBg:"radial-gradient(circle at 20% 10%, #4c1d95 0%, #000000 40%), radial-gradient(circle at 80% 90%, #1e3a8a 0%, #000000 40%), linear-gradient(to bottom, #020617, #000000)",cardBg:"bg-[#0f172a]/70 backdrop-blur-xl border border-purple-500/30 shadow-[0_0_50px_rgba(124,58,237,0.2)]",primaryText:"text-purple-50 tracking-wide",secondaryText:"text-blue-200/70",accentText:"text-cyan-400 font-bold drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",inputBorder:"border-purple-800/60 focus:border-cyan-400",shopSelectBorder:"border-cyan-500/50",buttonAction:"bg-indigo-900/80 hover:bg-indigo-800 text-cyan-50 border border-indigo-500",buttonAdd:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-[0_0_20px_rgba(147,51,234,0.4)]",modalBg:"bg-[#020617] border-purple-500/40",activeEffects:["mystic_fog","shooting_stars"]},signature_lulu:{name:"Signature: Lulu Store",emoji:"",price:3e3,category:"theme",description:"Papelera kawaii y tonos aesthetic. Powered by Bianca.",rawBg:"linear-gradient(135deg, #FDFBF7 0%, #F3EAE1 50%, #EADCDE 100%)",cardBg:"bg-white/60 backdrop-blur-xl border-2 border-[#D4A373]/40 shadow-[0_15px_40px_rgba(212,163,115,0.15)] rounded-3xl",primaryText:"text-[#5C4033] font-bold tracking-wide",secondaryText:"text-[#8B5A2B]/90 font-medium",accentText:"text-[#D4A373] drop-shadow-sm",itemBg:"bg-[#FAF4F0]/90 hover:bg-[#F0E6DD] border-l-4 border-[#D4A373] text-[#5C4033] transition-all shadow-sm",buttonAction:"bg-gradient-to-r from-[#D4A373] to-[#C18A59] hover:from-[#C18A59] hover:to-[#A67142] text-white shadow-lg shadow-[#D4A373]/30",borderClass:"border-b-4 border-[#D4A373]",activeEffects:["diamond_sparkles"],customCss:`
            /*  MARCA DE AGUA DEL LOGO  */
            body::after {
                content: '';
                position: fixed;
                bottom: -20px;
                right: -20px;
                width: 300px;
                height: 300px;
                /* Pega aqu el link de la imagen de su logo (fondo transparente idealmente) */
                background-image: url('https://i.imgur.com/TuUrlDelLogoLulu.png'); 
                background-size: contain;
                background-repeat: no-repeat;
                opacity: 0.08; /* Muy transparente para que no moleste la lectura */
                pointer-events: none;
                z-index: 0;
            }
            
            /* Scrollbar color Caramelo */
            ::-webkit-scrollbar-thumb { background: #D4A373; border-radius: 10px; border: 2px solid #FDFBF7; }
            ::-webkit-scrollbar-track { background: #F3EAE1; }
            
            /* Cursor Kawaii (Patita/Osito) */
            body { 
                cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%238B5A2B"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>') 12 12, auto !important; 
            }
        `},border_default:{id:"border_default",type:"border",label:"Sin Borde",borderClass:""},border_blue:{id:"border_blue",type:"border",label:" Azul Elctrico",price:200,customCss:`
            .app-card { 
                border: 4px solid #3b82f6 !important; 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.6) !important;
            }
        `},border_red:{id:"border_red",type:"border",label:" Rojo Pasin",price:200,customCss:`
            .app-card { 
                border: 4px solid #ef4444 !important; 
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.6) !important;
            }
        `},border_green:{id:"border_green",type:"border",label:" Verde Matrix",price:200,customCss:`
            .app-card { 
                border: 4px solid #22c55e !important; 
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.6) !important;
            }
        `},border_neon:{id:"border_neon",type:"border",label:" Ultra Nen",borderClass:"border-[3px] border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.6)]",customCss:`
            .app-card { animation: border-pulse-neon 2s infinite alternate; }
            @keyframes border-pulse-neon {
                0% { box-shadow: 0 0 10px #06b6d4, inset 0 0 5px #06b6d4; border-color: #06b6d4; }
                100% { box-shadow: 0 0 25px #d946ef, inset 0 0 10px #d946ef; border-color: #d946ef; }
            }
        `},border_rgb:{id:"border_rgb",type:"border",label:" RGB Gamer",borderClass:"border-[5px] border-transparent",customCss:`
            .app-card {
                border-image: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000) 1;
                /* Sin animaciones locas que muevan el DOM */
            }
        `},border_glitch:{id:"border_glitch",type:"border",label:" Cyber Glitch",borderClass:"border-2 border-white",customCss:`
            .app-card { animation: glitch-border 3s infinite; box-shadow: 5px 0 0 #ff00ff, -5px 0 0 #00ffff; }
            @keyframes glitch-border {
                0% { transform: translate(0); }
                20% { transform: translate(-2px, 2px); }
                40% { transform: translate(-2px, -2px); }
                60% { transform: translate(2px, 2px); }
                80% { transform: translate(2px, -2px); }
                100% { transform: translate(0); }
            }
        `},border_electric:{id:"border_electric",type:"border",label:" Electro Shock",borderClass:"border-2 border-yellow-300",customCss:`
            .app-card { animation: shock-border 0.5s infinite alternate; }
            @keyframes shock-border {
                0% { box-shadow: 0 0 5px #facc15, 0 0 10px #3b82f6; border-color: #facc15; }
                100% { box-shadow: 0 0 20px #3b82f6, 0 0 40px #facc15; border-color: #ffffff; }
            }
        `},border_fire:{id:"border_fire",type:"border",label:" Fuego Mstico",borderClass:"border-4 border-orange-500",customCss:`
            .app-card { box-shadow: 0 -5px 20px rgba(239, 68, 68, 0.8), 0 0 10px rgba(249, 115, 22, 0.8) inset; animation: fire-pulse 2s infinite alternate; }
            @keyframes fire-pulse { 0% { border-color: #ef4444; } 100% { border-color: #f97316; } }
        `},border_gold:{id:"border_gold",type:"border",label:" Marco de Oro",price:2500,borderClass:"border-[8px] border-double border-yellow-500 shadow-[inset_0_0_20px_rgba(234,179,8,0.3)]",customCss:`
            .app-card { 
                border-image: linear-gradient(45deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c) 1; 
                border-width: 6px; 
                border-style: solid; 
            }
        `},border_wood:{id:"border_wood",type:"border",label:" Marco Rstico",borderClass:"border-[12px] border-[#5c3a21] shadow-2xl",customCss:`
            .app-card { 
                border-image: url("https://www.transparenttextures.com/patterns/wood-pattern.png") 30 round;
                border-radius: 0 !important; 
                box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 5px 5px 15px rgba(0,0,0,0.5);
            }
        `}},iM=i=>{if(i<0)return"00:00:00";const e=Math.floor(i/1e3),t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return`${t}:${r}:${a}`},Uu=()=>{const i=new Date,e=i.getTimezoneOffset();return new Date(i.getTime()-e*60*1e3).toISOString().split("T")[0]},Sk=i=>{if(!i)return 0;const e=i.match(/Hours worked: (\d+)h (\d+)m/)||i.match(/Tiempo Total: (\d+)h (\d+)m/);if(e){const t=parseInt(e[1],10),r=parseInt(e[2],10);return t+r/60}return 0},TS=(i=0)=>{const e=new Date;e.setDate(e.getDate()+i*7);const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const a=new Date(Date.UTC(t.getUTCFullYear(),0,1)),l=Math.ceil(((t-a)/864e5+1)/7);return`${t.getUTCFullYear()}-W${l.toString().padStart(2,"0")}`},$w=()=>TS(0),aM=()=>TS(1),oM=(i,e,t,r)=>{const a=O.useMemo(()=>{if(!e||e.length===0)return 0;const m=new Date,g=m.getDay()===0?7:m.getDay(),y=new Date(m);y.setDate(m.getDate()-g+1),y.setHours(0,0,0,0);const v=new Date(y);v.setDate(y.getDate()+6),v.setHours(23,59,59,999);let w=0;return e.forEach(T=>{if(!T.id||!T.content)return;const N=new Date(T.id+"T12:00:00");if(N>=y&&N<=v){const P=T.content.match(/(?:Tiempo Total|Hours worked)[^0-9]*(\d{1,2}):(\d{1,2}):(\d{1,2})/i),K=T.content.match(/(?:Tiempo Total|Hours worked)[^0-9]*(\d+)h\s*(\d+)m/i);let U=0;P?(U=parseInt(P[1])+parseInt(P[2])/60+parseInt(P[3])/3600,w+=U):K&&(U=parseInt(K[1])+parseInt(K[2])/60,w+=U)}}),parseFloat(w.toFixed(2))},[e]),l=O.useMemo(()=>{const m=Uu(),[g,y,v]=m.split("-"),w=parseInt(y),T=parseInt(v);if(r&&Vn[r])return Vn[r];if(w===2&&T>=13&&T<=14)return Vn.seasonal_valentines||Vn.default;if(w===10&&T===31)return Vn.seasonal_halloween||Vn.default;if(w===12&&(T===24||T===25))return Vn.seasonal_christmas||Vn.default;const N=i.find(P=>P.date===`${y}-${v}`);return N?N.name==="Bianca"?Vn.seasonal_bianca_bday||Vn.seasonal_party:Vn.seasonal_party||Vn.default:Vn.default},[r,i]),u=O.useMemo(()=>{if(l.id==="seasonal_valentines")return" Feliz San Valentn! ";if(l.id==="seasonal_halloween")return" Dulce o Truco! ";if(l.id==="seasonal_christmas")return" Feliz Navidad! ";const m=Uu().split("-").slice(1).join("-"),g=i.find(y=>y.date===m);return g?` Feliz Cumpleaos, ${g.name}! `:""},[l,i]);return{strategy:l,message:u,weeklyHoursWorked:a,isUnlocked:!0}},lM=async(i,e,t,r)=>{if(!i)throw new Error("No user");const a=e.reduce((N,P)=>{const K=P.running?Date.now()-P.lastTime:0;return N+P.elapsedTime+K},0),l=e.map(N=>{const P=parseInt(N.quantity)||0,K=N.running?Date.now()-N.lastTime:0,U=N.elapsedTime+K,B=U/36e5,Z=B>0?(P/B).toFixed(2):"0.00";return{id:N.id,name:N.rawTaskName||N.text,category:N.category||"General",count:P,timeMs:U,speed:Z}}),u=r?.team||"default",m=r?.name||i.displayName||i.email,g=new Date().toLocaleString("es-AR"),y={uid:i.uid,userName:m,team:u,date:t,lastUpdated:Date.now(),metrics:{totalTasks:e.reduce((N,P)=>N+(parseInt(P.quantity)||0),0),totalTimeMs:a,globalSpeed:a>0?(e.reduce((N,P)=>N+(parseInt(P.quantity)||0),0)/(a/36e5)).toFixed(2):"0.00"},taskBreakdown:l,timestampStr:g};await Is(it(Ce,"daily_reports",`${i.uid}_${t}`),y);const v=a/(1e3*60*60);return{totalReward:Math.floor(v*10)+15,reportData:y}},cM=(i,e,t)=>{e||(e=new Date().toISOString().split("T")[0]);const[r,a,l]=e.split("-"),u=new Date(Number(r),Number(a)-1,Number(l)),m={weekday:"long",year:"numeric",month:"long",day:"numeric"},g=u.toLocaleDateString("en-US",m),y=N=>{if(!N)return"0h 0m";const P=Math.floor(N/36e5),K=Math.floor(N%36e5/6e4);return`${P}h ${K}m`};let v=0;const w={};i.forEach(N=>{let P=N.elapsedTime||0;N.running&&N.lastTime&&(P+=Date.now()-N.lastTime),v+=P;const K=N.shop||N.category||"General";w[K]||(w[K]=[]);let B=(N.text||N.name||"Tarea sin nombre").replace(/\s*\[.*?\]/g,"").trim();w[K].push({name:B,qty:parseInt(N.count||N.quantity)||0,timeStr:y(P)})});let T=`End of Day Report: ${g}
`;return T+=`Hours worked: ${y(v)}

`,T+=`Today I worked on the following tasks:
`,Object.keys(w).sort().forEach(N=>{T+=`--- ${N} ---
`,w[N].forEach(P=>{const K=P.qty>0?` (${P.qty} orders)`:"";T+=`${P.name}${K}: ${P.timeStr}
`})}),T},uM=(i,e,t,r,a)=>{const[l,u]=O.useState(!1);return{handleGenerate:async(g,y,v)=>{u(!0);try{t();const w=`${i.uid}_${g}`,T=it(Ce,"daily_reports",w),P=(await ry(T)).exists(),{totalReward:K,reportData:U}=await lM(i,e,g,a),B=cM(e,g,y);i&&g&&await vr(T,{report:B,date:g,content:B}).catch(Z=>{console.warn("Actualizacin secundaria:",Z)}),!P&&K>0?(r(K),alert(` Reporte NUEVO guardado.
 Ganaste: ${K} Lofi Coins!`)):alert(` Reporte ACTUALIZADO correctamente.
(No se otorgan monedas por editar reportes existentes)`),v&&v(B,U)}catch(w){console.error("Error generando reporte:",w),alert("Error al generar el reporte. Revisa la consola.")}finally{u(!1)}},isProcessing:l}},dM=({processedData:i,detectedTasks:e,taskGoals:t,selectedTeam:r,isLoading:a,selectedTaskFilter:l,setSelectedTaskFilter:u,viewMode:m,setViewMode:g,filterDate:y,setFilterDate:v,expandedReportId:w,fetchTeamData:T,toggleRow:N,formatTime:P,getPerformanceColor:K})=>f.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[f.jsxs("div",{className:"flex flex-col xl:flex-row items-center justify-between gap-4 bg-slate-900 border border-white/10 p-4 rounded-xl shadow-xl",children:[f.jsxs("div",{className:"flex items-center gap-3 w-full xl:w-auto bg-black/30 p-1.5 rounded-lg border border-white/5",children:[f.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase px-2",children:"Filtrar:"}),f.jsxs("select",{value:l,onChange:U=>u(U.target.value),className:"bg-transparent text-white text-xs font-bold outline-none w-full xl:w-64 cursor-pointer hover:text-indigo-400 transition-colors",children:[f.jsx("option",{value:"ALL",className:"bg-slate-900",children:" TODAS LAS TAREAS"}),e.map(U=>f.jsx("option",{value:U,className:"bg-slate-900",children:U},U))]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full xl:w-auto",children:[f.jsx("div",{className:"flex bg-black/30 rounded-lg p-1 border border-white/5",children:["daily","weekly","monthly"].map(U=>f.jsx("button",{onClick:()=>g(U),className:`px-3 py-1.5 rounded text-[10px] font-bold uppercase transition-all ${m===U?"bg-indigo-600 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:{daily:"Da",weekly:"Semana",monthly:"Mes"}[U]},U))}),f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx("span",{className:"text-indigo-400 text-xs",children:""})}),f.jsx("input",{type:"date",value:y,onChange:U=>v(U.target.value),className:"bg-black/30 border border-white/10 text-white text-xs font-bold rounded-lg py-2 pl-9 pr-3 outline-none focus:border-indigo-500 transition-all cursor-pointer hover:bg-black/50"})]}),f.jsx("button",{onClick:T,disabled:a,className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all shadow-lg active:scale-95 border border-indigo-400/50",children:a?"...":""})]})]}),f.jsx("div",{className:"bg-slate-900/50 backdrop-blur border border-white/5 rounded-2xl overflow-hidden shadow-2xl",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-black/40 text-slate-400 text-[10px] uppercase tracking-wider border-b border-white/5",children:[f.jsx("th",{className:"p-5 font-bold",children:"Agente"}),f.jsx("th",{className:"p-5 font-bold text-center",children:"Tareas"}),f.jsx("th",{className:"p-5 font-bold text-center text-indigo-400",children:"Velocidad"}),f.jsx("th",{className:"p-5 font-bold text-center",children:"Tiempo"}),f.jsx("th",{className:"p-5 font-bold text-center",children:"Estado"}),f.jsx("th",{className:"p-5 text-right",children:"Accin"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:i.length>0?i.map(U=>{let B=U.metrics.totalTasks,Z=U.metrics.globalSpeed,Q=U.metrics.totalTimeMs,oe="text-slate-300";if(l!=="ALL"){const re=U.taskBreakdown.find(ue=>ue.name===l);if(re){B=re.count,Z=re.speed,Q=re.timeMs;let ue=t[l];ue===void 0&&(ue=-1),oe=K(Z,ue)}else B=0,Z="0.00",Q=0,oe="text-slate-600"}else oe="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-bold";return f.jsxs(aI.Fragment,{children:[f.jsxs("tr",{className:"hover:bg-white/[0.03] transition-colors group cursor-pointer",onClick:()=>N(U.id),children:[f.jsxs("td",{className:"p-5 font-medium text-slate-200 flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-800 border border-white/5 flex items-center justify-center text-xs text-indigo-400 font-bold",children:U.userName?.charAt(0)||"?"}),f.jsxs("div",{children:[f.jsx("div",{children:U.userName}),r==="ALL_TEAMS"&&f.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:U.team})]})]}),f.jsx("td",{className:"p-5 text-center font-mono text-slate-300",children:B}),f.jsxs("td",{className:"p-5 text-center",children:[f.jsx("span",{className:`text-lg ${oe}`,children:Z}),f.jsx("span",{className:"text-[10px] text-slate-600 ml-1",children:"/h"})]}),f.jsx("td",{className:"p-5 text-center text-slate-500 font-mono",children:P(Q)}),f.jsx("td",{className:"p-5 text-center",children:f.jsx("span",{className:"bg-green-900/30 text-green-400 text-[10px] px-2 py-1 rounded border border-green-500/20",children:"ACTIVO"})}),f.jsx("td",{className:"p-5 text-right",children:f.jsx("button",{className:"text-[10px] bg-white/5 hover:bg-white/10 text-slate-400 px-3 py-1.5 rounded transition-all",children:w===U.id?"Cerrar ":"Ver "})})]}),w===U.id&&f.jsx("tr",{className:"bg-black/30",children:f.jsx("td",{colSpan:6,className:"p-4",children:f.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 border border-white/5 shadow-inner",children:[f.jsx("h4",{className:"text-xs font-bold text-slate-500 mb-3 uppercase flex items-center gap-2",children:" Desglose Detallado"}),U.taskBreakdown?.length>0?f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-slate-600 border-b border-white/5 text-left",children:[f.jsx("th",{className:"pb-2 pl-2",children:"Tarea"}),f.jsx("th",{className:"pb-2 text-center",children:"Cant."}),f.jsx("th",{className:"pb-2 text-center",children:"Tiempo"}),f.jsx("th",{className:"pb-2 text-right pr-4",children:"Rendimiento"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5",children:U.taskBreakdown.map((re,ue)=>{let S=t[re.name];S===void 0&&(S=-1);const A=K(re.speed,S),C=S===-1;return f.jsxs("tr",{className:`text-slate-300 hover:bg-white/5 transition-colors ${l===re.name?"bg-indigo-900/20":""}`,children:[f.jsx("td",{className:"py-2 pl-2 font-medium",children:re.name}),f.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:re.count}),f.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:P(re.timeMs)}),f.jsxs("td",{className:"py-2 text-right pr-4",children:[f.jsxs("span",{className:A,children:[re.speed," /h"]}),f.jsx("span",{className:"text-[9px] text-slate-600 ml-1",children:C?"":`(Meta: ${S})`})]})]},ue)})})]}):f.jsx("p",{className:"text-xs text-slate-500 italic",children:"Sin datos."})]})})})]},U.id)}):f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-500 text-sm italic border-t border-white/5",children:a?"Cargando datos...":"No hay actividad registrada en este periodo."})})})]})})})]}),hM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],hg=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],fM={Lunes:"Monday",Martes:"Tuesday",Mircoles:"Wednesday",Jueves:"Thursday",Viernes:"Friday",Sbado:"Saturday",Domingo:"Sunday"},mM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pM=({squad:i,weeklyPlan:e,setWeeklyPlan:t,agentSchedules:r,visibleShops:a,nextWeekId:l,targetWeek:u,setTargetWeek:m})=>{const[g,y]=O.useState("kanban"),[v,w]=O.useState("Lunes"),[T,N]=O.useState(null),P=(B,Z)=>{N(Z),B.dataTransfer.setData("agent",JSON.stringify(Z))},K=async(B,Z,Q)=>{B.preventDefault();try{const oe=JSON.parse(B.dataTransfer.getData("agent")),re={...e};re[v]||(re[v]={}),re[v][Z]||(re[v][Z]={}),re[v][Z][Q]||(re[v][Z][Q]=[]);const ue=re[v][Z][Q];oe.id==="ALL"?i.forEach(S=>{ue.find(A=>A.id===S.id)||ue.push({id:S.userName||S.name||S.email})}):ue.find(S=>S.id===oe.id)||ue.push({id:oe.id,name:oe.userName||oe.name||oe.email}),t(re),await Is(it(Ce,"weekly_plans",l),{weekId:l,plan:re,updatedAt:Date.now()},{merge:!0})}catch(oe){console.error(oe),alert("Error de permisos.")}},U=async(B,Z,Q)=>{const oe={...e};oe[v][B][Z]=oe[v][B][Z].filter(re=>re.id!==Q),t(oe);try{await Is(it(Ce,"weekly_plans",l),{plan:oe},{merge:!0})}catch(re){console.error(re)}};return f.jsxs("div",{className:"flex flex-col h-[85vh] animate-fadeIn gap-4",children:[f.jsx("div",{className:"flex flex-wrap gap-4 justify-between items-center bg-slate-900/50 p-2 rounded-xl border border-white/5",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[f.jsxs("button",{onClick:()=>y("kanban"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${g==="kanban"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[f.jsx("span",{children:""})," Asignar"]}),f.jsxs("button",{onClick:()=>y("table"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${g==="table"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[f.jsx("span",{children:""})," Planilla"]})]}),f.jsx("div",{className:"w-px h-6 bg-white/10"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 hidden sm:block",children:"Editando:"}),f.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[f.jsx("button",{onClick:()=>m("current"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="current"?"bg-teal-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Semana Actual"}),f.jsx("button",{onClick:()=>m("next"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="next"?"bg-purple-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Prxima Semana"})]}),f.jsxs("span",{className:"text-[9px] font-mono text-slate-600 border border-white/5 px-2 py-1 rounded bg-black/20",title:"ID de la semana en base de datos",children:["ID: ",l]})]})]})}),g==="kanban"&&f.jsxs("div",{className:"flex gap-6 flex-1 overflow-hidden",children:[f.jsxs("div",{className:"w-64 min-w-[250px] bg-slate-900 border border-white/10 rounded-xl p-4 overflow-y-auto flex flex-col gap-2",children:[f.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Mi Squad"}),f.jsxs("div",{draggable:!0,onDragStart:B=>P(B,{id:"ALL",name:"TODOS"}),className:"bg-yellow-600 hover:bg-yellow-500 text-white p-3 rounded-lg cursor-grab active:cursor-grabbing font-bold text-center border border-yellow-400 shadow-lg mb-4 flex items-center justify-center gap-2",children:[f.jsx("span",{children:""})," ASIGNAR A TODOS"]}),i.map(B=>{const Z=fM[v],Q=r[B.id],oe=v,re=Q?Q[Z]||Q[oe]:null;let ue=f.jsx("span",{className:"text-[9px] text-slate-600",children:"?"});return re&&(re.off?ue=f.jsx("span",{className:"text-[9px] bg-red-900/40 text-red-400 px-1 rounded font-bold border border-red-500/20",children:"OFF"}):ue=f.jsxs("span",{className:"text-[9px] bg-green-900/40 text-green-400 px-1 rounded font-bold border border-green-500/20",children:[re.hours,"h"]})),f.jsxs("div",{draggable:!0,onDragStart:S=>P(S,{id:B.id,userName:B.userName,name:B.name,email:B.email}),className:"bg-slate-800 hover:bg-slate-700 p-3 rounded-lg cursor-grab active:cursor-grabbing border border-white/5 flex items-center gap-3 transition-colors",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center font-bold text-xs text-white",children:(B.userName||B.name||B.email).substring(0,2).toUpperCase()}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm truncate font-medium text-slate-300",children:B.userName||B.name||B.email}),f.jsx("div",{className:"flex justify-end",children:ue})]})]},B.id)})]}),f.jsxs("div",{className:"flex-1 flex flex-col bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[f.jsx("div",{className:"flex bg-black/40 border-b border-white/10",children:hg.map(B=>f.jsx("button",{onClick:()=>w(B),className:`flex-1 py-3 text-xs font-bold uppercase transition-colors ${v===B?"bg-indigo-600 text-white":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:B},B))}),f.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#0b0e14]",children:f.jsxs("table",{className:"w-full border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left p-3 text-slate-500 text-xs uppercase w-48 min-w-[200px] border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:"Tarea"}),a.map(B=>f.jsx("th",{className:"p-3 text-indigo-400 text-xs uppercase border-l border-white/5 min-w-[180px] text-center border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:B},B))]})}),f.jsx("tbody",{children:hM.map(B=>f.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[f.jsx("td",{className:"p-3 text-xs font-medium text-slate-300",children:B}),a.map(Z=>f.jsx("td",{onDragOver:Q=>Q.preventDefault(),onDrop:Q=>K(Q,B,Z),className:"p-2 border-l border-white/5 min-h-[50px] relative hover:bg-white/5 transition-colors",children:f.jsx("div",{className:"min-h-[40px] rounded p-1 flex flex-wrap gap-1",children:e[v]?.[B]?.[Z]?.map(Q=>f.jsxs("div",{className:"bg-indigo-600/30 text-indigo-200 border border-indigo-500/40 text-[10px] px-2 py-1 rounded flex items-center gap-1 font-bold shadow-sm",children:[Q.name," ",f.jsx("button",{onClick:()=>U(B,Z,Q.id),className:"ml-1 text-indigo-400 hover:text-red-400 font-bold",children:""})]},Q.id))})},Z))]},B))})]})})]})]}),g==="table"&&f.jsxs("div",{className:"flex-1 bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[f.jsxs("div",{className:"p-4 bg-black/20 border-b border-white/10 flex justify-between items-center",children:[f.jsx("h3",{className:"font-bold text-green-400 flex items-center gap-2",children:" Disponibilidad Global"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-green-900/50 border border-green-500/30 rounded"}),f.jsx("span",{className:"text-xs text-slate-400",children:"Disponible"}),f.jsx("div",{className:"w-3 h-3 bg-red-900/50 border border-red-500/30 rounded ml-2"}),f.jsx("span",{className:"text-xs text-slate-400",children:"Franco (OFF)"})]})]}),f.jsx("div",{className:"flex-1 overflow-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{className:"bg-[#0b0e14] sticky top-0 z-10",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 w-64 bg-[#0b0e14] sticky left-0 z-20 border-r border-white/5",children:"Agente"}),hg.map(B=>f.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 text-center min-w-[100px]",children:B},B))]})}),f.jsxs("tbody",{className:"divide-y divide-white/5 text-sm",children:[i.map(B=>{const Z=r[B.id];return f.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[f.jsxs("td",{className:"p-4 bg-slate-900 sticky left-0 z-10 border-r border-white/5",children:[f.jsx("div",{className:"font-bold text-white",children:B.userName||B.name||B.email}),f.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:B.team})]}),mM.map((Q,oe)=>{const re=hg[oe],ue=Z?.[Q]||Z?.[re];let S=f.jsx("span",{className:"text-slate-700",children:"-"}),A="";return ue&&(ue.off?(S=f.jsx("span",{className:"font-bold text-[10px]",children:"OFF"}),A="bg-red-900/20 text-red-400 border border-red-500/10"):ue.hours&&(S=f.jsxs("span",{className:"font-mono font-bold",children:[ue.hours,"hs"]}),A="bg-green-900/20 text-green-400 border border-green-500/10")),f.jsx("td",{className:"p-1 text-center border-l border-white/5",children:f.jsx("div",{className:`h-8 flex items-center justify-center rounded ${A} mx-1`,children:S})},Q)})]},B.id)}),i.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:8,className:"p-10 text-center text-slate-500 italic",children:"No hay agentes en este equipo."})})]})]})})]})]})},gM=({newsList:i,newNewsText:e,setNewNewsText:t,newNewsType:r,setNewNewsType:a,addNews:l,deleteNews:u})=>f.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[f.jsx("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 mb-6",children:f.jsxs("div",{className:"flex gap-4",children:[f.jsx("input",{value:e,onChange:m=>t(m.target.value),placeholder:"Mensaje...",className:"flex-1 bg-black/30 border border-white/10 rounded-lg p-3 text-white outline-none"}),f.jsxs("select",{value:r,onChange:m=>a(m.target.value),className:"bg-black/30 border border-white/10 rounded-lg p-3 text-white",children:[f.jsx("option",{value:"info",children:"Info"}),f.jsx("option",{value:"critical",children:"Crtico"}),f.jsx("option",{value:"party",children:"Fiesta"})]}),f.jsx("button",{onClick:l,className:"bg-indigo-600 px-6 rounded-lg font-bold hover:bg-indigo-500",children:"Publicar"})]})}),f.jsx("div",{className:"space-y-3",children:i.map(m=>f.jsxs("div",{className:"flex justify-between items-center bg-slate-900/50 p-4 rounded-xl border border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase ${m.type==="critical"?"bg-red-900 text-red-300":m.type==="party"?"bg-yellow-900 text-yellow-300":"bg-blue-900 text-blue-300"}`,children:m.type}),f.jsx("span",{className:"text-sm",children:m.text})]}),f.jsx("button",{onClick:()=>u(m.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Borrar"})]},m.id))})]}),yM=({quizzes:i,editingQuiz:e,setEditingQuiz:t,saveQuiz:r,deleteQuiz:a,toggleQuiz:l})=>f.jsx("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:e?f.jsx(bM,{quiz:e,onSave:r,onCancel:()=>t(null)}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>t({title:"",reward:100,questions:[],version:1}),className:"bg-green-600 px-4 py-2 rounded-lg font-bold text-sm mb-6",children:"+ Nuevo Mdulo"}),f.jsx("div",{className:"grid gap-4",children:i.map(u=>f.jsxs("div",{className:"bg-slate-900 p-5 rounded-xl border border-white/10 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",children:u.title}),f.jsxs("div",{className:"text-xs text-slate-500",children:["Reward: ",u.reward," | v",u.version]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>t(u),className:"text-indigo-400 text-xs bg-indigo-900/30 px-3 py-1 rounded",children:"Edit"}),f.jsx("button",{onClick:()=>l(u),className:`text-xs px-3 py-1 rounded ${u.active?"bg-green-900/30 text-green-400":"bg-slate-700 text-slate-400"}`,children:u.active?"Activo":"Inactivo"}),f.jsx("button",{onClick:()=>a(u.id),className:"text-red-400 text-xs bg-red-900/30 px-3 py-1 rounded",children:"Del"})]})]},u.id))})]})}),bM=({quiz:i,onSave:e,onCancel:t})=>{const[r,a]=O.useState(i),[l,u]=O.useState(!1),m=()=>a({...r,questions:[...r.questions||[],{text:"",options:["",""],correct:0}]}),g=(v,w,T)=>{const N=[...r.questions];N[v]={...N[v],[w]:T},a({...r,questions:N})},y=(v,w,T)=>{const N=[...r.questions];N[v].options[w]=T,a({...r,questions:N})};return f.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 space-y-4 animate-fadeIn",children:[f.jsx("h2",{className:"font-bold text-xl border-b border-white/10 pb-2",children:"Editor de Mdulo"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx("input",{value:r.title,onChange:v=>a({...r,title:v.target.value}),placeholder:"Ttulo",className:"bg-black/30 border border-white/10 p-2 rounded text-white"}),f.jsx("input",{type:"number",value:r.reward,onChange:v=>a({...r,reward:parseInt(v.target.value)}),placeholder:"Reward",className:"bg-black/30 border border-white/10 p-2 rounded text-white"})]}),i.id&&f.jsxs("label",{className:"flex items-center gap-2 text-yellow-200 text-xs",children:[f.jsx("input",{type:"checkbox",checked:l,onChange:v=>u(v.target.checked)})," Actualizacin Mayor (Reinicia progress)"]}),f.jsxs("div",{className:"space-y-4",children:[r.questions?.map((v,w)=>f.jsxs("div",{className:"bg-black/20 p-4 rounded border border-white/5",children:[f.jsx("input",{value:v.text,onChange:T=>g(w,"text",T.target.value),placeholder:"Pregunta",className:"w-full bg-transparent border-b border-white/10 mb-2 font-bold"}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:v.options.map((T,N)=>f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"radio",checked:v.correct===N,onChange:()=>g(w,"correct",N)}),f.jsx("input",{value:T,onChange:P=>y(w,N,P.target.value),className:"bg-white/5 rounded px-2 text-xs w-full"})]},N))})]},w)),f.jsx("button",{onClick:m,className:"w-full py-2 border border-dashed border-white/20 text-slate-400 text-xs rounded",children:"+ Pregunta"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>e({...r,isMajorUpdate:l}),className:"flex-1 bg-green-600 py-2 rounded font-bold",children:"Guardar"}),f.jsx("button",{onClick:t,className:"bg-slate-700 px-4 rounded",children:"Cancelar"})]})]})},_M=({activeTab:i,showArchived:e,setShowArchived:t,fetchIdeas:r,filteredIdeas:a,generateMondaySummary:l,handleSaveAnalysis:u,handleIdeaVerdict:m,handleArchiveIdea:g,handleDeleteIdea:y,handleRestoreIdea:v,handleAnalysisChange:w})=>f.jsxs("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:[f.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:i==="ideas"?" Laboratorio de Ideas":" Tickets de Soporte & Bugs"}),f.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Estado: ",f.jsx("span",{className:"text-indigo-400 font-bold",children:e?"ARCHIVADOS":"ACTIVOS"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[i==="ideas"&&f.jsx("button",{onClick:l,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-500 transition-colors shadow-lg flex items-center gap-2 border border-indigo-400/50",children:" RESUMEN"}),f.jsx("button",{onClick:()=>t(!e),className:`px-3 py-2 rounded-lg text-[10px] font-bold uppercase transition-all border ${e?"bg-slate-700 text-white border-slate-500":"bg-black/40 text-slate-500 border-slate-700 hover:text-white"}`,children:e?" Ver Activos":" Ver Archivados"}),f.jsx("button",{onClick:r,className:"bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg text-xs text-slate-300 border border-white/10",children:""})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(T=>{const N=T.status==="approved",P=T.status==="rejected",K=T.status==="new",U=T.type==="dev";return f.jsxs("div",{className:`bg-slate-900 border rounded-xl p-5 flex flex-col gap-3 relative group transition-all animate-fadeIn hover:shadow-xl ${U?"border-purple-500/20 shadow-[0_0_10px_rgba(147,51,234,0.05)]":"border-white/10"}`,children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:`font-bold text-sm ${U?"text-purple-300 font-mono":"text-white"}`,children:T.userName}),U&&f.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded border bg-purple-900/30 text-purple-300 border-purple-500/30",children:"BUG/DEV"})]}),f.jsx("p",{className:"text-[10px] text-slate-500 font-mono mt-1",children:T.timestampStr})]}),N&&f.jsx("span",{className:"text-[10px] bg-green-900/30 text-green-400 px-2 py-1 rounded border border-green-500/20 font-bold",children:" APROBADA"}),P&&f.jsx("span",{className:"text-[10px] bg-red-900/30 text-red-400 px-2 py-1 rounded border border-red-500/20 font-bold",children:" RECHAZADA"}),K&&f.jsx("span",{className:"text-[10px] bg-yellow-900/30 text-yellow-500 px-2 py-1 rounded border border-yellow-500/20 font-bold",children:" PENDIENTE"})]}),f.jsxs("div",{className:`p-4 rounded-lg border min-h-[80px] ${U?"bg-black/60 border-purple-900/30 font-mono text-xs text-green-400":"bg-black/30 border-white/5 text-sm text-slate-300 italic"}`,children:['"',T.content,'"']}),!U&&f.jsxs("div",{className:"space-y-2 mt-2",children:[f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-green-500 font-bold",children:"PROS"}),f.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-green-500 outline-none h-16 resize-none",value:T.analysis?.pros||"",onChange:B=>w(T.id,"pros",B.target.value)})]}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-red-500 font-bold",children:"CONS"}),f.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-red-500 outline-none h-16 resize-none",value:T.analysis?.cons||"",onChange:B=>w(T.id,"cons",B.target.value)})]})]}),f.jsxs("div",{className:"flex gap-2 mt-auto pt-4 border-t border-white/5",children:[!U&&f.jsx("button",{onClick:()=>u(T.id,T.analysis),className:"flex-1 bg-white/5 hover:bg-white/10 text-slate-400 text-xs font-bold py-2 rounded transition-colors",children:" Guardar"}),K&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>m(T,"approved"),className:"flex-1 bg-green-600/20 hover:bg-green-600 hover:text-white text-green-400 text-xs font-bold py-2 rounded transition-colors border border-green-600/30",children:" Aprobar"}),f.jsx("button",{onClick:()=>m(T,"rejected"),className:"w-10 flex items-center justify-center bg-red-600/20 hover:bg-red-600 hover:text-white text-red-400 font-bold rounded transition-colors border border-red-600/30",children:""})]}),(N||P)&&!e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>g(T.id),className:"w-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-400 font-bold rounded transition-colors border border-slate-600",title:"Archivar",children:""}),f.jsx("button",{onClick:()=>y(T.id),className:"w-10 flex items-center justify-center bg-red-900/20 hover:bg-red-900/80 text-red-500 hover:text-white font-bold rounded transition-colors border border-red-900/30",title:"Eliminar",children:""})]}),e&&f.jsx("button",{onClick:()=>v(T.id),className:"w-full flex items-center justify-center bg-blue-900/30 hover:bg-blue-600 text-blue-400 hover:text-white font-bold py-2 rounded transition-colors border border-blue-500/20",children:" Restaurar"})]})]},T.id)})})]}),vM=({usersList:i,editingUserId:e,setEditingUserId:t,editForm:r,setEditForm:a,setPointsToSend:l,handleGivePoints:u,saveUserChanges:m,startEditingUser:g})=>f.jsx("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:f.jsx("div",{className:"bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-xl",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-black/30 text-slate-400 text-[10px] uppercase font-bold",children:f.jsxs("tr",{className:"border-b border-white/5",children:[f.jsx("th",{className:"p-4",children:"Usuario"}),f.jsx("th",{className:"p-4",children:"Rol Actual"}),f.jsx("th",{className:"p-4",children:"Equipo"}),f.jsx("th",{className:"p-4 text-right",children:"Gestin"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:i.map(y=>f.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[f.jsxs("td",{className:"p-4",children:[f.jsx("div",{className:"font-bold text-white",children:y.name}),f.jsx("div",{className:"text-xs text-slate-500",children:y.email})]}),e===y.id?f.jsxs(f.Fragment,{children:[f.jsx("td",{className:"p-4",children:f.jsxs("select",{value:r.role,onChange:v=>a({...r,role:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[f.jsx("option",{value:"agent",children:"Agente"}),f.jsx("option",{value:"team_leader",children:"TL"}),f.jsx("option",{value:"admin",children:"Admin"}),f.jsx("option",{value:"tester",children:"Tester"})]})}),f.jsx("td",{className:"p-4",children:f.jsxs("select",{value:r.team,onChange:v=>a({...r,team:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[f.jsx("option",{value:"default",children:"Default"}),f.jsx("option",{value:"team1",children:"Team 1"}),f.jsx("option",{value:"team2",children:"Team 2"})]})}),f.jsxs("td",{className:"p-4 text-right flex items-center justify-end gap-2",children:[f.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg p-1 border border-white/5",children:[f.jsx("input",{type:"number",placeholder:"Bonus",className:"w-16 bg-transparent text-xs text-yellow-400 text-center outline-none",onChange:v=>l(v.target.value)}),f.jsx("button",{onClick:()=>u(y.id),className:"bg-yellow-600 text-black px-2 py-1 rounded text-[10px] font-bold hover:bg-yellow-500",children:" ENVIAR"})]}),f.jsx("button",{onClick:()=>m(y.id),className:"text-green-400 text-xs font-bold hover:underline ml-2",children:"GUARDAR"}),f.jsx("button",{onClick:()=>t(null),className:"text-red-400 text-xs font-bold hover:underline ml-2",children:"CANCELAR"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded border ${y.role==="admin"?"bg-purple-900/30 text-purple-300 border-purple-500/30":y.role==="team_leader"?"bg-blue-900/30 text-blue-300 border-blue-500/30":"bg-slate-800 text-slate-400 border-slate-700"}`,children:y.role})}),f.jsx("td",{className:"p-4 text-xs text-slate-400",children:y.team}),f.jsx("td",{className:"p-4 text-right",children:f.jsx("button",{onClick:()=>g(y),className:"text-indigo-400 text-xs font-bold hover:text-white transition-colors",children:"EDITAR "})})]})]},y.id))})]})})}),xM=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],wM=({isOpen:i,onClose:e,scheduleRequests:t,pendingIdeas:r,handleApproveRequest:a,handleRejectRequest:l,onNavigate:u})=>{const[m,g]=O.useState("schedule");return i?f.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-fadeIn",children:f.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-2xl shadow-2xl flex flex-col max-h-[85vh]",children:[f.jsxs("div",{className:"p-5 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-slate-900 to-slate-800",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("h3",{className:"text-lg font-bold text-white",children:"Centro de Notificaciones"})]}),f.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:""})]}),f.jsxs("div",{className:"flex border-b border-white/5 bg-black/20",children:[f.jsxs("button",{onClick:()=>g("schedule"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${m==="schedule"?"border-yellow-500 text-yellow-400 bg-yellow-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Horarios (",t.length,")"]}),f.jsxs("button",{onClick:()=>g("ideas"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${m==="ideas"?"border-indigo-500 text-indigo-400 bg-indigo-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Ideas (",r.length,")"]})]}),f.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4 custom-scrollbar bg-[#0b0e14]",children:[m==="schedule"&&f.jsx(f.Fragment,{children:t.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[f.jsx("span",{className:"text-2xl mb-2",children:""}),f.jsx("p",{className:"text-sm",children:"Todo al da."})]}):t.map(y=>{const v=y.type==="urgent",w=!!y.currentSchedule;return f.jsxs("div",{className:`bg-white/5 border rounded-xl p-4 flex flex-col gap-3 ${v?"border-orange-500/30":"border-white/5"}`,children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-white flex items-center gap-2",children:[y.userName," ",v&&f.jsx("span",{className:"text-[9px] bg-orange-600 text-white px-1.5 py-0.5 rounded animate-pulse",children:"URGENTE"})]}),f.jsx("p",{className:`text-xs mt-1 font-bold ${v?"text-orange-400":"text-blue-300"}`,children:y.message||"Solicitud de cambio"}),f.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Semana ID: ",y.weekId]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>a(y),className:"bg-green-600 hover:bg-green-500 px-3 py-1.5 rounded text-xs font-bold text-white shadow-lg",children:" APROBAR"}),f.jsx("button",{onClick:()=>l(y.id),className:"bg-red-900/50 hover:bg-red-600 px-3 py-1.5 rounded text-xs font-bold text-red-200 hover:text-white border border-red-500/30",children:" RECHAZAR"})]})]}),f.jsxs("div",{className:"bg-black/20 p-3 rounded-lg space-y-2",children:[w&&Kw(y.currentSchedule,"ACTUAL",!0),Kw(y.proposedSchedule,w?"NUEVO":"HORARIO")]})]},y.id)})}),m==="ideas"&&f.jsx(f.Fragment,{children:r.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[f.jsx("span",{className:"text-2xl mb-2",children:""}),f.jsx("p",{className:"text-sm",children:"Sin ideas nuevas."})]}):r.map(y=>f.jsxs("div",{className:"bg-indigo-900/10 border border-indigo-500/20 rounded-xl p-4 flex justify-between items-center hover:bg-indigo-900/20 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"h-10 w-10 bg-indigo-600/20 text-indigo-400 rounded-full flex items-center justify-center text-xl border border-indigo-500/30",children:""}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-indigo-200 text-sm",children:[f.jsx("span",{className:"text-white",children:y.userName})," tuvo una nueva idea"]}),f.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:y.timestampStr}),f.jsxs("p",{className:"text-xs text-slate-400 italic mt-1 line-clamp-1",children:['"',y.content,'"']})]})]}),f.jsx("button",{onClick:()=>u("ideas"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded-lg shadow-lg border border-indigo-400/50 flex items-center gap-2 transition-all active:scale-95",children:"VER EN LAB "})]},y.id))})]})]})}):null},Kw=(i,e,t=!1)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-16 text-[9px] font-bold text-right uppercase ${t?"text-slate-500":"text-indigo-300"}`,children:e}),f.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1",children:xM.map(r=>{const a=i?.[r];if(!a)return f.jsxs("div",{className:"text-center opacity-20",children:[f.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r);const l=t?"text-slate-500 bg-slate-800/50":"text-red-300 bg-red-900/30 font-bold",u=t?"text-slate-400 bg-slate-800/50":"text-green-300 bg-green-900/30 font-bold";return a.off?f.jsxs("div",{className:`text-center rounded p-1 ${l}`,children:[f.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),f.jsx("div",{className:"text-[9px]",children:"OFF"})]},r):a.hours>0?f.jsxs("div",{className:`text-center rounded p-1 ${u}`,children:[f.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),f.jsxs("div",{className:"text-[9px]",children:[a.hours,"h"]})]},r):f.jsxs("div",{className:"text-center opacity-20",children:[f.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r)})})]}),yl=[{name:"yellow",bg:"bg-[#fff59d] text-yellow-900",tab:"bg-[#fff59d]",btn:"bg-yellow-400"},{name:"green",bg:"bg-[#c5e1a5] text-green-900",tab:"bg-[#c5e1a5]",btn:"bg-green-400"},{name:"blue",bg:"bg-[#90caf9] text-blue-900",tab:"bg-[#90caf9]",btn:"bg-blue-400"},{name:"pink",bg:"bg-[#f48fb1] text-pink-900",tab:"bg-[#f48fb1]",btn:"bg-pink-400"},{name:"purple",bg:"bg-[#ce93d8] text-purple-900",tab:"bg-[#ce93d8]",btn:"bg-purple-400"},{name:"white",bg:"bg-[#eeeeee] text-slate-800",tab:"bg-[#eeeeee]",btn:"bg-slate-200"}],ES=({user:i})=>{const[e,t]=O.useState(!1),[r,a]=O.useState([]),[l,u]=O.useState(null),[m,g]=O.useState(!1),[y,v]=O.useState(null),[w,T]=O.useState(null),[N,P]=O.useState(""),U=(()=>{try{const se=localStorage.getItem(`nexus_notes_config_${i?.uid}`);return se?JSON.parse(se):null}catch{return null}})(),[B,Z]=O.useState(U?.position||{x:window.innerWidth-80,y:window.innerHeight-200}),[Q,oe]=O.useState(U?.size||{width:340,height:450}),[re,ue]=O.useState(!1),[S,A]=O.useState({x:0,y:0}),[C,k]=O.useState({x:0,y:0}),D=O.useRef(null),L=O.useRef(null);O.useEffect(()=>{if(!i)return;const se=Pt(Ce,`users/${i.uid}/quick_notes`),be=_n(se,oo("createdAt","asc")),Se=Kn(be,nt=>{const Ye=nt.docs.map(Tt=>({id:Tt.id,...Tt.data()}));a(Ye),Ye.length>0?u(Tt=>Ye.find(Qn=>Qn.id===Tt)?Tt:Ye[Ye.length-1].id):u(null)});return()=>Se()},[i]);const R=(se,be)=>{if(!i)return;const Se={position:se,size:be};localStorage.setItem(`nexus_notes_config_${i.uid}`,JSON.stringify(Se))},me=se=>{se.button===0&&(ue(!0),k({x:se.clientX,y:se.clientY}),A({x:se.clientX-B.x,y:se.clientY-B.y}))},he=se=>{if(re&&(ue(!1),Math.sqrt(Math.pow(se.clientX-C.x,2)+Math.pow(se.clientY-C.y,2))>5?R(B,Q):t(Se=>!Se)),e&&D.current){const be=D.current.offsetWidth,Se=D.current.offsetHeight;if(be!==Q.width||Se!==Q.height){const nt={width:be,height:Se};oe(nt),R(B,nt)}}};O.useEffect(()=>{const se=be=>{re&&(be.preventDefault(),Z({x:be.clientX-S.x,y:be.clientY-S.y}))};return(re||e)&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",he)),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",he)}},[re,S,C,e,B,Q]);const H=async()=>{const se=await Pu(Pt(Ce,`users/${i.uid}/quick_notes`),{title:"Nueva Nota",text:"",color:"yellow",createdAt:Date.now(),updatedAt:Date.now()});u(se.id),T(se.id),P("Nueva Nota"),g(!1)},le=async(se,be,Se)=>{const nt=it(Ce,`users/${i.uid}/quick_notes`,se);await vr(nt,{[be]:Se,updatedAt:Date.now()})},_e=async(se,be)=>{se.stopPropagation(),window.confirm("Borrar nota?")&&await Tl(it(Ce,`users/${i.uid}/quick_notes`,be))},Ve=(se,be)=>{se.stopPropagation(),T(be.id),P(be.title||"Nota")},ze=async se=>{N.trim()!==""&&await le(se,"title",N),T(null)},M=(se,be)=>{se.key==="Enter"&&ze(be)},ee=(se,be)=>{se.trim()&&(navigator.clipboard.writeText(se.trim()),v(be),setTimeout(()=>v(null),1e3))},de=r.find(se=>se.id===l),ve=de&&yl.find(se=>se.name===de.color)||yl[0];return i?f.jsxs(f.Fragment,{children:[e&&f.jsxs("div",{ref:D,className:"fixed z-[90] flex flex-col animate-fadeIn shadow-2xl rounded-xl overflow-hidden border border-white/20",style:{left:B.x-Q.width+50,top:B.y-Q.height-10,width:`${Q.width}px`,height:`${Q.height}px`,resize:"both",minWidth:"280px",minHeight:"200px"},onMouseDown:se=>se.stopPropagation(),children:[f.jsxs("div",{className:"flex bg-[#2d3748] overflow-x-auto custom-scrollbar-hide cursor-move items-end pt-1 px-1 gap-1 h-9 flex-shrink-0",title:"Arrastrar widget",children:[r.map((se,be)=>{const Se=se.id===l,nt=se.id===w,Ye=yl.find(Tt=>Tt.name===se.color)||yl[0];return f.jsxs("div",{onClick:()=>!nt&&u(se.id),onDoubleClick:Tt=>Ve(Tt,se),className:`group relative flex items-center justify-between min-w-[100px] max-w-[140px] h-8 px-3 rounded-t-lg text-xs font-bold select-none transition-all ${Se?`${Ye.tab} text-slate-900`:"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[nt?f.jsx("input",{autoFocus:!0,value:N,onChange:Tt=>P(Tt.target.value),onBlur:()=>ze(se.id),onKeyDown:Tt=>M(Tt,se.id),className:"w-full bg-transparent outline-none border-b border-black/50 text-slate-900 px-0 py-0"}):f.jsx("span",{className:"truncate mr-4 w-full",title:"Doble clic para editar",children:se.title||`Nota ${be+1}`}),!nt&&f.jsx("button",{onClick:Tt=>_e(Tt,se.id),className:`absolute right-1 top-1.5 w-5 h-5 flex items-center justify-center rounded-full hover:bg-black/10 text-[10px] ${Se?"text-black/50":"text-white/30 hidden group-hover:flex"}`,children:""})]},se.id)}),f.jsx("button",{onClick:H,className:"h-7 w-7 mb-0.5 flex items-center justify-center rounded-lg bg-slate-800 text-slate-400 hover:text-white hover:bg-indigo-600 transition-colors flex-shrink-0",children:"+"})]}),de&&f.jsxs("div",{className:`flex justify-between items-center px-3 py-1 border-b border-black/5 ${ve.bg}`,children:[f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>g(!1),className:`p-1 rounded hover:bg-black/10 transition-colors ${m?"text-black/40":"text-black font-bold bg-black/5"}`,title:"Modo Edicin",children:""}),f.jsx("button",{onClick:()=>g(!0),className:`p-1 rounded hover:bg-black/10 transition-colors ${m?"text-blue-600 font-bold bg-blue-500/10":"text-black/40"}`,title:"Modo Snippets (Copiar al clic)",children:""})]}),f.jsx("div",{className:"flex gap-1",children:yl.map(se=>f.jsx("button",{onClick:()=>le(de.id,"color",se.name),className:`w-3 h-3 rounded-full border border-black/10 ${se.btn} hover:scale-125 transition-transform`},se.name))})]}),f.jsxs("div",{className:`flex-1 flex flex-col relative ${de?ve.bg:"bg-slate-800"} overflow-hidden`,children:[de?f.jsxs(f.Fragment,{children:[!m&&f.jsx("textarea",{className:"flex-1 w-full h-full bg-transparent resize-none outline-none p-4 text-sm font-medium placeholder-black/30 leading-relaxed custom-scrollbar",placeholder:"Escribe aqu... (Un rengln = Un botn en modo )",value:de.text,onChange:se=>{const be=r.map(Se=>Se.id===de.id?{...Se,text:se.target.value}:Se);a(be)},onBlur:se=>le(de.id,"text",se.target.value),autoFocus:!0}),m&&f.jsx("div",{className:"flex-1 w-full h-full overflow-y-auto p-2 custom-scrollbar space-y-1",children:de.text.trim()===""?f.jsx("div",{className:"text-center mt-10 text-black/40 text-xs italic",children:"Escribe algo en modo  para ver tus snippets aqu."}):de.text.split(`
`).map((se,be)=>{if(!se.trim())return f.jsx("div",{className:"h-2"},be);const Se=y===be;return f.jsxs("div",{onClick:()=>ee(se,be),className:`
                                                            group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-all text-sm font-medium border border-black/5
                                                            ${Se?"bg-green-500 text-white shadow-md transform scale-[1.02]":"bg-white/40 hover:bg-white/80 hover:shadow-sm text-slate-800"}
                                                        `,children:[f.jsx("span",{className:"truncate",children:se}),f.jsx("span",{className:`text-[10px] font-bold ${Se?"text-white":"text-transparent group-hover:text-black/30"}`,children:Se?"COPIADO!":"COPIAR"})]},be)})})]}):f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500",children:[f.jsx("span",{className:"text-3xl mb-2",children:""}),f.jsx("p",{className:"text-xs",children:"Sin notas abiertas."}),f.jsx("button",{onClick:H,className:"mt-3 text-xs bg-indigo-600 px-3 py-1.5 rounded-lg text-white hover:bg-indigo-500",children:"Crear una"})]}),f.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none z-0",children:f.jsx("span",{className:"text-black/50 text-[8px] rotate-45",children:""})})]})]}),f.jsx("div",{ref:L,onMouseDown:me,className:`fixed z-[100] w-14 h-14 rounded-full shadow-[0_0_20px_rgba(250,204,21,0.4)] flex items-center justify-center border-2 border-white/20 cursor-grab active:cursor-grabbing transition-transform hover:scale-110 ${e?"bg-yellow-400 text-black rotate-12":"bg-slate-800 text-yellow-400 hover:bg-slate-700"}`,style:{left:B.x,top:B.y,touchAction:"none"},title:"Notas Rpidas (Arrastra para mover)",children:f.jsx("span",{className:"text-2xl pointer-events-none",children:""})})]}):null},SS=({isOpen:i,onClose:e,user:t,userProfile:r,initialType:a})=>{const[l,u]=O.useState(a||"monday"),[m,g]=O.useState(""),[y,v]=O.useState([]);O.useEffect(()=>{i&&a&&u(a)},[i,a]),O.useEffect(()=>{i&&t&&(async()=>{try{const N=_n(Pt(Ce,"monday_ideas"),Ft("uid","==",t.uid),oo("timestamp","desc")),P=await Bh(N);v(P.docs.map(K=>({id:K.id,...K.data()})))}catch(N){console.error("Error history",N)}})()},[i,t]);const w=async()=>{if(!m.trim())return;const T=new Date,N={uid:t.uid,userName:r?.userName||t.displayName||t.email||"Agente",team:r?.team||"Tema 1",content:m,type:l,timestamp:Date.now(),timestampStr:T.toLocaleString("es-AR"),analysis:{pros:"",cons:""},status:"new"};try{const P=await Pu(Pt(Ce,"monday_ideas"),N);v(K=>[{id:P.id,...N},...K]),g(""),alert(l==="dev"?" Enviado al Dev!":" Guardado para el Lunes!")}catch(P){console.error(P),alert("Error al enviar.")}};return i?f.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fadeIn",children:f.jsxs("div",{className:"bg-[#0f111a] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl flex flex-col max-h-[85vh] overflow-hidden",children:[f.jsxs("div",{className:"flex border-b border-white/10",children:[f.jsx("button",{onClick:()=>u("monday"),className:`flex-1 p-4 text-sm font-bold transition-colors ${l==="monday"?"bg-yellow-900/20 text-yellow-400 border-b-2 border-yellow-500":"text-slate-500 hover:text-slate-300"}`,children:" Idea Lunes"}),f.jsx("button",{onClick:()=>u("dev"),className:`flex-1 p-4 text-sm font-bold transition-colors ${l==="dev"?"bg-purple-900/20 text-purple-400 border-b-2 border-purple-500":"text-slate-500 hover:text-slate-300"}`,children:" Idea / Soporte"}),f.jsx("button",{onClick:e,className:"px-4 text-slate-400 hover:text-white border-l border-white/10",children:""})]}),f.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[f.jsx("textarea",{className:`w-full bg-black/50 border rounded-lg p-3 text-white text-sm outline-none mb-3 h-32 resize-none focus:ring-1 ${l==="monday"?"border-yellow-900/50 focus:border-yellow-500":"border-purple-900/50 focus:border-purple-500"}`,placeholder:l==="monday"?"Describe tu propuesta para mejorar el equipo...":"Quiero que la app haga esto... / La app tiene este error...",value:m,onChange:T=>g(T.target.value)}),f.jsx("button",{onClick:w,className:`w-full font-bold py-3 rounded-lg transition-colors mb-6 shadow-lg ${l==="monday"?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:"ENVIAR"}),f.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3 border-b border-white/10 pb-2",children:"Tu Historial Reciente"}),f.jsx("div",{className:"space-y-3",children:y.length>0?y.map(T=>f.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-start mb-1",children:[f.jsx("span",{className:"text-[10px] text-slate-500",children:T.timestampStr?.split(",")[0]}),f.jsx("span",{className:`text-[10px] px-2 rounded font-bold ${T.status==="approved"?"bg-green-900/50 text-green-400":T.status==="rejected"?"bg-red-900/50 text-red-400":"bg-yellow-900/50 text-yellow-500"}`,children:T.status==="new"?"Pendiente":T.status==="approved"?"Aprobada":"Rechazada"})]}),f.jsx("p",{className:"text-xs text-slate-300 line-clamp-2",children:T.content})]},T.id)):f.jsx("p",{className:"text-xs text-slate-600 italic",children:"No hay historial an."})})]})]})}):null},TM=Object.freeze(Object.defineProperty({__proto__:null,default:SS},Symbol.toStringTag,{value:"Module"})),EM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],SM=()=>{const i=new Date,e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+e.getDay()+1)/7);return`${i.getFullYear()}-W${t.toString().padStart(2,"0")}`},AM=({initialTab:i="dashboard",onLogout:e,currentUserTeam:t,isAdmin:r})=>{const a=O.useMemo(()=>{const ie={team1:["Tienda Lujosa","Clara Tienda","Bella Divina"],team2:["Clara Tierra"],all:["Tienda Lujosa","Clara Tienda","Bella Divina","Clara Tierra"]};return r?ie.all:ie[t?.replace("_","")||"team1"]||ie.team1},[t,r]),[l,u]=O.useState(i);O.useEffect(()=>{i&&u(i)},[i]);const[m,g]=O.useState("current"),y=O.useMemo(()=>m==="next"?aM():SM(),[m]),[v,w]=O.useState([]),[T,N]=O.useState({}),[P,K]=O.useState({}),[U,B]=O.useState([]),[Z,Q]=O.useState([]),[oe,re]=O.useState(!1),[ue,S]=O.useState([]),[A,C]=O.useState(new Date().toISOString().split("T")[0]),[k,D]=O.useState("daily"),[L,R]=O.useState("ALL"),[me,he]=O.useState(t),[H,le]=O.useState(null),[_e,Ve]=O.useState(!1),[ze,M]=O.useState([]),[ee,de]=O.useState(EM),[ve,se]=O.useState(()=>{try{return JSON.parse(localStorage.getItem("specificTaskGoals"))||{}}catch{return{}}}),[be,Se]=O.useState(!1),[nt,Ye]=O.useState(""),[Tt,Ar]=O.useState([]),[Qn,Ir]=O.useState(""),[un,qr]=O.useState("info"),[Hr,Rs]=O.useState([]),[Xn,Rt]=O.useState(null),[Nt,vn]=O.useState([]),[Ao,Ds]=O.useState(!1),[pn,He]=O.useState(!1),[gi,Ms]=O.useState(""),[ur,xa]=O.useState(!1),[Nr,os]=O.useState(!1),[wa,Wn]=O.useState(""),[Wt,xn]=O.useState("monday"),[Dt,ks]=O.useState([]),[ls,Gr]=O.useState(null),[wn,dr]=O.useState({role:"",team:""}),[Lt,Bn]=O.useState(0);O.useEffect(()=>{(async()=>{const ge=(await Bh(Pt(Ce,"users"))).docs.map(lt=>({id:lt.id,...lt.data()}));ks(ge),w(ge),N({});try{const lt=it(Ce,"weekly_plans",y),st=await ry(lt);st.exists()&&N(st.data().plan||{})}catch(lt){console.error(lt)}const Oe=_n(Pt(Ce,"weekly_schedules"),Ft("weekId","==",y)),ht=Kn(Oe,lt=>{const st={};lt.docs.forEach(At=>{const jt=At.data();jt.uid&&(st[jt.uid]=jt.schedule)}),K(st)}),rt=r?_n(Pt(Ce,"schedule_requests"),Ft("status","==","pending")):_n(Pt(Ce,"schedule_requests"),Ft("status","==","pending"),Ft("team","==",t||"Tema 1")),kt=Kn(rt,lt=>B(lt.docs.map(st=>({id:st.id,...st.data()})))),En=r?_n(Pt(Ce,"monday_ideas"),Ft("status","==","new")):_n(Pt(Ce,"monday_ideas"),Ft("status","==","new"),Ft("type","==","monday"),Ft("team","==",t||"Tema 1")),Me=Kn(En,lt=>Q(lt.docs.map(st=>({id:st.id,...st.data()})))),$t=Kn(_n(Pt(Ce,"news_ticker"),oo("createdAt","desc")),lt=>Ar(lt.docs.map(st=>({id:st.id,...st.data()})))),Sn=Kn(Pt(Ce,"training_modules"),lt=>Rs(lt.docs.map(st=>({id:st.id,...st.data()}))));return l==="dashboard"&&Fn(),(l==="ideas"||l==="dev")&&Tn(),()=>{ht(),kt(),Me(),$t(),Sn()}})()},[l,y,A,me,k]);const Fn=async()=>{Ve(!0),S([]),M([]);try{const ie=js(),xe=Pt(Ce,"daily_reports"),ge=[Ft("date",">=",ie.start),Ft("date","<=",ie.end),oo("date","desc")];me!=="ALL_TEAMS"&&ge.push(Ft("team","==",me)),ge.push(Hg(100));const Oe=_n(xe,...ge),rt=(await Bh(Oe)).docs.map(Me=>({id:Me.id,...Me.data()}));S(rt);const kt={};rt.forEach(Me=>{kt[Me.uid]||(kt[Me.uid]={id:Me.uid,uid:Me.uid,userName:Me.userName||"Usuario Desconocido",team:Me.team||"Sin Equipo",totalTasks:0,totalTimeMs:0,taskBreakdownMap:{},lastUpdate:Me.timestampStr||Me.date});const $t=kt[Me.uid];$t.totalTasks+=Me.metrics?.totalTasks||0,$t.totalTimeMs+=Me.metrics?.totalTimeMs||0,Me.timestampStr>$t.lastUpdate&&($t.lastUpdate=Me.timestampStr),Array.isArray(Me.taskBreakdown)&&Me.taskBreakdown.forEach(Sn=>{const lt=Sn.name||Sn.text||"Tarea Genrica";$t.taskBreakdownMap[lt]||($t.taskBreakdownMap[lt]={count:0,timeMs:0}),$t.taskBreakdownMap[lt].count+=Sn.count||1,$t.taskBreakdownMap[lt].timeMs+=Sn.elapsedTime||Sn.timeMs||0})});const En=Object.values(kt).map(Me=>{const $t=Object.entries(Me.taskBreakdownMap).map(([st,At])=>{const jt=At.timeMs/36e5;return{name:st,count:At.count,timeMs:At.timeMs,speed:jt>0?(At.count/jt).toFixed(2):"0.00"}}),Sn=Me.totalTimeMs/36e5,lt=Sn>0?(Me.totalTasks/Sn).toFixed(2):"0.00";return{...Me,metrics:{totalTasks:Me.totalTasks,totalTimeMs:Me.totalTimeMs,globalSpeed:lt},taskBreakdown:$t,timestampStr:Me.lastUpdate}});M(En)}catch(ie){console.error("Error cargando reportes:",ie)}finally{Ve(!1)}},Tn=async()=>{Ds(!0);try{let ie=_n(Pt(Ce,"monday_ideas"),oo("timestamp","desc")),ge=(await Bh(ie)).docs.map(Oe=>({id:Oe.id,...Oe.data()}));r||(ge=ge.filter(Oe=>Oe.type!=="dev")),vn(ge)}catch(ie){console.error(ie)}Ds(!1)},js=()=>{const[ie,xe,ge]=A.split("-"),Oe=new Date(parseInt(ie),parseInt(xe)-1,parseInt(ge)),ht=rt=>`${rt.getFullYear()}-${String(rt.getMonth()+1).padStart(2,"0")}-${String(rt.getDate()).padStart(2,"0")}`;if(k==="daily")return{start:A,end:A};if(k==="weekly"){const rt=Oe.getDay(),kt=Oe.getDate()-rt+(rt===0?-6:1),En=new Date(Oe);En.setDate(kt);const Me=new Date(En);return Me.setDate(En.getDate()+6),{start:ht(En),end:ht(Me),startDateObj:En,endDateObj:Me}}if(k==="monthly"){const rt=new Date(Oe.getFullYear(),Oe.getMonth(),1),kt=new Date(Oe.getFullYear(),Oe.getMonth()+1,0);return{start:ht(rt),end:ht(kt),startDateObj:rt,endDateObj:kt}}return{start:A,end:A}},yi=(ie,xe)=>{if(xe===-1||xe===void 0)return"text-blue-400 font-normal italic";const ge=parseFloat(ie)||0,Oe=parseFloat(xe)||1;return ge>=Oe?"text-green-400 font-bold":ge>=Oe*.7?"text-yellow-400 font-bold":"text-red-500 font-bold"},Mn=ie=>le(H===ie?null:ie),Jn=ie=>{if(!ie)return"0h 0m";const xe=Math.floor(ie/36e5),ge=Math.floor(ie%36e5/6e4);return`${xe}h ${ge}m`},Ta=()=>{const ie=js();let xe=Nt;if(l==="ideas"?xe=xe.filter(ge=>ge.type==="monday"):l==="dev"&&(xe=xe.filter(ge=>ge.type==="dev")),k!=="daily"){const ge=ie.startDateObj?ie.startDateObj.getTime():0,Oe=ie.endDateObj?ie.endDateObj.getTime():9999999999999;xe=xe.filter(ht=>ht.timestamp>=ge&&ht.timestamp<=Oe)}return xe=xe.filter(ge=>ur?ge.isArchived:!ge.isArchived),xe},$r=async()=>{Qn&&(await Pu(Pt(Ce,"news_ticker"),{text:Qn,type:un,createdAt:Date.now()}),Ir(""))},Os=async ie=>{await Tl(it(Ce,"news_ticker",ie))},Vs=async ie=>{const xe={...ie,active:!0,version:ie.version||1};ie.id?(ie.isMajorUpdate&&(xe.version+=1),await vr(it(Ce,"training_modules",ie.id),xe)):await Pu(Pt(Ce,"training_modules"),xe),Rt(null)},Kr=async ie=>{window.confirm("Borrar?")&&await Tl(it(Ce,"training_modules",ie))},hr=async ie=>{await vr(it(Ce,"training_modules",ie.id),{active:!ie.active})},qn=async(ie,xe)=>{xe==="approved"?(await vr(it(Ce,"monday_ideas",ie.id),{status:"approved"}),await Is(it(Ce,"users",ie.uid,"data","wallet"),{val:{value:gl(50),coins:gl(50),lofiCoins:gl(50)}},{merge:!0}),alert("Aprobada +50")):await vr(it(Ce,"monday_ideas",ie.id),{status:"rejected"}),vn(ge=>ge.map(Oe=>Oe.id===ie.id?{...Oe,status:xe}:Oe))},Mt=async ie=>{window.confirm("Archivar?")&&(await vr(it(Ce,"monday_ideas",ie),{isArchived:!0}),vn(xe=>xe.map(ge=>ge.id===ie?{...ge,isArchived:!0}:ge)))},Hn=async ie=>{await vr(it(Ce,"monday_ideas",ie),{isArchived:!1}),vn(xe=>xe.map(ge=>ge.id===ie?{...ge,isArchived:!1}:ge))},zt=async ie=>{window.confirm("Eliminar?")&&(await Tl(it(Ce,"monday_ideas",ie)),vn(xe=>xe.filter(ge=>ge.id!==ie)))},Gt=async(ie,xe)=>{await vr(it(Ce,"monday_ideas",ie),{analysis:xe}),alert("Guardado")},Zn=(ie,xe,ge)=>{vn(Oe=>Oe.map(ht=>ht.id===ie?{...ht,analysis:{...ht.analysis||{pros:"",cons:""},[xe]:ge}}:ht))},cs=()=>{const ie=Nt.filter(Oe=>Oe.type==="monday"&&!Oe.isArchived&&Oe.status==="approved");if(ie.length===0){alert("Sin ideas aprobadas.");return}const xe=js();let ge=` *RESUMEN*
 ${xe.start} - ${xe.end}

`;ie.forEach((Oe,ht)=>{ge+=` *#${ht+1}* (${Oe.userName})
"${Oe.content}"

`}),Ms(ge),He(!0)},Ee=ie=>{Gr(ie.id),dr({role:ie.role||"agent",team:ie.team||"default"})},Fe=async ie=>{try{await vr(it(Ce,"users",ie),wn),ks(xe=>xe.map(ge=>ge.id===ie?{...ge,...wn}:ge)),Gr(null),alert("Guardado")}catch{alert("Error")}},Et=async ie=>{const xe=parseInt(Lt);xe&&(await Is(it(Ce,"users",ie,"data","wallet"),{val:{value:gl(xe),coins:gl(xe),lofiCoins:gl(xe)}},{merge:!0}),alert(`Enviados ${xe}`),Bn(0))},et=async ie=>{try{await Is(it(Ce,"weekly_schedules",`${ie.uid}_${ie.weekId}`),{uid:ie.uid,userName:ie.userName,weekId:ie.weekId,schedule:ie.proposedSchedule,updatedAt:Date.now()}),await Tl(it(Ce,"schedule_requests",ie.id)),alert(" Aprobada")}catch{alert("Error")}},Cr=async ie=>{window.confirm("Rechazar?")&&await Tl(it(Ce,"schedule_requests",ie))},kn=ie=>{u(ie),re(!1)},St=U.length+Z.length;return f.jsxs("div",{className:"min-h-screen w-full bg-slate-950 text-white font-inter animate-fadeIn pb-20 relative overflow-x-hidden selection:bg-indigo-500 selection:text-white",children:[f.jsx("div",{className:"absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/30 via-slate-950 to-black pointer-events-none"}),f.jsx("div",{className:"relative z-10 w-full bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 shadow-2xl",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:f.jsx("span",{className:"text-xl",children:""})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl font-bold uppercase",children:"Nexus Control"}),f.jsx("p",{className:"text-[10px] text-slate-400 font-mono tracking-widest uppercase",children:r?"Admin":"Team Leader"})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("button",{onClick:()=>re(!0),className:`px-4 py-2 rounded-lg text-xs font-bold border transition-all flex items-center gap-2 relative ${St>0?"bg-indigo-600 text-white border-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse":"bg-slate-800 text-slate-400 border-white/5"}`,children:[f.jsx("span",{children:""}),St>0&&f.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[9px] border border-slate-900 shadow-sm",children:St})]}),f.jsx("button",{onClick:()=>Se(!0),className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs font-bold border border-white/5 flex items-center gap-2",children:" METAS"}),f.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold border border-blue-500/20",children:" ATRS"})]})]})}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto p-4 md:p-8",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-8 p-1 bg-slate-900/50 backdrop-blur rounded-xl border border-white/5 w-fit",children:["dashboard","planner","news","academy","ideas",r?"dev":null,r?"users":null].filter(Boolean).map(ie=>f.jsx("button",{onClick:()=>u(ie),className:`px-5 py-2.5 rounded-lg font-bold text-xs uppercase tracking-wide transition-all ${l===ie?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:{dashboard:" Reportes",planner:" Planner",news:" Noticias",academy:" Academy",ideas:" Ideas",dev:" Dev",users:" Usuarios"}[ie]},ie))}),l==="dashboard"&&f.jsx(dM,{processedData:ze,detectedTasks:ee,taskGoals:ve,selectedTeam:me,isLoading:_e,selectedTaskFilter:L,setSelectedTaskFilter:R,viewMode:k,setViewMode:D,filterDate:A,setFilterDate:C,expandedReportId:H,fetchTeamData:Fn,toggleRow:Mn,formatTime:Jn,getPerformanceColor:yi}),l==="planner"&&f.jsx(pM,{squad:v,weeklyPlan:T,setWeeklyPlan:N,agentSchedules:P,visibleShops:a,nextWeekId:y,targetWeek:m,setTargetWeek:g}),l==="news"&&f.jsx(gM,{newsList:Tt,newNewsText:Qn,setNewNewsText:Ir,newNewsType:un,setNewNewsType:qr,addNews:$r,deleteNews:Os}),l==="academy"&&f.jsx(yM,{quizzes:Hr,editingQuiz:Xn,setEditingQuiz:Rt,saveQuiz:Vs,deleteQuiz:Kr,toggleQuiz:hr}),(l==="ideas"||l==="dev")&&f.jsx(_M,{activeTab:l,showArchived:ur,setShowArchived:xa,fetchIdeas:Tn,filteredIdeas:Ta(),generateMondaySummary:cs,handleSaveAnalysis:Gt,handleIdeaVerdict:qn,handleArchiveIdea:Mt,handleDeleteIdea:zt,handleRestoreIdea:Hn,handleAnalysisChange:Zn}),l==="users"&&r&&f.jsx(vM,{usersList:Dt,editingUserId:ls,setEditingUserId:Gr,editForm:wn,setEditForm:dr,setPointsToSend:Bn,handleGivePoints:Et,saveUserChanges:Fe,startEditingUser:Ee})]}),f.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col items-end gap-3 z-50",children:[f.jsxs("button",{onClick:()=>{xn("dev"),os(!0)},className:"group relative flex items-center justify-center w-12 h-12 bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-lg border border-white/20 transition-all hover:scale-105",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{className:"absolute right-full mr-4 bg-slate-800 text-white text-xs font-bold px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap shadow-xl border border-white/10",children:"Bugs / Ideas App"})]}),f.jsxs("button",{onClick:()=>{xn("monday"),os(!0)},className:"group relative flex items-center justify-center w-14 h-14 bg-yellow-500 hover:bg-yellow-400 text-black rounded-full shadow-lg font-bold border border-white/20 transition-all hover:scale-105",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("span",{className:"absolute right-full mr-4 bg-slate-800 text-white text-xs font-bold px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap shadow-xl border border-white/10",children:"Ideas Lunes"})]})]}),f.jsx(SS,{isOpen:Nr,onClose:()=>{os(!1),Tn()},user:$h.currentUser,userProfile:{team:t,name:$h.currentUser?.displayName},initialType:Wt}),be&&f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 p-4",children:f.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-lg p-6 max-h-[80vh] overflow-y-auto",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Metas"}),f.jsx("div",{className:"space-y-2",children:ee.map(ie=>f.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[f.jsx("span",{children:ie}),f.jsx("input",{type:"number",value:ve[ie]||"",onChange:xe=>se({...ve,[ie]:xe.target.value}),className:"bg-black/40 w-16 text-center text-green-400"})]},ie))}),f.jsx("button",{onClick:()=>Se(!1),className:"mt-4 w-full bg-indigo-600 py-2 rounded font-bold",children:"Listo"})]})}),f.jsx(ES,{user:$h.currentUser}),f.jsx(wM,{isOpen:oe,onClose:()=>re(!1),scheduleRequests:U,pendingIdeas:Z,handleApproveRequest:et,handleRejectRequest:Cr,onNavigate:kn})]})},IM=()=>{const[i,e]=O.useState(!1),[t,r]=O.useState(""),[a,l]=O.useState(""),[u,m]=O.useState(""),[g,y]=O.useState(!1),v=async()=>{m(""),y(!0);const T=new rs;try{await a4(vu,T)}catch(N){console.error("Google Auth Error:",N),N.code==="auth/unauthorized-domain"?m(`Dominio no autorizado. Agrega "${window.location.hostname}" en Firebase Console.`):N.code==="auth/popup-closed-by-user"?m("Ventana cerrada por el usuario."):m("Error al iniciar con Google. Verifica la consola."),y(!1)}},w=async T=>{T.preventDefault(),m(""),y(!0);try{i?await OD(vu,t,a):await VD(vu,t,a)}catch(N){console.error("Email Auth Error:",N);let P="Error de autenticacin.";N.code==="auth/wrong-password"&&(P="Contrasea incorrecta."),N.code==="auth/user-not-found"&&(P="Usuario no encontrado."),N.code==="auth/email-already-in-use"&&(P="El correo ya est registrado."),N.code==="auth/weak-password"&&(P="La contrasea es muy dbil."),m(P),y(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-4",children:f.jsxs("div",{className:"w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-700",children:[f.jsxs("div",{className:"p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2",children:"Bienvenido"}),f.jsx("p",{className:"text-gray-400 text-sm",children:"Task Manager TL - Secured"})]}),f.jsx("button",{onClick:v,disabled:g,className:"w-full bg-white text-gray-900 font-bold py-3 rounded-lg flex items-center justify-center gap-3 hover:bg-gray-100 transition shadow-md mb-6",children:g?"Cargando...":f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Iniciar con Google"]})}),f.jsxs("div",{className:"relative flex py-2 items-center mb-6",children:[f.jsx("div",{className:"flex-grow border-t border-gray-600"}),f.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs",children:"O usa tu correo"}),f.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),f.jsxs("form",{onSubmit:w,className:"space-y-4",children:[f.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:T=>r(T.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),f.jsx("input",{type:"password",placeholder:"Contrasea",value:a,onChange:T=>l(T.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),u&&f.jsx("p",{className:"text-red-400 text-xs text-center font-bold bg-red-900/50 p-2 rounded",children:u}),f.jsx("button",{type:"submit",disabled:g,className:`w-full py-3 rounded-lg font-bold text-white transition shadow-lg ${i?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:g?"Procesando...":i?"Registrarse":"Iniciar Sesin"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:()=>e(!i),className:"text-sm text-gray-400 hover:text-white underline",children:i?"Ya tienes cuenta? Inicia sesin":"No tienes cuenta? Regstrate"})})]}),f.jsx("div",{className:"bg-gray-700/30 p-4 text-center border-t border-gray-700",children:f.jsx("p",{className:"text-xs text-gray-500",children:" Tus datos se guardan seguros en Firebase"})})]})})},NM="/themesTaskmanager/assets/logo-C6jEf1_1.png",CM=({coins:i,onOpenShop:e})=>{const t=typeof i=="number"?i:0;return f.jsx("div",{className:"fixed top-12 left-1/2 transform -translate-x-1/2 z-50 animate-slideDown",children:f.jsxs("div",{className:"flex items-center gap-1 p-1.5 bg-[#0f172a]/80 backdrop-blur-xl border border-white/10 rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.5)]",children:[f.jsxs("div",{className:"flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 pr-6",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-[#d1c4e9] flex items-center justify-center overflow-hidden border border-white/20 shadow-inner",children:f.jsx("img",{src:NM,alt:"Coin",className:"w-full h-full object-cover transform scale-[1.7]"})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Lofi Coins"}),f.jsx("span",{className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-300 leading-tight tabular-nums",children:t.toLocaleString()})]})]}),f.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),f.jsxs("button",{onClick:e,className:"group relative w-10 h-10 flex items-center justify-center rounded-full bg-transparent hover:bg-white/10 transition-all duration-300",title:"Abrir Tienda",children:[f.jsx("span",{className:"text-xl filter drop-shadow-md group-hover:scale-110 transition-transform",children:""}),f.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Tienda"})]})]})})},RM=({themeClasses:i,celebrationMessage:e})=>{const t=i.name==="halloween"?"[text-shadow:0_0_8px_rgba(255,165,0,0.6)]":i.name==="party"?"[text-shadow:0_0_10px_rgba(217,70,239,0.7)]":i.name==="biancaBday"?"[text-shadow:0_0_12px_rgba(236,72,153,0.6)]":"",[r,a]=i.iconPair||[null,null],l=i.name==="lofi",u=()=>{confirm("Seguro que quieres cerrar sesin?")&&UD(vu)};return f.jsxs("div",{className:"text-center mb-4 flex flex-col items-center relative",children:[f.jsx("button",{onClick:u,className:"absolute top-0 right-0 text-xs bg-red-900/50 hover:bg-red-800 text-red-200 px-2 py-1 rounded border border-red-800 transition",children:"Salir"}),l&&f.jsx("div",{className:"mb-2 animate-bounce-slow",children:f.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Logo",className:"w-32 h-32 object-cover rounded-full border-4 border-[#C084FC] shadow-lg hover:scale-105 transition-transform duration-500",onError:m=>{m.target.onerror=null,m.target.style.display="none"}})}),f.jsxs("h1",{className:`text-4xl font-extrabold transition-colors duration-500 ${i.primaryText} ${i.titleFont} ${t}`,children:[r&&f.jsx("span",{className:"inline-block transform -rotate-12 scale-110 mr-2 text-3xl",children:r}),l?"Task Manager":"Task Manager TL",a&&f.jsx("span",{className:"inline-block transform rotate-12 scale-110 ml-2 text-3xl",children:a})]}),l&&f.jsx("div",{className:"mt-2 bg-[#FDFCDC] text-[#2E1065] px-3 py-1 rounded-full text-xs font-bold font-lofidex tracking-widest uppercase border border-[#C084FC] shadow-md flex items-center gap-1 animate-pulse",children:f.jsx("span",{children:" Powered by LofiDex "})}),e&&f.jsx("p",{className:`mt-2 text-lg font-semibold animate-pulse ${i.accentText}`,children:e})]})},Yw=({message:i,resumeAction:e,dismissAction:t})=>{if(!i)return null;const r=i.taskIdToResume!==null,a=r?"bg-green-700/80":"bg-yellow-700/80",l=r?"border-green-400":"border-yellow-400";return f.jsx("div",{className:"fixed top-0 left-0 w-full p-4 z-[60] backdrop-blur-sm transition-all duration-300 transform translate-y-0",children:f.jsxs("div",{className:`max-w-xl mx-auto p-4 rounded-xl shadow-2xl flex flex-col sm:flex-row items-center justify-between gap-3 ${a} border ${l} text-white`,children:[f.jsx("p",{className:"font-semibold text-center sm:text-left flex-grow",children:i.text}),f.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[i.taskIdToResume!==null&&f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-bold rounded-full bg-blue-500 hover:bg-blue-600 transition duration-200 shadow-md",children:" Reanudar Tarea "}),f.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-bold rounded-full bg-gray-600 hover:bg-gray-700 transition duration-200",children:" Cerrar "})]})]})})},DM=({addTask:i,addMultipleTasks:e,errorMessage:t,setErrorMessage:r,themeClasses:a})=>{const[l,u]=O.useState(""),[m,g]=O.useState([]),[y,v]=O.useState(""),[w,T]=O.useState(!1);O.useEffect(()=>{g([]),l&&T(!0)},[l]);const N=O.useMemo(()=>{let Q=[...wS];return l&&Wg[l]&&(Q=[Wg[l],...Q]),Q},[l]),P=Q=>{u(Q.target.value)},K=Q=>{l&&g(oe=>oe.includes(Q)?oe.filter(re=>re!==Q):[...oe,Q])},U=Q=>{if(Q.preventDefault(),!l){r("Primero selecciona una tienda.");return}if(m.length===0){r("Selecciona al menos una tarea.");return}const oe=[];m.forEach(re=>{let ue=re;if(re==="OTHER_CUSTOM_TASK"){if(!y.trim())return;ue=y.trim()}oe.push({shopInput:l,taskName:ue,quantity:null})}),e?e(oe)&&(g([]),v(""),r("")):(oe.forEach(re=>i(re)),g([]),r(""))},B="bg-gray-800 text-white",Z=m.includes("OTHER_CUSTOM_TASK");return f.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[f.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[f.jsxs("select",{value:l,onChange:P,className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.accentText} ${a.shopSelectBorder} rounded-full focus:outline-none transition-all font-semibold appearance-none cursor-pointer`,required:!0,children:[f.jsx("option",{value:"",disabled:!0,className:B,children:"--- Seleccionar Tienda ---"}),xS.map(Q=>f.jsx("option",{value:Q,className:B,children:Q},Q))]}),l&&f.jsxs("div",{className:"flex flex-col gap-2 animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center px-2",children:[f.jsx("span",{className:`text-xs uppercase font-bold tracking-widest ${a.secondaryText} opacity-70`,children:"Tareas Disponibles"}),f.jsx("button",{type:"button",onClick:()=>T(!w),className:`text-[10px] font-bold px-2 py-1 rounded border border-gray-600 ${a.secondaryText} hover:bg-gray-700 transition`,children:w?"OCULTAR ":"MOSTRAR "})]}),w&&f.jsx("div",{className:`p-3 rounded-xl border ${a.inputBorder} ${a.cardBg} max-h-60 overflow-y-auto task-scroll`,children:f.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[N.map(Q=>{const oe=m.includes(Q);return f.jsx("button",{type:"button",onClick:()=>K(Q),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                                    ${oe?"bg-green-600 text-white border-green-400 shadow-md transform scale-105":`bg-transparent ${a.secondaryText} ${a.inputBorder} hover:bg-gray-700 hover:text-white`}`,children:Q},Q)}),f.jsx("button",{type:"button",onClick:()=>K("OTHER_CUSTOM_TASK"),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                            ${Z?"bg-purple-600 text-white border-purple-400 shadow-md":"bg-transparent text-purple-300 border-purple-900/50 hover:bg-purple-900/20"}`,children:"+ Otra"})]})})]}),Z&&w&&f.jsx("input",{type:"text",value:y,onChange:Q=>v(Q.target.value),placeholder:"Nombre de la tarea personalizada...",className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.secondaryText} ${a.inputBorder} rounded-full focus:outline-none transition-all animate-pulse`,required:!0})]}),t&&f.jsx("p",{className:"text-red-400 font-medium bg-red-900/50 p-3 rounded-xl text-center border border-red-500/30",children:t}),f.jsx("button",{type:"submit",className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${a.buttonAdd} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!l||m.length===0,children:m.length>1?`Agregar ${m.length} Tareas`:"Agregar Tarea"})]})},MM=({task:i,toggleTimer:e,deleteTask:t,updateTaskDetails:r,themeClasses:a,resetTaskTimer:l,celebrationThemeName:u})=>{const[m,g]=O.useState(!1),[y,v]=O.useState(""),[w,T]=O.useState(!1),[N,P]=O.useState(i.quantity||""),[K,U]=O.useState(!1),[B,Z]=O.useState(i.shop),[Q,oe]=O.useState(!1),[re,ue]=O.useState(i.rawTaskName),[S,A]=O.useState(!1),[C,k]=O.useState(!1),D=iM(i.elapsedTime);O.useEffect(()=>{m&&v(D)},[m]);const L=i.isCustom,R=()=>{const M=y.split(":").map(Number);if(M.length===3&&!M.some(isNaN)){const ee=(M[0]*3600+M[1]*60+M[2])*1e3;r(i.id,{elapsedTime:ee,lastTime:i.running?Date.now():null})}g(!1)},me=()=>{r(i.id,{quantity:parseInt(N)||0}),T(!1)},he=()=>{B&&r(i.id,{shop:B}),U(!1)},H=()=>{const M=re.trim()||"Tarea sin Nombre";r(i.id,{rawTaskName:M}),oe(!1)},le=()=>{l(i.id),A(!1)},_e=()=>{t(i.id),k(!1)},Ve=i.running?u==="biancaBday"?"border-l-4 border-pink-400":"border-l-4 border-green-500":"border-l-4 border-gray-600",ze=i.running?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200";return f.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-3 sm:gap-4 sm:p-4 rounded-xl shadow-md transition-all duration-300 ${a.itemBg} ${Ve}`,children:[f.jsxs("div",{className:"flex flex-col gap-1 min-w-0 flex-grow",children:[K?f.jsx("select",{value:B,onChange:M=>Z(M.target.value),onBlur:he,className:`px-2 py-1 border-b-2 bg-gray-900 focus:outline-none w-full sm:w-40 rounded ${a.accentText} border-pink-500 text-xs sm:text-sm font-bold`,autoFocus:!0,children:xS.map(M=>f.jsx("option",{value:M,children:M},M))}):f.jsx("span",{className:`font-bold text-xs sm:text-sm uppercase tracking-wider opacity-80 cursor-pointer hover:text-white transition-colors ${a.accentText}`,onClick:()=>{Z(i.shop),U(!0)},children:i.shop||"Sin Tienda"}),Q&&L?f.jsx("input",{type:"text",value:re,onChange:M=>ue(M.target.value),onBlur:H,onKeyPress:M=>M.key==="Enter"&&H(),className:`font-medium text-base sm:text-lg border-b-2 bg-transparent focus:outline-none w-full ${a.secondaryText} border-pink-500`,autoFocus:!0}):f.jsx("span",{className:`font-medium text-base sm:text-lg break-words ${L?"cursor-pointer hover:underline decoration-dashed":""} ${a.secondaryText}`,onClick:()=>{L&&(ue(i.rawTaskName),oe(!0))},children:i.rawTaskName||i.name}),f.jsx("div",{className:"flex items-center gap-3 mt-1",children:w?f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-xs text-gray-400",children:"Cant:"}),f.jsx("input",{type:"number",value:N,onChange:M=>P(M.target.value),onBlur:me,onKeyPress:M=>M.key==="Enter"&&me(),className:`font-mono text-sm sm:text-base border-b-2 bg-gray-800/50 focus:outline-none w-16 sm:w-20 text-center rounded px-1 ${a.primaryText} border-blue-500`,autoFocus:!0})]}):f.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/40 px-2 py-1 rounded-lg border border-gray-700/50",children:[f.jsx("span",{className:`font-mono text-sm sm:text-base cursor-pointer hover:text-white transition-colors ${a.secondaryText}`,onClick:()=>{P(i.quantity||""),T(!0)},children:i.quantity?`${i.quantity} rdenes`:"0 rdenes"}),f.jsx("button",{onClick:M=>{M.stopPropagation(),r(i.id,{quantity:(i.quantity||0)+1})},className:`text-[10px] font-bold px-2 py-0.5 rounded shadow-sm transition-transform active:scale-95 ${ze}`,children:" +1 "})]})})]}),f.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-4 w-full sm:w-auto flex-shrink-0 pt-2 sm:pt-0 border-t border-gray-700/30 sm:border-none mt-2 sm:mt-0",children:[m?f.jsx("input",{type:"text",value:y,onChange:M=>v(M.target.value),onBlur:R,onKeyPress:M=>M.key==="Enter"&&R(),className:`font-mono text-xl sm:text-2xl border-b-2 bg-gray-900 focus:outline-none w-28 sm:w-32 text-center rounded ${a.primaryText} border-blue-500 tracking-widest`,autoFocus:!0}):f.jsx("span",{className:`font-mono text-xl sm:text-2xl cursor-pointer hover:scale-105 transition-transform tracking-widest ${i.running?"text-green-400 font-bold":a.primaryText}`,onClick:()=>{g(!0)},children:D}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsx("button",{onClick:()=>e(i.id),className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-bold transition-all shadow-lg active:scale-95 ${i.running?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-green-600 hover:bg-green-500"}`,children:i.running?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"flex flex-col gap-1",children:[S?f.jsx("button",{onClick:le,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Conf?"}):f.jsx("button",{onClick:()=>{A(!0),k(!1)},className:"text-gray-500 hover:text-gray-300 transition",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2A8.001 8.001 0 0019.418 15m0 0H15"})})}),C?f.jsx("button",{onClick:_e,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Borrar?"}):f.jsx("button",{onClick:()=>{k(!0),A(!1)},className:"text-gray-500 hover:text-red-500 transition",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]})},kM=({reports:i=[],selectedDate:e,onSelectDate:t,themeClasses:r})=>{const[a,l]=O.useState(new Date),u=O.useMemo(()=>{const N=a.getFullYear(),P=a.getMonth();return new Date(N,P+1,0).getDate()},[a]),m=O.useMemo(()=>{const N=a.getFullYear(),P=a.getMonth();return new Date(N,P,1).getDay()},[a]),g=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],y=["D","L","M","M","J","V","S"],v=()=>{l(new Date(a.getFullYear(),a.getMonth()-1,1))},w=()=>{l(new Date(a.getFullYear(),a.getMonth()+1,1))},T=()=>{const N=[];for(let P=0;P<m;P++)N.push(f.jsx("div",{className:"h-10 w-10"},`empty-${P}`));for(let P=1;P<=u;P++){const K=new Date(a.getFullYear(),a.getMonth(),P),U=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`,B=e===U,Z=Array.isArray(i)&&i.some(ue=>ue.id===U),Q=U===Uu();let oe="hover:bg-gray-600/50",re=r.secondaryText;B?(oe=r.calendarActive||"bg-blue-600 text-white",re="text-white font-bold"):Q&&(oe="border border-gray-500 bg-gray-700/50"),N.push(f.jsxs("div",{onClick:()=>t(U),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${oe} ${re}`,children:[f.jsx("span",{className:"text-sm z-10",children:P}),Z&&f.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${r.calendarDot||"bg-yellow-400"}`})]},P))}return N};return f.jsxs("div",{className:`p-4 rounded-xl shadow-lg ${r.itemBg} transition-colors duration-500`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("button",{onClick:v,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:"<"}),f.jsxs("span",{className:`font-bold text-lg ${r.primaryText}`,children:[g[a.getMonth()]," ",a.getFullYear()]}),f.jsx("button",{onClick:w,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:">"})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:y.map((N,P)=>f.jsx("div",{className:`text-xs font-bold opacity-70 ${r.secondaryText}`,children:N},P))}),f.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:T()})]})},Ak=({reports:i=[],selectedDates:e,onToggleDate:t,onBatchUpdate:r,themeClasses:a})=>{const[l,u]=O.useState(new Date),m=O.useMemo(()=>{const B=l.getFullYear(),Z=l.getMonth();return new Date(B,Z+1,0).getDate()},[l]),g=O.useMemo(()=>{const B=l.getFullYear(),Z=l.getMonth();return new Date(B,Z,1).getDay()},[l]),y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],v=["D","L","M","M","J","V","S"],w=()=>{u(new Date(l.getFullYear(),l.getMonth()-1,1))},T=()=>{u(new Date(l.getFullYear(),l.getMonth()+1,1))},N=()=>{const B=l.getFullYear(),Z=l.getMonth(),Q=[];for(let oe=1;oe<=m;oe++)Q.push(`${B}-${String(Z+1).padStart(2,"0")}-${String(oe).padStart(2,"0")}`);return Q},P=()=>{r&&r(N(),"add")},K=()=>{r&&r(N(),"remove")},U=()=>{const B=[];for(let Z=0;Z<g;Z++)B.push(f.jsx("div",{className:"h-10 w-10"},`empty-${Z}`));for(let Z=1;Z<=m;Z++){const Q=new Date(l.getFullYear(),l.getMonth(),Z),oe=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}-${String(Q.getDate()).padStart(2,"0")}`,re=e.includes(oe),ue=Array.isArray(i)&&i.some(C=>C.id===oe);let S="hover:bg-gray-600/50",A=a.secondaryText;re&&(S="bg-green-600 text-white font-bold border border-green-400",A="text-white"),B.push(f.jsxs("div",{onClick:()=>t(oe),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${S} ${A}`,children:[f.jsx("span",{className:"text-sm z-10",children:Z}),ue&&f.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${re?"bg-white":a.calendarDot||"bg-yellow-400"}`})]},Z))}return B};return f.jsxs("div",{className:`p-4 rounded-xl shadow-lg border transition-colors duration-500 ${a.cardBg} ${a.inputBorder}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("button",{onClick:w,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:"<"}),f.jsxs("span",{className:`font-bold text-lg ${a.primaryText}`,children:[y[l.getMonth()]," ",l.getFullYear()]}),f.jsx("button",{onClick:T,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:">"})]}),f.jsxs("div",{className:"flex gap-2 mb-3 justify-center",children:[f.jsx("button",{onClick:P,className:"text-xs px-3 py-1 bg-green-700 hover:bg-green-600 text-white rounded-full transition",children:"Todos"}),f.jsx("button",{onClick:K,className:"text-xs px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-full transition",children:"Ninguno"})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:v.map(B=>f.jsx("div",{className:`text-xs font-bold opacity-70 ${a.secondaryText}`,children:B},B))}),f.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:U()})]})},Qw=({content:i,themeClasses:e,placeholder:t})=>{const[r,a]=O.useState(!1),l=()=>{if(i)if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(i).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)});else{const u=document.createElement("textarea");u.value=i,document.body.appendChild(u),u.select();try{document.execCommand("copy"),a(!0),setTimeout(()=>a(!1),2e3)}catch(m){console.error("Fallback copy failed",m)}document.body.removeChild(u)}};return f.jsxs("div",{className:"relative w-full group",children:[f.jsx("div",{className:`w-full p-5 rounded-xl font-mono text-sm whitespace-pre-wrap transition-colors duration-500 ${e.itemBg} ${e.secondaryText} min-h-[100px]`,children:i||f.jsx("p",{className:"text-center opacity-70 italic pt-8",children:t})}),i&&f.jsx("button",{onClick:l,className:`absolute top-2 right-2 px-3 py-1 text-xs font-bold rounded transition-all duration-200 shadow-md flex items-center gap-1 ${r?"bg-green-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,title:"Copiar reporte",children:r?f.jsxs(f.Fragment,{children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copiado!"]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copiar"]})})]})},jM=({isUnlocked:i,weeklyHours:e,targetHours:t,setTargetHours:r,onClaimBonus:a,bonusClaimed:l})=>{const u=Math.min(e/t*100,100),m=e>=t;return f.jsxs("div",{className:"mb-6 bg-black/40 rounded-xl p-4 border border-gray-700/50 backdrop-blur-sm shadow-inner transition-all hover:border-gray-600/50",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-gray-400",children:"Meta Semanal"}),f.jsx("input",{type:"number",value:t,onChange:g=>r(Number(g.target.value)),className:"w-12 bg-gray-800 border border-gray-600 rounded text-center text-xs text-white focus:border-purple-500 outline-none transition-colors",min:"1"}),f.jsx("span",{className:"text-xs text-gray-500",children:"hrs"})]}),f.jsxs("div",{className:"text-xs font-mono text-white",children:[f.jsx("span",{className:m?"text-green-400 font-bold":"",children:e.toFixed(1)}),f.jsx("span",{className:"text-gray-500",children:" / "}),f.jsx("span",{children:t})," hrs"]})]}),f.jsx("div",{className:"h-3 w-full bg-gray-800 rounded-full overflow-hidden border border-gray-700 mb-3 relative group shadow-inner",children:f.jsx("div",{className:`h-full transition-all duration-1000 ease-out relative ${m?"bg-gradient-to-r from-green-500 to-emerald-400":"bg-gradient-to-r from-purple-600 to-blue-500"}`,style:{width:`${u}%`},children:f.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/20 animate-pulse"})})}),f.jsx("div",{className:"flex justify-center items-center mt-2",children:m?l?f.jsxs("div",{className:"text-[10px] sm:text-xs font-bold text-green-400 flex items-center gap-1 bg-green-900/20 px-4 py-1.5 rounded-full border border-green-500/30 animate-fade-in",children:[f.jsx("span",{children:""})," Recompensa Semanal Cobrada"]}):f.jsxs("button",{onClick:a,className:"w-full sm:w-auto text-xs font-bold text-white bg-gradient-to-r from-amber-500 to-yellow-600 hover:from-amber-400 hover:to-yellow-500 px-6 py-2 rounded-full shadow-[0_0_15px_rgba(245,158,11,0.4)] animate-bounce border border-yellow-300/50 transition-all hover:scale-105 active:scale-95 flex justify-center items-center gap-2",children:[f.jsx("span",{children:""})," RECLAMAR 100 MONEDAS!"]}):f.jsxs("span",{className:"text-[10px] text-gray-500 italic flex items-center gap-1",children:[f.jsx("span",{children:""})," Faltan ",(t-e).toFixed(1)," hrs para tu bonus."]})})]})},OM=({onClick:i})=>{const[e,t]=O.useState(!0);return O.useEffect(()=>{const r=setTimeout(()=>t(!1),1e4);return()=>clearTimeout(r)},[]),f.jsxs("div",{className:"fixed bottom-4 left-4 sm:bottom-6 sm:left-6 z-50 group",children:[e&&f.jsx("div",{className:"absolute -top-3 -right-4 bg-red-600 text-white text-[10px] font-extrabold px-2 py-0.5 rounded-full shadow-lg wiggle-animation z-50 border-2 border-white tracking-widest transition-opacity duration-1000",children:" NUEVO! "}),f.jsxs("button",{onClick:i,className:"relative w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-green-600 hover:bg-green-500 text-white shadow-2xl flex items-center justify-center border-4 border-gray-900 transition-transform duration-300 active:scale-95 hover:scale-110 overflow-hidden",title:"Calcular Salario",children:[f.jsx("div",{className:"shine-bar"}),f.jsx("span",{className:"text-xl sm:text-3xl font-bold relative z-10",children:"$"})]})]})},VM=({news:i})=>!i||i.length===0?null:f.jsx("div",{className:"fixed top-0 left-0 w-full z-50 bg-black/80 border-b border-white/10 h-8 flex items-center backdrop-blur-sm",children:f.jsx("div",{className:"marquee-container w-full",children:f.jsx("div",{className:"marquee-content flex gap-8",children:i.map(e=>f.jsxs("span",{className:`text-xs font-bold font-mono px-4 ${e.type==="critical"?"text-red-400 animate-pulse":e.type==="party"?"text-yellow-400":"text-blue-400"}`,children:[e.type==="critical"&&""," ",e.type==="party"&&""," ",e.type==="info"&&""," ",e.text]},e.id))})})}),PM=({isLeader:i,onOpenDashboard:e,onOpenIdeas:t,onOpenAvailability:r,setIdeaType:a})=>f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>{a("dev"),t()},className:"fixed bottom-20 right-4 z-50 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{children:"BUGS / IDEAS APP"})]}),f.jsxs("button",{onClick:()=>{a("monday"),t()},className:"fixed bottom-4 right-4 z-50 bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{children:"IDEAS LUNES"})]}),f.jsxs("button",{onClick:r,className:"fixed bottom-36 right-4 z-50 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 rounded-full font-bold shadow-lg text-xs flex items-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{className:"hidden sm:inline",children:"DISPONIBILIDAD"})]})]}),LM=({userProfile:i,onClickAction:e})=>{const[t,r]=O.useState(!1),a=O.useRef(null),[l,u]=O.useState(0),[m,g]=O.useState(0),[y,v]=O.useState(0),w=i?.role||"agent",T=w==="team_leader"||w==="admin",N=w==="admin";O.useEffect(()=>{const U=B=>{a.current&&!a.current.contains(B.target)&&r(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),O.useEffect(()=>{let U=()=>{},B=()=>{},Z=()=>{};if(T){const Q=i?.team||"Tema 1",oe=N?_n(Pt(Ce,"schedule_requests"),Ft("status","==","pending")):_n(Pt(Ce,"schedule_requests"),Ft("status","==","pending"),Ft("team","==",Q)),re=N?_n(Pt(Ce,"monday_ideas"),Ft("status","==","new"),Ft("type","==","monday")):_n(Pt(Ce,"monday_ideas"),Ft("status","==","new"),Ft("type","==","monday"),Ft("team","==",Q));if(U=Kn(oe,ue=>u(ue.size)),B=Kn(re,ue=>g(ue.size)),N){const ue=_n(Pt(Ce,"monday_ideas"),Ft("status","==","new"),Ft("type","==","dev"));Z=Kn(ue,S=>v(S.size))}}return()=>{U(),B(),Z()}},[i,T,N]);const P=l+m+y,K=U=>{r(!1),e(U)};return f.jsxs("div",{className:"relative",ref:a,children:[f.jsxs("button",{onClick:()=>r(!t),className:`flex items-center justify-center h-10 px-3 rounded-lg border backdrop-blur-md transition-all active:scale-95 shadow-sm
                ${P>0&&T?"bg-purple-900/40 hover:bg-purple-600 text-purple-300 hover:text-white border-purple-500/50":"bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white border-white/10"}`,children:[f.jsx("span",{className:`text-lg transition-transform duration-300 ${P>0?"animate-pulse opacity-100":"opacity-80"}`,children:""}),f.jsx("span",{className:"hidden sm:inline-block ml-2 text-xs font-bold tracking-wider"}),P>0&&T&&f.jsx("span",{className:"absolute -top-1.5 -right-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 border border-[#0f111a] text-white text-[9px] font-bold shadow-lg animate-bounce",children:P})]}),t&&f.jsxs("div",{className:"absolute top-full right-0 mt-4 w-72 sm:w-80 bg-[#0f111a] border border-white/10 rounded-xl shadow-2xl overflow-hidden z-[100] animate-fadeIn",children:[f.jsx("div",{className:"absolute -top-2 right-4 w-4 h-4 bg-[#0f111a] border-t border-l border-white/10 rotate-45"}),f.jsx("div",{className:"relative p-3 border-b border-white/10 bg-slate-800/50",children:f.jsx("h4",{className:"text-xs font-bold text-white uppercase tracking-wider text-center",children:"Centro de Alertas"})}),f.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar bg-[#0b0e14]",children:T?P===0?f.jsxs("div",{className:"p-6 text-center",children:[f.jsx("span",{className:"text-3xl block mb-2 opacity-80",children:""}),f.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"Al da!"}),f.jsx("p",{className:"text-xs text-slate-400",children:"No hay tareas pendientes de revisin en tu equipo."})]}):f.jsxs("div",{className:"flex flex-col",children:[l>0&&f.jsxs("button",{onClick:()=>K("planner"),className:"flex items-start gap-3 p-4 hover:bg-white/5 transition-colors border-b border-white/5 text-left group",children:[f.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg group-hover:scale-110 transition-transform",children:f.jsx("span",{className:"text-xl",children:""})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-white",children:"Horarios Pendientes"}),f.jsxs("p",{className:"text-xs text-slate-400",children:["Tienes ",f.jsx("span",{className:"text-blue-400 font-bold",children:l})," solicitud",l>1?"es":""," esperando aprobacin."]})]})]}),m>0&&f.jsxs("button",{onClick:()=>K("ideas"),className:"flex items-start gap-3 p-4 hover:bg-white/5 transition-colors border-b border-white/5 text-left group",children:[f.jsx("div",{className:"bg-yellow-900/30 p-2 rounded-lg group-hover:scale-110 transition-transform",children:f.jsx("span",{className:"text-xl",children:""})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-white",children:"Nuevas Ideas Lunes"}),f.jsxs("p",{className:"text-xs text-slate-400",children:["Hay ",f.jsx("span",{className:"text-yellow-400 font-bold",children:m})," idea",m>1?"s":""," de tu equipo sin analizar."]})]})]}),N&&y>0&&f.jsxs("button",{onClick:()=>K("dev"),className:"flex items-start gap-3 p-4 hover:bg-white/5 transition-colors text-left group",children:[f.jsx("div",{className:"bg-purple-900/30 p-2 rounded-lg group-hover:scale-110 transition-transform",children:f.jsx("span",{className:"text-xl",children:""})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-purple-400",children:"Tickets de Soporte"}),f.jsxs("p",{className:"text-xs text-slate-400",children:["Tienes ",f.jsx("span",{className:"text-purple-400 font-bold",children:y})," reporte",y>1?"s":""," de error o sugerencia."]})]})]})]}):f.jsxs("div",{className:"p-6 text-center",children:[f.jsx("span",{className:"text-3xl block mb-2 opacity-80",children:""}),f.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"Todo tranquilo"}),f.jsx("p",{className:"text-xs text-slate-400",children:"No tienes notificaciones nuevas por el momento."})]})})]})]})},zM=({isOpen:i,onClose:e,userProfile:t})=>{const[r,a]=O.useState(""),[l,u]=O.useState("none"),[m,g]=O.useState(!1);O.useEffect(()=>{t&&(a(t.userName||""),u(t.settings?.webWorkMode||"none"))},[t,i]);const y=async()=>{const v=$h.currentUser?.uid||t?.uid;if(!v)return alert("Error: No se pudo verificar tu sesin.");if(!r.trim())return alert(" El nombre no puede estar vaco");g(!0);try{await Is(it(Ce,"users",v),{userName:r.trim(),settings:{webWorkMode:l}},{merge:!0}),alert(" Configuracin guardada exitosamente!")}catch(w){console.error("Error al guardar configuracin",w),alert(" Hubo un error al guardar en la base de datos."),g(!1)}};return i?f.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fadeIn",children:f.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b border-white/10 bg-slate-800/50 flex justify-between items-center",children:[f.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[f.jsx("span",{children:""})," Mi Perfil y Ajustes"]}),f.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white text-xl",children:""})]}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-indigo-400 mb-2",children:"Nombre en el Planner"}),f.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Usa un nombre corto y simple para que el equipo te identifique (Ej: Bianca)."}),f.jsx("input",{type:"text",value:r,onChange:v=>a(v.target.value),placeholder:"Tu nombre corto...",maxLength:15,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm focus:border-indigo-500 outline-none transition-colors"})]}),f.jsx("div",{className:"h-px w-full bg-white/5"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-indigo-400 mb-2",children:"Filtro WebWork (Anti-olvidos)"}),f.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Cmo quieres que te recordemos prender tu tracker de tiempo?"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${l==="none"?"bg-indigo-900/20 border-indigo-500":"bg-black/20 border-white/5 hover:bg-white/5"}`,children:[f.jsx("input",{type:"radio",name:"wwMode",value:"none",checked:l==="none",onChange:()=>u("none"),className:"mt-1"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-white",children:"Desactivado"}),f.jsx("p",{className:"text-[10px] text-slate-500",children:"No me avises. Asumo la responsabilidad."})]})]}),f.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${l==="smart"?"bg-indigo-900/20 border-indigo-500":"bg-black/20 border-white/5 hover:bg-white/5"}`,children:[f.jsx("input",{type:"radio",name:"wwMode",value:"smart",checked:l==="smart",onChange:()=>u("smart"),className:"mt-1"}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-sm font-bold text-white flex items-center gap-2",children:["Inteligente ",f.jsx("span",{className:"text-[8px] bg-green-900 text-green-300 px-1 rounded",children:"RECOMENDADO"})]}),f.jsx("p",{className:"text-[10px] text-slate-500",children:"Avisa al iniciar turno o tras estar inactivo 1hr."})]})]})]})]})]}),f.jsxs("div",{className:"p-4 border-t border-white/10 flex justify-end gap-3 bg-black/20",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 text-xs font-bold text-slate-400 hover:text-white",children:"Cancelar"}),f.jsx("button",{onClick:y,disabled:m,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded-lg shadow-lg disabled:opacity-50",children:m?"Guardando...":"Guardar Cambios"})]})]})}):null},UM=({isOpen:i,onClose:e,onGenerate:t,tasks:r,distributeTasksTime:a,themeClasses:l,selectedReportDate:u,setSelectedReportDate:m,pastReports:g=[]})=>{const y=O.useRef(null),[v,w]=O.useState(!1),[T,N]=O.useState(""),[P,K]=O.useState("00:00:00"),[U,B]=O.useState([]),Z=O.useMemo(()=>r.reduce((me,he)=>{const H=he.running?Date.now()-he.lastTime:0;return me+he.elapsedTime+H},0),[r,i]);if(O.useEffect(()=>{const me=Math.floor(Z/36e5).toString().padStart(2,"0"),he=Math.floor(Z%36e5/6e4).toString().padStart(2,"0"),H=Math.floor(Z%6e4/1e3).toString().padStart(2,"0");K(`${me}:${he}:${H}`)},[Z]),!i)return null;const Q=me=>{if(!me)return"DD/MM/YYYY";const[he,H,le]=me.split("-");return`${le}/${H}/${he}`},oe=me=>{if(!me)return 0;const he=me.split(":").map(Number);let H=0,le=0,_e=0;return he.length===3?[H,le,_e]=he:he.length===2&&([H,le]=he),(H*3600+le*60+_e)*1e3},re=me=>{const he=Math.abs(me),H=Math.floor(he/36e5).toString().padStart(2,"0"),le=Math.floor(he%36e5/6e4).toString().padStart(2,"0"),_e=Math.floor(he%6e4/1e3).toString().padStart(2,"0");return`${me<0?"-":""}${H}:${le}:${_e}`},S=oe(T)-Z,A=()=>{if(y.current)try{y.current.showPicker()}catch{y.current.focus(),y.current.click()}},C=()=>{Array.isArray(g)&&g.some(he=>he.id===u)?w(!0):t()},k=me=>{let he=me.target.value.replace(/\D/g,"");he.length>6&&(he=he.slice(0,6)),he.length>4?he=he.replace(/^(\d{2})(\d{2})(\d{0,2})/,"$1:$2:$3"):he.length>2&&(he=he.replace(/^(\d{2})(\d{0,2})/,"$1:$2")),N(he)},D=me=>{B(he=>he.includes(me)?he.filter(H=>H!==me):[...he,me])},L=()=>{U.length===r.length?B([]):B(r.map(me=>me.id))},R=()=>{if(S===0)return;if(U.length===0){alert("Por favor selecciona al menos una tarea.");return}a(U,S);const me=S>0?"repartido":"descontado";alert(`Se han ${me} ${re(Math.abs(S))} entre las ${U.length} tareas seleccionadas.`)};return f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:f.jsx("div",{className:`relative w-full max-w-lg p-6 rounded-2xl shadow-2xl ${l.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content max-h-[90vh] overflow-y-auto flex flex-col`,children:v?f.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[f.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:""}),f.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Cuidado!"}),f.jsx("p",{className:"text-gray-300 mb-6",children:"Ya existe un reporte para esta fecha."}),f.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[f.jsx("button",{onClick:()=>t(),className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Sobreescribir"}),f.jsx("button",{onClick:()=>w(!1),className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:`text-xl font-bold mb-4 text-center ${l.primaryText}`,children:"Preparar Reporte"}),f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsxs("div",{onClick:A,className:"relative group cursor-pointer border border-cyan-500/30 bg-black/40 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-black/60 transition-colors",children:[f.jsx("span",{className:"text-white font-mono pointer-events-none select-none",children:Q(u)}),f.jsx("span",{className:"text-cyan-400 pointer-events-none",children:""}),f.jsx("input",{ref:y,type:"date",value:u,onChange:me=>m(me.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})}),f.jsxs("div",{className:"bg-black/30 p-4 rounded-xl border border-white/10 mb-4",children:[f.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Sincronizacin"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{className:"text-center p-2 bg-black/20 rounded-lg",children:[f.jsx("label",{className:"text-[10px] text-gray-500 block",children:"TIEMPO APP"}),f.jsx("span",{className:"text-lg font-mono font-bold text-white",children:P})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("label",{className:"text-[10px] text-cyan-400 block mb-1",children:"WEBWORK (HH:MM:SS)"}),f.jsx("input",{type:"text",value:T,onChange:k,placeholder:"00:00:00",maxLength:8,className:`w-full bg-black/50 border ${l.inputBorder} text-cyan-300 text-lg font-mono p-1 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-cyan-500`})]})]}),T.length>=4&&f.jsx("div",{className:`text-center mb-4 text-sm font-bold py-1 rounded ${S>0?"bg-green-900/30 text-green-400":S<0?"bg-red-900/30 text-red-400":"text-gray-500"}`,children:S>0?`Faltan cargar: ${re(S)}`:S<0?`Te pasaste por: ${re(S)}`:"Sincronizado!"}),S!==0&&f.jsxs("div",{className:"animate-fadeIn",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("p",{className:"text-xs text-gray-400",children:S>0?"Elige dnde SUMAR tiempo:":"Elige dnde RESTAR tiempo:"}),f.jsx("button",{onClick:L,className:"text-[10px] text-cyan-400 hover:text-cyan-300 underline",children:U.length===r.length?"Deseleccionar":"Todos"})]}),f.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar border border-white/5 rounded-lg bg-black/20 p-2 space-y-1",children:r.map(me=>f.jsxs("div",{onClick:()=>D(me.id),className:`flex items-center gap-3 p-2 rounded cursor-pointer transition-colors ${U.includes(me.id)?S>0?"bg-emerald-900/30 border border-emerald-500/30":"bg-red-900/30 border border-red-500/30":"hover:bg-white/5 border border-transparent"}`,children:[f.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${U.includes(me.id)?S>0?"bg-emerald-500 border-emerald-500":"bg-red-500 border-red-500":"border-gray-600"}`,children:U.includes(me.id)&&f.jsx("span",{className:"text-black text-[10px] font-bold",children:""})}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("p",{className:"text-sm text-gray-200 truncate",children:me.text||me.name})}),f.jsx("span",{className:"text-xs font-mono text-gray-500",children:re(me.elapsedTime)})]},me.id))}),f.jsxs("p",{className:"text-[10px] text-center mt-2 text-cyan-200/70",children:[S>0?"Se sumarn":"Se restarn"," ",f.jsx("span",{className:"font-bold",children:U.length>0?re(Math.abs(S/U.length)):"00:00:00"})," ",S>0?"a":"de"," cada tarea seleccionada."]})]}),f.jsx("button",{onClick:R,disabled:T.length<4||S!==0&&U.length===0,className:`w-full mt-4 py-3 rounded-xl font-bold uppercase tracking-wider transition-all shadow-lg flex items-center justify-center gap-2 ${S===0?"bg-gray-700 text-gray-400 cursor-not-allowed":S>0?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-900/50":"bg-red-600 hover:bg-red-500 text-white shadow-red-900/50"}`,children:S>0?" Repartir (Sumar)":S<0?" Recortar (Restar)":"Perfecto"})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:C,className:`flex-1 py-3 rounded-full font-bold text-white shadow-lg ${l.buttonAction}`,children:"Generar Reporte"}),f.jsx("button",{onClick:e,className:"px-6 py-3 rounded-full font-bold text-gray-300 bg-gray-700 hover:bg-gray-600",children:"Cancelar"})]})]})})})},BM=({isOpen:i,onClose:e,onConfirm:t,themeClasses:r})=>i?f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:f.jsx("div",{className:`relative w-full max-w-sm p-6 rounded-2xl shadow-2xl ${r.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content`,children:f.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[f.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),f.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Empezar Da Nuevo?"}),f.jsxs("p",{className:`${r.secondaryText||"text-gray-300"} mb-6 text-sm`,children:["Ests a punto de borrar ",f.jsx("strong",{children:"todas las tareas"})," de la lista. ",f.jsx("br",{}),f.jsx("br",{})," ",f.jsx("span",{className:"text-xs opacity-70",children:"Asegrate de haber generado tu E.O.D.R. antes de continuar. Esta accin no se puede deshacer."})]}),f.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[f.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Limpiar Todo"}),f.jsx("button",{onClick:e,className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]})})}):null,FM=()=>{const i=Array.from({length:50}).map((e,t)=>{const r={left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${Math.random()*10+5}s`,opacity:Math.random()*.7+.3,width:`${Math.random()*6+2}px`,height:`${Math.random()*6+2}px`};return f.jsx("div",{className:"snowflake absolute top-[-10px] bg-white rounded-full blur-[1px]",style:r},t)});return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[f.jsx("style",{children:`
                @keyframes snowfall {
                    0% { transform: translateY(-10vh) translateX(0); }
                    100% { transform: translateY(110vh) translateX(20px); }
                }
                .snowflake {
                    animation: snowfall linear infinite;
                }
            `}),i]})},qM=()=>{const i=O.useMemo(()=>{const e=["#ffb700","#ff6a00","#ff8c00","#ffd700","#ff4500"];return Array.from({length:30}).map((t,r)=>({key:r,left:`${Math.random()*100}vw`,top:`${Math.random()*120}vh`,size:`${Math.random()*400+150}px`,color:e[Math.floor(Math.random()*e.length)],opacity:Math.random()*.3+.3,duration:`${Math.random()*15+15}s`,delay:`-${Math.random()*20}s`,blur:`${Math.random()*60+40}px`}))},[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-plus-lighter",children:[f.jsx("style",{children:`
                @keyframes float-pulse {
                    0%, 100% { transform: translate(0, 0) scale(1); opacity: var(--base-opacity); }
                    50% { transform: translate(var(--tx), var(--ty)) scale(1.2); opacity: calc(var(--base-opacity) + 0.2); }
                }
                .cozy-orb {
                    position: absolute;
                    border-radius: 50%;
                    animation: float-pulse infinite ease-in-out alternate;
                    --tx: ${(Math.random()-.5)*100}px;
                    --ty: ${(Math.random()-.5)*100}px;
                }
            `}),i.map(e=>f.jsx("div",{className:"cozy-orb",style:{left:e.left,top:e.top,width:e.size,height:e.size,backgroundColor:e.color,"--base-opacity":e.opacity,animationDuration:e.duration,animationDelay:e.delay,filter:`blur(${e.blur})`}},e.key))]})},HM=({themeId:i})=>{const t=i==="crimson"?"153, 27, 27":"6, 78, 59";return f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[f.jsx("div",{className:"absolute inset-0",style:{background:`radial-gradient(circle at 50% 110%, rgba(${t}, 0.6) 0%, rgba(${t}, 0.2) 40%, transparent 70%)`}}),f.jsx("div",{className:"absolute inset-x-[-20%] bottom-0 h-[80%] animate-breathe-fog opacity-60",style:{background:`radial-gradient(ellipse at 50% 100%, rgba(${t}, 0.5) 0%, transparent 60%)`,filter:"blur(40px)"}}),f.jsx("div",{className:"absolute inset-x-[-20%] bottom-[-10%] h-[60%] animate-drift-fog opacity-50 mix-blend-screen",style:{background:`radial-gradient(ellipse at 60% 100%, rgba(${t}, 0.4) 0%, transparent 50%)`,filter:"blur(60px)"}}),f.jsx("style",{jsx:!0,children:`
                @keyframes breathe-fog {
                    0% { transform: scaleY(1) translateX(0); opacity: 0.6; }
                    50% { transform: scaleY(1.1) translateX(-2%); opacity: 0.4; }
                    100% { transform: scaleY(1) translateX(0); opacity: 0.6; }
                }
                .animate-breathe-fog { animation: breathe-fog 15s ease-in-out infinite; }

                @keyframes drift-fog {
                    0% { transform: translateX(5%); }
                    100% { transform: translateX(-5%); }
                }
                .animate-drift-fog { animation: drift-fog 20s ease-in-out infinite alternate; }
            `})]})},GM=`
    @keyframes firefly-move {
        0%, 100% { transform: translate(0, 0); opacity: 0; }
        25% { opacity: 1; }
        50% { transform: translate(50px, -50px); opacity: 0.5; }
        75% { transform: translate(-30px, 30px); opacity: 1; }
    }
    
    @keyframes flora-fall {
        0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
        10% { opacity: 0.8; }
        100% { transform: translateY(110vh) rotate(360deg) translateX(50px); opacity: 0; }
    }

    .firefly {
        position: absolute;
        background: #bef264;
        border-radius: 50%;
        box-shadow: 0 0 10px #bef264;
        animation: firefly-move ease-in-out infinite;
    }

    .flora-particle {
        position: absolute;
        top: -20px;
        border-radius: 4px 10px;
        animation: flora-fall linear infinite;
    }
`,Xw=()=>{const i=O.useMemo(()=>Array.from({length:20}).map((t,r)=>({key:`fly-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*10+10}s`,delay:`-${Math.random()*10}s`,opacity:Math.random()*.5+.3})),[]),e=O.useMemo(()=>{const t=["#86efac","#4ade80","#fbcfe8","#fdf2f8"];return Array.from({length:15}).map((r,a)=>({key:`leaf-${a}`,left:`${Math.random()*100}vw`,size:`${Math.random()*8+4}px`,color:t[Math.floor(Math.random()*t.length)],duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*10}s`,rotation:Math.random()*360}))},[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:GM}}),i.map(t=>f.jsx("div",{className:"firefly",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDuration:t.duration,animationDelay:t.delay}},t.key)),e.map(t=>f.jsx("div",{className:"flora-particle",style:{left:t.left,width:t.size,height:t.size,backgroundColor:t.color,animationDuration:t.duration,animationDelay:t.delay}},t.key))]})},$M=`
    /* Fondo de estrellas parpadeantes */
    @keyframes twinkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
    }

    /* Meteorito cruzando la pantalla */
    @keyframes shooting {
        0% { transform: translateX(0) translateY(0) rotate(315deg); opacity: 1; }
        70% { opacity: 1; }
        100% { transform: translateX(-100vw) translateY(100vh) rotate(315deg); opacity: 0; }
    }

    .star-static {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle infinite ease-in-out;
    }

    .shooting-star {
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 2px;
        background: linear-gradient(90deg, rgba(255,255,255,1), transparent);
        animation: shooting 4s linear infinite;
        opacity: 0;
    }
    
    /* Cabeza del meteorito */
    .shooting-star::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #4c1d95;
    }
`,KM=()=>{const i=O.useMemo(()=>Array.from({length:50}).map((t,r)=>({key:`s-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*2+1}px`,delay:`${Math.random()*5}s`,duration:`${Math.random()*3+2}s`})),[]),e=O.useMemo(()=>Array.from({length:3}).map((t,r)=>({key:`m-${r}`,top:`${Math.random()*50}vh`,right:`${Math.random()*20-20}vw`,delay:`${Math.random()*10+2}s`,duration:`${Math.random()*2+3}s`})),[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:$M}}),i.map(t=>f.jsx("div",{className:"star-static",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDelay:t.delay,animationDuration:t.duration}},t.key)),e.map(t=>f.jsx("div",{className:"shooting-star",style:{top:t.top,right:t.right,animationDelay:t.delay,animationDuration:t.duration}},t.key))]})},YM=`
    @keyframes float-up {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.8; }
        90% { opacity: 0.8; }
        100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    .gold-particle {
        position: absolute;
        background: radial-gradient(circle, #fcd34d 0%, #b45309 100%); /* Degradado dorado */
        border-radius: 50%;
        box-shadow: 0 0 5px #f59e0b;
        animation: float-up linear infinite;
    }
`,QM=()=>{const i=O.useMemo(()=>Array.from({length:30}).map((e,t)=>({key:`gold-${t}`,left:`${Math.random()*100}vw`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*20}s`})),[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:YM}}),i.map(e=>f.jsx("div",{className:"gold-particle",style:{left:e.left,width:e.size,height:e.size,animationDuration:e.duration,animationDelay:e.delay}},e.key))]})},XM=`
    @keyframes float-music {
        0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0; }
        10% { opacity: 0.6; }
        50% { transform: translateY(50vh) translateX(20px) rotate(10deg); opacity: 0.8; }
        100% { transform: translateY(-10vh) translateX(-20px) rotate(-10deg); opacity: 0; }
    }

    .music-note {
        position: absolute;
        color: #d1c4e9; /* Lila suave de tu marca */
        text-shadow: 0 0 10px rgba(209, 196, 233, 0.5);
        font-family: 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
        user-select: none;
        animation: float-music linear infinite;
    }
`,WM=()=>{const i=O.useMemo(()=>{const e=["","","",""];return Array.from({length:15}).map((t,r)=>({key:`note-${r}`,symbol:e[Math.floor(Math.random()*e.length)],left:`${Math.random()*95}vw`,size:`${Math.random()*20+15}px`,duration:`${Math.random()*10+15}s`,delay:`-${Math.random()*20}s`,opacity:Math.random()*.4+.2}))},[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:XM}}),i.map(e=>f.jsx("div",{className:"music-note",style:{left:e.left,fontSize:e.size,animationDuration:e.duration,animationDelay:e.delay,opacity:e.opacity},children:e.symbol},e.key))]})},JM=()=>{const i=O.useMemo(()=>Array.from({length:60}).map((e,t)=>({key:t,left:`${Math.random()*100}vw`,height:`${Math.random()*20+10}px`,duration:`${Math.random()*.5+.5}s`,delay:`${Math.random()*2}s`})),[]);return f.jsx("div",{className:"w-full h-full absolute top-0 left-0 overflow-hidden",children:i.map(e=>f.jsx("div",{className:"rain-drop",style:{left:e.left,height:e.height,"--duration":e.duration,"--delay":e.delay}},e.key))})},ZM=()=>f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"spider-web",children:[f.jsx("div",{className:"line1"}),f.jsx("div",{className:"line2"})]}),f.jsxs("div",{className:"spider-web",style:{left:"auto",right:0,transform:"scaleX(-1)"},children:[f.jsx("div",{className:"line1"}),f.jsx("div",{className:"line2"})]})]}),ek=()=>{const i=O.useRef(null),[e,t]=O.useState(!1),r=()=>{i.current&&(e?i.current.pause():i.current.play().catch(a=>console.log("Audio play failed",a)),t(!e))};return f.jsxs("div",{className:"fixed top-4 right-4 z-50",children:[f.jsx("audio",{ref:i,loop:!0,src:"https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3"}),f.jsx("button",{onClick:r,className:"bg-black/50 hover:bg-black/70 text-white p-2 rounded-full backdrop-blur-md border border-white/20 transition-all shadow-lg group hover:scale-110 active:scale-95 duration-300",children:f.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center rounded-full overflow-hidden",children:[f.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Cup",className:`w-full h-full object-cover ${e?"animate-pulse":"opacity-80 grayscale"}`,onError:a=>{a.target.onerror=null,a.target.src="https://placehold.co/100x100?text="}}),!e&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-xs bg-black/40 rounded-full",children:"OFF"})]})})]})},tk=()=>{const i=O.useRef(null);return O.useEffect(()=>{const e=i.current,t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%",a=14,l=e.width/a,u=Array(Math.floor(l)).fill(1),g=setInterval(()=>{t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#0F0",t.font=`${a}px monospace`;for(let v=0;v<u.length;v++){const w=r[Math.floor(Math.random()*r.length)];t.fillText(w,v*a,u[v]*a),u[v]*a>e.height&&Math.random()>.975&&(u[v]=0),u[v]++}},33),y=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",y),()=>{clearInterval(g),window.removeEventListener("resize",y)}},[]),f.jsx("canvas",{ref:i,className:"fixed top-0 left-0 w-full h-full z-0 pointer-events-none opacity-50"})},nk=()=>{const i=O.useMemo(()=>Array.from({length:25}).map((e,t)=>({id:t,left:`${Math.random()*100}%`,duration:`${15+Math.random()*20}s`,delay:`-${Math.random()*20}s`,scale:.6+Math.random()*.6})),[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[1] overflow-hidden",children:[f.jsx("style",{children:`
                    @keyframes lanternFloatUp {
                        0% {
                            transform: translateY(105vh) rotate(-5deg);
                            opacity: 0;
                        }
                        10% {
                            opacity: 0.9;
                        }
                        50% {
                            transform: translateY(50vh) rotate(5deg);
                            opacity: 1;
                        }
                        90% {
                            opacity: 0.8;
                        }
                        100% {
                            transform: translateY(-20vh) rotate(-5deg);
                            opacity: 0;
                        }
                    }

                    .lantern-item {
                        position: absolute;
                        top: 0; /* Posicionamos arriba para usar vh relativo hacia abajo */
                        will-change: transform, opacity;
                        filter: drop-shadow(0 0 15px rgba(255, 160, 50, 0.6)); /* Brillo naranja */
                    }
                `}),i.map(e=>f.jsx("div",{className:"lantern-item",style:{left:e.left,fontSize:`${e.scale*2.5}rem`,animationName:"lanternFloatUp",animationDuration:e.duration,animationDelay:e.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},children:""},e.id))]})},rk=()=>{const[i,e]=O.useState([]);return O.useEffect(()=>{const t=Array.from({length:8}).map((r,a)=>({id:a,delay:Math.random()*6,duration:10+Math.random()*8,topStart:10+Math.random()*70,scale:.3+Math.random()*.5,flapSpeed:.15+Math.random()*.1}));e(t)},[]),f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-20",children:[f.jsx("svg",{width:"0",height:"0",children:f.jsx("defs",{children:f.jsxs("filter",{id:"blood-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[f.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),f.jsx("feFlood",{floodColor:"#dc2626",result:"color"}),f.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"shadow"}),f.jsxs("feMerge",{children:[f.jsx("feMergeNode",{in:"shadow"}),f.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),i.map(t=>f.jsx("div",{className:"absolute -left-[10%] animate-bat-flight",style:{top:`${t.topStart}%`,animationDelay:`${t.delay}s`,animationDuration:`${t.duration}s`,transform:`scale(${t.scale})`},children:f.jsx("svg",{width:"60",height:"35",viewBox:"0 0 100 60",className:"overflow-visible",filter:"url(#blood-glow)",children:f.jsx("path",{fill:"#000000",d:"M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z",children:f.jsx("animate",{attributeName:"d",values:`\r
                                    M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z;\r
                                    M50,35 C40,50 25,60 15,55 L20,45 C30,50 40,40 50,40 C60,40 70,50 80,45 L85,55 C75,60 60,50 50,35 Z;\r
                                    M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z`,dur:`${t.flapSpeed}s`,repeatCount:"indefinite",calcMode:"discrete"})})})},t.id)),f.jsx("style",{jsx:!0,children:`
                @keyframes bat-flight {
                    0% { left: -10%; transform: translateX(0) translateY(0) scale(var(--tw-scale-x)) rotate(-5deg); }
                    25% { transform: translateX(30vw) translateY(-40px) scale(var(--tw-scale-x)) rotate(5deg); }
                    50% { transform: translateX(60vw) translateY(20px) scale(var(--tw-scale-x)) rotate(-5deg); }
                    75% { transform: translateX(90vw) translateY(-30px) scale(var(--tw-scale-x)) rotate(5deg); }
                    100% { left: 110%; transform: translateX(0) translateY(0) scale(var(--tw-scale-x)) rotate(-5deg); }
                }
                .animate-bat-flight {
                    animation-name: bat-flight;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                    will-change: transform, left; /* Optimizacin de rendimiento */
                }
            `})]})},sk=()=>f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40vh] bg-gradient-to-t from-orange-600/20 via-orange-900/10 to-transparent animate-fire-pulse"}),f.jsx("div",{className:"absolute inset-0",children:[...Array(15)].map((i,e)=>{const t=Math.random()*4+2,r=Math.random()*100,a=5+Math.random()*5,l=Math.random()*5;return f.jsx("div",{className:"absolute bottom-[-10px] rounded-full bg-orange-400 animate-ember-rise blur-[1px]",style:{width:`${t}px`,height:`${t}px`,left:`${r}%`,opacity:0,animationDuration:`${a}s`,animationDelay:`${l}s`,boxShadow:`0 0 ${t*2}px #f97316`}},e)})}),f.jsx("style",{jsx:!0,children:`
                @keyframes fire-pulse {
                    0%, 100% { opacity: 0.6; height: 35vh; }
                    50% { opacity: 0.9; height: 45vh; }
                }
                .animate-fire-pulse { animation: fire-pulse 4s ease-in-out infinite; }

                @keyframes ember-rise {
                    0% { transform: translateY(0) translateX(0); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translateY(-40vh) translateX(20px); opacity: 0.8; }
                    100% { transform: translateY(-80vh) translateX(-20px); opacity: 0; }
                }
                .animate-ember-rise {
                    animation-name: ember-rise;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
            `})]}),ik=()=>{const i=O.useMemo(()=>Array.from({length:40}).map((e,t)=>({id:t,left:`${Math.random()*100}%`,delay:`${Math.random()*5}s`,duration:`${10+Math.random()*15}s`,size:`${2+Math.random()*4}px`,blur:`${Math.random()*2}px`,opacity:.3+Math.random()*.5})),[]);return f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0 bg-[#020617]",children:[f.jsx("div",{className:"absolute inset-0 z-0",children:i.map(e=>f.jsx("div",{className:"absolute bg-blue-100 rounded-full animate-snow-fall",style:{left:e.left,width:e.size,height:e.size,animationDelay:e.delay,animationDuration:e.duration,opacity:e.opacity,filter:`blur(${e.blur})`}},e.id))}),f.jsxs("div",{className:"absolute inset-0 border-[40px] md:border-[80px] border-[#0a0705] shadow-[inset_0_0_150px_rgba(0,0,0,1)] z-10",children:[f.jsx("div",{className:"absolute top-0 bottom-0 left-1/3 w-12 bg-[#0a0705] shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"}),f.jsx("div",{className:"absolute top-0 bottom-0 right-1/3 w-12 bg-[#0a0705] shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"}),f.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-12 bg-[#0a0705] -translate-y-1/2 shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"})]}),f.jsx("div",{className:"absolute top-1/4 bottom-0 left-0 w-[60vw] bg-gradient-to-r from-orange-600/30 via-orange-500/10 to-transparent blur-3xl z-20 mix-blend-screen animate-fire-flicker"}),f.jsx("div",{className:"absolute top-1/4 right-0 w-[40vw] h-[70vh] bg-gradient-to-l from-yellow-500/20 to-transparent blur-3xl z-20 mix-blend-screen"}),[...Array(6)].map((e,t)=>f.jsx("div",{className:"absolute rounded-full bg-orange-400/10 z-30 animate-float-bokeh pointer-events-none",style:{left:`${Math.random()*100}%`,bottom:`${Math.random()*60}%`,width:`${100+Math.random()*250}px`,height:`${100+Math.random()*250}px`,filter:"blur(50px)",animationDuration:`${15+Math.random()*20}s`,animationDelay:`${Math.random()*5}s`}},`bokeh-${t}`)),f.jsx("style",{jsx:!0,children:`
                @keyframes snow-fall {
                    0% { transform: translateY(-10vh) translateX(0); }
                    100% { transform: translateY(110vh) translateX(15px); }
                }
                .animate-snow-fall {
                    animation-name: snow-fall;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }

                @keyframes fire-flicker {
                    0%, 100% { opacity: 0.6; transform: scaleX(1); }
                    50% { opacity: 0.9; transform: scaleX(1.1); }
                }
                .animate-fire-flicker { animation: fire-flicker 4s ease-in-out infinite alternate; }

                @keyframes float-bokeh {
                    0%, 100% { transform: translate(0, 0); }
                    50% { transform: translate(40px, -40px); }
                }
                .animate-float-bokeh { animation: float-bokeh ease-in-out infinite alternate; }
            `})]})},ak=()=>{const i=O.useMemo(()=>{const t=Array.from({length:45}).map((l,u)=>({left:Math.random()*100,height:15+Math.random()*10,width:3+Math.random()*2,color:"#064e3b",opacity:.5,delay:Math.random()*5})),r=Array.from({length:30}).map((l,u)=>({left:Math.random()*100,height:25+Math.random()*15,width:5+Math.random()*3,color:"#022c22",opacity:.8,delay:Math.random()*5})),a=Array.from({length:15}).map((l,u)=>({left:Math.random()*100,height:40+Math.random()*25,width:8+Math.random()*4,color:"#000000",opacity:1,delay:Math.random()*5}));return{backTrees:t,midTrees:r,frontTrees:a}},[]),e=({tree:t})=>f.jsx("div",{className:"absolute bottom-0 flex flex-col items-center origin-bottom animate-sway",style:{left:`${t.left}%`,height:`${t.height}%`,width:`${t.width}%`,opacity:t.opacity,zIndex:t.zIndex,animationDelay:`${t.delay}s`,animationDuration:`${5+Math.random()*3}s`},children:f.jsx("svg",{viewBox:"0 0 100 200",preserveAspectRatio:"none",className:"w-full h-full drop-shadow-xl",children:f.jsx("path",{d:`M50,0 \r
                       L70,40 L60,40 \r
                       L80,90 L65,90 \r
                       L95,150 L80,150 \r
                       L100,200 \r
                       L0,200 \r
                       L20,150 L5,150 \r
                       L35,90 L20,90 \r
                       L40,40 L30,40 \r
                       Z`,fill:t.color})})});return f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[f.jsx("div",{className:"absolute inset-0 bottom-[5%]",children:i.backTrees.map((t,r)=>f.jsx(e,{tree:t},`back-${r}`))}),f.jsx("div",{className:"absolute inset-0 bottom-[2%]",children:i.midTrees.map((t,r)=>f.jsx(e,{tree:t},`mid-${r}`))}),f.jsx("div",{className:"absolute inset-0 bottom-[-1%]",children:i.frontTrees.map((t,r)=>f.jsx(e,{tree:t},`front-${r}`))}),f.jsx("style",{jsx:!0,children:`
                @keyframes sway {
                    0%, 100% { transform: rotate(0deg) scaleY(1); }
                    50% { transform: rotate(1.5deg) scaleY(1.02); }
                }
                .animate-sway {
                    animation-name: sway;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    transform-origin: bottom center;
                }
            `})]})},ok=({isTimerRunning:i=!1})=>{const e=O.useMemo(()=>Array.from({length:35}).map((r,a)=>({id:`ff-${a}`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,size:`${1.5+Math.random()*3}px`,duration:`${3+Math.random()*5}s`,delay:`-${Math.random()*5}s`})),[]),t=[-75,-50,-25,0,25,50,75];return f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0 bg-[#0c0805] flex items-center justify-center",children:[f.jsxs("div",{className:`relative w-[95vw] max-w-[850px] aspect-square rounded-full border-[15px] md:border-[30px] border-[#180d06] shadow-[0_0_80px_rgba(0,0,0,0.9),inset_0_0_100px_rgba(0,0,0,0.9)] overflow-hidden transition-colors duration-1000 ${i?"bg-[#064e3b]":"bg-[#02180e]"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#022c22] via-transparent to-transparent opacity-80"}),e.map(r=>f.jsx("div",{className:`absolute rounded-full bg-yellow-200 animate-firefly transition-opacity duration-1000 ${i?"opacity-100":"opacity-30"}`,style:{left:r.left,top:r.top,width:r.size,height:r.size,boxShadow:"0 0 10px 2px rgba(253,230,138,0.8)",animationDuration:r.duration,animationDelay:r.delay}},r.id)),f.jsx("div",{className:"absolute bottom-0 w-full h-1/3 bg-[#01110a]/60 blur-[3px]",style:{clipPath:"polygon(0% 100%, 10% 40%, 30% 80%, 50% 20%, 70% 80%, 90% 30%, 100% 100%)"}})]}),f.jsx("div",{className:"absolute top-1/2 left-1/2 w-[95vw] max-w-[850px] aspect-square rounded-full",children:t.map((r,a)=>f.jsx("div",{className:"absolute top-1/2 left-1/2 w-full h-full",style:{transform:`translate(-50%, -50%) rotate(${r}deg)`},children:f.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-2 md:-mt-4 flex flex-col items-center",children:[f.jsx("div",{className:"w-1 h-3 md:h-5 bg-black/80 rounded-b-sm"}),f.jsx("div",{className:"w-4 h-4 md:w-5 md:h-5 bg-yellow-100 rounded-full animate-bulb-glow",style:{animationDelay:`${a*.4}s`}}),f.jsx("div",{className:"absolute top-4 w-16 h-16 bg-orange-500/20 rounded-full blur-xl"})]})},`bulb-${a}`))}),f.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] md:left-[-5%] w-[50vw] max-w-[450px] opacity-95 drop-shadow-[15px_15px_30px_rgba(0,0,0,1)]",children:f.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#080d08] fill-current animate-sway-left origin-bottom",children:[f.jsx("path",{d:"M50,100 Q60,50 80,0",fill:"none",stroke:"currentColor",strokeWidth:"3"}),f.jsx("path",{d:"M50,90 Q20,80 30,50 Q60,60 50,90"}),f.jsx("path",{d:"M55,70 Q90,70 80,40 Q50,40 55,70"}),f.jsx("path",{d:"M60,50 Q30,30 40,10 Q70,30 60,50"}),f.jsx("path",{d:"M65,30 Q90,20 90,0 Q60,10 65,30"}),f.jsx("path",{d:"M50,100 Q10,70 20,40 Q40,60 50,100"})]})}),f.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] md:right-[-5%] w-[50vw] max-w-[450px] opacity-95 drop-shadow-[15px_15px_30px_rgba(0,0,0,1)] scale-x-[-1]",children:f.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#080d08] fill-current animate-sway-right origin-bottom",children:[f.jsx("path",{d:"M50,100 Q60,50 80,0",fill:"none",stroke:"currentColor",strokeWidth:"3"}),f.jsx("path",{d:"M50,90 Q20,80 30,50 Q60,60 50,90"}),f.jsx("path",{d:"M55,70 Q90,70 80,40 Q50,40 55,70"}),f.jsx("path",{d:"M60,50 Q30,30 40,10 Q70,30 60,50"}),f.jsx("path",{d:"M65,30 Q90,20 90,0 Q60,10 65,30"}),f.jsx("path",{d:"M50,100 Q10,70 20,40 Q40,60 50,100"})]})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40vh] bg-gradient-to-t from-orange-900/40 via-orange-800/10 to-transparent mix-blend-screen blur-[40px] animate-fire-base"}),f.jsx("style",{jsx:!0,children:`
                /* Movimiento de las lucirnagas */
                @keyframes firefly {
                    0% { transform: translate(0, 0) scale(1); }
                    100% { transform: translate(20px, -40px) scale(1.5); }
                }
                .animate-firefly { animation: firefly 4s ease-in-out infinite alternate; }

                /* Resplandor intermitente de las bombillas */
                @keyframes bulb-glow {
                    0%, 100% { opacity: 0.7; transform: scale(1); box-shadow: 0 0 15px 2px rgba(249,115,22,0.4); }
                    50% { opacity: 1; transform: scale(1.1); box-shadow: 0 0 25px 8px rgba(249,115,22,0.8); }
                }
                .animate-bulb-glow { animation: bulb-glow 3s infinite alternate; }

                /* Mecer natural de las plantas */
                @keyframes sway-left {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(-3deg); }
                }
                .animate-sway-left { animation: sway-left 6s ease-in-out infinite; }

                @keyframes sway-right {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(3deg); }
                }
                .animate-sway-right { animation: sway-right 7s ease-in-out infinite; }

                /* Latido del fuego base */
                @keyframes fire-base {
                    0%, 100% { opacity: 0.5; }
                    50% { opacity: 0.8; }
                }
                .animate-fire-base { animation: fire-base 5s ease-in-out infinite alternate; }
            `})]})},lk=()=>{const i=O.useMemo(()=>Array.from({length:35}).map((e,t)=>({id:t,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${.4+Math.random()*1.2}rem`,delay:`${Math.random()*5}s`,duration:`${2+Math.random()*4}s`,char:Math.random()>.5?"":""})),[]);return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[f.jsx("style",{children:`
                    @keyframes diamondTwinkle {
                        0%, 100% { 
                            opacity: 0; 
                            transform: scale(0.2) rotate(0deg); 
                        }
                        50% { 
                            opacity: 0.9; 
                            transform: scale(1.2) rotate(45deg); 
                            /* Sombra blanca y un toque celeste/hielo muy sutil para dar efecto diamante */
                            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 1)) drop-shadow(0 0 15px rgba(220, 240, 255, 0.6)); 
                        }
                    }
                    .diamond-sparkle {
                        position: absolute;
                        color: #ffffff; /* Blanco puro */
                        will-change: transform, opacity;
                        animation-name: diamondTwinkle;
                        animation-timing-function: ease-in-out;
                        animation-iteration-count: infinite;
                    }
                `}),i.map(e=>f.jsx("div",{className:"diamond-sparkle",style:{left:e.left,top:e.top,fontSize:e.size,animationDuration:e.duration,animationDelay:e.delay},children:e.char},e.id))]})},ck=()=>f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[[...Array(5)].map((i,e)=>f.jsx("svg",{viewBox:"0 0 100 125",className:"fixed bottom-[-150px] fill-white/10 drop-shadow-[0_0_15px_rgba(200,220,255,0.6)] animate-floatGhost",style:{left:`${Math.random()*80+10}vw`,width:`${Math.random()*50+50}px`,animationDuration:`${Math.random()*15+10}s`,animationDelay:`${Math.random()*10}s`},children:f.jsx("path",{d:"M10 115 C 10 115, 10 95, 20 95 C 30 95, 30 115, 30 115 C 30 115, 30 95, 40 95 C 50 95, 50 115, 50 115 C 50 115, 50 95, 60 95 C 70 95, 70 115, 70 115 C 70 115, 70 95, 80 95 C 90 95, 90 115, 90 115 L 90 60 C 90 20, 50 10, 50 10 C 50 10, 10 20, 10 60 Z M 30 60 C 35 60, 35 50, 30 50 C 25 50, 25 60, 30 60 Z M 70 60 C 75 60, 75 50, 70 50 C 65 50, 65 60, 70 60 Z"})},e)),f.jsx("style",{children:`
            @keyframes floatGhost { 
                0% { transform: translateY(0) scale(1); opacity: 0; } 
                20% { opacity: 0.6; } 
                100% { transform: translateY(-120vh) scale(1.1); opacity: 0; } 
            } 
            .animate-floatGhost { 
                animation-name: floatGhost; 
                animation-timing-function: ease-in-out; 
                animation-iteration-count: infinite; 
            }
        `})]}),uk=()=>f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(30)].map((i,e)=>f.jsx("div",{className:"absolute rounded-full bg-pink-400 animate-pulse",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,width:`${Math.random()*4+1}px`,height:`${Math.random()*4+1}px`,opacity:Math.random()*.6+.2,animationDuration:`${Math.random()*3+2}s`,boxShadow:"0 0 6px 2px rgba(244, 114, 182, 0.4)"}},`dust-${e}`)),[...Array(15)].map((i,e)=>f.jsx("div",{className:"absolute text-pink-300 opacity-40 animate-floatUp",style:{top:`${Math.random()*100+10}%`,left:`${Math.random()*100}%`,fontSize:`${Math.random()*10+10}px`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,textShadow:"0 0 5px rgba(236, 72, 153, 0.5)"},children:["","",""][Math.floor(Math.random()*3)]},`heart-${e}`)),f.jsx("style",{children:`
                @keyframes floatUp {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    20% { opacity: 0.6; }
                    80% { opacity: 0.6; }
                    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
                }
                .animate-floatUp {
                    animation-name: floatUp;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
             `})]}),dk=()=>{const i=["#f44336","#4caf50","#2196f3","#ffeb3b"];return f.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:[...Array(40)].map((e,t)=>f.jsx("div",{className:"absolute rounded-full animate-pulse",style:{top:`${Math.random()*100}vh`,left:`${Math.random()*100}vw`,width:"10px",height:"10px",backgroundColor:i[t%i.length],boxShadow:`0 0 15px 5px ${i[t%i.length]}66`,animationDuration:"2s",animationDelay:`${Math.random()}s`}},t))})},hk=()=>f.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-[#050a14]",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-slate-900 to-[#2a0a3b]"}),f.jsx("div",{className:"absolute top-[20%] left-1/2 -translate-x-1/2 w-[50vh] h-[50vh] rounded-full bg-gradient-to-t from-fuchsia-600 to-yellow-400 blur-[60px] opacity-60"}),f.jsx("div",{className:"cyber-grid"}),f.jsx("div",{className:"city-skyline"}),f.jsx("style",{children:`
                .cyber-grid {
                    position: absolute;
                    width: 200%;
                    height: 100%;
                    bottom: -50%;
                    left: -50%;
                    background-image: 
                        linear-gradient(rgba(6, 182, 212, 0.5) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(6, 182, 212, 0.5) 1px, transparent 1px);
                    background-size: 50px 50px;
                    transform: perspective(300px) rotateX(60deg);
                    animation: gridMove 4s linear infinite;
                    box-shadow: 0 0 150px rgba(6, 182, 212, 0.3);
                }

                .city-skyline {
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    height: 25%;
                    background: repeating-linear-gradient(
                        90deg,
                        #000 0px,
                        #000 15px,
                        transparent 15px,
                        transparent 25px
                    );
                    opacity: 0.8;
                    filter: drop-shadow(0 0 15px #d946ef);
                    z-index: -1;
                }

                @keyframes gridMove {
                    0% { transform: perspective(300px) rotateX(60deg) translateY(0); }
                    100% { transform: perspective(300px) rotateX(60deg) translateY(50px); }
                }
            `})]}),fk=()=>f.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-pink-50",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-200 via-orange-100 to-purple-200 animate-gradient-xy opacity-80"}),[...Array(15)].map((i,e)=>f.jsx("div",{className:"absolute text-pink-300/40 animate-float-neko",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,fontSize:`${Math.random()*3+2}rem`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,transform:`rotate(${Math.random()*45}deg)`},children:""},e)),f.jsx("style",{children:`
                @keyframes gradient-xy {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                }
                .animate-gradient-xy {
                    background-size: 200% 200%;
                    animation: gradient-xy 15s ease infinite;
                }
                @keyframes float-neko {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    50% { opacity: 0.6; }
                    100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
                }
                .animate-float-neko {
                    animation-name: float-neko;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                }
            `})]}),mk=()=>{const i=["","","","","","","",""];return f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(35)].map((e,t)=>f.jsx("div",{className:"absolute animate-fallTopToBottom opacity-70",style:{left:Math.random()*100+"%",top:"-10%",fontSize:Math.random()*1.5+1+"rem",animationDuration:Math.random()*5+4+"s",animationDelay:Math.random()*5+"s",transform:`rotate(${Math.random()*360}deg)`},children:i[Math.floor(Math.random()*i.length)]},t)),f.jsx("style",{children:"@keyframes fallTopToBottom { 0% { transform: translateY(0); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(110vh); opacity: 0; } } .animate-fallTopToBottom { animation-name: fallTopToBottom; animation-timing-function: linear; animation-iteration-count: infinite; }"})]})},Ww=({themeClasses:i,activeEffect:e})=>{const t={lofi_notes:WM,cozy_lights:qM,lanterns:nk,mystic_fog:HM,forest:Xw,forest_flora:Xw,golden_dust:QM,shooting_stars:KM,snow_effect:FM,matrix_effect:tk,ghost:ck,valentine_hearts:uk,lights:dk,rain:JM,neon_grid:hk,neko_pattern:fk,cozy_fireplace:sk,vampire_bats:rk,lofi_ambience:ik,pine_forest:ak,cozy_ambience:ok,diamond_sparkles:lk,mickey_confetti:mk};O.useEffect(()=>{const a=document.body;a.style.background="",a.style.backgroundImage="",a.style.cursor="";const l=document.getElementById("theme-custom-css");if(l&&l.remove(),a.className=`${i.bodyBg||"bg-gray-900"} min-h-screen transition-colors duration-500`,i.rawBg&&(a.style.background=i.rawBg,a.style.backgroundAttachment="fixed",a.style.backgroundSize="cover"),i.customCss){const u=document.createElement("style");u.id="theme-custom-css",u.innerHTML=i.customCss,document.head.appendChild(u)}},[i]);const r=()=>{const a=[...i.activeEffects||[]];return e&&!a.includes(e)&&a.push(e),f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),a.map(l=>{const u=t[l];return u?f.jsx(u,{},l):null})]})};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 pointer-events-none -z-10 mix-blend-overlay opacity-[0.05]",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),f.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:r()}),i.name==="lofi"&&f.jsx(ek,{})]})},pk=O.lazy(()=>Bu(()=>import("./SalaryCalculatorModal-sXfmLCcY.js"),[])),gk=O.lazy(()=>Bu(()=>Promise.resolve().then(()=>TM),void 0)),yk=O.lazy(()=>Bu(()=>import("./MarketplaceModal-LuOyXOIS.js"),[])),bk=O.lazy(()=>Bu(()=>import("./QuizModal-Fzszermo.js"),[])),_k=O.lazy(()=>Bu(()=>import("./AvailabilityModal-ClTqXjvQ.js"),[])),vk=()=>{const{user:i,loading:e}=nM(),[t,r]=O.useState(null),[a,l]=O.useState(!1),[u,m]=O.useState("dashboard");if(O.useEffect(()=>{if(i){const y=it(Ce,"users",i.uid),v=Kn(y,async w=>{if(w.exists())r(w.data());else{const T={uid:i.uid,email:i.email,userName:i.displayName||i.email.split("@")[0],role:"agent",team:"default",createdAt:Date.now(),photoURL:i.photoURL||null};await Is(y,T),r(T),console.log("Perfil creado automticamente.")}},w=>{console.error("Error escuchando el perfil",w)});return()=>v()}},[i]),e)return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:"Loading Nexus OS..."});if(!i)return f.jsx(IM,{});const g=t&&(t.role==="admin"||t.role==="team_leader");return g&&a?f.jsx(AM,{initialTab:u,onLogout:()=>l(!1),currentUserTeam:t.team||"default",isAdmin:t.role==="admin"}):f.jsx(xk,{user:i,loading:e,isLeader:g,onOpenDashboard:y=>{m(typeof y=="string"?y:"dashboard"),l(!0)},userProfile:t})},xk=({user:i,loading:e,isLeader:t,onOpenDashboard:r,userProfile:a})=>{const l=i,{balance:u,addCoins:m,spendCoins:g}=eM(i),[y,v]=ti("config","hourlyRate","",l?i:null),[w,T]=ti("config","weeklyGoal",10,l?i:null),[N,P]=ti("data","inventory",["default"],l?i:null);ti("data","lastLoginBonus",null,l?i:null);const[K,U]=ti("data","lastWeeklyBonus","",l?i:null),[B,Z]=ti("config","pet",null,l?i:null),[Q,oe]=ti("config","effect",null,l?i:null),[re,ue]=ti("config","border",null,l?i:null),[S,A]=O.useState("tasks"),[C,k]=O.useState(""),[D,L]=O.useState(Uu()),[R,me]=O.useState(Uu()),[he,H]=O.useState([]),[le,_e]=O.useState(null),Ve=O.useRef(!1);O.useEffect(()=>{a&&!Ve.current&&(a.currentSkin&&_e(a.currentSkin),Ve.current=!0)},[a]);const[ze,M]=O.useState(!1),[ee,de]=O.useState(!1),[ve,se]=O.useState(!1),[be,Se]=O.useState(!1),[nt,Ye]=O.useState(!1),[Tt,Ar]=O.useState(!1),[Qn,Ir]=O.useState(!1),[un,qr]=O.useState(null),[Hr,Rs]=O.useState([]),[Xn,Rt]=O.useState([]),[Nt,vn]=O.useState({}),[Ao,Ds]=O.useState("monday"),pn=oM(rM,he,_e,le),{strategy:He,message:gi,isUnlocked:Ms,weeklyHoursWorked:ur}=pn,xa=sM(l?i:null),{tasks:Nr,addTask:os,addMultipleTasks:wa,deleteTask:Wn,deleteAllTasks:Wt,toggleTimer:xn,updateTaskDetails:Dt,resetTaskTimer:ks,stopAllTimers:ls,statusMessage:Gr,resumeStoppedTimers:wn,clearStatusMessage:dr,syncTasksTime:Lt,errorMessage:Bn,setErrorMessage:Fn,distributeTasksTime:Tn,sortTasksByShop:js}=xa,{handleGenerate:yi}=uM(i,Nr,ls,m,a),Mn=async(Ee,Fe={})=>{try{await Pu(Pt(Ce,"app_analytics"),{eventName:Ee,uid:i.uid,timestamp:Date.now(),data:Fe})}catch(Et){console.error("Log error",Et)}};O.useEffect(()=>{if(!i)return;const Ee=_n(Pt(Ce,"news_ticker"),oo("createdAt","desc"),Hg(5)),Fe=Kn(Ee,St=>Rs(St.docs.map(ie=>({id:ie.id,...ie.data()})))),Et=Kn(_n(Pt(Ce,"training_modules"),Ft("active","==",!0)),St=>Rt(St.docs.map(ie=>({id:ie.id,...ie.data()})))),et=Kn(it(Ce,"users",i.uid),St=>{St.exists()&&vn(St.data().quizProgress||{})}),Cr=_n(Pt(Ce,"daily_reports"),Ft("uid","==",i.uid),oo("date","desc"),Hg(45)),kn=Kn(Cr,St=>{const ie=St.docs.map(xe=>{const ge=xe.data();let Oe=ge.date;if(!Oe&&xe.id.includes("_")){const rt=xe.id.match(/(\d{4}-\d{2}-\d{2})/);rt&&(Oe=rt[0])}if(!Oe&&ge.timestamp&&(Oe=new Date(ge.timestamp).toLocaleDateString("en-CA")),!Oe)return null;let ht=ge.report||ge.content||ge.text||ge.body;if(!ht&&ge.taskBreakdown){const rt=Array.isArray(ge.taskBreakdown)?ge.taskBreakdown:[],kt=Me=>{if(!Me||isNaN(Me))return"00:00:00";const $t=Math.floor(Me/1e3%60),Sn=Math.floor(Me/(1e3*60)%60);return`${Math.floor(Me/(1e3*60*60)).toString().padStart(2,"0")}:${Sn.toString().padStart(2,"0")}:${$t.toString().padStart(2,"0")}`},En=rt.reduce((Me,$t)=>Me+($t.elapsedTime||0),0);ht=` REPORTE RECUPERADO (${Oe})

 Tiempo Total Real: ${kt(En)}
 Tareas Realizadas: ${rt.length}
-----------------------------------
`,rt.length>0?ht+=rt.map(Me=>` ${Me.name||Me.text||"Tarea"} (${Me.timeFormatted||kt(Me.elapsedTime)})`).join(`
`):ht+="Sin detalles."}return{id:Oe,content:ht||"Datos ilegibles"}}).filter(Boolean);H(ie)},St=>console.warn("Index warning:",St));return()=>{Fe(),Et(),et(),kn()}},[i]),O.useEffect(()=>{if(i&&He.name){const Ee=setTimeout(()=>{vr(it(Ce,"users",i.uid),{currentSkin:He.name}).catch(Fe=>console.log("Skin sync skip",Fe))},2e3);return()=>clearTimeout(Ee)}},[He.name,i]);const Jn=O.useMemo(()=>{if(Xn.length===0)return{isGraduated:!1,isRusted:!1};let Ee=0,Fe=!1;return Xn.forEach(Et=>{const et=Nt[Et.id];et&&et.passed&&(Ee++,et.version<Et.version&&(Fe=!0))}),{isGraduated:Ee===Xn.length,isRusted:Fe}},[Xn,Nt]);O.useEffect(()=>{const Ee="min-h-screen transition-colors duration-500",Fe=`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ff69b4" stroke="%23ffffff" stroke-width="1.5"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto`;He.rawBg?(document.body.className=Ee,document.body.style.background=He.rawBg,document.body.style.backgroundAttachment="fixed",document.body.style.backgroundSize="cover"):(document.body.className=`${He.bodyBg||"bg-gray-900"} ${Ee}`,document.body.style.background=""),He.name==="neko"?document.body.style.cursor=Fe:document.body.style.cursor="auto"},[He]);const Ta=async Ee=>{const Fe=un.id,Et=un.version||1;try{await vr(it(Ce,"users",i.uid),{[`quizProgress.${Fe}`]:{passed:!0,version:Et,completedAt:Date.now()}}),m(Ee),alert(` FELICIDADES!
Has completado el mdulo.`),Mn("QUIZ_COMPLETE",{quizId:un.id,reward:Ee}),qr(null)}catch(et){console.error(et)}},$r=()=>{const Ee=He?.name||"default";yi(R,Ee,(Fe,Et)=>{k(Fe);const et={id:R,content:Fe};H(Cr=>[et,...Cr.filter(kn=>kn.id!==R)]),M(!1)})},Os=()=>{const Ee=$w();if(K===Ee){alert("Ya has cobrado!");return}m(100),U(Ee),alert(` FELICIDADES!
Meta semanal cumplida. +100 Coins.`)},Vs=K===$w(),Kr=()=>Se(!1),hr=Ee=>{if(g(Ee.price)){const Fe=[...N||[],Ee.id];P(Fe),vr(it(Ce,"users",i.uid),{walletBalance:u-Ee.price,inventory:Fe}).catch(Et=>console.error(Et)),Mn("SHOP_BUY",{item:Ee.id}),alert("Item adquirido correctamente!")}else alert("No tienes suficientes Lofi Coins.")},qn=O.useRef(null),Mt=O.useRef(null),Hn=Ee=>{switch(qn.current&&(clearTimeout(qn.current),qn.current=null,Mt.current=null),Ee.category){case"theme":_e(Ee.id);break;case"pet":Z(B===Ee.id?null:Ee.id);break;case"effect":oe(Q===Ee.id?null:Ee.id);break;case"border":ue(re===Ee.id?null:Ee.id);break;default:_e(Ee.id)}},zt=Ee=>{let Fe=Ee.category,Et,et;if(Fe==="theme")Et=le,et=_e;else if(Fe==="border")Et=re,et=ue;else if(Fe==="effect")Et=Q,et=oe;else return;qn.current?Mt.current&&Mt.current.category!==Fe&&(Mt.current.setter(Mt.current.value),Mt.current={category:Fe,value:Et,setter:et}):Mt.current={category:Fe,value:Et,setter:et},qn.current&&clearTimeout(qn.current),et(Ee.id),qn.current=setTimeout(()=>{Mt.current&&Mt.current.category===Fe&&et(Mt.current.value),qn.current=null,Mt.current=null},7e3)},Gt=()=>{if(!re)return"";const Ee=Vn[re];return Ee?Ee.borderClass:""};O.useEffect(()=>{if(re&&Vn[re]?.customCss){const Ee=document.createElement("style");return Ee.id="border-custom-css",Ee.innerHTML=Vn[re].customCss,document.head.appendChild(Ee),()=>{const Fe=document.getElementById("border-custom-css");Fe&&Fe.remove()}}},[re]);const Zn=He.name==="halloween"?"glow-card":"",cs=O.useMemo(()=>{const Ee=he.find(Fe=>Fe.id===D);return Ee?Ee.content:null},[he,D]);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),f.jsx(VM,{news:Hr}),Jn.isGraduated&&f.jsxs("div",{className:"fixed top-12 left-4 z-40 flex flex-col items-center animate-fadeIn",children:[f.jsx("div",{className:`text-4xl ${Jn.isRusted?"grad-badge-rust":"grad-badge-glow"}`,title:Jn.isRusted?"Certificacin Vencida":"Agente Certificado",children:""}),Jn.isRusted&&f.jsx("span",{className:"text-[9px] bg-red-600 text-white px-1 rounded animate-bounce",children:"UPDATE"})]}),f.jsx(PM,{isLeader:t,onOpenIdeas:()=>Ye(!0),onOpenAvailability:()=>Ar(!0),setIdeaType:Ds}),f.jsxs(O.Suspense,{fallback:f.jsx("div",{className:"fixed inset-0 z-[200] pointer-events-none"}),children:[f.jsx(gk,{isOpen:nt,onClose:()=>Ye(!1),user:i,userProfile:a,initialType:Ao}),f.jsx(_k,{isOpen:Tt,onClose:()=>Ar(!1),user:i,userProfile:a,addCoins:m,logEvent:Mn}),un&&f.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:f.jsx(bk,{isOpen:!0,quiz:un,onClose:()=>qr(null),onComplete:Ta,user:i})}),f.jsx(pk,{isOpen:ee,onClose:()=>de(!1),pastReports:he,hourlyRate:y,setHourlyRate:v,themeClasses:He}),f.jsx(yk,{isOpen:be,onClose:Kr,userCoins:u,ownedItems:N,currentTheme:He.name,activePet:B,activeBorder:re,activeEffect:Q,onBuy:hr,onEquip:Hn,onPreview:zt})]}),f.jsx(zM,{isOpen:Qn,onClose:()=>Ir(!1),userProfile:a}),f.jsx("div",{className:"relative z-50",children:f.jsx(ES,{user:i})}),f.jsx(Ww,{themeClasses:He,activeEffect:Q}),f.jsx(Yw,{message:Gr,resumeAction:wn,dismissAction:dr}),f.jsx(Ww,{themeClasses:He,activeEffect:Q}),f.jsx(Yw,{message:Gr,resumeAction:wn,dismissAction:dr}),f.jsx(CM,{coins:u||0,onOpenShop:()=>Se(!0)}),f.jsxs("div",{className:"fixed top-12 right-5 z-[80] flex items-center gap-3 animate-fadeIn",children:[f.jsx("button",{onClick:()=>Ir(!0),className:"flex items-center justify-center w-10 h-10 rounded-xl bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white border border-white/10 transition-all active:scale-95 shadow-sm",title:"Mi Perfil y Ajustes",children:f.jsx("span",{className:"text-xl",children:""})}),(a?.role==="team_leader"||a?.role==="admin")&&f.jsxs("button",{onClick:()=>r("dashboard"),className:"flex items-center gap-2 h-10 px-4 bg-purple-600 hover:bg-purple-500 backdrop-blur-md text-white font-bold rounded-xl shadow-lg border border-purple-400/30 transition-all active:scale-95",children:[f.jsx("span",{className:"text-lg",children:""}),f.jsx("span",{className:"hidden sm:inline-block text-xs tracking-wider",children:"LDER"})]}),f.jsx(LM,{userProfile:a,onClickAction:r})]}),f.jsx(OM,{onClick:()=>de(!0)}),f.jsx(UM,{isOpen:ze,onClose:()=>M(!1),onGenerate:$r,tasks:Nr,syncTasksTime:Lt,distributeTasksTime:Tn,themeClasses:He,selectedReportDate:R,setSelectedReportDate:me,pastReports:he}),f.jsx(BM,{isOpen:ve,onClose:()=>se(!1),onConfirm:()=>{Wt(),se(!1),M(!1)},themeClasses:He}),f.jsx("div",{className:"app-container relative z-10 flex flex-col items-center justify-center py-10 mt-8",children:f.jsx("div",{className:"relative w-11/12 max-w-xl mt-8",children:f.jsxs("div",{className:`w-full rounded-2xl shadow-2xl p-4 sm:p-8 pt-8 sm:pt-12 transition-all duration-500 ${He.cardBg} min-h-[85vh] relative ${Zn} ${Gt()} app-card`,children:[He.activeEffects&&He.activeEffects.includes("spiderweb")&&f.jsx(ZM,{}),f.jsxs("div",{className:"relative z-20 space-y-6 h-full flex flex-col",children:[f.jsx(RM,{themeClasses:He,celebrationMessage:gi}),Xn.length>0&&f.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Xn.map(Ee=>{const Fe=Nt[Ee.id],Et=Fe?.passed,et=Et&&Fe.version<Ee.version;return Et&&!et?null:f.jsxs("button",{onClick:()=>qr(Ee),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap border ${et?"bg-red-900/30 border-red-500 text-red-300":"bg-indigo-900/30 border-indigo-500 text-indigo-300"}`,children:[f.jsx("span",{children:""})," ",et?"UPDATE:":"NUEVO:"," ",Ee.title," (+",Ee.reward,")"]},Ee.id)})}),f.jsx(jM,{isUnlocked:Ms,weeklyHours:ur,targetHours:w,setTargetHours:T,onClaimBonus:Os,bonusClaimed:Vs}),f.jsxs("div",{className:"flex justify-center gap-4 border-b border-white/10 pb-2 mb-2",children:[f.jsx("button",{onClick:()=>A("tasks"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="tasks"?"bg-white/20 text-white":"text-slate-400"}`,children:" TAREAS"}),f.jsx("button",{onClick:()=>A("history"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="history"?"bg-white/20 text-white":"text-slate-400"}`,children:" HISTORIAL"})]}),S==="tasks"&&f.jsxs("div",{className:"flex-1 flex flex-col gap-4 animate-fadeIn",children:[f.jsx(DM,{addTask:os,addMultipleTasks:wa,errorMessage:Bn,setErrorMessage:Fn,themeClasses:He}),Nr.length>0&&f.jsxs("div",{className:"flex items-center justify-between gap-3 px-1 mb-1 animate-fadeIn",children:[f.jsxs("button",{onClick:js,className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-600 text-slate-300 text-xs font-bold uppercase tracking-wider rounded-full border border-slate-600 hover:border-slate-400 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("span",{children:""})," Ordenar por Tienda"]}),f.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-red-900/30 hover:bg-red-800 text-red-400 hover:text-red-100 text-xs font-bold uppercase tracking-wider rounded-full border border-red-900 hover:border-red-500 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("span",{children:""})," Limpiar Todo"]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto task-scroll pr-2 space-y-3 min-h-[50vh] max-h-[65vh] border border-white/5 rounded-xl p-2 bg-black/10",children:Nr.length>0?Nr.map(Ee=>f.jsx(MM,{task:Ee,toggleTimer:xn,deleteTask:Wn,updateTaskDetails:Dt,themeClasses:He,resetTaskTimer:ks,celebrationThemeName:He.name},Ee.id)):f.jsx("p",{className:`text-center italic mt-10 ${He.secondaryText}`,children:"No hay tareas activas."})}),f.jsxs("div",{className:"flex flex-col items-center w-full bg-black/20 p-4 rounded-xl border border-white/5 mt-auto",children:[f.jsx("button",{type:"button",onClick:()=>M(!0),className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${He.buttonAction}`,children:"Generar E.O.D.R."}),f.jsx(Qw,{content:C,themeClasses:He,placeholder:"El reporte aparecer aqu..."})]})]}),S==="history"&&f.jsx("div",{className:"flex-1 flex flex-col gap-6 animate-fadeIn",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:`text-2xl font-bold text-center ${He.primaryText}`,children:"Calendario de Reportes"}),f.jsx(kM,{reports:he,selectedDate:D,onSelectDate:L,themeClasses:He}),f.jsxs("h3",{className:`font-bold mb-2 text-center ${He.accentText}`,children:["Reporte del: ",D.split("-").reverse().join("/")]}),f.jsx(Qw,{content:cs,themeClasses:He,placeholder:"No hay reporte guardado para este da."})]})})]})]})})})]})};fI.createRoot(document.getElementById("root")).render(f.jsx(O.StrictMode,{children:f.jsx(vk,{})}));export{Ak as M,Uu as a,aM as b,wk as c,$w as d,Pt as e,Ce as f,nI as g,Bh as h,it as i,f as j,ry as k,Ek as l,NM as m,Pu as n,Sk as p,_n as q,O as r,Is as s,eM as u,Ft as w};
