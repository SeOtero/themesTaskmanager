(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var mk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fp={exports:{}},Kc={};var Mv;function WA(){if(Mv)return Kc;Mv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Kc.Fragment=e,Kc.jsx=t,Kc.jsxs=t,Kc}var kv;function ZA(){return kv||(kv=1,Fp.exports=WA()),Fp.exports}var p=ZA(),qp={exports:{}},Le={};var Ov;function eI(){if(Ov)return Le;Ov=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,F={};function H(M,ne,ue){this.props=M,this.context=ne,this.refs=F,this.updater=ue||L}H.prototype.isReactComponent={},H.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},H.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ee(){}ee.prototype=H.prototype;function Y(M,ne,ue){this.props=M,this.context=ne,this.refs=F,this.updater=ue||L}var le=Y.prototype=new ee;le.constructor=Y,X(le,H.prototype),le.isPureReactComponent=!0;var ae=Array.isArray;function he(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(M,ne,ue){var ve=ue.ref;return{$$typeof:i,type:M,key:ne,ref:ve!==void 0?ve:null,props:ue}}function O(M,ne){return N(M.type,ne,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function P(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return ne[ue]})}var C=/\/+/g;function me(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):ne.toString(36)}function de(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(he,he):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function q(M,ne,ue,ve,se){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var Ie=!1;if(M===null)Ie=!0;else switch(ge){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(M.$$typeof){case i:case e:Ie=!0;break;case v:return Ie=M._init,q(Ie(M._payload),ne,ue,ve,se)}}if(Ie)return se=se(M),Ie=ve===""?"."+me(M,0):ve,ae(se)?(ue="",Ie!=null&&(ue=Ie.replace(C,"$&/")+"/"),q(se,ne,ue,"",function(Tt){return Tt})):se!=null&&(D(se)&&(se=O(se,ue+(se.key==null||M&&M.key===se.key?"":(""+se.key).replace(C,"$&/")+"/")+Ie)),ne.push(se)),1;Ie=0;var rt=ve===""?".":ve+":";if(ae(M))for(var Ge=0;Ge<M.length;Ge++)ve=M[Ge],ge=rt+me(ve,Ge),Ie+=q(ve,ne,ue,ge,se);else if(Ge=R(M),typeof Ge=="function")for(M=Ge.call(M),Ge=0;!(ve=M.next()).done;)ve=ve.value,ge=rt+me(ve,Ge++),Ie+=q(ve,ne,ue,ge,se);else if(ge==="object"){if(typeof M.then=="function")return q(de(M),ne,ue,ve,se);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function oe(M,ne,ue){if(M==null)return M;var ve=[],se=0;return q(M,ve,"","",function(ge){return ne.call(ue,ge,se++)}),ve}function be(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:oe,forEach:function(M,ne,ue){oe(M,function(){ne.apply(this,arguments)},ue)},count:function(M){var ne=0;return oe(M,function(){ne++}),ne},toArray:function(M){return oe(M,function(ne){return ne})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Le.Activity=w,Le.Children=Pe,Le.Component=H,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=Y,Le.StrictMode=r,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return S.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(M,ne,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ve=X({},M.props),se=M.key;if(ne!=null)for(ge in ne.key!==void 0&&(se=""+ne.key),ne)!A.call(ne,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&ne.ref===void 0||(ve[ge]=ne[ge]);var ge=arguments.length-2;if(ge===1)ve.children=ue;else if(1<ge){for(var Ie=Array(ge),rt=0;rt<ge;rt++)Ie[rt]=arguments[rt+2];ve.children=Ie}return N(M.type,se,ve)},Le.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Le.createElement=function(M,ne,ue){var ve,se={},ge=null;if(ne!=null)for(ve in ne.key!==void 0&&(ge=""+ne.key),ne)A.call(ne,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(se[ve]=ne[ve]);var Ie=arguments.length-2;if(Ie===1)se.children=ue;else if(1<Ie){for(var rt=Array(Ie),Ge=0;Ge<Ie;Ge++)rt[Ge]=arguments[Ge+2];se.children=rt}if(M&&M.defaultProps)for(ve in Ie=M.defaultProps,Ie)se[ve]===void 0&&(se[ve]=Ie[ve]);return N(M,ge,se)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:f,render:M}},Le.isValidElement=D,Le.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:be}},Le.memo=function(M,ne){return{$$typeof:y,type:M,compare:ne===void 0?null:ne}},Le.startTransition=function(M){var ne=S.T,ue={};S.T=ue;try{var ve=M(),se=S.S;se!==null&&se(ue,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(he,Ve)}catch(ge){Ve(ge)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),S.T=ne}},Le.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Le.use=function(M){return S.H.use(M)},Le.useActionState=function(M,ne,ue){return S.H.useActionState(M,ne,ue)},Le.useCallback=function(M,ne){return S.H.useCallback(M,ne)},Le.useContext=function(M){return S.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,ne){return S.H.useDeferredValue(M,ne)},Le.useEffect=function(M,ne){return S.H.useEffect(M,ne)},Le.useEffectEvent=function(M){return S.H.useEffectEvent(M)},Le.useId=function(){return S.H.useId()},Le.useImperativeHandle=function(M,ne,ue){return S.H.useImperativeHandle(M,ne,ue)},Le.useInsertionEffect=function(M,ne){return S.H.useInsertionEffect(M,ne)},Le.useLayoutEffect=function(M,ne){return S.H.useLayoutEffect(M,ne)},Le.useMemo=function(M,ne){return S.H.useMemo(M,ne)},Le.useOptimistic=function(M,ne){return S.H.useOptimistic(M,ne)},Le.useReducer=function(M,ne,ue){return S.H.useReducer(M,ne,ue)},Le.useRef=function(M){return S.H.useRef(M)},Le.useState=function(M){return S.H.useState(M)},Le.useSyncExternalStore=function(M,ne,ue){return S.H.useSyncExternalStore(M,ne,ue)},Le.useTransition=function(){return S.H.useTransition()},Le.version="19.2.4",Le}var Vv;function Jg(){return Vv||(Vv=1,qp.exports=eI()),qp.exports}var j=Jg();const tI=JA(j);var Hp={exports:{}},Yc={},Gp={exports:{}},$p={};var jv;function nI(){return jv||(jv=1,(function(i){function e(q,oe){var be=q.length;q.push(oe);e:for(;0<be;){var Ve=be-1>>>1,Pe=q[Ve];if(0<a(Pe,oe))q[Ve]=oe,q[be]=Pe,be=Ve;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var oe=q[0],be=q.pop();if(be!==oe){q[0]=be;e:for(var Ve=0,Pe=q.length,M=Pe>>>1;Ve<M;){var ne=2*(Ve+1)-1,ue=q[ne],ve=ne+1,se=q[ve];if(0>a(ue,be))ve<Pe&&0>a(se,ue)?(q[Ve]=se,q[ve]=be,Ve=ve):(q[Ve]=ue,q[ne]=be,Ve=ne);else if(ve<Pe&&0>a(se,be))q[Ve]=se,q[ve]=be,Ve=ve;else break e}}return oe}function a(q,oe){var be=q.sortIndex-oe.sortIndex;return be!==0?be:q.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var g=[],y=[],v=1,w=null,T=3,R=!1,L=!1,X=!1,F=!1,H=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function le(q){for(var oe=t(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=q)r(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(y)}}function ae(q){if(X=!1,le(q),!L)if(t(g)!==null)L=!0,he||(he=!0,P());else{var oe=t(y);oe!==null&&de(ae,oe.startTime-q)}}var he=!1,S=-1,A=5,N=-1;function O(){return F?!0:!(i.unstable_now()-N<A)}function D(){if(F=!1,he){var q=i.unstable_now();N=q;var oe=!0;try{e:{L=!1,X&&(X=!1,ee(S),S=-1),R=!0;var be=T;try{t:{for(le(q),w=t(g);w!==null&&!(w.expirationTime>q&&O());){var Ve=w.callback;if(typeof Ve=="function"){w.callback=null,T=w.priorityLevel;var Pe=Ve(w.expirationTime<=q);if(q=i.unstable_now(),typeof Pe=="function"){w.callback=Pe,le(q),oe=!0;break t}w===t(g)&&r(g),le(q)}else r(g);w=t(g)}if(w!==null)oe=!0;else{var M=t(y);M!==null&&de(ae,M.startTime-q),oe=!1}}break e}finally{w=null,T=be,R=!1}oe=void 0}}finally{oe?P():he=!1}}}var P;if(typeof Y=="function")P=function(){Y(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,me=C.port2;C.port1.onmessage=D,P=function(){me.postMessage(null)}}else P=function(){H(D,0)};function de(q,oe){S=H(function(){q(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(q){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var be=T;T=oe;try{return q()}finally{T=be}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var be=T;T=q;try{return oe()}finally{T=be}},i.unstable_scheduleCallback=function(q,oe,be){var Ve=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ve+be:Ve):be=Ve,q){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=be+Pe,q={id:v++,callback:oe,priorityLevel:q,startTime:be,expirationTime:Pe,sortIndex:-1},be>Ve?(q.sortIndex=be,e(y,q),t(g)===null&&q===t(y)&&(X?(ee(S),S=-1):X=!0,de(ae,be-Ve))):(q.sortIndex=Pe,e(g,q),L||R||(L=!0,he||(he=!0,P()))),q},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(q){var oe=T;return function(){var be=T;T=oe;try{return q.apply(this,arguments)}finally{T=be}}}})($p)),$p}var Pv;function rI(){return Pv||(Pv=1,Gp.exports=nI()),Gp.exports}var Kp={exports:{}},On={};var Lv;function sI(){if(Lv)return On;Lv=1;var i=Jg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:y,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,On.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},On.flushSync=function(g){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=v,r.d.f()}},On.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},On.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},On.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,w=f(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:R}):v==="script"&&r.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},On.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},On.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=f(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},On.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=f(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},On.requestFormReset=function(g){r.d.r(g)},On.unstable_batchedUpdates=function(g,y){return g(y)},On.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},On.useFormStatus=function(){return u.H.useHostTransitionStatus()},On.version="19.2.4",On}var zv;function iI(){if(zv)return Kp.exports;zv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Kp.exports=sI(),Kp.exports}var Uv;function aI(){if(Uv)return Yc;Uv=1;var i=rI(),e=Jg(),t=iI();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return g(h),n;if(m===c)return g(h),s;m=m.sibling}throw Error(r(188))}if(o.return!==c.return)o=h,c=m;else{for(var _=!1,E=h.child;E;){if(E===o){_=!0,o=h,c=m;break}if(E===c){_=!0,c=h,o=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===o){_=!0,o=m,c=h;break}if(E===c){_=!0,c=m,o=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case H:return"Profiler";case F:return"StrictMode";case ae:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case Y:return n.displayName||"Context";case ee:return(n._context.displayName||"Context")+".Consumer";case le:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return s=n.displayName||null,s!==null?s:me(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return me(n(s))}catch{}}return null}var de=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Ve=[],Pe=-1;function M(n){return{current:n}}function ne(n){0>Pe||(n.current=Ve[Pe],Ve[Pe]=null,Pe--)}function ue(n,s){Pe++,Ve[Pe]=n.current,n.current=s}var ve=M(null),se=M(null),ge=M(null),Ie=M(null);function rt(n,s){switch(ue(ge,s),ue(se,n),ue(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?tv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=tv(s),n=nv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(ve),ue(ve,n)}function Ge(){ne(ve),ne(se),ne(ge)}function Tt(n){n.memoizedState!==null&&ue(Ie,n);var s=ve.current,o=nv(s,n.type);s!==o&&(ue(se,n),ue(ve,o))}function Xn(n){se.current===n&&(ne(ve),ne(se)),Ie.current===n&&(ne(Ie),qc._currentValue=be)}var vn,cr;function Jn(n){if(vn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);vn=s&&s[1]||"",cr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vn+n+cr}var Cs=!1;function Cn(n,s){if(!n||Cs)return"";Cs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var K=J}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(J){K=J}n.call(ie.prototype)}}else{try{throw Error()}catch(J){K=J}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var k=_.split(`
`),$=E.split(`
`);for(h=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(c===k.length||h===$.length)for(c=k.length-1,h=$.length-1;1<=c&&0<=h&&k[c]!==$[h];)h--;for(;1<=c&&0<=h;c--,h--)if(k[c]!==$[h]){if(c!==1||h!==1)do if(c--,h--,0>h||k[c]!==$[h]){var Z=`
`+k[c].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=c&&0<=h);break}}}finally{Cs=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Jn(o):""}function Rs(n,s){switch(n.tag){case 26:case 27:case 5:return Jn(n.type);case 16:return Jn("Lazy");case 13:return n.child!==s&&s!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return Cn(n.type,!1);case 11:return Cn(n.type.render,!1);case 1:return Cn(n.type,!0);case 31:return Jn("Activity");default:return""}}function Tr(n){try{var s="",o=null;do s+=Rs(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,yt=i.unstable_scheduleCallback,Lr=i.unstable_cancelCallback,mi=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Zt=i.unstable_now,zr=i.unstable_getCurrentPriorityLevel,Ds=i.unstable_ImmediatePriority,is=i.unstable_UserBlockingPriority,Rn=i.unstable_NormalPriority,Ta=i.unstable_LowPriority,Ur=i.unstable_IdlePriority,as=i.log,Ms=i.unstable_setDisableYieldValue,Bn=null,Bt=null;function Dn(n){if(typeof as=="function"&&Ms(n),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Bn,n)}catch{}}var At=Math.clz32?Math.clz32:os,pi=Math.log,Er=Math.LN2;function os(n){return n>>>=0,n===0?32:31-(pi(n)/Er|0)|0}var Fn=256,Br=262144,Dt=4194304;function qn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Mn(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var h=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?h=qn(c):(_&=E,_!==0?h=qn(_):o||(o=E&~n,o!==0&&(h=qn(o))))):(E=c&~m,E!==0?h=qn(E):_!==0?h=qn(_):o||(o=c&~n,o!==0&&(h=qn(o)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:h}function xn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ks(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var n=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),n}function Wn(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function qr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ea(n,s,o,c,h,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,k=n.expirationTimes,$=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-At(o),ie=1<<Z;E[Z]=0,k[Z]=-1;var K=$[Z];if(K!==null)for($[Z]=null,Z=0;Z<K.length;Z++){var J=K[Z];J!==null&&(J.lane&=-536870913)}o&=~ie}c!==0&&Hr(n,c,0),m!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function Hr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-At(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Os(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-At(o),h=1<<c;h&s|n[c]&s&&(n[c]|=s),o&=~h}}function Vs(n,s){var o=s&-s;return o=(o&42)!==0?1:gn(o),(o&(n.suspendedLanes|s))!==0?0:o}function gn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gi(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:Sv(n.type))}function Hn(n,s){var o=oe.p;try{return oe.p=n,s()}finally{oe.p=o}}var Gn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Gn,Ft="__reactProps$"+Gn,we="__reactContainer$"+Gn,ze="__reactEvents$"+Gn,It="__reactListeners$"+Gn,bt="__reactHandles$"+Gn,ls="__reactResources$"+Gn,kn="__reactMarker$"+Gn;function cn(n){delete n[Vt],delete n[Ft],delete n[ze],delete n[It],delete n[bt]}function en(n){var s=n[Vt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[we]||o[Vt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=cv(n);n!==null;){if(o=n[Vt])return o;n=cv(n)}return s}n=o,o=n.parentNode}return null}function tn(n){if(n=n[Vt]||n[we]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function te(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function xe(n){var s=n[ls];return s||(s=n[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _e(n){n[kn]=!0}var Me=new Set,Nt={};function Et(n,s){Ze(n,s),Ze(n+"Capture",s)}function Ze(n,s){for(Nt[n]=s,n=0;n<s.length;n++)Me.add(s[n])}var un=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qe={},tt={};function ot(n){return Rt.call(tt,n)?!0:Rt.call(qe,n)?!1:un.test(n)?tt[n]=!0:(qe[n]=!0,!1)}function $n(n,s,o){if(ot(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function dn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Mt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tc(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,m=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dt(n){if(!n._valueTracker){var s=yi(n)?"checked":"value";n._valueTracker=tc(n,s,""+n[s])}}function Sa(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=yi(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function cs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Aa=/[\n"\\]/g;function Zn(n){return n.replace(Aa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function So(n,s,o,c,h,m,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Kt(s)):n.value!==""+Kt(s)&&(n.value=""+Kt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?nc(n,_,Kt(s)):o!=null?nc(n,_,Kt(o)):c!=null&&n.removeAttribute("value"),h==null&&m!=null&&(n.defaultChecked=!!m),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Kt(E):n.removeAttribute("name")}function nd(n,s,o,c,h,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){dt(n);return}o=o!=null?""+Kt(o):"",s=s!=null?""+Kt(s):o,E||s===n.value||(n.value=s),n.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),dt(n)}function nc(n,s,o){s==="number"&&cs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function bi(n,s,o,c){if(n=n.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=s.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Kt(o),s=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function rd(n,s,o){if(s!=null&&(s=""+Kt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Kt(o):""}function _i(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(de(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Kt(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),dt(n)}function er(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var sd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rc(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||sd.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function sc(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&rc(n,h,c)}else for(var m in s)s.hasOwnProperty(m)&&rc(n,m,s[m])}function Ao(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(n){return vi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Gr(){}var ic=null;function Sr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xi=null,us=null;function Ia(n){var s=tn(n);if(s&&(n=s.stateNode)){var o=n[Ft]||null;e:switch(n=s.stateNode,s.type){case"input":if(So(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var h=c[Ft]||null;if(!h)throw Error(r(90));So(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Sa(c)}break e;case"textarea":rd(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&bi(n,!!o.multiple,s,!1)}}}var No=!1;function wi(n,s,o){if(No)return n(s,o);No=!0;try{var c=n(s);return c}finally{if(No=!1,(xi!==null||us!==null)&&(Wd(),xi&&(s=xi,n=us,us=xi=null,Ia(s),n)))for(s=0;s<n.length;s++)Ia(n[s])}}function $r(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Ft]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(Ar)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Na=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Na=!1}var ds=null,ac=null,Ca=null;function oc(){if(Ca)return Ca;var n,s=ac,o=s.length,c,h="value"in ds?ds.value:ds.textContent,m=h.length;for(n=0;n<o&&s[n]===h[n];n++);var _=o-n;for(c=1;c<=_&&s[o-c]===h[m-c];c++);return Ca=h.slice(n,1<c?1-c:void 0)}function Ra(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function js(){return!0}function Kr(){return!1}function wn(n){function s(o,c,h,m,_){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?js:Kr,this.isPropagationStopped=Kr,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),s}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=wn(Ps),Ti=w({},Ps,{view:0,detail:0}),lc=wn(Ti),Ei,Co,fs,Ro=w({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fs&&(fs&&n.type==="mousemove"?(Ei=n.screenX-fs.screenX,Co=n.screenY-fs.screenY):Co=Ei=0,fs=n),Ei)},movementY:function(n){return"movementY"in n?n.movementY:Co}}),cc=wn(Ro),Da=w({},Ro,{dataTransfer:0}),ad=wn(Da),od=w({},Ti,{relatedTarget:0}),Ma=wn(od),uc=w({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),ld=wn(uc),Do=w({},Ps,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cd=wn(Do),ud=w({},Ps,{data:0}),ms=wn(ud),dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function md(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=fd[n])?!!s[n]:!1}function Si(){return md}var Kn=w({},Ti,{key:function(n){if(n.key){var s=dd[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(n){return n.type==="keypress"?Ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pd=wn(Kn),gd=w({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ls=wn(gd),d=w({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),b=wn(d),x=w({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=wn(x),B=w({},Ro,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=wn(B),pe=w({},Ps,{newState:0,oldState:0}),Ue=wn(pe),Yt=[9,13,27,32],lt=Ar&&"CompositionEvent"in window,jt=null;Ar&&"documentMode"in document&&(jt=document.documentMode);var Ir=Ar&&"TextEvent"in window&&!jt,ps=Ar&&(!lt||jt&&8<jt&&11>=jt),Yr=" ",Qr=!1;function ka(n,s){switch(n){case"keyup":return Yt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ko=!1;function xS(n,s){switch(n){case"compositionend":return Mo(s);case"keypress":return s.which!==32?null:(Qr=!0,Yr);case"textInput":return n=s.data,n===Yr&&Qr?null:n;default:return null}}function wS(n,s){if(ko)return n==="compositionend"||!lt&&ka(n,s)?(n=oc(),Ca=ac=ds=null,ko=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ps&&s.locale!=="ko"?null:s.data;default:return null}}var TS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!TS[n.type]:s==="textarea"}function fy(n,s,o,c){xi?us?us.push(c):us=[c]:xi=c,s=ih(s,"onChange"),0<s.length&&(o=new hs("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var dc=null,hc=null;function ES(n){Q_(n,0)}function yd(n){var s=te(n);if(Sa(s))return n}function my(n,s){if(n==="change")return s}var py=!1;if(Ar){var Qf;if(Ar){var Xf="oninput"in document;if(!Xf){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),Xf=typeof gy.oninput=="function"}Qf=Xf}else Qf=!1;py=Qf&&(!document.documentMode||9<document.documentMode)}function yy(){dc&&(dc.detachEvent("onpropertychange",by),hc=dc=null)}function by(n){if(n.propertyName==="value"&&yd(hc)){var s=[];fy(s,hc,n,Sr(n)),wi(ES,s)}}function SS(n,s,o){n==="focusin"?(yy(),dc=s,hc=o,dc.attachEvent("onpropertychange",by)):n==="focusout"&&yy()}function AS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yd(hc)}function IS(n,s){if(n==="click")return yd(s)}function NS(n,s){if(n==="input"||n==="change")return yd(s)}function CS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ur=typeof Object.is=="function"?Object.is:CS;function fc(n,s){if(ur(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Rt.call(s,h)||!ur(n[h],s[h]))return!1}return!0}function _y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vy(n,s){var o=_y(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=_y(o)}}function xy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=cs(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=cs(n.document)}return s}function Jf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var RS=Ar&&"documentMode"in document&&11>=document.documentMode,Oo=null,Wf=null,mc=null,Zf=!1;function Ty(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zf||Oo==null||Oo!==cs(c)||(c=Oo,"selectionStart"in c&&Jf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),mc&&fc(mc,c)||(mc=c,c=ih(Wf,"onSelect"),0<c.length&&(s=new hs("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Oo)))}function Oa(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Vo={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},em={},Ey={};Ar&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Va(n){if(em[n])return em[n];if(!Vo[n])return n;var s=Vo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ey)return em[n]=s[o];return n}var Sy=Va("animationend"),Ay=Va("animationiteration"),Iy=Va("animationstart"),DS=Va("transitionrun"),MS=Va("transitionstart"),kS=Va("transitioncancel"),Ny=Va("transitionend"),Cy=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function Xr(n,s){Cy.set(n,s),Et(s,[n])}var bd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Nr=[],jo=0,nm=0;function _d(){for(var n=jo,s=nm=jo=0;s<n;){var o=Nr[s];Nr[s++]=null;var c=Nr[s];Nr[s++]=null;var h=Nr[s];Nr[s++]=null;var m=Nr[s];if(Nr[s++]=null,c!==null&&h!==null){var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}m!==0&&Ry(o,h,m)}}function vd(n,s,o,c){Nr[jo++]=n,Nr[jo++]=s,Nr[jo++]=o,Nr[jo++]=c,nm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function rm(n,s,o,c){return vd(n,s,o,c),xd(n)}function ja(n,s){return vd(n,null,null,s),xd(n)}function Ry(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var h=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(h=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,h&&s!==null&&(h=31-At(o),n=m.hiddenUpdates,c=n[h],c===null?n[h]=[s]:c.push(s),s.lane=o|536870912),m):null}function xd(n){if(50<jc)throw jc=0,hp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Po={};function OS(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(n,s,o,c){return new OS(n,s,o,c)}function sm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zs(n,s){var o=n.alternate;return o===null?(o=dr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Dy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function wd(n,s,o,c,h,m){var _=0;if(c=n,typeof n=="function")sm(n)&&(_=1);else if(typeof n=="string")_=zA(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=dr(31,o,s,h),n.elementType=N,n.lanes=m,n;case X:return Pa(o.children,h,m,s);case F:_=8,h|=24;break;case H:return n=dr(12,o,s,h|2),n.elementType=H,n.lanes=m,n;case ae:return n=dr(13,o,s,h),n.elementType=ae,n.lanes=m,n;case he:return n=dr(19,o,s,h),n.elementType=he,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:_=10;break e;case ee:_=9;break e;case le:_=11;break e;case S:_=14;break e;case A:_=16,c=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=dr(_,o,s,h),s.elementType=n,s.type=c,s.lanes=m,s}function Pa(n,s,o,c){return n=dr(7,n,c,s),n.lanes=o,n}function im(n,s,o){return n=dr(6,n,null,s),n.lanes=o,n}function My(n){var s=dr(18,null,null,0);return s.stateNode=n,s}function am(n,s,o){return s=dr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ky=new WeakMap;function Cr(n,s){if(typeof n=="object"&&n!==null){var o=ky.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Tr(s)},ky.set(n,s),s)}return{value:n,source:s,stack:Tr(s)}}var Lo=[],zo=0,Td=null,pc=0,Rr=[],Dr=0,Ai=null,gs=1,ys="";function Us(n,s){Lo[zo++]=pc,Lo[zo++]=Td,Td=n,pc=s}function Oy(n,s,o){Rr[Dr++]=gs,Rr[Dr++]=ys,Rr[Dr++]=Ai,Ai=n;var c=gs;n=ys;var h=32-At(c)-1;c&=~(1<<h),o+=1;var m=32-At(s)+h;if(30<m){var _=h-h%5;m=(c&(1<<_)-1).toString(32),c>>=_,h-=_,gs=1<<32-At(s)+h|o<<h|c,ys=m+n}else gs=1<<m|o<<h|c,ys=n}function om(n){n.return!==null&&(Us(n,1),Oy(n,1,0))}function lm(n){for(;n===Td;)Td=Lo[--zo],Lo[zo]=null,pc=Lo[--zo],Lo[zo]=null;for(;n===Ai;)Ai=Rr[--Dr],Rr[Dr]=null,ys=Rr[--Dr],Rr[Dr]=null,gs=Rr[--Dr],Rr[Dr]=null}function Vy(n,s){Rr[Dr++]=gs,Rr[Dr++]=ys,Rr[Dr++]=Ai,gs=s.id,ys=s.overflow,Ai=n}var Tn=null,kt=null,et=!1,Ii=null,Mr=!1,cm=Error(r(519));function Ni(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(Cr(s,n)),cm}function jy(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Vt]=n,s[Ft]=c,o){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Ke(Lc[o],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),nd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),_i(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Z_(s.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),c.onScroll!=null&&Ke("scroll",s),c.onScrollEnd!=null&&Ke("scrollend",s),c.onClick!=null&&(s.onclick=Gr),s=!0):s=!1,s||Ni(n,!0)}function Py(n){for(Tn=n.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:Tn=Tn.return}}function Uo(n){if(n!==Tn)return!1;if(!et)return Py(n),et=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ip(n.type,n.memoizedProps)),o=!o),o&&kt&&Ni(n),Py(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=lv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=lv(n)}else s===27?(s=kt,Fi(n.type)?(n=Mp,Mp=null,kt=n):kt=s):kt=Tn?Or(n.stateNode.nextSibling):null;return!0}function La(){kt=Tn=null,et=!1}function um(){var n=Ii;return n!==null&&(sr===null?sr=n:sr.push.apply(sr,n),Ii=null),n}function gc(n){Ii===null?Ii=[n]:Ii.push(n)}var dm=M(null),za=null,Bs=null;function Ci(n,s,o){ue(dm,s._currentValue),s._currentValue=o}function Fs(n){n._currentValue=dm.current,ne(dm)}function hm(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function fm(n,s,o,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var k=0;k<s.length;k++)if(E.context===s[k]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),hm(m.return,o,n),c||(_=null);break e}m=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),hm(_,o,n),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===n){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Bo(n,s,o,c){n=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;ur(h.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(h===Ie.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(qc):n=[qc])}h=h.return}n!==null&&fm(s,n,o,c),s.flags|=262144}function Ed(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ua(n){za=n,Bs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function En(n){return Ly(za,n)}function Sd(n,s){return za===null&&Ua(n),Ly(n,s)}function Ly(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Bs===null){if(n===null)throw Error(r(308));Bs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Bs=Bs.next=s;return o}var VS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},jS=i.unstable_scheduleCallback,PS=i.unstable_NormalPriority,nn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new VS,data:new Map,refCount:0}}function yc(n){n.refCount--,n.refCount===0&&jS(PS,function(){n.controller.abort()})}var bc=null,pm=0,Fo=0,qo=null;function LS(n,s){if(bc===null){var o=bc=[];pm=0,Fo=bp(),qo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return pm++,s.then(zy,zy),s}function zy(){if(--pm===0&&bc!==null){qo!==null&&(qo.status="fulfilled");var n=bc;bc=null,Fo=0,qo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function zS(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var Uy=q.S;q.S=function(n,s){T_=Zt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&LS(n,s),Uy!==null&&Uy(n,s)};var Ba=M(null);function gm(){var n=Ba.current;return n!==null?n:St.pooledCache}function Ad(n,s){s===null?ue(Ba,Ba.current):ue(Ba,s.pool)}function By(){var n=gm();return n===null?null:{parent:nn._currentValue,pool:n}}var Ho=Error(r(460)),ym=Error(r(474)),Id=Error(r(542)),Nd={then:function(){}};function Fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qy(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Gr,Gr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gy(n),n;default:if(typeof s.status=="string")s.then(Gr,Gr);else{if(n=St,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gy(n),n}throw qa=s,Ho}}function Fa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(qa=o,Ho):o}}var qa=null;function Hy(){if(qa===null)throw Error(r(459));var n=qa;return qa=null,n}function Gy(n){if(n===Ho||n===Id)throw Error(r(483))}var Go=null,_c=0;function Cd(n){var s=_c;return _c+=1,Go===null&&(Go=[]),qy(Go,n,s)}function vc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Rd(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function $y(n){function s(z,V){if(n){var G=z.deletions;G===null?(z.deletions=[V],z.flags|=16):G.push(V)}}function o(z,V){if(!n)return null;for(;V!==null;)s(z,V),V=V.sibling;return null}function c(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function h(z,V){return z=zs(z,V),z.index=0,z.sibling=null,z}function m(z,V,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<V?(z.flags|=67108866,V):G):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function E(z,V,G,re){return V===null||V.tag!==6?(V=im(G,z.mode,re),V.return=z,V):(V=h(V,G),V.return=z,V)}function k(z,V,G,re){var Ce=G.type;return Ce===X?Z(z,V,G.props.children,re,G.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&Fa(Ce)===V.type)?(V=h(V,G.props),vc(V,G),V.return=z,V):(V=wd(G.type,G.key,G.props,null,z.mode,re),vc(V,G),V.return=z,V)}function $(z,V,G,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=am(G,z.mode,re),V.return=z,V):(V=h(V,G.children||[]),V.return=z,V)}function Z(z,V,G,re,Ce){return V===null||V.tag!==7?(V=Pa(G,z.mode,re,Ce),V.return=z,V):(V=h(V,G),V.return=z,V)}function ie(z,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=im(""+V,z.mode,G),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return G=wd(V.type,V.key,V.props,null,z.mode,G),vc(G,V),G.return=z,G;case L:return V=am(V,z.mode,G),V.return=z,V;case A:return V=Fa(V),ie(z,V,G)}if(de(V)||P(V))return V=Pa(V,z.mode,G,null),V.return=z,V;if(typeof V.then=="function")return ie(z,Cd(V),G);if(V.$$typeof===Y)return ie(z,Sd(z,V),G);Rd(z,V)}return null}function K(z,V,G,re){var Ce=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ce!==null?null:E(z,V,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return G.key===Ce?k(z,V,G,re):null;case L:return G.key===Ce?$(z,V,G,re):null;case A:return G=Fa(G),K(z,V,G,re)}if(de(G)||P(G))return Ce!==null?null:Z(z,V,G,re,null);if(typeof G.then=="function")return K(z,V,Cd(G),re);if(G.$$typeof===Y)return K(z,V,Sd(z,G),re);Rd(z,G)}return null}function J(z,V,G,re,Ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return z=z.get(G)||null,E(V,z,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case R:return z=z.get(re.key===null?G:re.key)||null,k(V,z,re,Ce);case L:return z=z.get(re.key===null?G:re.key)||null,$(V,z,re,Ce);case A:return re=Fa(re),J(z,V,G,re,Ce)}if(de(re)||P(re))return z=z.get(G)||null,Z(V,z,re,Ce,null);if(typeof re.then=="function")return J(z,V,G,Cd(re),Ce);if(re.$$typeof===Y)return J(z,V,G,Sd(V,re),Ce);Rd(V,re)}return null}function Ee(z,V,G,re){for(var Ce=null,st=null,Ae=V,Fe=V=0,Xe=null;Ae!==null&&Fe<G.length;Fe++){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var it=K(z,Ae,G[Fe],re);if(it===null){Ae===null&&(Ae=Xe);break}n&&Ae&&it.alternate===null&&s(z,Ae),V=m(it,V,Fe),st===null?Ce=it:st.sibling=it,st=it,Ae=Xe}if(Fe===G.length)return o(z,Ae),et&&Us(z,Fe),Ce;if(Ae===null){for(;Fe<G.length;Fe++)Ae=ie(z,G[Fe],re),Ae!==null&&(V=m(Ae,V,Fe),st===null?Ce=Ae:st.sibling=Ae,st=Ae);return et&&Us(z,Fe),Ce}for(Ae=c(Ae);Fe<G.length;Fe++)Xe=J(Ae,z,Fe,G[Fe],re),Xe!==null&&(n&&Xe.alternate!==null&&Ae.delete(Xe.key===null?Fe:Xe.key),V=m(Xe,V,Fe),st===null?Ce=Xe:st.sibling=Xe,st=Xe);return n&&Ae.forEach(function(Ki){return s(z,Ki)}),et&&Us(z,Fe),Ce}function De(z,V,G,re){if(G==null)throw Error(r(151));for(var Ce=null,st=null,Ae=V,Fe=V=0,Xe=null,it=G.next();Ae!==null&&!it.done;Fe++,it=G.next()){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var Ki=K(z,Ae,it.value,re);if(Ki===null){Ae===null&&(Ae=Xe);break}n&&Ae&&Ki.alternate===null&&s(z,Ae),V=m(Ki,V,Fe),st===null?Ce=Ki:st.sibling=Ki,st=Ki,Ae=Xe}if(it.done)return o(z,Ae),et&&Us(z,Fe),Ce;if(Ae===null){for(;!it.done;Fe++,it=G.next())it=ie(z,it.value,re),it!==null&&(V=m(it,V,Fe),st===null?Ce=it:st.sibling=it,st=it);return et&&Us(z,Fe),Ce}for(Ae=c(Ae);!it.done;Fe++,it=G.next())it=J(Ae,z,Fe,it.value,re),it!==null&&(n&&it.alternate!==null&&Ae.delete(it.key===null?Fe:it.key),V=m(it,V,Fe),st===null?Ce=it:st.sibling=it,st=it);return n&&Ae.forEach(function(XA){return s(z,XA)}),et&&Us(z,Fe),Ce}function wt(z,V,G,re){if(typeof G=="object"&&G!==null&&G.type===X&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case R:e:{for(var Ce=G.key;V!==null;){if(V.key===Ce){if(Ce=G.type,Ce===X){if(V.tag===7){o(z,V.sibling),re=h(V,G.props.children),re.return=z,z=re;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&Fa(Ce)===V.type){o(z,V.sibling),re=h(V,G.props),vc(re,G),re.return=z,z=re;break e}o(z,V);break}else s(z,V);V=V.sibling}G.type===X?(re=Pa(G.props.children,z.mode,re,G.key),re.return=z,z=re):(re=wd(G.type,G.key,G.props,null,z.mode,re),vc(re,G),re.return=z,z=re)}return _(z);case L:e:{for(Ce=G.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){o(z,V.sibling),re=h(V,G.children||[]),re.return=z,z=re;break e}else{o(z,V);break}else s(z,V);V=V.sibling}re=am(G,z.mode,re),re.return=z,z=re}return _(z);case A:return G=Fa(G),wt(z,V,G,re)}if(de(G))return Ee(z,V,G,re);if(P(G)){if(Ce=P(G),typeof Ce!="function")throw Error(r(150));return G=Ce.call(G),De(z,V,G,re)}if(typeof G.then=="function")return wt(z,V,Cd(G),re);if(G.$$typeof===Y)return wt(z,V,Sd(z,G),re);Rd(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(o(z,V.sibling),re=h(V,G),re.return=z,z=re):(o(z,V),re=im(G,z.mode,re),re.return=z,z=re),_(z)):o(z,V)}return function(z,V,G,re){try{_c=0;var Ce=wt(z,V,G,re);return Go=null,Ce}catch(Ae){if(Ae===Ho||Ae===Id)throw Ae;var st=dr(29,Ae,null,z.mode);return st.lanes=re,st.return=z,st}}}var Ha=$y(!0),Ky=$y(!1),Ri=!1;function bm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Di(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Mi(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=xd(n),Ry(n,null,o),s}return vd(n,c,s,o),xd(n)}function xc(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Os(n,o)}}function vm(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=s:m=m.next=s}else h=m=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var xm=!1;function wc(){if(xm){var n=qo;if(n!==null)throw n}}function Tc(n,s,o,c){xm=!1;var h=n.updateQueue;Ri=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var k=E,$=k.next;k.next=null,_===null?m=$:_.next=$,_=k;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==_&&(E===null?Z.firstBaseUpdate=$:E.next=$,Z.lastBaseUpdate=k))}if(m!==null){var ie=h.baseState;_=0,Z=$=k=null,E=m;do{var K=E.lane&-536870913,J=K!==E.lane;if(J?(Qe&K)===K:(c&K)===K){K!==0&&K===Fo&&(xm=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=n,De=E;K=s;var wt=o;switch(De.tag){case 1:if(Ee=De.payload,typeof Ee=="function"){ie=Ee.call(wt,ie,K);break e}ie=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=De.payload,K=typeof Ee=="function"?Ee.call(wt,ie,K):Ee,K==null)break e;ie=w({},ie,K);break e;case 2:Ri=!0}}K=E.callback,K!==null&&(n.flags|=64,J&&(n.flags|=8192),J=h.callbacks,J===null?h.callbacks=[K]:J.push(K))}else J={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?($=Z=J,k=ie):Z=Z.next=J,_|=K;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;J=E,E=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);Z===null&&(k=ie),h.baseState=k,h.firstBaseUpdate=$,h.lastBaseUpdate=Z,m===null&&(h.shared.lanes=0),Pi|=_,n.lanes=_,n.memoizedState=ie}}function Yy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Qy(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Yy(o[n],s)}var $o=M(null),Dd=M(0);function Xy(n,s){n=Js,ue(Dd,n),ue($o,s),Js=n|s.baseLanes}function wm(){ue(Dd,Js),ue($o,$o.current)}function Tm(){Js=Dd.current,ne($o),ne(Dd)}var hr=M(null),kr=null;function ki(n){var s=n.alternate;ue(Qt,Qt.current&1),ue(hr,n),kr===null&&(s===null||$o.current!==null||s.memoizedState!==null)&&(kr=n)}function Em(n){ue(Qt,Qt.current),ue(hr,n),kr===null&&(kr=n)}function Jy(n){n.tag===22?(ue(Qt,Qt.current),ue(hr,n),kr===null&&(kr=n)):Oi()}function Oi(){ue(Qt,Qt.current),ue(hr,hr.current)}function fr(n){ne(hr),kr===n&&(kr=null),ne(Qt)}var Qt=M(0);function Md(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rp(o)||Dp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var qs=0,Be=null,vt=null,rn=null,kd=!1,Ko=!1,Ga=!1,Od=0,Ec=0,Yo=null,US=0;function qt(){throw Error(r(321))}function Sm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ur(n[o],s[o]))return!1;return!0}function Am(n,s,o,c,h,m){return qs=m,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=n===null||n.memoizedState===null?Ob:Bm,Ga=!1,m=o(c,h),Ga=!1,Ko&&(m=Zy(s,o,c,h)),Wy(n),m}function Wy(n){q.H=Ic;var s=vt!==null&&vt.next!==null;if(qs=0,rn=vt=Be=null,kd=!1,Ec=0,Yo=null,s)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Ed(n)&&(sn=!0))}function Zy(n,s,o,c){Be=n;var h=0;do{if(Ko&&(Yo=null),Ec=0,Ko=!1,25<=h)throw Error(r(301));if(h+=1,rn=vt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=Vb,m=s(o,c)}while(Ko);return m}function BS(){var n=q.H,s=n.useState()[0];return s=typeof s.then=="function"?Sc(s):s,n=n.useState()[0],(vt!==null?vt.memoizedState:null)!==n&&(Be.flags|=1024),s}function Im(){var n=Od!==0;return Od=0,n}function Nm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Cm(n){if(kd){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kd=!1}qs=0,rn=vt=Be=null,Ko=!1,Ec=Od=0,Yo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Be.memoizedState=rn=n:rn=rn.next=n,rn}function Xt(){if(vt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=rn===null?Be.memoizedState:rn.next;if(s!==null)rn=s,vt=n;else{if(n===null)throw Be.alternate===null?Error(r(467)):Error(r(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},rn===null?Be.memoizedState=rn=n:rn=rn.next=n}return rn}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(n){var s=Ec;return Ec+=1,Yo===null&&(Yo=[]),n=qy(Yo,n,s),s=Be,(rn===null?s.memoizedState:rn.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Ob:Bm),n}function jd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Sc(n);if(n.$$typeof===Y)return En(n)}throw Error(r(438,String(n)))}function Rm(n){var s=null,o=Be.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Vd(),Be.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=O;return s.index++,o}function Hs(n,s){return typeof s=="function"?s(n):s}function Pd(n){var s=Xt();return Dm(s,vt,n)}function Dm(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var h=n.baseQueue,m=c.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}s.baseQueue=h=m,c.pending=null}if(m=n.baseState,h===null)n.memoizedState=m;else{s=h.next;var E=_=null,k=null,$=s,Z=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(Qe&ie)===ie:(qs&ie)===ie){var K=$.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Fo&&(Z=!0);else if((qs&K)===K){$=$.next,K===Fo&&(Z=!0);continue}else ie={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(E=k=ie,_=m):k=k.next=ie,Be.lanes|=K,Pi|=K;ie=$.action,Ga&&o(m,ie),m=$.hasEagerState?$.eagerState:o(m,ie)}else K={lane:ie,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(E=k=K,_=m):k=k.next=K,Be.lanes|=ie,Pi|=ie;$=$.next}while($!==null&&$!==s);if(k===null?_=m:k.next=E,!ur(m,n.memoizedState)&&(sn=!0,Z&&(o=qo,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=k,c.lastRenderedState=m}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Mm(n){var s=Xt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,h=o.pending,m=s.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=n(m,_.action),_=_.next;while(_!==h);ur(m,s.memoizedState)||(sn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,c]}function eb(n,s,o){var c=Be,h=Xt(),m=et;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var _=!ur((vt||h).memoizedState,o);if(_&&(h.memoizedState=o,sn=!0),h=h.queue,Vm(rb.bind(null,c,h,n),[n]),h.getSnapshot!==s||_||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,Qo(9,{destroy:void 0},nb.bind(null,c,h,o,s),null),St===null)throw Error(r(349));m||(qs&127)!==0||tb(c,s,o)}return o}function tb(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Be.updateQueue,s===null?(s=Vd(),Be.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function nb(n,s,o,c){s.value=o,s.getSnapshot=c,sb(s)&&ib(n)}function rb(n,s,o){return o(function(){sb(s)&&ib(n)})}function sb(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ur(n,o)}catch{return!0}}function ib(n){var s=ja(n,2);s!==null&&ir(s,n,2)}function km(n){var s=Yn();if(typeof n=="function"){var o=n;if(n=o(),Ga){Dn(!0);try{o()}finally{Dn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},s}function ab(n,s,o,c){return n.baseState=o,Dm(n,vt,typeof c=="function"?c:Hs)}function FS(n,s,o,c,h){if(Ud(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};q.T!==null?o(!0):m.isTransition=!1,c(m),o=s.pending,o===null?(m.next=s.pending=m,ob(s,m)):(m.next=o.next,s.pending=o.next=m)}}function ob(n,s){var o=s.action,c=s.payload,h=n.state;if(s.isTransition){var m=q.T,_={};q.T=_;try{var E=o(h,c),k=q.S;k!==null&&k(_,E),lb(n,s,E)}catch($){Om(n,s,$)}finally{m!==null&&_.types!==null&&(m.types=_.types),q.T=m}}else try{m=o(h,c),lb(n,s,m)}catch($){Om(n,s,$)}}function lb(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){cb(n,s,c)},function(c){return Om(n,s,c)}):cb(n,s,o)}function cb(n,s,o){s.status="fulfilled",s.value=o,ub(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,ob(n,o)))}function Om(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,ub(s),s=s.next;while(s!==c)}n.action=null}function ub(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function db(n,s){return s}function hb(n,s){if(et){var o=St.formState;if(o!==null){e:{var c=Be;if(et){if(kt){t:{for(var h=kt,m=Mr;h.nodeType!==8;){if(!m){h=null;break t}if(h=Or(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){kt=Or(h.nextSibling),c=h.data==="F!";break e}}Ni(c)}c=!1}c&&(s=o[0])}}return o=Yn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:db,lastRenderedState:s},o.queue=c,o=Db.bind(null,Be,c),c.dispatch=o,c=km(!1),m=Um.bind(null,Be,!1,c.queue),c=Yn(),h={state:s,dispatch:null,action:n,pending:null},c.queue=h,o=FS.bind(null,Be,h,m,o),h.dispatch=o,c.memoizedState=n,[s,o,!1]}function fb(n){var s=Xt();return mb(s,vt,n)}function mb(n,s,o){if(s=Dm(n,s,db)[0],n=Pd(Hs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Sc(s)}catch(_){throw _===Ho?Id:_}else c=s;s=Xt();var h=s.queue,m=h.dispatch;return o!==s.memoizedState&&(Be.flags|=2048,Qo(9,{destroy:void 0},qS.bind(null,h,o),null)),[c,m,n]}function qS(n,s){n.action=s}function pb(n){var s=Xt(),o=vt;if(o!==null)return mb(s,o,n);Xt(),s=s.memoizedState,o=Xt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function Qo(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Vd(),Be.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function gb(){return Xt().memoizedState}function Ld(n,s,o,c){var h=Yn();Be.flags|=n,h.memoizedState=Qo(1|s,{destroy:void 0},o,c===void 0?null:c)}function zd(n,s,o,c){var h=Xt();c=c===void 0?null:c;var m=h.memoizedState.inst;vt!==null&&c!==null&&Sm(c,vt.memoizedState.deps)?h.memoizedState=Qo(s,m,o,c):(Be.flags|=n,h.memoizedState=Qo(1|s,m,o,c))}function yb(n,s){Ld(8390656,8,n,s)}function Vm(n,s){zd(2048,8,n,s)}function HS(n){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Vd(),Be.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function bb(n){var s=Xt().memoizedState;return HS({ref:s,nextImpl:n}),function(){if((ct&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function _b(n,s){return zd(4,2,n,s)}function vb(n,s){return zd(4,4,n,s)}function xb(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wb(n,s,o){o=o!=null?o.concat([n]):null,zd(4,4,xb.bind(null,s,n),o)}function jm(){}function Tb(n,s){var o=Xt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Sm(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Eb(n,s){var o=Xt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Sm(s,c[1]))return c[0];if(c=n(),Ga){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[c,s],c}function Pm(n,s,o){return o===void 0||(qs&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=S_(),Be.lanes|=n,Pi|=n,o)}function Sb(n,s,o,c){return ur(o,s)?o:$o.current!==null?(n=Pm(n,o,c),ur(n,s)||(sn=!0),n):(qs&42)===0||(qs&1073741824)!==0&&(Qe&261930)===0?(sn=!0,n.memoizedState=o):(n=S_(),Be.lanes|=n,Pi|=n,s)}function Ab(n,s,o,c,h){var m=oe.p;oe.p=m!==0&&8>m?m:8;var _=q.T,E={};q.T=E,Um(n,!1,s,o);try{var k=h(),$=q.S;if($!==null&&$(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=zS(k,c);Ac(n,s,Z,gr(n))}else Ac(n,s,c,gr(n))}catch(ie){Ac(n,s,{then:function(){},status:"rejected",reason:ie},gr())}finally{oe.p=m,_!==null&&E.types!==null&&(_.types=E.types),q.T=_}}function GS(){}function Lm(n,s,o,c){if(n.tag!==5)throw Error(r(476));var h=Ib(n).queue;Ab(n,h,s,be,o===null?GS:function(){return Nb(n),o(c)})}function Ib(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:be},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Nb(n){var s=Ib(n);s.next===null&&(s=n.alternate.memoizedState),Ac(n,s.next.queue,{},gr())}function zm(){return En(qc)}function Cb(){return Xt().memoizedState}function Rb(){return Xt().memoizedState}function $S(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=gr();n=Di(o);var c=Mi(s,n,o);c!==null&&(ir(c,s,o),xc(c,s,o)),s={cache:mm()},n.payload=s;return}s=s.return}}function KS(n,s,o){var c=gr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ud(n)?Mb(s,o):(o=rm(n,s,o,c),o!==null&&(ir(o,n,c),kb(o,s,c)))}function Db(n,s,o){var c=gr();Ac(n,s,o,c)}function Ac(n,s,o,c){var h={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ud(n))Mb(s,h);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,E=m(_,o);if(h.hasEagerState=!0,h.eagerState=E,ur(E,_))return vd(n,s,h,0),St===null&&_d(),!1}catch{}if(o=rm(n,s,h,c),o!==null)return ir(o,n,c),kb(o,s,c),!0}return!1}function Um(n,s,o,c){if(c={lane:2,revertLane:bp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ud(n)){if(s)throw Error(r(479))}else s=rm(n,o,c,2),s!==null&&ir(s,n,2)}function Ud(n){var s=n.alternate;return n===Be||s!==null&&s===Be}function Mb(n,s){Ko=kd=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function kb(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Os(n,o)}}var Ic={readContext:En,use:jd,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};Ic.useEffectEvent=qt;var Ob={readContext:En,use:jd,useCallback:function(n,s){return Yn().memoizedState=[n,s===void 0?null:s],n},useContext:En,useEffect:yb,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ld(4194308,4,xb.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ld(4194308,4,n,s)},useInsertionEffect:function(n,s){Ld(4,2,n,s)},useMemo:function(n,s){var o=Yn();s=s===void 0?null:s;var c=n();if(Ga){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=Yn();if(o!==void 0){var h=o(s);if(Ga){Dn(!0);try{o(s)}finally{Dn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=KS.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var s=Yn();return n={current:n},s.memoizedState=n},useState:function(n){n=km(n);var s=n.queue,o=Db.bind(null,Be,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:jm,useDeferredValue:function(n,s){var o=Yn();return Pm(o,n,s)},useTransition:function(){var n=km(!1);return n=Ab.bind(null,Be,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Be,h=Yn();if(et){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),St===null)throw Error(r(349));(Qe&127)!==0||tb(c,s,o)}h.memoizedState=o;var m={value:o,getSnapshot:s};return h.queue=m,yb(rb.bind(null,c,m,n),[n]),c.flags|=2048,Qo(9,{destroy:void 0},nb.bind(null,c,m,o,s),null),o},useId:function(){var n=Yn(),s=St.identifierPrefix;if(et){var o=ys,c=gs;o=(c&~(1<<32-At(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Od++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=US++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:zm,useFormState:hb,useActionState:hb,useOptimistic:function(n){var s=Yn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Um.bind(null,Be,!0,o),o.dispatch=s,[n,s]},useMemoCache:Rm,useCacheRefresh:function(){return Yn().memoizedState=$S.bind(null,Be)},useEffectEvent:function(n){var s=Yn(),o={impl:n};return s.memoizedState=o,function(){if((ct&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Bm={readContext:En,use:jd,useCallback:Tb,useContext:En,useEffect:Vm,useImperativeHandle:wb,useInsertionEffect:_b,useLayoutEffect:vb,useMemo:Eb,useReducer:Pd,useRef:gb,useState:function(){return Pd(Hs)},useDebugValue:jm,useDeferredValue:function(n,s){var o=Xt();return Sb(o,vt.memoizedState,n,s)},useTransition:function(){var n=Pd(Hs)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:Sc(n),s]},useSyncExternalStore:eb,useId:Cb,useHostTransitionStatus:zm,useFormState:fb,useActionState:fb,useOptimistic:function(n,s){var o=Xt();return ab(o,vt,n,s)},useMemoCache:Rm,useCacheRefresh:Rb};Bm.useEffectEvent=bb;var Vb={readContext:En,use:jd,useCallback:Tb,useContext:En,useEffect:Vm,useImperativeHandle:wb,useInsertionEffect:_b,useLayoutEffect:vb,useMemo:Eb,useReducer:Mm,useRef:gb,useState:function(){return Mm(Hs)},useDebugValue:jm,useDeferredValue:function(n,s){var o=Xt();return vt===null?Pm(o,n,s):Sb(o,vt.memoizedState,n,s)},useTransition:function(){var n=Mm(Hs)[0],s=Xt().memoizedState;return[typeof n=="boolean"?n:Sc(n),s]},useSyncExternalStore:eb,useId:Cb,useHostTransitionStatus:zm,useFormState:pb,useActionState:pb,useOptimistic:function(n,s){var o=Xt();return vt!==null?ab(o,vt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Rm,useCacheRefresh:Rb};Vb.useEffectEvent=bb;function Fm(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:w({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var qm={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=gr(),h=Di(c);h.payload=s,o!=null&&(h.callback=o),s=Mi(n,h,c),s!==null&&(ir(s,n,c),xc(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=gr(),h=Di(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=Mi(n,h,c),s!==null&&(ir(s,n,c),xc(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=gr(),c=Di(o);c.tag=2,s!=null&&(c.callback=s),s=Mi(n,c,o),s!==null&&(ir(s,n,o),xc(s,n,o))}};function jb(n,s,o,c,h,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):s.prototype&&s.prototype.isPureReactComponent?!fc(o,c)||!fc(h,m):!0}function Pb(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&qm.enqueueReplaceState(s,s.state,null)}function $a(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=w({},o));for(var h in n)o[h]===void 0&&(o[h]=n[h])}return o}function Lb(n){bd(n)}function zb(n){console.error(n)}function Ub(n){bd(n)}function Bd(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Bb(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hm(n,s,o){return o=Di(o),o.tag=3,o.payload={element:null},o.callback=function(){Bd(n,s)},o}function Fb(n){return n=Di(n),n.tag=3,n}function qb(n,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=c.value;n.payload=function(){return h(m)},n.callback=function(){Bb(s,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Bb(s,o,c),typeof h!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function YS(n,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Bo(s,o,h,!0),o=hr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?Zd():o.alternate===null&&Ht===0&&(Ht=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Nd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),pp(n,c,h)),!1;case 22:return o.flags|=65536,c===Nd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),pp(n,c,h)),!1}throw Error(r(435,o.tag))}return pp(n,c,h),Zd(),!1}if(et)return s=hr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==cm&&(n=Error(r(422),{cause:c}),gc(Cr(n,o)))):(c!==cm&&(s=Error(r(423),{cause:c}),gc(Cr(s,o))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=Cr(c,o),h=Hm(n.stateNode,c,h),vm(n,h),Ht!==4&&(Ht=2)),!1;var m=Error(r(520),{cause:c});if(m=Cr(m,o),Vc===null?Vc=[m]:Vc.push(m),Ht!==4&&(Ht=2),s===null)return!0;c=Cr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=h&-h,o.lanes|=n,n=Hm(o.stateNode,c,n),vm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Li===null||!Li.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Fb(h),qb(h,n,o,c),vm(o,h),!1}o=o.return}while(o!==null);return!1}var Gm=Error(r(461)),sn=!1;function Sn(n,s,o,c){s.child=n===null?Ky(s,null,o,c):Ha(s,n.child,o,c)}function Hb(n,s,o,c,h){o=o.render;var m=s.ref;if("ref"in c){var _={};for(var E in c)E!=="ref"&&(_[E]=c[E])}else _=c;return Ua(s),c=Am(n,s,o,_,m,h),E=Im(),n!==null&&!sn?(Nm(n,s,h),Gs(n,s,h)):(et&&E&&om(s),s.flags|=1,Sn(n,s,c,h),s.child)}function Gb(n,s,o,c,h){if(n===null){var m=o.type;return typeof m=="function"&&!sm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,$b(n,s,m,c,h)):(n=wd(o.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Zm(n,h)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:fc,o(_,c)&&n.ref===s.ref)return Gs(n,s,h)}return s.flags|=1,n=zs(m,c),n.ref=s.ref,n.return=s,s.child=n}function $b(n,s,o,c,h){if(n!==null){var m=n.memoizedProps;if(fc(m,c)&&n.ref===s.ref)if(sn=!1,s.pendingProps=c=m,Zm(n,h))(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,Gs(n,s,h)}return $m(n,s,o,c,h)}function Kb(n,s,o,c){var h=c.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=s.child=n.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~m}else c=0,s.child=null;return Yb(n,s,m,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ad(s,m!==null?m.cachePool:null),m!==null?Xy(s,m):wm(),Jy(s);else return c=s.lanes=536870912,Yb(n,s,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Ad(s,m.cachePool),Xy(s,m),Oi(),s.memoizedState=null):(n!==null&&Ad(s,null),wm(),Oi());return Sn(n,s,h,o),s.child}function Nc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Yb(n,s,o,c,h){var m=gm();return m=m===null?null:{parent:nn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Ad(s,null),wm(),Jy(s),n!==null&&Bo(n,s,c,!0),s.childLanes=h,null}function Fd(n,s){return s=Hd({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Qb(n,s,o){return Ha(s,n.child,null,o),n=Fd(s,s.pendingProps),n.flags|=2,fr(s),s.memoizedState=null,n}function QS(n,s,o){var c=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(et){if(c.mode==="hidden")return n=Fd(s,c),s.lanes=536870912,Nc(null,n);if(Em(s),(n=kt)?(n=ov(n,Mr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ai!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},o=My(n),o.return=s,s.child=o,Tn=s,kt=null)):n=null,n===null)throw Ni(s);return s.lanes=536870912,null}return Fd(s,c)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(Em(s),h)if(s.flags&256)s.flags&=-257,s=Qb(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(sn||Bo(n,s,o,!1),h=(o&n.childLanes)!==0,sn||h){if(c=St,c!==null&&(_=Vs(c,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,ja(n,_),ir(c,n,_),Gm;Zd(),s=Qb(n,s,o)}else n=m.treeContext,kt=Or(_.nextSibling),Tn=s,et=!0,Ii=null,Mr=!1,n!==null&&Vy(s,n),s=Fd(s,c),s.flags|=4096;return s}return n=zs(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function qd(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function $m(n,s,o,c,h){return Ua(s),o=Am(n,s,o,c,void 0,h),c=Im(),n!==null&&!sn?(Nm(n,s,h),Gs(n,s,h)):(et&&c&&om(s),s.flags|=1,Sn(n,s,o,h),s.child)}function Xb(n,s,o,c,h,m){return Ua(s),s.updateQueue=null,o=Zy(s,c,o,h),Wy(n),c=Im(),n!==null&&!sn?(Nm(n,s,m),Gs(n,s,m)):(et&&c&&om(s),s.flags|=1,Sn(n,s,o,m),s.child)}function Jb(n,s,o,c,h){if(Ua(s),s.stateNode===null){var m=Po,_=o.contextType;typeof _=="object"&&_!==null&&(m=En(_)),m=new o(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},bm(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?En(_):Po,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Fm(s,o,_,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&qm.enqueueReplaceState(m,m.state,null),Tc(s,c,m,h),wc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){m=s.stateNode;var E=s.memoizedProps,k=$a(o,E);m.props=k;var $=m.context,Z=o.contextType;_=Po,typeof Z=="object"&&Z!==null&&(_=En(Z));var ie=o.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==_)&&Pb(s,m,c,_),Ri=!1;var K=s.memoizedState;m.state=K,Tc(s,c,m,h),wc(),$=s.memoizedState,E||K!==$||Ri?(typeof ie=="function"&&(Fm(s,o,ie,c),$=s.memoizedState),(k=Ri||jb(s,o,k,c,K,$,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),m.props=c,m.state=$,m.context=_,c=k):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,_m(n,s),_=s.memoizedProps,Z=$a(o,_),m.props=Z,ie=s.pendingProps,K=m.context,$=o.contextType,k=Po,typeof $=="object"&&$!==null&&(k=En($)),E=o.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||K!==k)&&Pb(s,m,c,k),Ri=!1,K=s.memoizedState,m.state=K,Tc(s,c,m,h),wc();var J=s.memoizedState;_!==ie||K!==J||Ri||n!==null&&n.dependencies!==null&&Ed(n.dependencies)?(typeof E=="function"&&(Fm(s,o,E,c),J=s.memoizedState),(Z=Ri||jb(s,o,Z,c,K,J,k)||n!==null&&n.dependencies!==null&&Ed(n.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,J,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,J,k)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=J),m.props=c,m.state=J,m.context=k,c=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),c=!1)}return m=c,qd(n,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&c?(s.child=Ha(s,n.child,null,h),s.child=Ha(s,null,o,h)):Sn(n,s,o,h),s.memoizedState=m.state,n=s.child):n=Gs(n,s,h),n}function Wb(n,s,o,c){return La(),s.flags|=256,Sn(n,s,o,c),s.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(n){return{baseLanes:n,cachePool:By()}}function Qm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=pr),n}function Zb(n,s,o){var c=s.pendingProps,h=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(h?ki(s):Oi(),(n=kt)?(n=ov(n,Mr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ai!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},o=My(n),o.return=s,s.child=o,Tn=s,kt=null)):n=null,n===null)throw Ni(s);return Dp(n)?s.lanes=32:s.lanes=536870912,null}var E=c.children;return c=c.fallback,h?(Oi(),h=s.mode,E=Hd({mode:"hidden",children:E},h),c=Pa(c,h,o,null),E.return=s,c.return=s,E.sibling=c,s.child=E,c=s.child,c.memoizedState=Ym(o),c.childLanes=Qm(n,_,o),s.memoizedState=Km,Nc(null,c)):(ki(s),Xm(s,E))}var k=n.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(m)s.flags&256?(ki(s),s.flags&=-257,s=Jm(n,s,o)):s.memoizedState!==null?(Oi(),s.child=n.child,s.flags|=128,s=null):(Oi(),E=c.fallback,h=s.mode,c=Hd({mode:"visible",children:c.children},h),E=Pa(E,h,o,null),E.flags|=2,c.return=s,E.return=s,c.sibling=E,s.child=c,Ha(s,n.child,null,o),c=s.child,c.memoizedState=Ym(o),c.childLanes=Qm(n,_,o),s.memoizedState=Km,s=Nc(null,c));else if(ki(s),Dp(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var $=_.dgst;_=$,c=Error(r(419)),c.stack="",c.digest=_,gc({value:c,source:null,stack:null}),s=Jm(n,s,o)}else if(sn||Bo(n,s,o,!1),_=(o&n.childLanes)!==0,sn||_){if(_=St,_!==null&&(c=Vs(_,o),c!==0&&c!==k.retryLane))throw k.retryLane=c,ja(n,c),ir(_,n,c),Gm;Rp(E)||Zd(),s=Jm(n,s,o)}else Rp(E)?(s.flags|=192,s.child=n.child,s=null):(n=k.treeContext,kt=Or(E.nextSibling),Tn=s,et=!0,Ii=null,Mr=!1,n!==null&&Vy(s,n),s=Xm(s,c.children),s.flags|=4096);return s}return h?(Oi(),E=c.fallback,h=s.mode,k=n.child,$=k.sibling,c=zs(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,$!==null?E=zs($,E):(E=Pa(E,h,o,null),E.flags|=2),E.return=s,c.return=s,c.sibling=E,s.child=c,Nc(null,c),c=s.child,E=n.child.memoizedState,E===null?E=Ym(o):(h=E.cachePool,h!==null?(k=nn._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=By(),E={baseLanes:E.baseLanes|o,cachePool:h}),c.memoizedState=E,c.childLanes=Qm(n,_,o),s.memoizedState=Km,Nc(n.child,c)):(ki(s),o=n.child,n=o.sibling,o=zs(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Xm(n,s){return s=Hd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Hd(n,s){return n=dr(22,n,null,s),n.lanes=0,n}function Jm(n,s,o){return Ha(s,n.child,null,o),n=Xm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function e_(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),hm(n.return,s,o)}function Wm(n,s,o,c,h,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=h,_.treeForkCount=m)}function t_(n,s,o){var c=s.pendingProps,h=c.revealOrder,m=c.tail;c=c.children;var _=Qt.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,ue(Qt,_),Sn(n,s,c,o),c=et?pc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e_(n,o,s);else if(n.tag===19)e_(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(o=s.child,h=null;o!==null;)n=o.alternate,n!==null&&Md(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),Wm(s,!1,h,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Md(n)===null){s.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}Wm(s,!0,o,null,m,c);break;case"together":Wm(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Gs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Pi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Bo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=zs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=zs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Zm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ed(n)))}function XS(n,s,o){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),Ci(s,nn,n.memoizedState.cache),La();break;case 27:case 5:Tt(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:Ci(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Em(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ki(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Zb(n,s,o):(ki(s),n=Gs(n,s,o),n!==null?n.sibling:null);ki(s);break;case 19:var h=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Bo(n,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return t_(n,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(Qt,Qt.current),c)break;return null;case 22:return s.lanes=0,Kb(n,s,o,s.pendingProps);case 24:Ci(s,nn,n.memoizedState.cache)}return Gs(n,s,o)}function n_(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)sn=!0;else{if(!Zm(n,o)&&(s.flags&128)===0)return sn=!1,XS(n,s,o);sn=(n.flags&131072)!==0}else sn=!1,et&&(s.flags&1048576)!==0&&Oy(s,pc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=Fa(s.elementType),s.type=n,typeof n=="function")sm(n)?(c=$a(n,c),s.tag=1,s=Jb(null,s,n,c,o)):(s.tag=0,s=$m(null,s,n,c,o));else{if(n!=null){var h=n.$$typeof;if(h===le){s.tag=11,s=Hb(null,s,n,c,o);break e}else if(h===S){s.tag=14,s=Gb(null,s,n,c,o);break e}}throw s=me(n)||n,Error(r(306,s,""))}}return s;case 0:return $m(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=$a(c,s.pendingProps),Jb(n,s,c,h,o);case 3:e:{if(rt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var m=s.memoizedState;h=m.element,_m(n,s),Tc(s,c,null,o);var _=s.memoizedState;if(c=_.cache,Ci(s,nn,c),c!==m.cache&&fm(s,[nn],o,!0),wc(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Wb(n,s,c,o);break e}else if(c!==h){h=Cr(Error(r(424)),s),gc(h),s=Wb(n,s,c,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,kt=Or(n.firstChild),Tn=s,et=!0,Ii=null,Mr=!0,o=Ky(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(La(),c===h){s=Gs(n,s,o);break e}Sn(n,s,c,o)}s=s.child}return s;case 26:return qd(n,s),n===null?(o=fv(s.type,null,s.pendingProps,null))?s.memoizedState=o:et||(o=s.type,n=s.pendingProps,c=ah(ge.current).createElement(o),c[Vt]=s,c[Ft]=n,An(c,o,n),_e(c),s.stateNode=c):s.memoizedState=fv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Tt(s),n===null&&et&&(c=s.stateNode=uv(s.type,s.pendingProps,ge.current),Tn=s,Mr=!0,h=kt,Fi(s.type)?(Mp=h,kt=Or(c.firstChild)):kt=h),Sn(n,s,s.pendingProps.children,o),qd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((h=c=kt)&&(c=AA(c,s.type,s.pendingProps,Mr),c!==null?(s.stateNode=c,Tn=s,kt=Or(c.firstChild),Mr=!1,h=!0):h=!1),h||Ni(s)),Tt(s),h=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,Ip(h,m)?c=null:_!==null&&Ip(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=Am(n,s,BS,null,null,o),qc._currentValue=h),qd(n,s),Sn(n,s,c,o),s.child;case 6:return n===null&&et&&((n=o=kt)&&(o=IA(o,s.pendingProps,Mr),o!==null?(s.stateNode=o,Tn=s,kt=null,n=!0):n=!1),n||Ni(s)),null;case 13:return Zb(n,s,o);case 4:return rt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ha(s,null,c,o):Sn(n,s,c,o),s.child;case 11:return Hb(n,s,s.type,s.pendingProps,o);case 7:return Sn(n,s,s.pendingProps,o),s.child;case 8:return Sn(n,s,s.pendingProps.children,o),s.child;case 12:return Sn(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ci(s,s.type,c.value),Sn(n,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,Ua(s),h=En(h),c=c(h),s.flags|=1,Sn(n,s,c,o),s.child;case 14:return Gb(n,s,s.type,s.pendingProps,o);case 15:return $b(n,s,s.type,s.pendingProps,o);case 19:return t_(n,s,o);case 31:return QS(n,s,o);case 22:return Kb(n,s,o,s.pendingProps);case 24:return Ua(s),c=En(nn),n===null?(h=gm(),h===null&&(h=St,m=mm(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),s.memoizedState={parent:c,cache:h},bm(s),Ci(s,nn,h)):((n.lanes&o)!==0&&(_m(n,s),Tc(s,null,null,o),wc()),h=n.memoizedState,m=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ci(s,nn,c)):(c=m.cache,Ci(s,nn,c),c!==h.cache&&fm(s,[nn],o,!0))),Sn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function $s(n){n.flags|=4}function ep(n,s,o,c,h){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(C_())n.flags|=8192;else throw qa=Nd,ym}else n.flags&=-16777217}function r_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!bv(s))if(C_())n.flags|=8192;else throw qa=Nd,ym}function Gd(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Fr():536870912,n.lanes|=s,Zo|=s)}function Cc(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function JS(n,s,o){var c=s.pendingProps;switch(lm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Ot(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fs(nn),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Uo(s)?$s(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,um())),Ot(s),null;case 26:var h=s.type,m=s.memoizedState;return n===null?($s(s),m!==null?(Ot(s),r_(s,m)):(Ot(s),ep(s,h,null,c,o))):m?m!==n.memoizedState?($s(s),Ot(s),r_(s,m)):(Ot(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&$s(s),Ot(s),ep(s,h,n,c,o)),null;case 27:if(Xn(s),o=ge.current,h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&$s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Ot(s),null}n=ve.current,Uo(s)?jy(s):(n=uv(h,c,o),s.stateNode=n,$s(s))}return Ot(s),null;case 5:if(Xn(s),h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&$s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Ot(s),null}if(m=ve.current,Uo(s))jy(s);else{var _=ah(ge.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(h,{is:c.is}):_.createElement(h)}}m[Vt]=s,m[Ft]=c;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(An(m,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&$s(s)}}return Ot(s),ep(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&$s(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=ge.current,Uo(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,h=Tn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[Vt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Z_(n.nodeValue,o)),n||Ni(s,!0)}else n=ah(n).createTextNode(c),n[Vt]=s,s.stateNode=n}return Ot(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=Uo(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Vt]=s}else La(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),n=!1}else o=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(fr(s),s):(fr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ot(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Uo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Vt]=s}else La(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),h=!1}else h=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(fr(s),s):(fr(s),null)}return fr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Gd(s,s.updateQueue),Ot(s),null);case 4:return Ge(),n===null&&wp(s.stateNode.containerInfo),Ot(s),null;case 10:return Fs(s.type),Ot(s),null;case 19:if(ne(Qt),c=s.memoizedState,c===null)return Ot(s),null;if(h=(s.flags&128)!==0,m=c.rendering,m===null)if(h)Cc(c,!1);else{if(Ht!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Md(n),m!==null){for(s.flags|=128,Cc(c,!1),n=m.updateQueue,s.updateQueue=n,Gd(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Dy(o,n),o=o.sibling;return ue(Qt,Qt.current&1|2),et&&Us(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&Zt()>Xd&&(s.flags|=128,h=!0,Cc(c,!1),s.lanes=4194304)}else{if(!h)if(n=Md(m),n!==null){if(s.flags|=128,h=!0,n=n.updateQueue,s.updateQueue=n,Gd(s,n),Cc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!et)return Ot(s),null}else 2*Zt()-c.renderingStartTime>Xd&&o!==536870912&&(s.flags|=128,h=!0,Cc(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(n=c.last,n!==null?n.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Zt(),n.sibling=null,o=Qt.current,ue(Qt,h?o&1|2:o&1),et&&Us(s,c.treeForkCount),n):(Ot(s),null);case 22:case 23:return fr(s),Tm(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),o=s.updateQueue,o!==null&&Gd(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&ne(Ba),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Fs(nn),Ot(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function WS(n,s){switch(lm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Fs(nn),Ge(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Xn(s),null;case 31:if(s.memoizedState!==null){if(fr(s),s.alternate===null)throw Error(r(340));La()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(fr(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));La()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(Qt),null;case 4:return Ge(),null;case 10:return Fs(s.type),null;case 22:case 23:return fr(s),Tm(),n!==null&&ne(Ba),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Fs(nn),null;case 25:return null;default:return null}}function s_(n,s){switch(lm(s),s.tag){case 3:Fs(nn),Ge();break;case 26:case 27:case 5:Xn(s);break;case 4:Ge();break;case 31:s.memoizedState!==null&&fr(s);break;case 13:fr(s);break;case 19:ne(Qt);break;case 10:Fs(s.type);break;case 22:case 23:fr(s),Tm(),n!==null&&ne(Ba);break;case 24:Fs(nn)}}function Rc(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&n)===n){c=void 0;var m=o.create,_=o.inst;c=m(),_.destroy=c}o=o.next}while(o!==h)}}catch(E){ft(s,s.return,E)}}function Vi(n,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&n)===n){var _=c.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=s;var k=o,$=E;try{$()}catch(Z){ft(h,k,Z)}}}c=c.next}while(c!==m)}}catch(Z){ft(s,s.return,Z)}}function i_(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Qy(s,o)}catch(c){ft(n,n.return,c)}}}function a_(n,s,o){o.props=$a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ft(n,s,c)}}function Dc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(h){ft(n,s,h)}}function bs(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){ft(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ft(n,s,h)}else o.current=null}function o_(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){ft(n,n.return,h)}}function tp(n,s,o){try{var c=n.stateNode;vA(c,n.type,o,s),c[Ft]=s}catch(h){ft(n,n.return,h)}}function l_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Fi(n.type)||n.tag===4}function np(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||l_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Fi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rp(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Gr));else if(c!==4&&(c===27&&Fi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(rp(n,s,o),n=n.sibling;n!==null;)rp(n,s,o),n=n.sibling}function $d(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&Fi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for($d(n,s,o),n=n.sibling;n!==null;)$d(n,s,o),n=n.sibling}function c_(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);An(s,c,o),s[Vt]=n,s[Ft]=o}catch(m){ft(n,n.return,m)}}var Ks=!1,an=!1,sp=!1,u_=typeof WeakSet=="function"?WeakSet:Set,yn=null;function ZS(n,s){if(n=n.containerInfo,Sp=fh,n=wy(n),Jf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,E=-1,k=-1,$=0,Z=0,ie=n,K=null;t:for(;;){for(var J;ie!==o||h!==0&&ie.nodeType!==3||(E=_+h),ie!==m||c!==0&&ie.nodeType!==3||(k=_+c),ie.nodeType===3&&(_+=ie.nodeValue.length),(J=ie.firstChild)!==null;)K=ie,ie=J;for(;;){if(ie===n)break t;if(K===o&&++$===h&&(E=_),K===m&&++Z===c&&(k=_),(J=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=J}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ap={focusedElem:n,selectionRange:o},fh=!1,yn=s;yn!==null;)if(s=yn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,yn=n;else for(;yn!==null;){switch(s=yn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)h=n[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,h=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Ee=$a(o.type,h);n=c.getSnapshotBeforeUpdate(Ee,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(De){ft(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Cp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,yn=n;break}yn=s.return}}function d_(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Qs(n,o),c&4&&Rc(5,o);break;case 1:if(Qs(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){ft(o,o.return,_)}else{var h=$a(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(o,o.return,_)}}c&64&&i_(o),c&512&&Dc(o,o.return);break;case 3:if(Qs(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Qy(n,s)}catch(_){ft(o,o.return,_)}}break;case 27:s===null&&c&4&&c_(o);case 26:case 5:Qs(n,o),s===null&&c&4&&o_(o),c&512&&Dc(o,o.return);break;case 12:Qs(n,o);break;case 31:Qs(n,o),c&4&&m_(n,o);break;case 13:Qs(n,o),c&4&&p_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=lA.bind(null,o),NA(n,o))));break;case 22:if(c=o.memoizedState!==null||Ks,!c){s=s!==null&&s.memoizedState!==null||an,h=Ks;var m=an;Ks=c,(an=s)&&!m?Xs(n,o,(o.subtreeFlags&8772)!==0):Qs(n,o),Ks=h,an=m}break;case 30:break;default:Qs(n,o)}}function h_(n){var s=n.alternate;s!==null&&(n.alternate=null,h_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&cn(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Pt=null,tr=!1;function Ys(n,s,o){for(o=o.child;o!==null;)f_(n,s,o),o=o.sibling}function f_(n,s,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Bn,o)}catch{}switch(o.tag){case 26:an||bs(o,s),Ys(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||bs(o,s);var c=Pt,h=tr;Fi(o.type)&&(Pt=o.stateNode,tr=!1),Ys(n,s,o),Uc(o.stateNode),Pt=c,tr=h;break;case 5:an||bs(o,s);case 6:if(c=Pt,h=tr,Pt=null,Ys(n,s,o),Pt=c,tr=h,Pt!==null)if(tr)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(o.stateNode)}catch(m){ft(o,s,m)}else try{Pt.removeChild(o.stateNode)}catch(m){ft(o,s,m)}break;case 18:Pt!==null&&(tr?(n=Pt,iv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ol(n)):iv(Pt,o.stateNode));break;case 4:c=Pt,h=tr,Pt=o.stateNode.containerInfo,tr=!0,Ys(n,s,o),Pt=c,tr=h;break;case 0:case 11:case 14:case 15:Vi(2,o,s),an||Vi(4,o,s),Ys(n,s,o);break;case 1:an||(bs(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&a_(o,s,c)),Ys(n,s,o);break;case 21:Ys(n,s,o);break;case 22:an=(c=an)||o.memoizedState!==null,Ys(n,s,o),an=c;break;default:Ys(n,s,o)}}function m_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ol(n)}catch(o){ft(s,s.return,o)}}}function p_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ol(n)}catch(o){ft(s,s.return,o)}}function eA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new u_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new u_),s;default:throw Error(r(435,n.tag))}}function Kd(n,s){var o=eA(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var h=cA.bind(null,n,c);c.then(h,h)}})}function nr(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],m=n,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Fi(E.type)){Pt=E.stateNode,tr=!1;break e}break;case 5:Pt=E.stateNode,tr=!1;break e;case 3:case 4:Pt=E.stateNode.containerInfo,tr=!0;break e}E=E.return}if(Pt===null)throw Error(r(160));f_(m,_,h),Pt=null,tr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)g_(s,n),s=s.sibling}var Jr=null;function g_(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:nr(s,n),rr(n),c&4&&(Vi(3,n,n.return),Rc(3,n),Vi(5,n,n.return));break;case 1:nr(s,n),rr(n),c&512&&(an||o===null||bs(o,o.return)),c&64&&Ks&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=Jr;if(nr(s,n),rr(n),c&512&&(an||o===null||bs(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":m=h.getElementsByTagName("title")[0],(!m||m[kn]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(c),h.head.insertBefore(m,h.querySelector("head > title"))),An(m,c,o),m[Vt]=n,_e(m),c=m;break e;case"link":var _=gv("link","href",h).get(c+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}m=h.createElement(c),An(m,c,o),h.head.appendChild(m);break;case"meta":if(_=gv("meta","content",h).get(c+(o.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}m=h.createElement(c),An(m,c,o),h.head.appendChild(m);break;default:throw Error(r(468,c))}m[Vt]=n,_e(m),c=m}n.stateNode=c}else yv(h,n.type,n.stateNode);else n.stateNode=pv(h,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?yv(h,n.type,n.stateNode):pv(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&tp(n,n.memoizedProps,o.memoizedProps)}break;case 27:nr(s,n),rr(n),c&512&&(an||o===null||bs(o,o.return)),o!==null&&c&4&&tp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(nr(s,n),rr(n),c&512&&(an||o===null||bs(o,o.return)),n.flags&32){h=n.stateNode;try{er(h,"")}catch(Ee){ft(n,n.return,Ee)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,tp(n,h,o!==null?o.memoizedProps:h)),c&1024&&(sp=!0);break;case 6:if(nr(s,n),rr(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ee){ft(n,n.return,Ee)}}break;case 3:if(ch=null,h=Jr,Jr=oh(s.containerInfo),nr(s,n),Jr=h,rr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ol(s.containerInfo)}catch(Ee){ft(n,n.return,Ee)}sp&&(sp=!1,y_(n));break;case 4:c=Jr,Jr=oh(n.stateNode.containerInfo),nr(s,n),rr(n),Jr=c;break;case 12:nr(s,n),rr(n);break;case 31:nr(s,n),rr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 13:nr(s,n),rr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Qd=Zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 22:h=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,$=Ks,Z=an;if(Ks=$||h,an=Z||k,nr(s,n),an=Z,Ks=$,rr(n),c&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||k||Ks||an||Ka(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){k=o=s;try{if(m=k.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=k.stateNode;var ie=k.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ee){ft(k,k.return,Ee)}}}else if(s.tag===6){if(o===null){k=s;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(Ee){ft(k,k.return,Ee)}}}else if(s.tag===18){if(o===null){k=s;try{var J=k.stateNode;h?av(J,!0):av(k.stateNode,!1)}catch(Ee){ft(k,k.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Kd(n,o))));break;case 19:nr(s,n),rr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 30:break;case 21:break;default:nr(s,n),rr(n)}}function rr(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(l_(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var h=o.stateNode,m=np(n);$d(n,m,h);break;case 5:var _=o.stateNode;o.flags&32&&(er(_,""),o.flags&=-33);var E=np(n);$d(n,E,_);break;case 3:case 4:var k=o.stateNode.containerInfo,$=np(n);rp(n,$,k);break;default:throw Error(r(161))}}catch(Z){ft(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function y_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;y_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Qs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)d_(n,s.alternate,s),s=s.sibling}function Ka(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Vi(4,s,s.return),Ka(s);break;case 1:bs(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&a_(s,s.return,o),Ka(s);break;case 27:Uc(s.stateNode);case 26:case 5:bs(s,s.return),Ka(s);break;case 22:s.memoizedState===null&&Ka(s);break;case 30:Ka(s);break;default:Ka(s)}n=n.sibling}}function Xs(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Xs(h,m,o),Rc(4,m);break;case 1:if(Xs(h,m,o),c=m,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){ft(c,c.return,$)}if(c=m,h=c.updateQueue,h!==null){var E=c.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Yy(k[h],E)}catch($){ft(c,c.return,$)}}o&&_&64&&i_(m),Dc(m,m.return);break;case 27:c_(m);case 26:case 5:Xs(h,m,o),o&&c===null&&_&4&&o_(m),Dc(m,m.return);break;case 12:Xs(h,m,o);break;case 31:Xs(h,m,o),o&&_&4&&m_(h,m);break;case 13:Xs(h,m,o),o&&_&4&&p_(h,m);break;case 22:m.memoizedState===null&&Xs(h,m,o),Dc(m,m.return);break;case 30:break;default:Xs(h,m,o)}s=s.sibling}}function ip(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&yc(o))}function ap(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yc(n))}function Wr(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)b_(n,s,o,c),s=s.sibling}function b_(n,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Wr(n,s,o,c),h&2048&&Rc(9,s);break;case 1:Wr(n,s,o,c);break;case 3:Wr(n,s,o,c),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yc(n)));break;case 12:if(h&2048){Wr(n,s,o,c),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){ft(s,s.return,k)}}else Wr(n,s,o,c);break;case 31:Wr(n,s,o,c);break;case 13:Wr(n,s,o,c);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Wr(n,s,o,c):Mc(n,s):m._visibility&2?Wr(n,s,o,c):(m._visibility|=2,Xo(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),h&2048&&ip(_,s);break;case 24:Wr(n,s,o,c),h&2048&&ap(s.alternate,s);break;default:Wr(n,s,o,c)}}function Xo(n,s,o,c,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,E=o,k=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:Xo(m,_,E,k,h),Rc(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Xo(m,_,E,k,h):Mc(m,_):(Z._visibility|=2,Xo(m,_,E,k,h)),h&&$&2048&&ip(_.alternate,_);break;case 24:Xo(m,_,E,k,h),h&&$&2048&&ap(_.alternate,_);break;default:Xo(m,_,E,k,h)}s=s.sibling}}function Mc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,h=c.flags;switch(c.tag){case 22:Mc(o,c),h&2048&&ip(c.alternate,c);break;case 24:Mc(o,c),h&2048&&ap(c.alternate,c);break;default:Mc(o,c)}s=s.sibling}}var kc=8192;function Jo(n,s,o){if(n.subtreeFlags&kc)for(n=n.child;n!==null;)__(n,s,o),n=n.sibling}function __(n,s,o){switch(n.tag){case 26:Jo(n,s,o),n.flags&kc&&n.memoizedState!==null&&UA(o,Jr,n.memoizedState,n.memoizedProps);break;case 5:Jo(n,s,o);break;case 3:case 4:var c=Jr;Jr=oh(n.stateNode.containerInfo),Jo(n,s,o),Jr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=kc,kc=16777216,Jo(n,s,o),kc=c):Jo(n,s,o));break;default:Jo(n,s,o)}}function v_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Oc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];yn=c,w_(c,n)}v_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)x_(n),n=n.sibling}function x_(n){switch(n.tag){case 0:case 11:case 15:Oc(n),n.flags&2048&&Vi(9,n,n.return);break;case 3:Oc(n);break;case 12:Oc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Yd(n)):Oc(n);break;default:Oc(n)}}function Yd(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];yn=c,w_(c,n)}v_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Vi(8,s,s.return),Yd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Yd(s));break;default:Yd(s)}n=n.sibling}}function w_(n,s){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:Vi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,yn=c;else e:for(o=n;yn!==null;){c=yn;var h=c.sibling,m=c.return;if(h_(c),c===o){yn=null;break e}if(h!==null){h.return=m,yn=h;break e}yn=m}}}var tA={getCacheForType:function(n){var s=En(nn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return En(nn).controller.signal}},nA=typeof WeakMap=="function"?WeakMap:Map,ct=0,St=null,$e=null,Qe=0,ht=0,mr=null,ji=!1,Wo=!1,op=!1,Js=0,Ht=0,Pi=0,Ya=0,lp=0,pr=0,Zo=0,Vc=null,sr=null,cp=!1,Qd=0,T_=0,Xd=1/0,Jd=null,Li=null,hn=0,zi=null,el=null,Ws=0,up=0,dp=null,E_=null,jc=0,hp=null;function gr(){return(ct&2)!==0&&Qe!==0?Qe&-Qe:q.T!==null?bp():gi()}function S_(){if(pr===0)if((Qe&536870912)===0||et){var n=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),pr=n}else pr=536870912;return n=hr.current,n!==null&&(n.flags|=32),pr}function ir(n,s,o){(n===St&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(tl(n,0),Ui(n,Qe,pr,!1)),qr(n,o),((ct&2)===0||n!==St)&&(n===St&&((ct&2)===0&&(Ya|=o),Ht===4&&Ui(n,Qe,pr,!1)),_s(n))}function A_(n,s,o){if((ct&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||xn(n,s),h=c?iA(n,s):mp(n,s,!0),m=c;do{if(h===0){Wo&&!c&&Ui(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!rA(o)){h=mp(n,s,!1),m=!1;continue}if(h===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=n;h=Vc;var k=E.current.memoizedState.isDehydrated;if(k&&(tl(E,_).flags|=256),_=mp(E,_,!1),_!==2){if(op&&!k){E.errorRecoveryDisabledLanes|=m,Ya|=m,h=4;break e}m=sr,sr=h,m!==null&&(sr===null?sr=m:sr.push.apply(sr,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){tl(n,0),Ui(n,s,0,!0);break}e:{switch(c=n,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ui(c,s,pr,!ji);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Qd+300-Zt(),10<h)){if(Ui(c,s,pr,!ji),Mn(c,0,!0)!==0)break e;Ws=s,c.timeoutHandle=rv(I_.bind(null,c,o,sr,Jd,cp,s,pr,Ya,Zo,ji,m,"Throttled",-0,0),h);break e}I_(c,o,sr,Jd,cp,s,pr,Ya,Zo,ji,m,null,-0,0)}}break}while(!0);_s(n)}function I_(n,s,o,c,h,m,_,E,k,$,Z,ie,K,J){if(n.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gr},__(s,m,ie);var Ee=(m&62914560)===m?Qd-Zt():(m&4194048)===m?T_-Zt():0;if(Ee=BA(ie,Ee),Ee!==null){Ws=m,n.cancelPendingCommit=Ee(V_.bind(null,n,s,m,o,c,h,_,E,k,Z,ie,null,K,J)),Ui(n,m,_,!$);return}}V_(n,s,m,o,c,h,_,E,k)}function rA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],m=h.getSnapshot;h=h.value;try{if(!ur(m(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ui(n,s,o,c){s&=~lp,s&=~Ya,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var h=s;0<h;){var m=31-At(h),_=1<<m;c[m]=-1,h&=~_}o!==0&&Hr(n,o,s)}function Wd(){return(ct&6)===0?(Pc(0),!1):!0}function fp(){if($e!==null){if(ht===0)var n=$e.return;else n=$e,Bs=za=null,Cm(n),Go=null,_c=0,n=$e;for(;n!==null;)s_(n.alternate,n),n=n.return;$e=null}}function tl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,TA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ws=0,fp(),St=n,$e=o=zs(n.current,null),Qe=s,ht=0,mr=null,ji=!1,Wo=xn(n,s),op=!1,Zo=pr=lp=Ya=Pi=Ht=0,sr=Vc=null,cp=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var h=31-At(c),m=1<<h;s|=n[h],c&=~m}return Js=s,_d(),o}function N_(n,s){Be=null,q.H=Ic,s===Ho||s===Id?(s=Hy(),ht=3):s===ym?(s=Hy(),ht=4):ht=s===Gm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mr=s,$e===null&&(Ht=1,Bd(n,Cr(s,n.current)))}function C_(){var n=hr.current;return n===null?!0:(Qe&4194048)===Qe?kr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===kr:!1}function R_(){var n=q.H;return q.H=Ic,n===null?Ic:n}function D_(){var n=q.A;return q.A=tA,n}function Zd(){Ht=4,ji||(Qe&4194048)!==Qe&&hr.current!==null||(Wo=!0),(Pi&134217727)===0&&(Ya&134217727)===0||St===null||Ui(St,Qe,pr,!1)}function mp(n,s,o){var c=ct;ct|=2;var h=R_(),m=D_();(St!==n||Qe!==s)&&(Jd=null,tl(n,s)),s=!1;var _=Ht;e:do try{if(ht!==0&&$e!==null){var E=$e,k=mr;switch(ht){case 8:fp(),_=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(s=!0);var $=ht;if(ht=0,mr=null,nl(n,E,k,$),o&&Wo){_=0;break e}break;default:$=ht,ht=0,mr=null,nl(n,E,k,$)}}sA(),_=Ht;break}catch(Z){N_(n,Z)}while(!0);return s&&n.shellSuspendCounter++,Bs=za=null,ct=c,q.H=h,q.A=m,$e===null&&(St=null,Qe=0,_d()),_}function sA(){for(;$e!==null;)M_($e)}function iA(n,s){var o=ct;ct|=2;var c=R_(),h=D_();St!==n||Qe!==s?(Jd=null,Xd=Zt()+500,tl(n,s)):Wo=xn(n,s);e:do try{if(ht!==0&&$e!==null){s=$e;var m=mr;t:switch(ht){case 1:ht=0,mr=null,nl(n,s,m,1);break;case 2:case 9:if(Fy(m)){ht=0,mr=null,k_(s);break}s=function(){ht!==2&&ht!==9||St!==n||(ht=7),_s(n)},m.then(s,s);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Fy(m)?(ht=0,mr=null,k_(s)):(ht=0,mr=null,nl(n,s,m,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var E=$e;if(_?bv(_):E.stateNode.complete){ht=0,mr=null;var k=E.sibling;if(k!==null)$e=k;else{var $=E.return;$!==null?($e=$,eh($)):$e=null}break t}}ht=0,mr=null,nl(n,s,m,5);break;case 6:ht=0,mr=null,nl(n,s,m,6);break;case 8:fp(),Ht=6;break e;default:throw Error(r(462))}}aA();break}catch(Z){N_(n,Z)}while(!0);return Bs=za=null,q.H=c,q.A=h,ct=o,$e!==null?0:(St=null,Qe=0,_d(),Ht)}function aA(){for(;$e!==null&&!mi();)M_($e)}function M_(n){var s=n_(n.alternate,n,Js);n.memoizedProps=n.pendingProps,s===null?eh(n):$e=s}function k_(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Xb(o,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=Xb(o,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:Cm(s);default:s_(o,s),s=$e=Dy(s,Js),s=n_(o,s,Js)}n.memoizedProps=n.pendingProps,s===null?eh(n):$e=s}function nl(n,s,o,c){Bs=za=null,Cm(s),Go=null,_c=0;var h=s.return;try{if(YS(n,h,s,o,Qe)){Ht=1,Bd(n,Cr(o,n.current)),$e=null;return}}catch(m){if(h!==null)throw $e=h,m;Ht=1,Bd(n,Cr(o,n.current)),$e=null;return}s.flags&32768?(et||c===1?n=!0:Wo||(Qe&536870912)!==0?n=!1:(ji=n=!0,(c===2||c===9||c===3||c===6)&&(c=hr.current,c!==null&&c.tag===13&&(c.flags|=16384))),O_(s,n)):eh(s)}function eh(n){var s=n;do{if((s.flags&32768)!==0){O_(s,ji);return}n=s.return;var o=JS(s.alternate,s,Js);if(o!==null){$e=o;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=n}while(s!==null);Ht===0&&(Ht=5)}function O_(n,s){do{var o=WS(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Ht=6,$e=null}function V_(n,s,o,c,h,m,_,E,k){n.cancelPendingCommit=null;do th();while(hn!==0);if((ct&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=nm,Ea(n,o,m,_,E,k),n===St&&($e=St=null,Qe=0),el=s,zi=n,Ws=o,up=m,dp=h,E_=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,uA(Rn,function(){return U_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null,h=oe.p,oe.p=2,_=ct,ct|=4;try{ZS(n,s,o)}finally{ct=_,oe.p=h,q.T=c}}hn=1,j_(),P_(),L_()}}function j_(){if(hn===1){hn=0;var n=zi,s=el,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var c=oe.p;oe.p=2;var h=ct;ct|=4;try{g_(s,n);var m=Ap,_=wy(n.containerInfo),E=m.focusedElem,k=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&xy(E.ownerDocument.documentElement,E)){if(k!==null&&Jf(E)){var $=k.start,Z=k.end;if(Z===void 0&&(Z=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(Z,E.value.length);else{var ie=E.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var J=K.getSelection(),Ee=E.textContent.length,De=Math.min(k.start,Ee),wt=k.end===void 0?De:Math.min(k.end,Ee);!J.extend&&De>wt&&(_=wt,wt=De,De=_);var z=vy(E,De),V=vy(E,wt);if(z&&V&&(J.rangeCount!==1||J.anchorNode!==z.node||J.anchorOffset!==z.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var G=ie.createRange();G.setStart(z.node,z.offset),J.removeAllRanges(),De>wt?(J.addRange(G),J.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),J.addRange(G))}}}}for(ie=[],J=E;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var re=ie[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}fh=!!Sp,Ap=Sp=null}finally{ct=h,oe.p=c,q.T=o}}n.current=s,hn=2}}function P_(){if(hn===2){hn=0;var n=zi,s=el,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var c=oe.p;oe.p=2;var h=ct;ct|=4;try{d_(n,s.alternate,s)}finally{ct=h,oe.p=c,q.T=o}}hn=3}}function L_(){if(hn===4||hn===3){hn=0,Ye();var n=zi,s=el,o=Ws,c=E_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?hn=5:(hn=0,el=zi=null,z_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Li=null),zt(o),s=s.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Bn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=q.T,h=oe.p,oe.p=2,q.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var E=c[_];m(E.value,{componentStack:E.stack})}}finally{q.T=s,oe.p=h}}(Ws&3)!==0&&th(),_s(n),h=n.pendingLanes,(o&261930)!==0&&(h&42)!==0?n===hp?jc++:(jc=0,hp=n):jc=0,Pc(0)}}function z_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,yc(s)))}function th(){return j_(),P_(),L_(),U_()}function U_(){if(hn!==5)return!1;var n=zi,s=up;up=0;var o=zt(Ws),c=q.T,h=oe.p;try{oe.p=32>o?32:o,q.T=null,o=dp,dp=null;var m=zi,_=Ws;if(hn=0,el=zi=null,Ws=0,(ct&6)!==0)throw Error(r(331));var E=ct;if(ct|=4,x_(m.current),b_(m,m.current,_,o),ct=E,Pc(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Bn,m)}catch{}return!0}finally{oe.p=h,q.T=c,z_(n,s)}}function B_(n,s,o){s=Cr(o,s),s=Hm(n.stateNode,s,2),n=Mi(n,s,2),n!==null&&(qr(n,2),_s(n))}function ft(n,s,o){if(n.tag===3)B_(n,n,o);else for(;s!==null;){if(s.tag===3){B_(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Li===null||!Li.has(c))){n=Cr(o,n),o=Fb(2),c=Mi(s,o,2),c!==null&&(qb(o,c,s,n),qr(c,2),_s(c));break}}s=s.return}}function pp(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new nA;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(op=!0,h.add(o),n=oA.bind(null,n,s,o),s.then(n,n))}function oA(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,St===n&&(Qe&o)===o&&(Ht===4||Ht===3&&(Qe&62914560)===Qe&&300>Zt()-Qd?(ct&2)===0&&tl(n,0):lp|=o,Zo===Qe&&(Zo=0)),_s(n)}function F_(n,s){s===0&&(s=Fr()),n=ja(n,s),n!==null&&(qr(n,s),_s(n))}function lA(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),F_(n,o)}function cA(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),F_(n,o)}function uA(n,s){return yt(n,s)}var nh=null,rl=null,gp=!1,rh=!1,yp=!1,Bi=0;function _s(n){n!==rl&&n.next===null&&(rl===null?nh=rl=n:rl=rl.next=n),rh=!0,gp||(gp=!0,hA())}function Pc(n,s){if(!yp&&rh){yp=!0;do for(var o=!1,c=nh;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var m=0;else{var _=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=h&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,$_(c,m))}else m=Qe,m=Mn(c,c===St?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||xn(c,m)||(o=!0,$_(c,m));c=c.next}while(o);yp=!1}}function dA(){q_()}function q_(){rh=gp=!1;var n=0;Bi!==0&&wA()&&(n=Bi);for(var s=Zt(),o=null,c=nh;c!==null;){var h=c.next,m=H_(c,s);m===0?(c.next=null,o===null?nh=h:o.next=h,h===null&&(rl=o)):(o=c,(n!==0||(m&3)!==0)&&(rh=!0)),c=h}hn!==0&&hn!==5||Pc(n),Bi!==0&&(Bi=0)}function H_(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-At(m),E=1<<_,k=h[_];k===-1?((E&o)===0||(E&c)!==0)&&(h[_]=ks(E,s)):k<=s&&(n.expiredLanes|=E),m&=~E}if(s=St,o=Qe,o=Mn(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Lr(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||xn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Lr(c),zt(o)){case 2:case 8:o=is;break;case 32:o=Rn;break;case 268435456:o=Ur;break;default:o=Rn}return c=G_.bind(null,n),o=yt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Lr(c),n.callbackPriority=2,n.callbackNode=null,2}function G_(n,s){if(hn!==0&&hn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(th()&&n.callbackNode!==o)return null;var c=Qe;return c=Mn(n,n===St?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(A_(n,c,s),H_(n,Zt()),n.callbackNode!=null&&n.callbackNode===o?G_.bind(null,n):null)}function $_(n,s){if(th())return null;A_(n,s,!0)}function hA(){EA(function(){(ct&6)!==0?yt(Ds,dA):q_()})}function bp(){if(Bi===0){var n=Fo;n===0&&(n=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),Bi=n}return Bi}function K_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Io(""+n)}function Y_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function fA(n,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var m=K_((h[Ft]||null).action),_=c.submitter;_&&(s=(s=_[Ft]||null)?K_(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var E=new hs("action","action",null,c,h);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bi!==0){var k=_?Y_(h,_):new FormData(h);Lm(o,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(E.preventDefault(),k=_?Y_(h,_):new FormData(h),Lm(o,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var _p=0;_p<tm.length;_p++){var vp=tm[_p],mA=vp.toLowerCase(),pA=vp[0].toUpperCase()+vp.slice(1);Xr(mA,"on"+pA)}Xr(Sy,"onAnimationEnd"),Xr(Ay,"onAnimationIteration"),Xr(Iy,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(DS,"onTransitionRun"),Xr(MS,"onTransitionStart"),Xr(kS,"onTransitionCancel"),Xr(Ny,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Q_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],h=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var _=c.length-1;0<=_;_--){var E=c[_],k=E.instance,$=E.currentTarget;if(E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=$;try{m(h)}catch(Z){bd(Z)}h.currentTarget=null,m=k}else for(_=0;_<c.length;_++){if(E=c[_],k=E.instance,$=E.currentTarget,E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=$;try{m(h)}catch(Z){bd(Z)}h.currentTarget=null,m=k}}}}function Ke(n,s){var o=s[ze];o===void 0&&(o=s[ze]=new Set);var c=n+"__bubble";o.has(c)||(X_(s,n,2,!1),o.add(c))}function xp(n,s,o){var c=0;s&&(c|=4),X_(o,n,c,s)}var sh="_reactListening"+Math.random().toString(36).slice(2);function wp(n){if(!n[sh]){n[sh]=!0,Me.forEach(function(o){o!=="selectionchange"&&(gA.has(o)||xp(o,!1,n),xp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[sh]||(s[sh]=!0,xp("selectionchange",!1,s))}}function X_(n,s,o,c){switch(Sv(s)){case 2:var h=HA;break;case 8:h=GA;break;default:h=Pp}o=h.bind(null,s,o,n),h=void 0,!Na||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,o,{capture:!0,passive:h}):n.addEventListener(s,o,!0):h!==void 0?n.addEventListener(s,o,{passive:h}):n.addEventListener(s,o,!1)}function Tp(n,s,o,c,h){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var E=c.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=c.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=en(E),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){c=m=_;continue e}E=E.parentNode}}c=c.return}wi(function(){var $=m,Z=Sr(o),ie=[];e:{var K=Cy.get(n);if(K!==void 0){var J=hs,Ee=n;switch(n){case"keypress":if(Ra(o)===0)break e;case"keydown":case"keyup":J=pd;break;case"focusin":Ee="focus",J=Ma;break;case"focusout":Ee="blur",J=Ma;break;case"beforeblur":case"afterblur":J=Ma;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=b;break;case Sy:case Ay:case Iy:J=ld;break;case Ny:J=I;break;case"scroll":case"scrollend":J=lc;break;case"wheel":J=Q;break;case"copy":case"cut":case"paste":J=cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Ls;break;case"toggle":case"beforetoggle":J=Ue}var De=(s&4)!==0,wt=!De&&(n==="scroll"||n==="scrollend"),z=De?K!==null?K+"Capture":null:K;De=[];for(var V=$,G;V!==null;){var re=V;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||z===null||(re=$r(V,z),re!=null&&De.push(zc(V,re,G))),wt)break;V=V.return}0<De.length&&(K=new J(K,Ee,null,o,Z),ie.push({event:K,listeners:De}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",K&&o!==ic&&(Ee=o.relatedTarget||o.fromElement)&&(en(Ee)||Ee[we]))break e;if((J||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Ee=o.relatedTarget||o.toElement,J=$,Ee=Ee?en(Ee):null,Ee!==null&&(wt=l(Ee),De=Ee.tag,Ee!==wt||De!==5&&De!==27&&De!==6)&&(Ee=null)):(J=null,Ee=$),J!==Ee)){if(De=cc,re="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(De=Ls,re="onPointerLeave",z="onPointerEnter",V="pointer"),wt=J==null?K:te(J),G=Ee==null?K:te(Ee),K=new De(re,V+"leave",J,o,Z),K.target=wt,K.relatedTarget=G,re=null,en(Z)===$&&(De=new De(z,V+"enter",Ee,o,Z),De.target=G,De.relatedTarget=wt,re=De),wt=re,J&&Ee)t:{for(De=yA,z=J,V=Ee,G=0,re=z;re;re=De(re))G++;re=0;for(var Ce=V;Ce;Ce=De(Ce))re++;for(;0<G-re;)z=De(z),G--;for(;0<re-G;)V=De(V),re--;for(;G--;){if(z===V||V!==null&&z===V.alternate){De=z;break t}z=De(z),V=De(V)}De=null}else De=null;J!==null&&J_(ie,K,J,De,!1),Ee!==null&&wt!==null&&J_(ie,wt,Ee,De,!0)}}e:{if(K=$?te($):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var st=my;else if(hy(K))if(py)st=NS;else{st=AS;var Ae=SS}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&Ao($.elementType)&&(st=my):st=IS;if(st&&(st=st(n,$))){fy(ie,st,o,Z);break e}Ae&&Ae(n,K,$),n==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&nc(K,"number",K.value)}switch(Ae=$?te($):window,n){case"focusin":(hy(Ae)||Ae.contentEditable==="true")&&(Oo=Ae,Wf=$,mc=null);break;case"focusout":mc=Wf=Oo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,Ty(ie,o,Z);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Ty(ie,o,Z)}var Fe;if(lt)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ko?ka(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(ps&&o.locale!=="ko"&&(ko||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ko&&(Fe=oc()):(ds=Z,ac="value"in ds?ds.value:ds.textContent,ko=!0)),Ae=ih($,Xe),0<Ae.length&&(Xe=new ms(Xe,n,null,o,Z),ie.push({event:Xe,listeners:Ae}),Fe?Xe.data=Fe:(Fe=Mo(o),Fe!==null&&(Xe.data=Fe)))),(Fe=Ir?xS(n,o):wS(n,o))&&(Xe=ih($,"onBeforeInput"),0<Xe.length&&(Ae=new ms("onBeforeInput","beforeinput",null,o,Z),ie.push({event:Ae,listeners:Xe}),Ae.data=Fe)),fA(ie,n,$,o,Z)}Q_(ie,s)})}function zc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ih(n,s){for(var o=s+"Capture",c=[];n!==null;){var h=n,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=$r(n,o),h!=null&&c.unshift(zc(n,h,m)),h=$r(n,s),h!=null&&c.push(zc(n,h,m))),n.tag===3)return c;n=n.return}return[]}function yA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function J_(n,s,o,c,h){for(var m=s._reactName,_=[];o!==null&&o!==c;){var E=o,k=E.alternate,$=E.stateNode;if(E=E.tag,k!==null&&k===c)break;E!==5&&E!==26&&E!==27||$===null||(k=$,h?($=$r(o,m),$!=null&&_.unshift(zc(o,$,k))):h||($=$r(o,m),$!=null&&_.push(zc(o,$,k)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var bA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function W_(n){return(typeof n=="string"?n:""+n).replace(bA,`
`).replace(_A,"")}function Z_(n,s){return s=W_(s),W_(n)===s}function xt(n,s,o,c,h,m){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||er(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&er(n,""+c);break;case"className":dn(n,"class",c);break;case"tabIndex":dn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(n,o,c);break;case"style":sc(n,c,m);break;case"data":if(s!=="object"){dn(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Io(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&xt(n,s,"name",h.name,h,null),xt(n,s,"formEncType",h.formEncType,h,null),xt(n,s,"formMethod",h.formMethod,h,null),xt(n,s,"formTarget",h.formTarget,h,null)):(xt(n,s,"encType",h.encType,h,null),xt(n,s,"method",h.method,h,null),xt(n,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Io(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Gr);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Io(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),$n(n,"popover",c);break;case"xlinkActuate":Mt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Mt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Mt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Mt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Mt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Mt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$n(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=id.get(o)||o,$n(n,o,c))}}function Ep(n,s,o,c,h,m){switch(o){case"style":sc(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?er(n,c):(typeof c=="number"||typeof c=="bigint")&&er(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nt.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),m=n[Ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,h),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,h);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):$n(n,o,c)}}}function An(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(n,s,m,_,o,null)}}h&&xt(n,s,"srcSet",o.srcSet,o,null),c&&xt(n,s,"src",o.src,o,null);return;case"input":Ke("invalid",n);var E=m=_=h=null,k=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":h=Z;break;case"type":_=Z;break;case"checked":k=Z;break;case"defaultChecked":$=Z;break;case"value":m=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:xt(n,s,c,Z,o,null)}}nd(n,m,E,k,$,_,h,!1);return;case"select":Ke("invalid",n),c=_=m=null;for(h in o)if(o.hasOwnProperty(h)&&(E=o[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":c=E;default:xt(n,s,h,E,o,null)}s=m,o=_,n.multiple=!!c,s!=null?bi(n,!!c,s,!1):o!=null&&bi(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),m=h=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":c=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:xt(n,s,_,E,o,null)}_i(n,c,h,m);return;case"option":for(k in o)o.hasOwnProperty(k)&&(c=o[k],c!=null)&&(k==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":xt(n,s,k,c,o,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Ke(Lc[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(n,s,$,c,o,null)}return;default:if(Ao(s)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Ep(n,s,Z,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&xt(n,s,E,c,o,null))}function vA(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,E=null,k=null,$=null,Z=null;for(J in o){var ie=o[J];if(o.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=ie;default:c.hasOwnProperty(J)||xt(n,s,J,null,c,ie)}}for(var K in c){var J=c[K];if(ie=o[K],c.hasOwnProperty(K)&&(J!=null||ie!=null))switch(K){case"type":m=J;break;case"name":h=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":_=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==ie&&xt(n,s,K,J,c,ie)}}So(n,_,E,k,$,Z,m,h);return;case"select":J=_=E=K=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":J=k;default:c.hasOwnProperty(m)||xt(n,s,m,null,c,k)}for(h in c)if(m=c[h],k=o[h],c.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":K=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==k&&xt(n,s,h,m,c,k)}s=E,o=_,c=J,K!=null?bi(n,!!o,K,!1):!!c!=!!o&&(s!=null?bi(n,!!o,s,!0):bi(n,!!o,o?[]:"",!1));return;case"textarea":J=K=null;for(E in o)if(h=o[E],o.hasOwnProperty(E)&&h!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:xt(n,s,E,null,c,h)}for(_ in c)if(h=c[_],m=o[_],c.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":K=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&xt(n,s,_,h,c,m)}rd(n,K,J);return;case"option":for(var Ee in o)K=o[Ee],o.hasOwnProperty(Ee)&&K!=null&&!c.hasOwnProperty(Ee)&&(Ee==="selected"?n.selected=!1:xt(n,s,Ee,null,c,K));for(k in c)K=c[k],J=o[k],c.hasOwnProperty(k)&&K!==J&&(K!=null||J!=null)&&(k==="selected"?n.selected=K&&typeof K!="function"&&typeof K!="symbol":xt(n,s,k,K,c,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)K=o[De],o.hasOwnProperty(De)&&K!=null&&!c.hasOwnProperty(De)&&xt(n,s,De,null,c,K);for($ in c)if(K=c[$],J=o[$],c.hasOwnProperty($)&&K!==J&&(K!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:xt(n,s,$,K,c,J)}return;default:if(Ao(s)){for(var wt in o)K=o[wt],o.hasOwnProperty(wt)&&K!==void 0&&!c.hasOwnProperty(wt)&&Ep(n,s,wt,void 0,c,K);for(Z in c)K=c[Z],J=o[Z],!c.hasOwnProperty(Z)||K===J||K===void 0&&J===void 0||Ep(n,s,Z,K,c,J);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!c.hasOwnProperty(z)&&xt(n,s,z,null,c,K);for(ie in c)K=c[ie],J=o[ie],!c.hasOwnProperty(ie)||K===J||K==null&&J==null||xt(n,s,ie,K,c,J)}function ev(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var h=o[c],m=h.transferSize,_=h.initiatorType,E=h.duration;if(m&&E&&ev(_)){for(_=0,E=h.responseEnd,c+=1;c<o.length;c++){var k=o[c],$=k.startTime;if($>E)break;var Z=k.transferSize,ie=k.initiatorType;Z&&ev(ie)&&(k=k.responseEnd,_+=Z*(k<E?1:(E-$)/(k-$)))}if(--c,s+=8*(m+_)/(h.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Sp=null,Ap=null;function ah(n){return n.nodeType===9?n:n.ownerDocument}function tv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ip(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Np=null;function wA(){var n=window.event;return n&&n.type==="popstate"?n===Np?!1:(Np=n,!0):(Np=null,!1)}var rv=typeof setTimeout=="function"?setTimeout:void 0,TA=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(n){return sv.resolve(null).then(n).catch(SA)}:rv;function SA(n){setTimeout(function(){throw n})}function Fi(n){return n==="head"}function iv(n,s){var o=s,c=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(h),ol(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Uc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Uc(o);for(var m=o.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[kn]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Uc(n.ownerDocument.body);o=h}while(o);ol(s)}function av(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Cp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cp(o),cn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function AA(n,s,o,c){for(;n.nodeType===1;){var h=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[kn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Or(n.nextSibling),n===null)break}return null}function IA(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Or(n.nextSibling),n===null))return null;return n}function ov(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Or(n.nextSibling),n===null))return null;return n}function Rp(n){return n.data==="$?"||n.data==="$~"}function Dp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function NA(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Or(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Mp=null;function lv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Or(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function cv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function uv(n,s,o){switch(s=ah(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Uc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);cn(n)}var Vr=new Map,dv=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zs=oe.d;oe.d={f:CA,r:RA,D:DA,C:MA,L:kA,m:OA,X:jA,S:VA,M:PA};function CA(){var n=Zs.f(),s=Wd();return n||s}function RA(n){var s=tn(n);s!==null&&s.tag===5&&s.type==="form"?Nb(s):Zs.r(n)}var sl=typeof document>"u"?null:document;function hv(n,s,o){var c=sl;if(c&&typeof s=="string"&&s){var h=Zn(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),dv.has(h)||(dv.add(h),n={rel:n,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),An(s,"link",n),_e(s),c.head.appendChild(s)))}}function DA(n){Zs.D(n),hv("dns-prefetch",n,null)}function MA(n,s){Zs.C(n,s),hv("preconnect",n,s)}function kA(n,s,o){Zs.L(n,s,o);var c=sl;if(c&&n&&s){var h='link[rel="preload"][as="'+Zn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Zn(o.imageSizes)+'"]')):h+='[href="'+Zn(n)+'"]';var m=h;switch(s){case"style":m=il(n);break;case"script":m=al(n)}Vr.has(m)||(n=w({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Vr.set(m,n),c.querySelector(h)!==null||s==="style"&&c.querySelector(Bc(m))||s==="script"&&c.querySelector(Fc(m))||(s=c.createElement("link"),An(s,"link",n),_e(s),c.head.appendChild(s)))}}function OA(n,s){Zs.m(n,s);var o=sl;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Zn(c)+'"][href="'+Zn(n)+'"]',m=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=al(n)}if(!Vr.has(m)&&(n=w({rel:"modulepreload",href:n},s),Vr.set(m,n),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fc(m)))return}c=o.createElement("link"),An(c,"link",n),_e(c),o.head.appendChild(c)}}}function VA(n,s,o){Zs.S(n,s,o);var c=sl;if(c&&n){var h=xe(c).hoistableStyles,m=il(n);s=s||"default";var _=h.get(m);if(!_){var E={loading:0,preload:null};if(_=c.querySelector(Bc(m)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Vr.get(m))&&kp(n,o);var k=_=c.createElement("link");_e(k),An(k,"link",n),k._p=new Promise(function($,Z){k.onload=$,k.onerror=Z}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,lh(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(m,_)}}}function jA(n,s){Zs.X(n,s);var o=sl;if(o&&n){var c=xe(o).hoistableScripts,h=al(n),m=c.get(h);m||(m=o.querySelector(Fc(h)),m||(n=w({src:n,async:!0},s),(s=Vr.get(h))&&Op(n,s),m=o.createElement("script"),_e(m),An(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function PA(n,s){Zs.M(n,s);var o=sl;if(o&&n){var c=xe(o).hoistableScripts,h=al(n),m=c.get(h);m||(m=o.querySelector(Fc(h)),m||(n=w({src:n,async:!0,type:"module"},s),(s=Vr.get(h))&&Op(n,s),m=o.createElement("script"),_e(m),An(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function fv(n,s,o,c){var h=(h=ge.current)?oh(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=il(o.href),o=xe(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=il(o.href);var m=xe(h).hoistableStyles,_=m.get(n);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=h.querySelector(Bc(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Vr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vr.set(n,o),m||LA(h,n,o,_.state))),s&&c===null)throw Error(r(528,""));return _}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=al(o),o=xe(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function il(n){return'href="'+Zn(n)+'"'}function Bc(n){return'link[rel="stylesheet"]['+n+"]"}function mv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function LA(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),An(s,"link",o),_e(s),n.head.appendChild(s))}function al(n){return'[src="'+Zn(n)+'"]'}function Fc(n){return"script[async]"+n}function pv(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(c)return s.instance=c,_e(c),c;var h=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_e(c),An(c,"style",h),lh(c,o.precedence,n),s.instance=c;case"stylesheet":h=il(o.href);var m=n.querySelector(Bc(h));if(m)return s.state.loading|=4,s.instance=m,_e(m),m;c=mv(o),(h=Vr.get(h))&&kp(c,h),m=(n.ownerDocument||n).createElement("link"),_e(m);var _=m;return _._p=new Promise(function(E,k){_.onload=E,_.onerror=k}),An(m,"link",c),s.state.loading|=4,lh(m,o.precedence,n),s.instance=m;case"script":return m=al(o.src),(h=n.querySelector(Fc(m)))?(s.instance=h,_e(h),h):(c=o,(h=Vr.get(m))&&(c=w({},o),Op(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),_e(h),An(h,"link",c),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,lh(c,o.precedence,n));return s.instance}function lh(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,m=h,_=0;_<c.length;_++){var E=c[_];if(E.dataset.precedence===s)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function kp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Op(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var ch=null;function gv(n,s,o){if(ch===null){var c=new Map,h=ch=new Map;h.set(o,c)}else h=ch,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),h=0;h<o.length;h++){var m=o[h];if(!(m[kn]||m[Vt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var E=c.get(_);E?E.push(m):c.set(_,[m])}}return c}function yv(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function zA(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function UA(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=il(c.href),m=s.querySelector(Bc(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=uh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,_e(m);return}m=s.ownerDocument||s,c=mv(c),(h=Vr.get(h))&&kp(c,h),m=m.createElement("link"),_e(m);var _=m;_._p=new Promise(function(E,k){_.onload=E,_.onerror=k}),An(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=uh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Vp=0;function BA(n,s){return n.stylesheets&&n.count===0&&hh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&hh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Vp===0&&(Vp=62500*xA());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&hh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Vp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var dh=null;function hh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,dh=new Map,s.forEach(FA,n),dh=null,uh.call(n))}function FA(n,s){if(!(s.state.loading&4)){var o=dh.get(n);if(o)var c=o.get(null);else{o=new Map,dh.set(n,o);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}h=s.instance,_=h.getAttribute("data-precedence"),m=o.get(_)||c,m===c&&o.set(null,h),o.set(_,h),this.count++,c=uh.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),m?m.parentNode.insertBefore(h,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function qA(n,s,o,c,h,m,_,E,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function _v(n,s,o,c,h,m,_,E,k,$,Z,ie){return n=new qA(n,s,o,_,k,$,Z,ie,E),s=1,m===!0&&(s|=24),m=dr(3,null,null,s),n.current=m,m.stateNode=n,s=mm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:s},bm(m),n}function vv(n){return n?(n=Po,n):Po}function xv(n,s,o,c,h,m){h=vv(h),c.context===null?c.context=h:c.pendingContext=h,c=Di(s),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Mi(n,c,s),o!==null&&(ir(o,n,s),xc(o,n,s))}function wv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function jp(n,s){wv(n,s),(n=n.alternate)&&wv(n,s)}function Tv(n){if(n.tag===13||n.tag===31){var s=ja(n,67108864);s!==null&&ir(s,n,67108864),jp(n,67108864)}}function Ev(n){if(n.tag===13||n.tag===31){var s=gr();s=gn(s);var o=ja(n,s);o!==null&&ir(o,n,s),jp(n,s)}}var fh=!0;function HA(n,s,o,c){var h=q.T;q.T=null;var m=oe.p;try{oe.p=2,Pp(n,s,o,c)}finally{oe.p=m,q.T=h}}function GA(n,s,o,c){var h=q.T;q.T=null;var m=oe.p;try{oe.p=8,Pp(n,s,o,c)}finally{oe.p=m,q.T=h}}function Pp(n,s,o,c){if(fh){var h=Lp(c);if(h===null)Tp(n,s,c,mh,o),Av(n,c);else if(KA(h,n,s,o,c))c.stopPropagation();else if(Av(n,c),s&4&&-1<$A.indexOf(n)){for(;h!==null;){var m=tn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=qn(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var k=1<<31-At(_);E.entanglements[1]|=k,_&=~k}_s(m),(ct&6)===0&&(Xd=Zt()+500,Pc(0))}}break;case 31:case 13:E=ja(m,2),E!==null&&ir(E,m,2),Wd(),jp(m,2)}if(m=Lp(c),m===null&&Tp(n,s,c,mh,o),m===h)break;h=m}h!==null&&c.stopPropagation()}else Tp(n,s,c,null,o)}}function Lp(n){return n=Sr(n),zp(n)}var mh=null;function zp(n){if(mh=null,n=en(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return mh=n,null}function Sv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zr()){case Ds:return 2;case is:return 8;case Rn:case Ta:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Up=!1,qi=null,Hi=null,Gi=null,Hc=new Map,Gc=new Map,$i=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(n,s){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Hc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(s.pointerId)}}function $c(n,s,o,c,h,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},s!==null&&(s=tn(s),s!==null&&Tv(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function KA(n,s,o,c,h){switch(s){case"focusin":return qi=$c(qi,n,s,o,c,h),!0;case"dragenter":return Hi=$c(Hi,n,s,o,c,h),!0;case"mouseover":return Gi=$c(Gi,n,s,o,c,h),!0;case"pointerover":var m=h.pointerId;return Hc.set(m,$c(Hc.get(m)||null,n,s,o,c,h)),!0;case"gotpointercapture":return m=h.pointerId,Gc.set(m,$c(Gc.get(m)||null,n,s,o,c,h)),!0}return!1}function Iv(n){var s=en(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,Hn(n.priority,function(){Ev(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Hn(n.priority,function(){Ev(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Lp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);ic=c,o.target.dispatchEvent(c),ic=null}else return s=tn(o),s!==null&&Tv(s),n.blockedOn=o,!1;s.shift()}return!0}function Nv(n,s,o){ph(n)&&o.delete(s)}function YA(){Up=!1,qi!==null&&ph(qi)&&(qi=null),Hi!==null&&ph(Hi)&&(Hi=null),Gi!==null&&ph(Gi)&&(Gi=null),Hc.forEach(Nv),Gc.forEach(Nv)}function gh(n,s){n.blockedOn===s&&(n.blockedOn=null,Up||(Up=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,YA)))}var yh=null;function Cv(n){yh!==n&&(yh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){yh===n&&(yh=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],h=n[s+2];if(typeof c!="function"){if(zp(c||o)===null)continue;break}var m=tn(o);m!==null&&(n.splice(s,3),s-=3,Lm(m,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function ol(n){function s(k){return gh(k,n)}qi!==null&&gh(qi,n),Hi!==null&&gh(Hi,n),Gi!==null&&gh(Gi,n),Hc.forEach(s),Gc.forEach(s);for(var o=0;o<$i.length;o++){var c=$i[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<$i.length&&(o=$i[0],o.blockedOn===null);)Iv(o),o.blockedOn===null&&$i.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],m=o[c+1],_=h[Ft]||null;if(typeof m=="function")_||Cv(o);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[Ft]||null)E=_.formAction;else if(zp(h)!==null)continue}else E=_.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),Cv(o)}}}function Rv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function Bp(n){this._internalRoot=n}bh.prototype.render=Bp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=gr();xv(o,c,n,s,null,null)},bh.prototype.unmount=Bp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;xv(n.current,2,null,n,null,null),Wd(),s[we]=null}};function bh(n){this._internalRoot=n}bh.prototype.unstable_scheduleHydration=function(n){if(n){var s=gi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<$i.length&&s!==0&&s<$i[o].priority;o++);$i.splice(o,0,n),o===0&&Iv(n)}};var Dv=e.version;if(Dv!=="19.2.4")throw Error(r(527,Dv,"19.2.4"));oe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var QA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Bn=_h.inject(QA),Bt=_h}catch{}}return Yc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",h=Lb,m=zb,_=Ub;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=_v(n,1,!1,null,null,o,c,null,h,m,_,Rv),n[we]=s.current,wp(n),new Bp(s)},Yc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,h="",m=Lb,_=zb,E=Ub,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),s=_v(n,1,!0,s,o??null,c,h,k,m,_,E,Rv),s.context=vv(null),o=s.current,c=gr(),c=gn(c),h=Di(c),h.callback=null,Mi(o,h,c),o=c,s.current.lanes=o,qr(s,o),_s(s),n[we]=s.current,wp(n),new bh(s)},Yc.version="19.2.4",Yc}var Bv;function oI(){if(Bv)return Hp.exports;Bv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hp.exports=aI(),Hp.exports}var lI=oI();const cI="modulepreload",uI=function(i){return"/themesTaskmanager/"+i},Fv={},Uu=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");a=g(t.map(y=>{if(y=uI(y),y in Fv)return;Fv[y]=!0;const v=y.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":cI,v||(T.as="script"),T.crossOrigin="",T.href=y,f&&T.setAttribute("nonce",f),document.head.appendChild(T),v)return new Promise((R,L)=>{T.addEventListener("load",R),T.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},dI=()=>{};var qv={};const Yw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},hI=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],u=i[t++],f=i[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=i[t++],u=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],u=a+1<i.length,f=u?i[a+1]:0,g=a+2<i.length,y=g?i[a+2]:0,v=l>>2,w=(l&3)<<4|f>>4;let T=(f&15)<<2|y>>6,R=y&63;g||(R=64,u||(T=64)),r.push(t[v],t[w],t[T],t[R])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Yw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):hI(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const y=a<i.length?t[i.charAt(a)]:64;++a;const w=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||y==null||w==null)throw new fI;const T=l<<2|f>>4;if(r.push(T),y!==64){const R=f<<4&240|y>>2;if(r.push(R),w!==64){const L=y<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class fI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mI=function(i){const e=Yw(i);return Qw.encodeByteArray(e,!0)},Hh=function(i){return mI(i).replace(/\./g,"")},Xw=function(i){try{return Qw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pI=()=>Jw().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof qv>"u")return;const i=qv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},yI=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Xw(i[1]);return e&&JSON.parse(e)},yf=()=>{try{return dI()||pI()||gI()||yI()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ww=i=>yf()?.emulatorHosts?.[i],bI=i=>{const e=Ww(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Zw=()=>yf()?.config,e1=i=>yf()?.[`_${i}`];class _I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function To(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wg(i){return(await fetch(i,{credentials:"include"})).ok}function vI(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Hh(JSON.stringify(t)),Hh(JSON.stringify(u)),""].join(".")}const lu={};function xI(){const i={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?i.emulator.push(e):i.prod.push(e);return i}function wI(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Hv=!1;function t1(i,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||lu[i]===e||lu[i]||Hv)return;lu[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=xI().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Hv=!0,u()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=wI(r),R=t("text"),L=document.getElementById(R)||document.createElement("span"),X=t("learnmore"),F=document.getElementById(X)||document.createElement("a"),H=t("preprendIcon"),ee=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Y=T.element;f(Y),v(F,X);const le=y();g(ee,H),Y.append(ee,L,F,le),document.body.appendChild(Y)}l?(L.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function n1(){const i=yf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SI(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function II(){const i=fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function r1(){return!n1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){return!n1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function i1(){try{return typeof indexedDB=="object"}catch{return!1}}function NI(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const CI="FirebaseError";class ui extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=CI,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?RI(l,r):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new ui(a,f,r)}}function RI(i,e){return i.replace(DI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const DI=/\{\$([^}]+)}/g;function MI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function da(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],u=e[a];if(Gv(l)&&Gv(u)){if(!da(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Gv(i){return i!==null&&typeof i=="object"}function Fu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function nu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function kI(i,e){const t=new OI(i,e);return t.subscribe.bind(t)}class OI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");VI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Yp),a.error===void 0&&(a.error=Yp),a.complete===void 0&&(a.complete=Yp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Yp(){}function mn(i){return i&&i._delegate?i._delegate:i}class uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xa="[DEFAULT]";class jI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _I;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LI(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(i){return i===Xa?void 0:i}function LI(i){return i.instantiationMode==="EAGER"}class zI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Je||(Je={}));const UI={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},BI=Je.INFO,FI={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},qI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=FI[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zg{constructor(e){this.name=e,this._logLevel=BI,this._logHandler=qI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const HI=(i,e)=>e.some(t=>i instanceof t);let $v,Kv;function GI(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $I(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,hg=new WeakMap,o1=new WeakMap,Qp=new WeakMap,e0=new WeakMap;function KI(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(sa(i.result)),a()},u=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&a1.set(t,i)}).catch(()=>{}),e0.set(e,i),e}function YI(i){if(hg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});hg.set(i,e)}let fg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return hg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||o1.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sa(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function QI(i){fg=i(fg)}function XI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Xp(this),e,...t);return o1.set(r,e.sort?e.sort():[e]),sa(r)}:$I().includes(i)?function(...e){return i.apply(Xp(this),e),sa(a1.get(this))}:function(...e){return sa(i.apply(Xp(this),e))}}function JI(i){return typeof i=="function"?XI(i):(i instanceof IDBTransaction&&YI(i),HI(i,GI())?new Proxy(i,fg):i)}function sa(i){if(i instanceof IDBRequest)return KI(i);if(Qp.has(i))return Qp.get(i);const e=JI(i);return e!==i&&(Qp.set(i,e),e0.set(e,i)),e}const Xp=i=>e0.get(i);function WI(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(i,e),f=sa(u);return r&&u.addEventListener("upgradeneeded",g=>{r(sa(u.result),g.oldVersion,g.newVersion,sa(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const ZI=["get","getKey","getAll","getAllKeys","count"],e2=["put","add","delete","clear"],Jp=new Map;function Yv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=e2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||ZI.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&g.done]))[0]};return Jp.set(e,l),l}QI(i=>({...i,get:(e,t,r)=>Yv(e,t)||i.get(e,t,r),has:(e,t)=>!!Yv(e,t)||i.has(e,t)}));class t2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(n2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function n2(i){return i.getComponent()?.type==="VERSION"}const mg="@firebase/app",Qv="0.14.8";const ii=new Zg("@firebase/app"),r2="@firebase/app-compat",s2="@firebase/analytics-compat",i2="@firebase/analytics",a2="@firebase/app-check-compat",o2="@firebase/app-check",l2="@firebase/auth",c2="@firebase/auth-compat",u2="@firebase/database",d2="@firebase/data-connect",h2="@firebase/database-compat",f2="@firebase/functions",m2="@firebase/functions-compat",p2="@firebase/installations",g2="@firebase/installations-compat",y2="@firebase/messaging",b2="@firebase/messaging-compat",_2="@firebase/performance",v2="@firebase/performance-compat",x2="@firebase/remote-config",w2="@firebase/remote-config-compat",T2="@firebase/storage",E2="@firebase/storage-compat",S2="@firebase/firestore",A2="@firebase/ai",I2="@firebase/firestore-compat",N2="firebase",C2="12.9.0";const pg="[DEFAULT]",R2={[mg]:"fire-core",[r2]:"fire-core-compat",[i2]:"fire-analytics",[s2]:"fire-analytics-compat",[o2]:"fire-app-check",[a2]:"fire-app-check-compat",[l2]:"fire-auth",[c2]:"fire-auth-compat",[u2]:"fire-rtdb",[d2]:"fire-data-connect",[h2]:"fire-rtdb-compat",[f2]:"fire-fn",[m2]:"fire-fn-compat",[p2]:"fire-iid",[g2]:"fire-iid-compat",[y2]:"fire-fcm",[b2]:"fire-fcm-compat",[_2]:"fire-perf",[v2]:"fire-perf-compat",[x2]:"fire-rc",[w2]:"fire-rc-compat",[T2]:"fire-gcs",[E2]:"fire-gcs-compat",[S2]:"fire-fst",[I2]:"fire-fst-compat",[A2]:"fire-vertex","fire-js":"fire-js",[N2]:"fire-js-all"};const xu=new Map,D2=new Map,gg=new Map;function Xv(i,e){try{i.container.addComponent(e)}catch(t){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Nl(i){const e=i.name;if(gg.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,i);for(const t of xu.values())Xv(t,i);for(const t of D2.values())Xv(t,i);return!0}function bf(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function _r(i){return i==null?!1:i.settings!==void 0}const M2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new Bu("app","Firebase",M2);class k2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}const Kl=C2;function t0(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:pg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=Zw()),!t)throw ia.create("no-options");const l=xu.get(a);if(l){if(da(t,l.options)&&da(r,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new zI(a);for(const g of gg.values())u.addComponent(g);const f=new k2(t,r,u);return xu.set(a,f),f}function n0(i=pg){const e=xu.get(i);if(!e&&i===pg&&Zw())return t0();if(!e)throw ia.create("no-app",{appName:i});return e}function O2(){return Array.from(xu.values())}function aa(i,e,t){let r=R2[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(u.join(" "));return}Nl(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const V2="firebase-heartbeat-database",j2=1,wu="firebase-heartbeat-store";let Wp=null;function l1(){return Wp||(Wp=WI(V2,j2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ia.create("idb-open",{originalErrorMessage:i.message})})),Wp}async function P2(i){try{const t=(await l1()).transaction(wu),r=await t.objectStore(wu).get(c1(i));return await t.done,r}catch(e){if(e instanceof ui)ii.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e?.message});ii.warn(t.message)}}}async function Jv(i,e){try{const r=(await l1()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,c1(i)),await r.done}catch(t){if(t instanceof ui)ii.warn(t.message);else{const r=ia.create("idb-set",{originalErrorMessage:t?.message});ii.warn(r.message)}}}function c1(i){return`${i.name}!${i.options.appId}`}const L2=1024,z2=30;class U2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>z2){const a=q2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wv(),{heartbeatsToSend:t,unsentEntries:r}=B2(this._heartbeatsCache.heartbeats),a=Hh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ii.warn(e),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function B2(i,e=L2){const t=[];let r=i.slice();for(const a of i){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Zv(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Zv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class F2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return i1()?NI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await P2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zv(i){return Hh(JSON.stringify({version:2,heartbeats:i})).length}function q2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function H2(i){Nl(new uo("platform-logger",e=>new t2(e),"PRIVATE")),Nl(new uo("heartbeat",e=>new U2(e),"PRIVATE")),aa(mg,Qv,i),aa(mg,Qv,"esm2020"),aa("fire-js","")}H2("");var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,u1;(function(){var i;function e(S,A){function N(){}N.prototype=A.prototype,S.F=A.prototype,S.prototype=new N,S.prototype.constructor=S,S.D=function(O,D,P){for(var C=Array(arguments.length-2),me=2;me<arguments.length;me++)C[me-2]=arguments[me];return A.prototype[D].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,A,N){N||(N=0);const O=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)O[D]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(D=0;D<16;++D)O[D]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=S.g[0],N=S.g[1],D=S.g[2];let P=S.g[3],C;C=A+(P^N&(D^P))+O[0]+3614090360&4294967295,A=N+(C<<7&4294967295|C>>>25),C=P+(D^A&(N^D))+O[1]+3905402710&4294967295,P=A+(C<<12&4294967295|C>>>20),C=D+(N^P&(A^N))+O[2]+606105819&4294967295,D=P+(C<<17&4294967295|C>>>15),C=N+(A^D&(P^A))+O[3]+3250441966&4294967295,N=D+(C<<22&4294967295|C>>>10),C=A+(P^N&(D^P))+O[4]+4118548399&4294967295,A=N+(C<<7&4294967295|C>>>25),C=P+(D^A&(N^D))+O[5]+1200080426&4294967295,P=A+(C<<12&4294967295|C>>>20),C=D+(N^P&(A^N))+O[6]+2821735955&4294967295,D=P+(C<<17&4294967295|C>>>15),C=N+(A^D&(P^A))+O[7]+4249261313&4294967295,N=D+(C<<22&4294967295|C>>>10),C=A+(P^N&(D^P))+O[8]+1770035416&4294967295,A=N+(C<<7&4294967295|C>>>25),C=P+(D^A&(N^D))+O[9]+2336552879&4294967295,P=A+(C<<12&4294967295|C>>>20),C=D+(N^P&(A^N))+O[10]+4294925233&4294967295,D=P+(C<<17&4294967295|C>>>15),C=N+(A^D&(P^A))+O[11]+2304563134&4294967295,N=D+(C<<22&4294967295|C>>>10),C=A+(P^N&(D^P))+O[12]+1804603682&4294967295,A=N+(C<<7&4294967295|C>>>25),C=P+(D^A&(N^D))+O[13]+4254626195&4294967295,P=A+(C<<12&4294967295|C>>>20),C=D+(N^P&(A^N))+O[14]+2792965006&4294967295,D=P+(C<<17&4294967295|C>>>15),C=N+(A^D&(P^A))+O[15]+1236535329&4294967295,N=D+(C<<22&4294967295|C>>>10),C=A+(D^P&(N^D))+O[1]+4129170786&4294967295,A=N+(C<<5&4294967295|C>>>27),C=P+(N^D&(A^N))+O[6]+3225465664&4294967295,P=A+(C<<9&4294967295|C>>>23),C=D+(A^N&(P^A))+O[11]+643717713&4294967295,D=P+(C<<14&4294967295|C>>>18),C=N+(P^A&(D^P))+O[0]+3921069994&4294967295,N=D+(C<<20&4294967295|C>>>12),C=A+(D^P&(N^D))+O[5]+3593408605&4294967295,A=N+(C<<5&4294967295|C>>>27),C=P+(N^D&(A^N))+O[10]+38016083&4294967295,P=A+(C<<9&4294967295|C>>>23),C=D+(A^N&(P^A))+O[15]+3634488961&4294967295,D=P+(C<<14&4294967295|C>>>18),C=N+(P^A&(D^P))+O[4]+3889429448&4294967295,N=D+(C<<20&4294967295|C>>>12),C=A+(D^P&(N^D))+O[9]+568446438&4294967295,A=N+(C<<5&4294967295|C>>>27),C=P+(N^D&(A^N))+O[14]+3275163606&4294967295,P=A+(C<<9&4294967295|C>>>23),C=D+(A^N&(P^A))+O[3]+4107603335&4294967295,D=P+(C<<14&4294967295|C>>>18),C=N+(P^A&(D^P))+O[8]+1163531501&4294967295,N=D+(C<<20&4294967295|C>>>12),C=A+(D^P&(N^D))+O[13]+2850285829&4294967295,A=N+(C<<5&4294967295|C>>>27),C=P+(N^D&(A^N))+O[2]+4243563512&4294967295,P=A+(C<<9&4294967295|C>>>23),C=D+(A^N&(P^A))+O[7]+1735328473&4294967295,D=P+(C<<14&4294967295|C>>>18),C=N+(P^A&(D^P))+O[12]+2368359562&4294967295,N=D+(C<<20&4294967295|C>>>12),C=A+(N^D^P)+O[5]+4294588738&4294967295,A=N+(C<<4&4294967295|C>>>28),C=P+(A^N^D)+O[8]+2272392833&4294967295,P=A+(C<<11&4294967295|C>>>21),C=D+(P^A^N)+O[11]+1839030562&4294967295,D=P+(C<<16&4294967295|C>>>16),C=N+(D^P^A)+O[14]+4259657740&4294967295,N=D+(C<<23&4294967295|C>>>9),C=A+(N^D^P)+O[1]+2763975236&4294967295,A=N+(C<<4&4294967295|C>>>28),C=P+(A^N^D)+O[4]+1272893353&4294967295,P=A+(C<<11&4294967295|C>>>21),C=D+(P^A^N)+O[7]+4139469664&4294967295,D=P+(C<<16&4294967295|C>>>16),C=N+(D^P^A)+O[10]+3200236656&4294967295,N=D+(C<<23&4294967295|C>>>9),C=A+(N^D^P)+O[13]+681279174&4294967295,A=N+(C<<4&4294967295|C>>>28),C=P+(A^N^D)+O[0]+3936430074&4294967295,P=A+(C<<11&4294967295|C>>>21),C=D+(P^A^N)+O[3]+3572445317&4294967295,D=P+(C<<16&4294967295|C>>>16),C=N+(D^P^A)+O[6]+76029189&4294967295,N=D+(C<<23&4294967295|C>>>9),C=A+(N^D^P)+O[9]+3654602809&4294967295,A=N+(C<<4&4294967295|C>>>28),C=P+(A^N^D)+O[12]+3873151461&4294967295,P=A+(C<<11&4294967295|C>>>21),C=D+(P^A^N)+O[15]+530742520&4294967295,D=P+(C<<16&4294967295|C>>>16),C=N+(D^P^A)+O[2]+3299628645&4294967295,N=D+(C<<23&4294967295|C>>>9),C=A+(D^(N|~P))+O[0]+4096336452&4294967295,A=N+(C<<6&4294967295|C>>>26),C=P+(N^(A|~D))+O[7]+1126891415&4294967295,P=A+(C<<10&4294967295|C>>>22),C=D+(A^(P|~N))+O[14]+2878612391&4294967295,D=P+(C<<15&4294967295|C>>>17),C=N+(P^(D|~A))+O[5]+4237533241&4294967295,N=D+(C<<21&4294967295|C>>>11),C=A+(D^(N|~P))+O[12]+1700485571&4294967295,A=N+(C<<6&4294967295|C>>>26),C=P+(N^(A|~D))+O[3]+2399980690&4294967295,P=A+(C<<10&4294967295|C>>>22),C=D+(A^(P|~N))+O[10]+4293915773&4294967295,D=P+(C<<15&4294967295|C>>>17),C=N+(P^(D|~A))+O[1]+2240044497&4294967295,N=D+(C<<21&4294967295|C>>>11),C=A+(D^(N|~P))+O[8]+1873313359&4294967295,A=N+(C<<6&4294967295|C>>>26),C=P+(N^(A|~D))+O[15]+4264355552&4294967295,P=A+(C<<10&4294967295|C>>>22),C=D+(A^(P|~N))+O[6]+2734768916&4294967295,D=P+(C<<15&4294967295|C>>>17),C=N+(P^(D|~A))+O[13]+1309151649&4294967295,N=D+(C<<21&4294967295|C>>>11),C=A+(D^(N|~P))+O[4]+4149444226&4294967295,A=N+(C<<6&4294967295|C>>>26),C=P+(N^(A|~D))+O[11]+3174756917&4294967295,P=A+(C<<10&4294967295|C>>>22),C=D+(A^(P|~N))+O[2]+718787259&4294967295,D=P+(C<<15&4294967295|C>>>17),C=N+(P^(D|~A))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.v=function(S,A){A===void 0&&(A=S.length);const N=A-this.blockSize,O=this.C;let D=this.h,P=0;for(;P<A;){if(D==0)for(;P<=N;)a(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<A;)if(O[D++]=S.charCodeAt(P++),D==this.blockSize){a(this,O),D=0;break}}else for(;P<A;)if(O[D++]=S[P++],D==this.blockSize){a(this,O),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var N=S.length-8;N<S.length;++N)S[N]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)S[A++]=this.g[N]>>>O&255;return S};function l(S,A){var N=f;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=A(S)}function u(S,A){this.h=A;const N=[];let O=!0;for(let D=S.length-1;D>=0;D--){const P=S[D]|0;O&&P==A||(N[D]=P,O=!1)}this.g=N}var f={};function g(S){return-128<=S&&S<128?l(S,function(A){return new u([A|0],A<0?-1:0)}):new u([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return F(y(-S));const A=[];let N=1;for(let O=0;S>=N;O++)A[O]=S/N|0,N*=4294967296;return new u(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return F(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(A,8));let O=w;for(let P=0;P<S.length;P+=8){var D=Math.min(8,S.length-P);const C=parseInt(S.substring(P,P+D),A);D<8?(D=y(Math.pow(A,D)),O=O.j(D).add(y(C))):(O=O.j(N),O=O.add(y(C)))}return O}var w=g(0),T=g(1),R=g(16777216);i=u.prototype,i.m=function(){if(X(this))return-F(this).m();let S=0,A=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);S+=(O>=0?O:4294967296+O)*A,A*=4294967296}return S},i.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(X(this))return"-"+F(this).toString(S);const A=y(Math.pow(S,6));var N=this;let O="";for(;;){const D=le(N,A).g;N=H(N,D.j(A));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(S);if(N=D,L(N))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},i.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function X(S){return S.h==-1}i.l=function(S){return S=H(this,S),X(S)?-1:L(S)?0:1};function F(S){const A=S.g.length,N=[];for(let O=0;O<A;O++)N[O]=~S.g[O];return new u(N,~S.h).add(T)}i.abs=function(){return X(this)?F(this):this},i.add=function(S){const A=Math.max(this.g.length,S.g.length),N=[];let O=0;for(let D=0;D<=A;D++){let P=O+(this.i(D)&65535)+(S.i(D)&65535),C=(P>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=C>>>16,P&=65535,C&=65535,N[D]=C<<16|P}return new u(N,N[N.length-1]&-2147483648?-1:0)};function H(S,A){return S.add(F(A))}i.j=function(S){if(L(this)||L(S))return w;if(X(this))return X(S)?F(this).j(F(S)):F(F(this).j(S));if(X(S))return F(this.j(F(S)));if(this.l(R)<0&&S.l(R)<0)return y(this.m()*S.m());const A=this.g.length+S.g.length,N=[];for(var O=0;O<2*A;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const P=this.i(O)>>>16,C=this.i(O)&65535,me=S.i(D)>>>16,de=S.i(D)&65535;N[2*O+2*D]+=C*de,ee(N,2*O+2*D),N[2*O+2*D+1]+=P*de,ee(N,2*O+2*D+1),N[2*O+2*D+1]+=C*me,ee(N,2*O+2*D+1),N[2*O+2*D+2]+=P*me,ee(N,2*O+2*D+2)}for(S=0;S<A;S++)N[S]=N[2*S+1]<<16|N[2*S];for(S=A;S<2*A;S++)N[S]=0;return new u(N,0)};function ee(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function Y(S,A){this.g=S,this.h=A}function le(S,A){if(L(A))throw Error("division by zero");if(L(S))return new Y(w,w);if(X(S))return A=le(F(S),A),new Y(F(A.g),F(A.h));if(X(A))return A=le(S,F(A)),new Y(F(A.g),A.h);if(S.g.length>30){if(X(S)||X(A))throw Error("slowDivide_ only works with positive integers.");for(var N=T,O=A;O.l(S)<=0;)N=ae(N),O=ae(O);var D=he(N,1),P=he(O,1);for(O=he(O,2),N=he(N,2);!L(O);){var C=P.add(O);C.l(S)<=0&&(D=D.add(N),P=C),O=he(O,1),N=he(N,1)}return A=H(S,D.j(A)),new Y(D,A)}for(D=w;S.l(A)>=0;){for(N=Math.max(1,Math.floor(S.m()/A.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=y(N),C=P.j(A);X(C)||C.l(S)>0;)N-=O,P=y(N),C=P.j(A);L(P)&&(P=T),D=D.add(P),S=H(S,C)}return new Y(D,S)}i.B=function(S){return le(this,S).h},i.and=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)&S.i(O);return new u(N,this.h&S.h)},i.or=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)|S.i(O);return new u(N,this.h|S.h)},i.xor=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)^S.i(O);return new u(N,this.h^S.h)};function ae(S){const A=S.g.length+1,N=[];for(let O=0;O<A;O++)N[O]=S.i(O)<<1|S.i(O-1)>>>31;return new u(N,S.h)}function he(S,A){const N=A>>5;A%=32;const O=S.g.length-N,D=[];for(let P=0;P<O;P++)D[P]=A>0?S.i(P+N)>>>A|S.i(P+N+1)<<32-A:S.i(P+N);return new u(D,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,u1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,oa=u}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var d1,ru,h1,Nh,yg,f1,m1,p1;(function(){var i,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var b=0;b<d.length;++b){var x=d[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,b){if(b)e:{var x=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in x))break e;x=x[B]}d=d[d.length-1],I=x[d],b=b(I),b!=I&&b!=null&&e(x,d,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(b){var x=[],I;for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&x.push([I,b[I]]);return x}});var l=l||{},u=this||self;function f(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,x){return d.call.apply(d.bind,arguments)}function y(d,b,x){return y=g,y.apply(null,arguments)}function v(d,b){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function w(d,b){function x(){}x.prototype=b.prototype,d.Z=b.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(I,B,Q){for(var pe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)pe[Ue-2]=arguments[Ue];return b.prototype[B].apply(I,pe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const b=d.length;if(b>0){const x=Array(b);for(let I=0;I<b;I++)x[I]=d[I];return x}return[]}function L(d,b){for(let I=1;I<arguments.length;I++){const B=arguments[I];var x=typeof B;if(x=x!="object"?x:B?Array.isArray(B)?"array":x:"null",x=="array"||x=="object"&&typeof B.length=="number"){x=d.length||0;const Q=B.length||0;d.length=x+Q;for(let pe=0;pe<Q;pe++)d[x+pe]=B[pe]}else d.push(B)}}class X{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function F(d){u.setTimeout(()=>{throw d},0)}function H(){var d=S;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class ee{constructor(){this.h=this.g=null}add(b,x){const I=Y.get();I.set(b,x),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new X(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,he=!1,S=new ee,A=()=>{const d=Promise.resolve(void 0);ae=()=>{d.then(N)}};function N(){for(var d;d=H();){try{d.h.call(d.g)}catch(x){F(x)}var b=Y;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}he=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,b),u.removeEventListener("test",x,b)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function me(d,b){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}w(me,D),me.prototype.init=function(d,b){const x=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(x=="mouseover"?b=d.fromElement:x=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),q=0;function oe(d,b,x,I,B){this.listener=d,this.proxy=null,this.src=b,this.type=x,this.capture=!!I,this.ha=B,this.key=++q,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d,b,x){for(const I in d)b.call(x,d[I],I,d)}function Pe(d,b){for(const x in d)b.call(void 0,d[x],x,d)}function M(d){const b={};for(const x in d)b[x]=d[x];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,b){let x,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(x in I)d[x]=I[x];for(let Q=0;Q<ne.length;Q++)x=ne[Q],Object.prototype.hasOwnProperty.call(I,x)&&(d[x]=I[x])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,b,x,I,B){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const pe=ge(d,b,I,B);return pe>-1?(b=d[pe],x||(b.fa=!1)):(b=new oe(b,this.src,Q,!!I,B),b.fa=x,d.push(b)),b};function se(d,b){const x=b.type;if(x in d.g){var I=d.g[x],B=Array.prototype.indexOf.call(I,b,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(I,B,1),Q&&(be(b),d.g[x].length==0&&(delete d.g[x],d.h--))}}function ge(d,b,x,I){for(let B=0;B<d.length;++B){const Q=d[B];if(!Q.da&&Q.listener==b&&Q.capture==!!x&&Q.ha==I)return B}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),rt={};function Ge(d,b,x,I,B){if(Array.isArray(b)){for(let Q=0;Q<b.length;Q++)Ge(d,b[Q],x,I,B);return null}return x=Tr(x),d&&d[de]?d.J(b,x,f(I)?!!I.capture:!1,B):Tt(d,b,x,!1,I,B)}function Tt(d,b,x,I,B,Q){if(!b)throw Error("Invalid event type");const pe=f(B)?!!B.capture:!!B;let Ue=Cn(d);if(Ue||(d[Ie]=Ue=new ve(d)),x=Ue.add(b,x,I,pe,Q),x.proxy)return x;if(I=Xn(),x.proxy=I,I.src=d,I.listener=x,d.addEventListener)P||(B=pe),B===void 0&&(B=!1),d.addEventListener(b.toString(),I,B);else if(d.attachEvent)d.attachEvent(Jn(b.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Xn(){function d(x){return b.call(d.src,d.listener,x)}const b=Cs;return d}function vn(d,b,x,I,B){if(Array.isArray(b))for(var Q=0;Q<b.length;Q++)vn(d,b[Q],x,I,B);else I=f(I)?!!I.capture:!!I,x=Tr(x),d&&d[de]?(d=d.i,Q=String(b).toString(),Q in d.g&&(b=d.g[Q],x=ge(b,x,I,B),x>-1&&(be(b[x]),Array.prototype.splice.call(b,x,1),b.length==0&&(delete d.g[Q],d.h--)))):d&&(d=Cn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=ge(b,x,I,B)),(x=d>-1?b[d]:null)&&cr(x))}function cr(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[de])se(b.i,d);else{var x=d.type,I=d.proxy;b.removeEventListener?b.removeEventListener(x,I,d.capture):b.detachEvent?b.detachEvent(Jn(x),I):b.addListener&&b.removeListener&&b.removeListener(I),(x=Cn(b))?(se(x,d),x.h==0&&(x.src=null,b[Ie]=null)):be(d)}}}function Jn(d){return d in rt?rt[d]:rt[d]="on"+d}function Cs(d,b){if(d.da)d=!0;else{b=new me(b,this);const x=d.listener,I=d.ha||d.src;d.fa&&cr(d),d=x.call(I,b)}return d}function Cn(d){return d=d[Ie],d instanceof ve?d:null}var Rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tr(d){return typeof d=="function"?d:(d[Rs]||(d[Rs]=function(b){return d.handleEvent(b)}),d[Rs])}function Rt(){O.call(this),this.i=new ve(this),this.M=this,this.G=null}w(Rt,O),Rt.prototype[de]=!0,Rt.prototype.removeEventListener=function(d,b,x,I){vn(this,d,b,x,I)};function yt(d,b){var x,I=d.G;if(I)for(x=[];I;I=I.G)x.push(I);if(d=d.M,I=b.type||b,typeof b=="string")b=new D(b,d);else if(b instanceof D)b.target=b.target||d;else{var B=b;b=new D(I,d),ue(b,B)}B=!0;let Q,pe;if(x)for(pe=x.length-1;pe>=0;pe--)Q=b.g=x[pe],B=Lr(Q,I,!0,b)&&B;if(Q=b.g=d,B=Lr(Q,I,!0,b)&&B,B=Lr(Q,I,!1,b)&&B,x)for(pe=0;pe<x.length;pe++)Q=b.g=x[pe],B=Lr(Q,I,!1,b)&&B}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const x=d.g[b];for(let I=0;I<x.length;I++)be(x[I]);delete d.g[b],d.h--}}this.G=null},Rt.prototype.J=function(d,b,x,I){return this.i.add(String(d),b,!1,x,I)},Rt.prototype.K=function(d,b,x,I){return this.i.add(String(d),b,!0,x,I)};function Lr(d,b,x,I){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let B=!0;for(let Q=0;Q<b.length;++Q){const pe=b[Q];if(pe&&!pe.da&&pe.capture==x){const Ue=pe.listener,Yt=pe.ha||pe.src;pe.fa&&se(d.i,pe),B=Ue.call(Yt,I)!==!1&&B}}return B&&!I.defaultPrevented}function mi(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(d,b||0)}function Ye(d){d.g=mi(()=>{d.g=null,d.i&&(d.i=!1,Ye(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Zt extends O{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ye(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(d){O.call(this),this.h=d,this.g={}}w(zr,O);var Ds=[];function is(d){Ve(d.g,function(b,x){this.g.hasOwnProperty(x)&&cr(b)},d),d.g={}}zr.prototype.N=function(){zr.Z.N.call(this),is(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rn=u.JSON.stringify,Ta=u.JSON.parse,Ur=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function as(){}function Ms(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}w(Bt,D);function Dn(){D.call(this,"c")}w(Dn,D);var At={},pi=null;function Er(){return pi=pi||new Rt}At.Ia="serverreachability";function os(d){D.call(this,At.Ia,d)}w(os,D);function Fn(d){const b=Er();yt(b,new os(b))}At.STAT_EVENT="statevent";function Br(d,b){D.call(this,At.STAT_EVENT,d),this.stat=b}w(Br,D);function Dt(d){const b=Er();yt(b,new Br(b,d))}At.Ja="timingevent";function qn(d,b){D.call(this,At.Ja,d),this.size=b}w(qn,D);function Mn(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},b)}function xn(){this.g=!0}xn.prototype.ua=function(){this.g=!1};function ks(d,b,x,I,B,Q){d.info(function(){if(d.g)if(Q){var pe="",Ue=Q.split("&");for(let lt=0;lt<Ue.length;lt++){var Yt=Ue[lt].split("=");if(Yt.length>1){const jt=Yt[0];Yt=Yt[1];const Ir=jt.split("_");pe=Ir.length>=2&&Ir[1]=="type"?pe+(jt+"="+Yt+"&"):pe+(jt+"=redacted&")}}}else pe=null;else pe=Q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+b+`
`+x+`
`+pe})}function Fr(d,b,x,I,B,Q,pe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+b+`
`+x+`
`+Q+" "+pe})}function Wn(d,b,x,I){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ea(d,x)+(I?" "+I:"")})}function qr(d,b){d.info(function(){return"TIMEOUT: "+b})}xn.prototype.info=function(){};function Ea(d,b){if(!d.g)return b;if(!b)return null;try{const Q=JSON.parse(b);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var x=Q[d];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<I.length;pe++)I[pe]=""}}}}return Rn(Q)}catch{return b}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Os={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vs;function gn(){}w(gn,as),gn.prototype.g=function(){return new XMLHttpRequest},Vs=new gn;function zt(d){return encodeURIComponent(String(d))}function gi(d){var b=1;d=d.split(":");const x=[];for(;b>0&&d.length;)x.push(d.shift()),b--;return d.length&&x.push(d.join(":")),x}function Hn(d,b,x,I){this.j=d,this.i=b,this.l=x,this.S=I||1,this.V=new zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gn}function Gn(){this.i=null,this.g="",this.h=!1}var Vt={},Ft={};function we(d,b,x){d.M=1,d.A=Sa(Mt(b)),d.u=x,d.R=!0,ze(d,null)}function ze(d,b){d.F=Date.now(),kn(d),d.B=Mt(d.A);var x=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Ao(x.i,"t",I),d.C=0,x=d.j.L,d.h=new Gn,d.g=fd(d.j,x?b:null,!d.u),d.P>0&&(d.O=new Zt(y(d.Y,d,d.g),d.P)),b=d.V,x=d.g,I=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ds[0]=B.toString()),B=Ds);for(let Q=0;Q<B.length;Q++){const pe=Ge(x,B[Q],I||b.handleEvent,!1,b.h||b);if(!pe)break;b.g[pe.key]=pe}b=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Fn(),ks(d.i,d.v,d.B,d.l,d.S,d.u)}Hn.prototype.ba=function(d){d=d.target;const b=this.O;b&&Kr(d)==3?b.j():this.Y(d)},Hn.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Kr(this.g),Yt=this.g.ya(),lt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||Ue!=4||Yt==7||(Yt==8||lt<=0?Fn(3):Fn(2)),en(this);var b=this.g.ca();this.X=b;var x=It(this);if(this.o=b==200,Fr(this.i,this.v,this.B,this.l,this.S,Ue,b),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var Q=I;break t}}Q=null}if(d=Q)Wn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,d);else{this.o=!1,this.m=3,Dt(12),te(this),tn(this);break e}}if(this.R){d=!0;let jt;for(;!this.K&&this.C<x.length;)if(jt=ls(this,x),jt==Ft){Ue==4&&(this.m=4,Dt(14),d=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Vt){this.m=4,Dt(15),Wn(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Wn(this.i,this.l,jt,null),xe(this,jt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||x.length!=0||this.h.h||(this.m=1,Dt(16),d=!1),this.o=this.o&&d,!d)Wn(this.i,this.l,x,"[Invalid Chunked Response]"),te(this),tn(this);else if(x.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),uc(pe),pe.P=!0,Dt(11))}}else Wn(this.i,this.l,x,null),xe(this,x);Ue==4&&te(this),this.o&&!this.K&&(Ue==4?cd(this.j,this):(this.o=!1,kn(this)))}else Ps(this.g),b==400&&x.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),te(this),tn(this)}}}catch{}};function It(d){if(!bt(d))return d.g.la();const b=wn(d.g);if(b==="")return"";let x="";const I=b.length,B=Kr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return te(d),tn(d),"";d.h.i=new u.TextDecoder}for(let Q=0;Q<I;Q++)d.h.h=!0,x+=d.h.i.decode(b[Q],{stream:!(B&&Q==I-1)});return b.length=0,d.h.g+=x,d.C=0,d.h.g}function bt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function ls(d,b){var x=d.C,I=b.indexOf(`
`,x);return I==-1?Ft:(x=Number(b.substring(x,I)),isNaN(x)?Vt:(I+=1,I+x>b.length?Ft:(b=b.slice(I,I+x),d.C=I+x,b)))}Hn.prototype.cancel=function(){this.K=!0,te(this)};function kn(d){d.T=Date.now()+d.H,cn(d,d.H)}function cn(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Mn(y(d.aa,d),b)}function en(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Hn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(qr(this.i,this.B),this.M!=2&&(Fn(),Dt(17)),te(this),this.m=2,tn(this)):cn(this,this.T-d)};function tn(d){d.j.I==0||d.K||cd(d.j,d)}function te(d){en(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,is(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function xe(d,b){try{var x=d.j;if(x.I!=0&&(x.g==d||Ze(x.h,d))){if(!d.L&&Ze(x.h,d)&&x.I==3){try{var I=x.Ba.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Do(x),Ei(x);else break e;Ma(x),Dt(18)}}else x.xa=B[1],0<x.xa-x.K&&B[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Mn(y(x.Va,x),6e3));Et(x.h)<=1&&x.ta&&(x.ta=void 0)}else ms(x,11)}else if((d.L||x.g==d)&&Do(x),!C(b))for(B=x.Ba.g.parse(b),b=0;b<B.length;b++){let lt=B[b];const jt=lt[0];if(!(jt<=x.K))if(x.K=jt,lt=lt[1],x.I==2)if(lt[0]=="c"){x.M=lt[1],x.ba=lt[2];const Ir=lt[3];Ir!=null&&(x.ka=Ir,x.j.info("VER="+x.ka));const ps=lt[4];ps!=null&&(x.za=ps,x.j.info("SVER="+x.za));const Yr=lt[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(I=1.5*Yr,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Qr=d.g;if(Qr){const ka=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var Q=I.h;Q.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(un(Q,Q.h),Q.h=null))}if(I.G){const Mo=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(I.wa=Mo,dt(I.J,I.G,Mo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var pe=d;if(I.na=hd(I,I.L?I.ba:null,I.W),pe.L){qe(I.h,pe);var Ue=pe,Yt=I.O;Yt&&(Ue.H=Yt),Ue.D&&(en(Ue),kn(Ue)),I.g=pe}else od(I);x.i.length>0&&fs(x)}else lt[0]!="stop"&&lt[0]!="close"||ms(x,7);else x.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?ms(x,7):lc(x):lt[0]!="noop"&&x.l&&x.l.qa(lt),x.A=0)}}Fn(4)}catch{}}var _e=class{constructor(d,b){this.g=d,this.map=b}};function Me(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Et(d){return d.h?1:d.g?d.g.size:0}function Ze(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function un(d,b){d.g?d.g.add(b):d.h=b}function qe(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Me.prototype.cancel=function(){if(this.i=tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function tt(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const x of d.g.values())b=b.concat(x.G);return b}return R(d.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $n(d,b){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const I=d[x].indexOf("=");let B,Q=null;I>=0?(B=d[x].substring(0,I),Q=d[x].substring(I+1)):B=d[x],b(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function dn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof dn?(this.l=d.l,Kt(this,d.j),this.o=d.o,this.g=d.g,yi(this,d.u),this.h=d.h,tc(this,id(d.i)),this.m=d.m):d&&(b=String(d).match(ot))?(this.l=!1,Kt(this,b[1]||"",!0),this.o=cs(b[2]||""),this.g=cs(b[3]||"",!0),yi(this,b[4]),this.h=cs(b[5]||"",!0),tc(this,b[6]||"",!0),this.m=cs(b[7]||"")):(this.l=!1,this.i=new _i(null,this.l))}dn.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(Aa(b,So,!0),":");var x=this.g;return(x||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Aa(b,So,!0),"@"),d.push(zt(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Aa(x,x.charAt(0)=="/"?nc:nd,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Aa(x,rd)),d.join("")},dn.prototype.resolve=function(d){const b=Mt(this);let x=!!d.j;x?Kt(b,d.j):x=!!d.o,x?b.o=d.o:x=!!d.g,x?b.g=d.g:x=d.u!=null;var I=d.h;if(x)yi(b,d.u);else if(x=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=b.h.lastIndexOf("/");B!=-1&&(I=b.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let pe=0;pe<B.length;){const Ue=B[pe++];Ue=="."?I&&pe==B.length&&Q.push(""):Ue==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),I&&pe==B.length&&Q.push("")):(Q.push(Ue),I=!0)}I=Q.join("/")}else I=B}return x?b.h=I:x=d.i.toString()!=="",x?tc(b,id(d.i)):x=!!d.m,x&&(b.m=d.m),b};function Mt(d){return new dn(d)}function Kt(d,b,x){d.j=x?cs(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function yi(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function tc(d,b,x){b instanceof _i?(d.i=b,Io(d.i,d.l)):(x||(b=Aa(b,bi)),d.i=new _i(b,d.l))}function dt(d,b,x){d.i.set(b,x)}function Sa(d){return dt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function cs(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Aa(d,b,x){return typeof d=="string"?(d=encodeURI(d).replace(b,Zn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Zn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var So=/[#\/\?@]/g,nd=/[#\?:]/g,nc=/[#\?]/g,bi=/[#\?@]/g,rd=/#/g;function _i(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function er(d){d.g||(d.g=new Map,d.h=0,d.i&&$n(d.i,function(b,x){d.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}i=_i.prototype,i.add=function(d,b){er(this),this.i=null,d=vi(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(b),this.h+=1,this};function sd(d,b){er(d),b=vi(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function rc(d,b){return er(d),b=vi(d,b),d.g.has(b)}i.forEach=function(d,b){er(this),this.g.forEach(function(x,I){x.forEach(function(B){d.call(b,B,I,this)},this)},this)};function sc(d,b){er(d);let x=[];if(typeof b=="string")rc(d,b)&&(x=x.concat(d.g.get(vi(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)x=x.concat(d[b]);return x}i.set=function(d,b){return er(this),this.i=null,d=vi(this,d),rc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},i.get=function(d,b){return d?(d=sc(this,d),d.length>0?String(d[0]):b):b};function Ao(d,b,x){sd(d,b),x.length>0&&(d.i=null,d.g.set(vi(d,b),R(x)),d.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let I=0;I<b.length;I++){var x=b[I];const B=zt(x);x=sc(this,x);for(let Q=0;Q<x.length;Q++){let pe=B;x[Q]!==""&&(pe+="="+zt(x[Q])),d.push(pe)}}return this.i=d.join("&")};function id(d){const b=new _i;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function vi(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Io(d,b){b&&!d.j&&(er(d),d.i=null,d.g.forEach(function(x,I){const B=I.toLowerCase();I!=B&&(sd(this,I),Ao(this,B,x))},d)),d.j=b}function Gr(d,b){const x=new xn;if(u.Image){const I=new Image;I.onload=v(Sr,x,"TestLoadImage: loaded",!0,b,I),I.onerror=v(Sr,x,"TestLoadImage: error",!1,b,I),I.onabort=v(Sr,x,"TestLoadImage: abort",!1,b,I),I.ontimeout=v(Sr,x,"TestLoadImage: timeout",!1,b,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else b(!1)}function ic(d,b){const x=new xn,I=new AbortController,B=setTimeout(()=>{I.abort(),Sr(x,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:I.signal}).then(Q=>{clearTimeout(B),Q.ok?Sr(x,"TestPingServer: ok",!0,b):Sr(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(B),Sr(x,"TestPingServer: error",!1,b)})}function Sr(d,b,x,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(x)}catch{}}function xi(){this.g=new Ur}function us(d){this.i=d.Sb||null,this.h=d.ab||!1}w(us,as),us.prototype.g=function(){return new Ia(this.i,this.h)};function Ia(d,b){Rt.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ia,Rt),i=Ia.prototype,i.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,$r(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?wi(this):$r(this),this.readyState==3&&No(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,wi(this))},i.Na=function(d){this.g&&(this.response=d,wi(this))},i.ga=function(){this.g&&wi(this)};function wi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,$r(d)}i.setRequestHeader=function(d,b){this.A.append(d,b)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=b.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ar(d){let b="";return Ve(d,function(x,I){b+=I,b+=":",b+=x,b+=`\r
`}),b}function Na(d,b,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Ar(x),typeof d=="string"?x!=null&&zt(x):dt(d,b,x))}function _t(d){Rt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(_t,Rt);var ds=/^https?$/i,ac=["POST","PUT"];i=_t.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,b,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vs.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(Q){Ca(this,Q);return}if(d=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)x.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())x.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(ac,b,void 0)>=0)||I||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,pe]of x)this.g.setRequestHeader(Q,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Ca(this,Q)}};function Ca(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,oc(d),js(d)}function oc(d){d.A||(d.A=!0,yt(d,"complete"),yt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,yt(this,"complete"),yt(this,"abort"),js(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),_t.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ra(this):this.Xa())},i.Xa=function(){Ra(this)};function Ra(d){if(d.h&&typeof l<"u"){if(d.v&&Kr(d)==4)setTimeout(d.Ca.bind(d),0);else if(yt(d,"readystatechange"),Kr(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var I;if(I=Q===0){let pe=String(d.D).match(ot)[1]||null;!pe&&u.self&&u.self.location&&(pe=u.self.location.protocol.slice(0,-1)),I=!ds.test(pe?pe.toLowerCase():"")}x=I}if(x)yt(d,"complete"),yt(d,"success");else{d.o=6;try{var B=Kr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",oc(d)}}finally{js(d)}}}}function js(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,b||yt(d,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Kr(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Ta(b)}};function wn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ps(d){const b={};d=(d.g&&Kr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(C(d[I]))continue;var x=gi(d[I]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=b[B]||[];b[B]=Q,Q.push(x)}Pe(b,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(d,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||b}function Ti(d){this.za=0,this.i=[],this.j=new xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hs("baseRetryDelayMs",5e3,d),this.Za=hs("retryDelaySeedMs",1e4,d),this.Ta=hs("forwardChannelMaxRetries",2,d),this.va=hs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Me(d&&d.concurrentRequestLimit),this.Ba=new xi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ti.prototype,i.ka=8,i.I=1,i.connect=function(d,b,x,I){Dt(0),this.W=d,this.H=b||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=hd(this,null,this.W),fs(this)};function lc(d){if(Co(d),d.I==3){var b=d.V++,x=Mt(d.J);if(dt(x,"SID",d.M),dt(x,"RID",b),dt(x,"TYPE","terminate"),Da(d,x),b=new Hn(d,d.j,b),b.M=2,b.A=Sa(Mt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=b.A,x=!0),x||(b.g=fd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),kn(b)}dd(d)}function Ei(d){d.g&&(uc(d),d.g.cancel(),d.g=null)}function Co(d){Ei(d),d.v&&(u.clearTimeout(d.v),d.v=null),Do(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function fs(d){if(!Nt(d.h)&&!d.m){d.m=!0;var b=d.Ea;ae||A(),he||(ae(),he=!0),S.add(b,d),d.D=0}}function Ro(d,b){return Et(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Mn(y(d.Ea,d,b),ud(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Hn(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=M(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(b+=I,b>4096){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=ad(this,B,b),x=Mt(this.J),dt(x,"RID",d),dt(x,"CVER",22),this.G&&dt(x,"X-HTTP-Session-Id",this.G),Da(this,x),Q&&(this.R?b="headers="+zt(Ar(Q))+"&"+b:this.u&&Na(x,this.u,Q)),un(this.h,B),this.Ra&&dt(x,"TYPE","init"),this.S?(dt(x,"$req",b),dt(x,"SID","null"),B.U=!0,we(B,x,null)):we(B,x,b),this.I=2}}else this.I==3&&(d?cc(this,d):this.i.length==0||Nt(this.h)||cc(this))};function cc(d,b){var x;b?x=b.l:x=d.V++;const I=Mt(d.J);dt(I,"SID",d.M),dt(I,"RID",x),dt(I,"AID",d.K),Da(d,I),d.u&&d.o&&Na(I,d.u,d.o),x=new Hn(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),b&&(d.i=b.G.concat(d.i)),b=ad(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),un(d.h,x),we(x,I,b)}function Da(d,b){d.H&&Ve(d.H,function(x,I){dt(b,I,x)}),d.l&&Ve({},function(x,I){dt(b,I,x)})}function ad(d,b,x){x=Math.min(d.i.length,x);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let Ue=-1;for(;;){const Yt=["count="+x];Ue==-1?x>0?(Ue=B[0].g,Yt.push("ofs="+Ue)):Ue=0:Yt.push("ofs="+Ue);let lt=!0;for(let jt=0;jt<x;jt++){var Q=B[jt].g;const Ir=B[jt].map;if(Q-=Ue,Q<0)Ue=Math.max(0,B[jt].g-100),lt=!1;else try{Q="req"+Q+"_"||"";try{var pe=Ir instanceof Map?Ir:Object.entries(Ir);for(const[ps,Yr]of pe){let Qr=Yr;f(Yr)&&(Qr=Rn(Yr)),Yt.push(Q+ps+"="+encodeURIComponent(Qr))}}catch(ps){throw Yt.push(Q+"type="+encodeURIComponent("_badmap")),ps}}catch{I&&I(Ir)}}if(lt){pe=Yt.join("&");break e}}pe=void 0}return d=d.i.splice(0,x),b.G=d,pe}function od(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;ae||A(),he||(ae(),he=!0),S.add(b,d),d.A=0}}function Ma(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Mn(y(d.Da,d),ud(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,ld(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Mn(y(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Ei(this),ld(this))};function uc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function ld(d){d.g=new Hn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Mt(d.na);dt(b,"RID","rpc"),dt(b,"SID",d.M),dt(b,"AID",d.K),dt(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&dt(b,"TO",d.ia),dt(b,"TYPE","xmlhttp"),Da(d,b),d.u&&d.o&&Na(b,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Sa(Mt(b)),x.u=null,x.R=!0,ze(x,d)}i.Va=function(){this.C!=null&&(this.C=null,Ei(this),Ma(this),Dt(19))};function Do(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function cd(d,b){var x=null;if(d.g==b){Do(d),uc(d),d.g=null;var I=2}else if(Ze(d.h,b))x=b.G,qe(d.h,b),I=1;else return;if(d.I!=0){if(b.o)if(I==1){x=b.u?b.u.length:0,b=Date.now()-b.F;var B=d.D;I=Er(),yt(I,new qn(I,x)),fs(d)}else od(d);else if(B=b.m,B==3||B==0&&b.X>0||!(I==1&&Ro(d,b)||I==2&&Ma(d)))switch(x&&x.length>0&&(b=d.h,b.i=b.i.concat(x)),B){case 1:ms(d,5);break;case 4:ms(d,10);break;case 3:ms(d,6);break;default:ms(d,2)}}}function ud(d,b){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*b}function ms(d,b){if(d.j.info("Error code "+b),b==2){var x=y(d.bb,d),I=d.Ua;const B=!I;I=new dn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kt(I,"https"),Sa(I),B?Gr(I.toString(),x):ic(I.toString(),x)}else Dt(2);d.I=0,d.l&&d.l.pa(b),dd(d),Co(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function dd(d){if(d.I=0,d.ja=[],d.l){const b=tt(d.h);(b.length!=0||d.i.length!=0)&&(L(d.ja,b),L(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function hd(d,b,x){var I=x instanceof dn?Mt(x):new dn(x);if(I.g!="")b&&(I.g=b+"."+I.g),yi(I,I.u);else{var B=u.location;I=B.protocol,b=b?b+"."+B.hostname:B.hostname,B=+B.port;const Q=new dn(null);I&&Kt(Q,I),b&&(Q.g=b),B&&yi(Q,B),x&&(Q.h=x),I=Q}return x=d.G,b=d.wa,x&&b&&dt(I,x,b),dt(I,"VER",d.ka),Da(d,I),I}function fd(d,b,x){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new _t(new us({ab:x})):new _t(d.ma),b.Fa(d.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}i=md.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Si(){}Si.prototype.g=function(d,b){return new Kn(d,b)};function Kn(d,b){Rt.call(this),this.g=new Ti(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!C(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Ls(this)}w(Kn,Rt),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){lc(this.g)},Kn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=Rn(d),d=x);b.i.push(new _e(b.Ya++,d)),b.I==3&&fs(b)},Kn.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Kn.Z.N.call(this)};function pd(d){Bt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const x in b){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}w(pd,Bt);function gd(){Dn.call(this),this.status=1}w(gd,Dn);function Ls(d){this.g=d}w(Ls,md),Ls.prototype.ra=function(){yt(this.g,"a")},Ls.prototype.qa=function(d){yt(this.g,new pd(d))},Ls.prototype.pa=function(d){yt(this.g,new gd)},Ls.prototype.oa=function(){yt(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,p1=function(){return new Si},m1=function(){return Er()},f1=At,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,Nh=Hr,Os.COMPLETE="complete",h1=Os,Ms.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,ru=Ms,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,d1=_t}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let Yl="12.9.0";function G2(i){Yl=i}const ho=new Zg("@firebase/firestore");function gl(){return ho.logLevel}function ce(i,...e){if(ho.logLevel<=Je.DEBUG){const t=e.map(r0);ho.debug(`Firestore (${Yl}): ${i}`,...t)}}function Jt(i,...e){if(ho.logLevel<=Je.ERROR){const t=e.map(r0);ho.error(`Firestore (${Yl}): ${i}`,...t)}}function fo(i,...e){if(ho.logLevel<=Je.WARN){const t=e.map(r0);ho.warn(`Firestore (${Yl}): ${i}`,...t)}}function r0(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Te(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,g1(i,r,t)}function g1(i,e,t){let r=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Jt(r),new Error(r)}function Ne(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||g1(e,a,r)}function Se(i,e){return i}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class y1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class K2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Y2{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ss,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ss)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new y1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class Q2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class X2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Q2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class s0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=W2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(i,e){return i<e?-1:i>e?1:0}function bg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return Zp(a)===Zp(l)?je(a,l):Zp(a)?1:-1}return je(i.length,e.length)}const Z2=55296,eN=57343;function Zp(i){const e=i.charCodeAt(0);return e>=Z2&&e<=eN}function Cl(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function b1(i){return i+"\0"}const nx="__name__";class vs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=vs.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=vs.isNumericId(e),a=vs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?vs.extractNumericId(e).compare(vs.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class ut extends vs{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends vs{construct(e,t,r){return new Ut(e,t,r)}static isValidIdentifier(e){return tN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nx}static keyField(){return new Ut([nx])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(r+=f,a++):(l(),a++)}if(l(),u)throw new fe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ut.fromString(e))}static fromName(e){return new ye(ut.fromString(e).popFirst(5))}static empty(){return new ye(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ut(e.slice()))}}function _1(i,e,t){if(!t)throw new fe(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function nN(i,e,t,r){if(e===!0&&r===!0)throw new fe(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function rx(i){if(!ye.isDocumentKey(i))throw new fe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sx(i){if(ye.isDocumentKey(i))throw new fe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function v1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function _f(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_f(i);throw new fe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function rN(i,e){if(e<=0)throw new fe(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function ln(i,e){const t={typeString:i};return e&&(t.value=e),t}function qu(i,e){if(!v1(i))throw new fe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(W.INVALID_ARGUMENT,t);return!0}const ix=-62135596800,ax=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ax);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ix)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ax}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:ln("string",mt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new mt(0,0))}static max(){return new Re(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Rl=-1;class Gh{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function _g(i){return i.fields.find((e=>e.kind===2))}function Ja(i){return i.fields.filter((e=>e.kind!==2))}Gh.UNKNOWN_ID=-1;class Ch{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tu(0,wr.min())}}function x1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new wr(a,ye.empty(),e)}function w1(i){return new wr(i.readTime,i.key,Rl)}class wr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wr(Re.min(),ye.empty(),Rl)}static max(){return new wr(Re.max(),ye.empty(),Rl)}}function i0(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(i.documentKey,e.documentKey),t!==0?t:je(i.largestBatchId,e.largestBatchId))}const T1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ga(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==T1)throw i;ce("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(g=>r(g)))})),u=!0,l===a&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((a=>a?U.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,a)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{u[y]=v,++f,f===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new U(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const br="SimpleDb";class vf{static open(e,t,r,a){try{return new vf(t,e.transaction(a,r))}catch(l){throw new cu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ss,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new cu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=a0(r.target.error);this.S.reject(new cu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(br,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iN(t)}}class la{static delete(e){return ce(br,"Removing database:",e),Za(Jw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!i1())return!1;if(la.F())return!0;const e=fn(),t=la.M(e),r=0<t&&t<10,a=S1(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,la.M(fn())===12.2&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(br,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new fe(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new fe(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new cu(e,u))},a.onupgradeneeded=l=>{ce(br,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ce(br,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const f=vf.open(this.db,e,l?"readonly":"readwrite",r),g=a(f).next((y=>(f.C(),y))).catch((y=>(f.abort(y),U.reject(y)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,y=g.name!=="FirebaseError"&&u<3;if(ce(br,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function S1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class sN{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Za(this.U.delete())}}class cu extends fe{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ya(i){return i.name==="IndexedDbTransactionError"}class iN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(br,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(br,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Za(r)}add(e){return ce(br,"ADD",this.store.name,e,e),Za(this.store.add(e))}get(e){return Za(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(br,"GET",this.store.name,e,t),t)))}delete(e){return ce(br,"DELETE",this.store.name,e),Za(this.store.delete(e))}count(){return ce(br,"COUNT",this.store.name),Za(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new U(((u,f)=>{l.onerror=g=>{f(g.target.error)},l.onsuccess=g=>{u(g.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((f,g)=>{u.push(g)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){ce(br,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new U(((r,a)=>{t.onerror=l=>{const u=a0(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():r()})):r()}}))}J(e,t){const r=[];return new U(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void a();const g=new sN(f),y=t(f.primaryKey,f.value,g);if(y instanceof U){const v=y.catch((w=>(g.done(),U.reject(w))));r.push(v)}g.isDone?a():g.G===null?f.continue():f.continue(g.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Za(i){return new U(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=a0(r.target.error);t(a)}}))}let ox=!1;function a0(i){const e=la.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ox||(ox=!0,setTimeout((()=>{throw r}),0)),r}}return i}const uu="IndexBackfiller";class aN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(uu,`Documents written: ${t}`)}catch(t){ya(t)?ce(uu,"Ignoring IndexedDB error during index backfill: ",t):await ga(t)}await this.re(6e4)}))}}class oN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return U.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ce(uu,`Processing collection: ${u}`),this.oe(e,u,a).next((f=>{a-=f,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((f=>(ce(uu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=w1(l);i0(u,r)>0&&(r=u)})),new wr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ar{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ar.ce=-1;const io=-1;function xf(i){return i==null}function Eu(i){return i===0&&1/i==-1/0}function A1(i){return typeof i=="number"&&Number.isInteger(i)&&!Eu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const $h="";function Un(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=lx(e)),e=lN(i.get(t),e);return lx(e)}function lN(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case $h:t+="";break;default:t+=l}}return t}function lx(i){return i+$h+""}function Ts(i){const e=i.length;if(Ne(e>=2,64408,{path:i}),e===2)return Ne(i.charAt(0)===$h&&i.charAt(1)==="",56145,{path:i}),ut.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=i.indexOf($h,l);switch((u<0||u>t)&&Te(50515,{path:i}),i.charAt(u+1)){case"":const f=i.substring(l,u);let g;a.length===0?g=f:(a+=f,g=a,a=""),r.push(g);break;case"":a+=i.substring(l,u),a+="\0";break;case"":a+=i.substring(l,u+1);break;default:Te(61167,{path:i})}l=u+2}return new ut(r)}const Wa="remoteDocuments",Hu="owner",ll="owner",Su="mutationQueues",cN="userId",Zr="mutations",cx="batchId",ro="userMutationsIndex",ux=["userId","batchId"];function Rh(i,e){return[i,Un(e)]}function I1(i,e,t){return[i,Un(e),t]}const uN={},Dl="documentMutations",Kh="remoteDocumentsV14",dN=["prefixPath","collectionGroup","readTime","documentId"],Dh="documentKeyIndex",hN=["prefixPath","collectionGroup","documentId"],N1="collectionGroupIndex",fN=["collectionGroup","readTime","prefixPath","documentId"],Au="remoteDocumentGlobal",vg="remoteDocumentGlobalKey",Ml="targets",C1="queryTargetsIndex",mN=["canonicalId","targetId"],kl="targetDocuments",pN=["targetId","path"],o0="documentTargetsIndex",gN=["path","targetId"],Yh="targetGlobalKey",ao="targetGlobal",Iu="collectionParents",yN=["collectionId","parent"],Ol="clientMetadata",bN="clientId",wf="bundles",_N="bundleId",Tf="namedQueries",vN="name",l0="indexConfiguration",xN="indexId",xg="collectionGroupIndex",wN="collectionGroup",du="indexState",TN=["indexId","uid"],R1="sequenceNumberIndex",EN=["uid","sequenceNumber"],hu="indexEntries",SN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D1="documentKeyIndex",AN=["indexId","uid","orderedDocumentKey"],Ef="documentOverlays",IN=["userId","collectionPath","documentId"],wg="collectionPathOverlayIndex",NN=["userId","collectionPath","largestBatchId"],M1="collectionGroupOverlayIndex",CN=["userId","collectionGroup","largestBatchId"],c0="globals",RN="name",k1=[Su,Zr,Dl,Wa,Ml,Hu,ao,kl,Ol,Au,Iu,wf,Tf],DN=[...k1,Ef],O1=[Su,Zr,Dl,Kh,Ml,Hu,ao,kl,Ol,Au,Iu,wf,Tf,Ef],V1=O1,u0=[...V1,l0,du,hu],MN=u0,j1=[...u0,c0],kN=j1;class Tg extends E1{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pn(i,e){const t=Se(i);return la.O(t.le,e)}function dx(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ba(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function P1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ct{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=a??Nn.EMPTY,this.right=l??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Nn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Nn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hx(this.data.getIterator())}getIteratorFrom(e){return new hx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class hx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(i){return i.hasNext()?i.getNext():void 0}class or{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new or([])}unionWith(e){let t=new gt(Ut.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class L1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new L1("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const ON=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(i){if(Ne(!!i,39018),typeof i=="string"){let e=0;const t=ON.exec(i);if(Ne(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(i.seconds),nanos:Lt(i.nanos)}}function Lt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function oi(i){return typeof i=="string"?Wt.fromBase64String(i):Wt.fromUint8Array(i)}const z1="server_timestamp",U1="__type__",B1="__previous_value__",F1="__local_write_time__";function d0(i){return(i?.mapValue?.fields||{})[U1]?.stringValue===z1}function Sf(i){const e=i.mapValue.fields[B1];return d0(e)?Sf(e):e}function Nu(i){const e=ai(i.mapValue.fields[F1].timestampValue);return new mt(e.seconds,e.nanos)}class VN{constructor(e,t,r,a,l,u,f,g,y,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v,this.apiKey=w}}const Cu="(default)";class mo{constructor(e,t){this.projectId=e,this.database=t||Cu}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===Cu}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function jN(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(i.options.projectId,e)}const h0="__type__",q1="__max__",ra={mapValue:{fields:{__type__:{stringValue:q1}}}},f0="__vector__",Vl="value",Mh={nullValue:"NULL_VALUE"};function ha(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?d0(i)?4:H1(i)?9007199254740991:Af(i)?10:11:Te(28295,{value:i})}function Ns(i,e){if(i===e)return!0;const t=ha(i);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Nu(i).isEqual(Nu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ai(a.timestampValue),f=ai(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return oi(a.bytesValue).isEqual(oi(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Lt(a.geoPointValue.latitude)===Lt(l.geoPointValue.latitude)&&Lt(a.geoPointValue.longitude)===Lt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Lt(a.integerValue)===Lt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Lt(a.doubleValue),f=Lt(l.doubleValue);return u===f?Eu(u)===Eu(f):isNaN(u)&&isNaN(f)}return!1})(i,e);case 9:return Cl(i.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(dx(u)!==dx(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!Ns(u[g],f[g])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function Ru(i,e){return(i.values||[]).find((t=>Ns(t,e)))!==void 0}function fa(i,e){if(i===e)return 0;const t=ha(i),r=ha(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Lt(l.integerValue||l.doubleValue),g=Lt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(i,e);case 3:return fx(i.timestampValue,e.timestampValue);case 4:return fx(Nu(i),Nu(e));case 5:return bg(i.stringValue,e.stringValue);case 6:return(function(l,u){const f=oi(l),g=oi(u);return f.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=je(f[y],g[y]);if(v!==0)return v}return je(f.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=je(Lt(l.latitude),Lt(u.latitude));return f!==0?f:je(Lt(l.longitude),Lt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return mx(i.arrayValue,e.arrayValue);case 10:return(function(l,u){const f=l.fields||{},g=u.fields||{},y=f[Vl]?.arrayValue,v=g[Vl]?.arrayValue,w=je(y?.values?.length||0,v?.values?.length||0);return w!==0?w:mx(y,v)})(i.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ra.mapValue&&u===ra.mapValue)return 0;if(l===ra.mapValue)return 1;if(u===ra.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const T=bg(g[w],v[w]);if(T!==0)return T;const R=fa(f[g[w]],y[v[w]]);if(R!==0)return R}return je(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function fx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const t=ai(i),r=ai(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function mx(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=fa(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function jl(i){return Eg(i)}function Eg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=ai(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return oi(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ye.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Eg(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${Eg(t.fields[u])}`;return a+"}"})(i.mapValue):Te(61005,{value:i})}function kh(i){switch(ha(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(i);return e?16+kh(e):16;case 5:return 2*i.stringValue.length;case 6:return oi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+kh(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return ba(r.fields,((l,u)=>{a+=l.length+kh(u)})),a})(i.mapValue);default:throw Te(13486,{value:i})}}function Du(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Sg(i){return!!i&&"integerValue"in i}function Mu(i){return!!i&&"arrayValue"in i}function px(i){return!!i&&"nullValue"in i}function gx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Oh(i){return!!i&&"mapValue"in i}function Af(i){return(i?.mapValue?.fields||{})[h0]?.stringValue===f0}function fu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ba(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fu(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(i.arrayValue.values[t]);return e}return{...i}}function H1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===q1}const G1={mapValue:{fields:{[h0]:{stringValue:f0},[Vl]:{arrayValue:{}}}}};function PN(i){return"nullValue"in i?Mh:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Du(mo.empty(),ye.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Af(i)?G1:{mapValue:{}}:Te(35942,{value:i})}function LN(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Du(mo.empty(),ye.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?G1:"mapValue"in i?Af(i)?{mapValue:{}}:ra:Te(61959,{value:i})}function yx(i,e){const t=fa(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function bx(i,e){const t=fa(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=Ut.emptyPath(),r={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,a),r={},a=[],t=f.popLast()}u?r[f.lastSegment()]=fu(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ba(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Ln(fu(this.value))}}function $1(i){const e=[];return ba(i.fields,((t,r)=>{const a=new Ut([t]);if(Oh(r)){const l=$1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new or(e)}class Gt{constructor(e,t,r,a,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Gt(e,0,Re.min(),Re.min(),Re.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,a){return new Gt(e,1,t,Re.min(),r,a,0)}static newNoDocument(e,t){return new Gt(e,2,t,Re.min(),Re.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Re.min(),Re.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}function _x(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],u=i.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=fa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function vx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ns(i.position[t],e.position[t]))return!1;return!0}class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function zN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class K1{}class We extends K1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new UN(e,t,r):t==="array-contains"?new qN(e,r):t==="in"?new Z1(e,r):t==="not-in"?new HN(e,r):t==="array-contains-any"?new GN(e,r):new We(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new BN(e,r):new FN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends K1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pt(e,t)}matches(e){return Ll(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ll(i){return i.op==="and"}function Ag(i){return i.op==="or"}function m0(i){return Y1(i)&&Ll(i)}function Y1(i){for(const e of i.filters)if(e instanceof pt)return!1;return!0}function Ig(i){if(i instanceof We)return i.field.canonicalString()+i.op.toString()+jl(i.value);if(m0(i))return i.filters.map((e=>Ig(e))).join(",");{const e=i.filters.map((t=>Ig(t))).join(",");return`${i.op}(${e})`}}function Q1(i,e){return i instanceof We?(function(r,a){return a instanceof We&&r.op===a.op&&r.field.isEqual(a.field)&&Ns(r.value,a.value)})(i,e):i instanceof pt?(function(r,a){return a instanceof pt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,f)=>l&&Q1(u,a.filters[f])),!0):!1})(i,e):void Te(19439)}function X1(i,e){const t=i.filters.concat(e);return pt.create(t,i.op)}function J1(i){return i instanceof We?(function(t){return`${t.field.canonicalString()} ${t.op} ${jl(t.value)}`})(i):i instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(J1).join(" ,")+"}"})(i):"Filter"}class UN extends We{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class BN extends We{constructor(e,t){super(e,"in",t),this.keys=W1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FN extends We{constructor(e,t){super(e,"not-in",t),this.keys=W1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function W1(i,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class qN extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mu(t)&&Ru(t.arrayValue,this.value)}}class Z1 extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ru(this.value.arrayValue,t)}}class HN extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ru(this.value.arrayValue,t)}}class GN extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ru(this.value.arrayValue,r)))}}class $N{constructor(e,t=null,r=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function Ng(i,e=null,t=[],r=[],a=null,l=null,u=null){return new $N(i,e,t,r,a,l,u)}function po(i){const e=Se(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ig(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>jl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>jl(r))).join(",")),e.Te=t}return e.Te}function Gu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!zN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Q1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!vx(i.startAt,e.startAt)&&vx(i.endAt,e.endAt)}function Qh(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Xh(i,e){return i.filters.filter((t=>t instanceof We&&t.field.isEqual(e)))}function xx(i,e,t){let r=Mh,a=!0;for(const l of Xh(i,e)){let u=Mh,f=!0;switch(l.op){case"<":case"<=":u=PN(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=Mh}yx({value:r,inclusive:a},{value:u,inclusive:f})<0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];yx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function wx(i,e,t){let r=ra,a=!0;for(const l of Xh(i,e)){let u=ra,f=!0;switch(l.op){case">=":case">":u=LN(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=ra}bx({value:r,inclusive:a},{value:u,inclusive:f})>0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];bx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class Ql{constructor(e,t=null,r=[],a=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eT(i,e,t,r,a,l,u,f){return new Ql(i,e,t,r,a,l,u,f)}function $u(i){return new Ql(i)}function Tx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function KN(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function tT(i){return i.collectionGroup!==null}function mu(i){const e=Se(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new gt(Ut.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ku(l,r))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new ku(Ut.keyField(),r))}return e.Ie}function xr(i){const e=Se(i);return e.Ee||(e.Ee=YN(e,mu(i))),e.Ee}function YN(i,e){if(i.limitType==="F")return Ng(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ku(a.field,l)}));const t=i.endAt?new Pl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Pl(i.startAt.position,i.startAt.inclusive):null;return Ng(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Cg(i,e){const t=i.filters.concat([e]);return new Ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function QN(i,e){const t=i.explicitOrderBy.concat([e]);return new Ql(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Jh(i,e,t){return new Ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function If(i,e){return Gu(xr(i),xr(e))&&i.limitType===e.limitType}function nT(i){return`${po(xr(i))}|lt:${i.limitType}`}function yl(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>J1(a))).join(", ")}]`),xf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>jl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>jl(a))).join(",")),`Target(${r})`})(xr(i))}; limitType=${i.limitType})`}function Ku(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of mu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(u,f,g){const y=_x(u,f,g);return u.inclusive?y<=0:y<0})(r.startAt,mu(r),a)||r.endAt&&!(function(u,f,g){const y=_x(u,f,g);return u.inclusive?y>=0:y>0})(r.endAt,mu(r),a))})(i,e)}function rT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function sT(i){return(e,t)=>{let r=!1;for(const a of mu(i)){const l=XN(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function XN(i,e,t){const r=i.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),y=f.data.field(l);return g!==null&&y!==null?fa(g,y):Te(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:i.dir})}}class di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return P1(this.inner)}size(){return this.innerSize}}const JN=new Ct(ye.comparator);function vr(){return JN}const iT=new Ct(ye.comparator);function su(...i){let e=iT;for(const t of i)e=e.insert(t.key,t);return e}function aT(i){let e=iT;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Es(){return pu()}function oT(){return pu()}function pu(){return new di((i=>i.toString()),((i,e)=>i.isEqual(e)))}const WN=new Ct(ye.comparator),ZN=new gt(ye.comparator);function He(...i){let e=ZN;for(const t of i)e=e.add(t);return e}const eC=new gt(je);function p0(){return eC}function g0(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function lT(i){return{integerValue:""+i}}function cT(i,e){return A1(e)?lT(e):g0(i,e)}class Nf{constructor(){this._=void 0}}function tC(i,e,t){return i instanceof Ou?(function(a,l){const u={fields:{[U1]:{stringValue:z1},[F1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&d0(l)&&(l=Sf(l)),l&&(u.fields[B1]=l),{mapValue:u}})(t,e):i instanceof zl?dT(i,e):i instanceof Ul?hT(i,e):(function(a,l){const u=uT(a,l),f=Ex(u)+Ex(a.Ae);return Sg(u)&&Sg(a.Ae)?lT(f):g0(a.serializer,f)})(i,e)}function nC(i,e,t){return i instanceof zl?dT(i,e):i instanceof Ul?hT(i,e):t}function uT(i,e){return i instanceof Bl?(function(r){return Sg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Ou extends Nf{}class zl extends Nf{constructor(e){super(),this.elements=e}}function dT(i,e){const t=fT(e);for(const r of i.elements)t.some((a=>Ns(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Ul extends Nf{constructor(e){super(),this.elements=e}}function hT(i,e){let t=fT(e);for(const r of i.elements)t=t.filter((a=>!Ns(a,r)));return{arrayValue:{values:t}}}class Bl extends Nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ex(i){return Lt(i.integerValue||i.doubleValue)}function fT(i){return Mu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class mT{constructor(e,t){this.field=e,this.transform=t}}function rC(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof zl&&a instanceof zl||r instanceof Ul&&a instanceof Ul?Cl(r.elements,a.elements,Ns):r instanceof Bl&&a instanceof Bl?Ns(r.Ae,a.Ae):r instanceof Ou&&a instanceof Ou})(i.transform,e.transform)}class sC{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Cf{}function pT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Rf(i.key,zn.none()):new Xl(i.key,i.data,zn.none());{const t=i.data,r=Ln.empty();let a=new gt(Ut.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new hi(i.key,r,new or(a.toArray()),zn.none())}}function iC(i,e,t){i instanceof Xl?(function(a,l,u){const f=a.value.clone(),g=Ax(a.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,e,t):i instanceof hi?(function(a,l,u){if(!Vh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Ax(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(gT(a)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gu(i,e,t,r){return i instanceof Xl?(function(l,u,f,g){if(!Vh(l.precondition,u))return f;const y=l.value.clone(),v=Ix(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,t,r):i instanceof hi?(function(l,u,f,g){if(!Vh(l.precondition,u))return f;const y=Ix(l.fieldTransforms,g,u),v=u.data;return v.setAll(gT(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(i,e,t,r):(function(l,u,f){return Vh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(i,e,t)}function aC(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=uT(r.transform,a||null);l!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,l))}return t||null}function Sx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Cl(r,a,((l,u)=>rC(l,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Xl extends Cf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class hi extends Cf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Ax(i,e,t){const r=new Map;Ne(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const l=i[a],u=l.transform,f=e.data.field(l.field);r.set(l.field,nC(u,f,t[a]))}return r}function Ix(i,e,t){const r=new Map;for(const a of i){const l=a.transform,u=t.data.field(a.field);r.set(a.field,tC(l,u,e))}return r}class Rf extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yT extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&iC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const g=pT(u,f);g!==null&&r.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((t,r)=>Sx(t,r)))&&Cl(this.baseMutations,e.baseMutations,((t,r)=>Sx(t,r)))}}class b0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return WN})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new b0(e,t,r,a)}}class _0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oC{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function lC(i){switch(i){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function bT(i){if(i===void 0)return Jt("GRPC error has no .code"),W.UNKNOWN;switch(i){case on.OK:return W.OK;case on.CANCELLED:return W.CANCELLED;case on.UNKNOWN:return W.UNKNOWN;case on.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case on.INTERNAL:return W.INTERNAL;case on.UNAVAILABLE:return W.UNAVAILABLE;case on.UNAUTHENTICATED:return W.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case on.NOT_FOUND:return W.NOT_FOUND;case on.ALREADY_EXISTS:return W.ALREADY_EXISTS;case on.PERMISSION_DENIED:return W.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case on.ABORTED:return W.ABORTED;case on.OUT_OF_RANGE:return W.OUT_OF_RANGE;case on.UNIMPLEMENTED:return W.UNIMPLEMENTED;case on.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:i})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function cC(){return new TextEncoder}const uC=new oa([4294967295,4294967295],0);function Nx(i){const e=cC().encode(i),t=new u1;return t.update(e),new Uint8Array(t.digest())}function Cx(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new oa([t,r],0),new oa([a,l],0)]}class v0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(r<0)throw new iu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(oa.fromNumber(r)));return a.compare(uC)===1&&(a=new oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Nx(e),[r,a]=Cx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new v0(l,a,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Nx(e),[r,a]=Cx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yu{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yu(Re.min(),a,new Ct(je),vr(),He())}}class Qu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qu(r,t,He(),He(),He())}}class jh{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class _T{constructor(e,t){this.targetId=e,this.Ce=t}}class vT{constructor(e,t,r=Wt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Rx{constructor(){this.ve=0,this.Fe=Dx(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),r=He();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Te(38017,{changeType:l})}})),new Qu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Dx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dC{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.He=wh(),this.Je=wh(),this.Ze=new Ct(je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Qh(l))if(r===0){const u=new ye(l.path);this.et(t,u,Gt.newNoDocument(u,Re.min()))}else Ne(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=oi(r).toUint8Array()}catch(g){if(g instanceof L1)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new v0(u,a,l)}catch(g){return fo(g instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Qh(f.target)){const g=new ye(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Gt.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=He();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Yu(e,t,this.Ze,this.je,r);return this.je=vr(),this.He=wh(),this.Je=wh(),this.Ze=new Ct(je),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Rx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new gt(je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new gt(je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wh(){return new Ct(ye.comparator)}function Dx(){return new Ct(ye.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},fC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class pC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rg(i,e){return i.useProto3Json||xf(e)?e:{value:e}}function Fl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gC(i,e){return Fl(i,e.toTimestamp())}function Qn(i){return Ne(!!i,49232),Re.fromTimestamp((function(t){const r=ai(t);return new mt(r.seconds,r.nanos)})(i))}function x0(i,e){return Dg(i,e).canonicalString()}function Dg(i,e){const t=(function(a){return new ut(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function wT(i){const e=ut.fromString(i);return Ne(DT(e),10190,{key:e.toString()}),e}function Wh(i,e){return x0(i.databaseId,e.path)}function oo(i,e){const t=wT(e);if(t.get(1)!==i.databaseId.projectId)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ye(ST(t))}function TT(i,e){return x0(i.databaseId,e)}function ET(i){const e=wT(i);return e.length===4?ut.emptyPath():ST(e)}function Mg(i){return new ut(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ST(i){return Ne(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Mx(i,e,t){return{name:Wh(i,e),fields:t.value.mapValue.fields}}function yC(i,e,t){const r=oo(i,e.name),a=Qn(e.updateTime),l=e.createTime?Qn(e.createTime):Re.min(),u=new Ln({mapValue:{fields:e.fields}}),f=Gt.newFoundDocument(r,a,l,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function bC(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(Ne(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Ne(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(y){const v=y.code===void 0?W.UNKNOWN:bT(y.code);return new fe(v,y.message||"")})(u);t=new vT(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=oo(i,r.document.name),l=Qn(r.document.updateTime),u=r.document.createTime?Qn(r.document.createTime):Re.min(),f=new Ln({mapValue:{fields:r.document.fields}}),g=Gt.newFoundDocument(a,l,u,f),y=r.targetIds||[],v=r.removedTargetIds||[];t=new jh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=oo(i,r.document),l=r.readTime?Qn(r.readTime):Re.min(),u=Gt.newNoDocument(a,l),f=r.removedTargetIds||[];t=new jh([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=oo(i,r.document),l=r.removedTargetIds||[];t=new jh([],l,a,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new oC(a,l),f=r.targetId;t=new _T(f,u)}}return t}function Zh(i,e){let t;if(e instanceof Xl)t={update:Mx(i,e.key,e.value)};else if(e instanceof Rf)t={delete:Wh(i,e.key)};else if(e instanceof hi)t={update:Mx(i,e.key,e.data),updateMask:EC(e.fieldMask)};else{if(!(e instanceof yT))return Te(16599,{dt:e.type});t={verify:Wh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const f=u.transform;if(f instanceof Ou)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof zl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ul)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Bl)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:gC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(i,e.precondition)),t}function kg(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?zn.updateTime(Qn(l.updateTime)):l.exists!==void 0?zn.exists(l.exists):zn.none()})(e.currentDocument):zn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,f){let g=null;if("setToServerValue"in f)Ne(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Ou;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];g=new zl(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];g=new Ul(v)}else"increment"in f?g=new Bl(u,f.increment):Te(16584,{proto:f});const y=Ut.fromServerFormat(f.fieldPath);return new mT(y,g)})(i,a))):[];if(e.update){e.update.name;const a=oo(i,e.update.name),l=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(g){const y=g.fieldPaths||[];return new or(y.map((v=>Ut.fromServerFormat(v))))})(e.updateMask);return new hi(a,l,u,t,r)}return new Xl(a,l,t,r)}if(e.delete){const a=oo(i,e.delete);return new Rf(a,t)}if(e.verify){const a=oo(i,e.verify);return new yT(a,t)}return Te(1463,{proto:e})}function _C(i,e){return i&&i.length>0?(Ne(e!==void 0,14353),i.map((t=>(function(a,l){let u=a.updateTime?Qn(a.updateTime):Qn(l);return u.isEqual(Re.min())&&(u=Qn(l)),new sC(u,a.transformResults||[])})(t,e)))):[]}function AT(i,e){return{documents:[TT(i,e.path)]}}function IT(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TT(i,a);const l=(function(y){if(y.length!==0)return RT(pt.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:bl(T.field),direction:xC(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Rg(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function NT(i){let e=ET(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ne(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(w){const T=CT(w);return T instanceof pt&&m0(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(L){return new ku(_l(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let T;return T=typeof w=="object"?w.value:w,xf(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(w){const T=!!w.before,R=w.values||[];return new Pl(R,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const T=!w.before,R=w.values||[];return new Pl(R,T)})(t.endAt)),eT(e,a,u,l,f,"F",g,y)}function vC(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=_l(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=_l(t.unaryFilter.field);return We.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return We.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_l(t.unaryFilter.field);return We.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(t){return We.create(_l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>CT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(i):Te(30097,{filter:i})}function xC(i){return hC[i]}function wC(i){return fC[i]}function TC(i){return mC[i]}function bl(i){return{fieldPath:i.canonicalString()}}function _l(i){return Ut.fromServerFormat(i.fieldPath)}function RT(i){return i instanceof We?(function(t){if(t.op==="=="){if(gx(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NAN"}};if(px(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gx(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NAN"}};if(px(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(t.field),op:wC(t.op),value:t.value}}})(i):i instanceof pt?(function(t){const r=t.getFilters().map((a=>RT(a)));return r.length===1?r[0]:{compositeFilter:{op:TC(t.op),filters:r}}})(i):Te(54877,{filter:i})}function EC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function MT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class ti{constructor(e,t,r,a,l=Re.min(),u=Re.min(),f=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kT{constructor(e){this.yt=e}}function SC(i,e){let t;if(e.document)t=yC(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=yo(e.noDocument.readTime);t=Gt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=yo(e.unknownDocument.version);t=Gt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new mt(a[0],a[1]);return Re.fromTimestamp(l)})(e.readTime)),t}function kx(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Wh(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Fl(l,u.version.toTimestamp()),createTime:Fl(l,u.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:go(e.version)}}return r}function ef(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function go(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yo(i){const e=new mt(i.seconds,i.nanoseconds);return Re.fromTimestamp(e)}function eo(i,e){const t=(e.baseMutations||[]).map((l=>kg(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>kg(i.yt,l))),a=mt.fromMillis(e.localWriteTimeMs);return new y0(e.batchId,a,t,r)}function au(i){const e=yo(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?yo(i.lastLimboFreeSnapshotVersion):Re.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const u=l.documents.length;return Ne(u===1,1966,{count:u}),xr($u(ET(l.documents[0])))})(i.query):(function(l){return xr(NT(l))})(i.query),new ti(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Wt.fromBase64String(i.resumeToken))}function OT(i,e){const t=go(e.snapshotVersion),r=go(e.lastLimboFreeSnapshotVersion);let a;a=Qh(e.target)?AT(i.yt,e.target):IT(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:po(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function VT(i){const e=NT({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Jh(e,e.limit,"L"):e}function eg(i,e){return new _0(e.largestBatchId,kg(i.yt,e.overlayMutation))}function Ox(i,e){const t=e.path.lastSegment();return[i,Un(e.path.popLast()),t]}function Vx(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:go(r.readTime),documentKey:Un(r.documentKey.path),largestBatchId:r.largestBatchId}}class AC{getBundleMetadata(e,t){return jx(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:yo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return jx(e).put((function(a){return{bundleId:a.id,createTime:go(Qn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Px(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:VT(l.bundledQuery),readTime:yo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return Px(e).put((function(a){return{name:a.name,readTime:go(Qn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function jx(i){return pn(i,wf)}function Px(i){return pn(i,Tf)}class Df{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Df(e,r)}getOverlay(e,t){return Qc(e).get(Ox(this.userId,t)).next((r=>r?eg(this.serializer,r):null))}getOverlays(e,t){const r=Es();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const f=new _0(t,u);a.push(this.bt(e,f))})),U.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Un(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Qc(e).X(wg,f))})),U.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Es(),l=Un(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Qc(e).H(wg,u).next((f=>{for(const g of f){const y=eg(this.serializer,g);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Es();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qc(e).ee({index:M1,range:f},((g,y,v)=>{const w=eg(this.serializer,y);l.size()<a||w.largestBatchId===u?(l.set(w.getKey(),w),u=w.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Qc(e).put((function(a,l,u){const[f,g,y]=Ox(l,u.mutation.key);return{userId:l,collectionPath:g,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Zh(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Qc(i){return pn(i,Ef)}class IC{St(e){return pn(e,c0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class to{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Lt(e.integerValue));else if("doubleValue"in e){const r=Lt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Eu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ai(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(oi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?H1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Af(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Te(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Vl,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Lt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}to.Wt=new to;const ul=255;function NC(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Lx(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=NC(255&r[l]);if(a+=u,u!==8)break}return a})(i);return Math.ceil(e/8)}class CC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=Lx(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=Lx(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(ul),this.sn(255)}_n(){this.an(ul),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ul?(this.sn(ul),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ul?(this.an(ul),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class RC{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class DC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xc{constructor(){this.cn=new CC,this.ascending=new RC(this.cn),this.descending=new DC(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class no{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new no(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Ph(this.Tn),directionalValue:Ph(this.In),orderedDocumentKey:Ph(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Yi(i,e){let t=i.hn-e.hn;return t!==0?t:(t=zx(i.Tn,e.Tn),t!==0?t:(t=zx(i.In,e.In),t!==0?t:ye.comparator(i.Pn,e.Pn)))}function zx(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Ph(i){return s1()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function Ux(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class Bx{constructor(e){this.Vn=new gt(((t,r)=>Ut.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ne(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=_g(e);if(t!==void 0&&!this.pn(t))return!1;const r=Ja(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const g=r[l];if(!this.yn(f,g)||!this.wn(this.dn[u++],g))return!1}++l}for(;l<r.length;++l){const f=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new gt(Ut.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ch(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ch(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ch(r.field,r.dir==="asc"?0:1)));return new Gh(Gh.UNKNOWN_ID,this.collectionId,t,Tu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function jT(i){if(Ne(i instanceof We||i instanceof pt,20012),i instanceof We){if(i instanceof Z1){const t=i.value.arrayValue?.values?.map((r=>We.create(i.field,"==",r)))||[];return pt.create(t,"or")}return i}const e=i.filters.map((t=>jT(t)));return pt.create(e,i.op)}function MC(i){if(i.getFilters().length===0)return[];const e=jg(jT(i));return Ne(PT(e),7391),Og(e)||Vg(e)?[e]:e.getFilters()}function Og(i){return i instanceof We}function Vg(i){return i instanceof pt&&m0(i)}function PT(i){return Og(i)||Vg(i)||(function(t){if(t instanceof pt&&Ag(t)){for(const r of t.getFilters())if(!Og(r)&&!Vg(r))return!1;return!0}return!1})(i)}function jg(i){if(Ne(i instanceof We||i instanceof pt,34018),i instanceof We)return i;if(i.filters.length===1)return jg(i.filters[0]);const e=i.filters.map((r=>jg(r)));let t=pt.create(e,i.op);return t=tf(t),PT(t)?t:(Ne(t instanceof pt,64498),Ne(Ll(t),40251),Ne(t.filters.length>1,57927),t.filters.reduce(((r,a)=>w0(r,a))))}function w0(i,e){let t;return Ne(i instanceof We||i instanceof pt,38388),Ne(e instanceof We||e instanceof pt,25473),t=i instanceof We?e instanceof We?(function(a,l){return pt.create([a,l],"and")})(i,e):Fx(i,e):e instanceof We?Fx(e,i):(function(a,l){if(Ne(a.filters.length>0&&l.filters.length>0,48005),Ll(a)&&Ll(l))return X1(a,l.getFilters());const u=Ag(a)?a:l,f=Ag(a)?l:a,g=u.filters.map((y=>w0(y,f)));return pt.create(g,"or")})(i,e),tf(t)}function Fx(i,e){if(Ll(e))return X1(e,i.getFilters());{const t=e.filters.map((r=>w0(i,r)));return pt.create(t,"or")}}function tf(i){if(Ne(i instanceof We||i instanceof pt,11850),i instanceof We)return i;const e=i.getFilters();if(e.length===1)return tf(e[0]);if(Y1(i))return i;const t=e.map((a=>tf(a))),r=[];return t.forEach((a=>{a instanceof We?r.push(a):a instanceof pt&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:pt.create(r,i.op)}class kC{constructor(){this.Sn=new T0}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(wr.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class T0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new gt(ut.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new gt(ut.comparator)).toArray()}}const qx="IndexedDbIndexManager",Th=new Uint8Array(0);class OC{constructor(e,t){this.databaseId=t,this.Dn=new T0,this.Cn=new di((r=>po(r)),((r,a)=>Gu(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:Un(a)};return Hx(e).put(l)}return U.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[b1(t),""],!1,!0);return Hx(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Ts(u.parent))}return r}))}addFieldIndex(e,t){const r=Jc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=hl(e);return l.next((f=>{u.put(Vx(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Jc(e),a=hl(e),l=dl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jc(e),r=dl(e),a=hl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return U.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new Bx(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=dl(e);let a=!0;const l=new Map;return U.forEach(this.vn(t),(u=>this.Fn(e,u).next((f=>{a&&(a=!!f),l.set(u,f)})))).next((()=>{if(a){let u=He();const f=[];return U.forEach(l,((g,y)=>{ce(qx,`Using index ${(function(Y){return`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(g)} to execute ${po(t)}`);const v=(function(Y,le){const ae=_g(le);if(ae===void 0)return null;for(const he of Xh(Y,ae.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(y,g),w=(function(Y,le){const ae=new Map;for(const he of Ja(le))for(const S of Xh(Y,he.fieldPath))switch(S.op){case"==":case"in":ae.set(he.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ae.set(he.fieldPath.canonicalString(),S.value),Array.from(ae.values())}return null})(y,g),T=(function(Y,le){const ae=[];let he=!0;for(const S of Ja(le)){const A=S.kind===0?xx(Y,S.fieldPath,Y.startAt):wx(Y,S.fieldPath,Y.startAt);ae.push(A.value),he&&(he=A.inclusive)}return new Pl(ae,he)})(y,g),R=(function(Y,le){const ae=[];let he=!0;for(const S of Ja(le)){const A=S.kind===0?wx(Y,S.fieldPath,Y.endAt):xx(Y,S.fieldPath,Y.endAt);ae.push(A.value),he&&(he=A.inclusive)}return new Pl(ae,he)})(y,g),L=this.Mn(g,y,T),X=this.Mn(g,y,R),F=this.xn(g,y,w),H=this.On(g.indexId,v,L,T.inclusive,X,R.inclusive,F);return U.forEach(H,(ee=>r.Z(ee,t.limit).next((Y=>{Y.forEach((le=>{const ae=ye.fromSegments(le.documentKey);u.has(ae)||(u=u.add(ae),f.push(ae))}))}))))})).next((()=>f))}return U.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=MC(pt.create(e.filters,"and")).map((r=>Ng(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,f){const g=(t!=null?t.length:1)*Math.max(r.length,l.length),y=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const T=t?this.Nn(t[w/y]):Th,R=this.Bn(e,T,r[w%y],a),L=this.Ln(e,T,l[w%y],u),X=f.map((F=>this.Bn(e,T,F,!0)));v.push(...this.createRange(R,L,X))}return v}Bn(e,t,r,a){const l=new no(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new no(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new Bx(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const f of l)r.gn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return U.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(g){let y=new gt(Ut.comparator),v=!1;for(const w of g.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:y=y.add(T.field));for(const w of g.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Xc;for(const a of Ja(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);to.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new Xc;return to.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Xc;return to.Wt.Dt(Du(this.databaseId,t),r.ln((function(l){const u=Ja(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Xc);let l=0;for(const u of Ja(e)){const f=r[l++];for(const g of a)if(this.qn(t,u.fieldPath)&&Mu(f))a=this.Un(a,u,f);else{const y=g.ln(u.kind);to.Wt.Dt(f,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of a){const g=new Xc;g.seed(f.un()),to.Wt.Dt(u,g.ln(t.kind)),l.push(g)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof We&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Jc(e),a=hl(e);return(t?r.H(xg,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return U.forEach(l,(f=>a.get([f.indexId,this.uid]).next((g=>{u.push((function(v,w){const T=w?new Tu(w.sequenceNumber,new wr(yo(w.readTime),new ye(Ts(w.documentKey)),w.largestBatchId)):Tu.empty(),R=v.fields.map((([L,X])=>new Ch(Ut.fromServerFormat(L),X)));return new Gh(v.indexId,v.collectionGroup,R,T)})(f,g))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:je(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Jc(e),l=hl(e);return this.Wn(e).next((u=>a.H(xg,IDBKeyRange.bound(t,t)).next((f=>U.forEach(f,(g=>l.put(Vx(g.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?U.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),U.forEach(f,(g=>this.Qn(e,a,g).next((y=>{const v=this.Gn(l,g);return y.isEqual(v)?U.resolve():this.zn(e,l,g,y,v)})))))))}))}jn(e,t,r,a){return dl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return dl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=dl(e);let l=new gt(Yi);return a.ee({index:D1,range:IDBKeyRange.only([r.indexId,this.uid,Ph(this.Kn(r,t))])},((u,f)=>{l=l.add(new no(r.indexId,t,Ux(f.arrayValue),Ux(f.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new gt(Yi);const a=this.kn(t,e);if(a==null)return r;const l=_g(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Mu(u))for(const f of u.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.Nn(f),a))}else r=r.add(new no(t.indexId,e.key,Th,a));return r}zn(e,t,r,a,l){ce(qx,"Updating index entries for document '%s'",t.key);const u=[];return(function(g,y,v,w,T){const R=g.getIterator(),L=y.getIterator();let X=cl(R),F=cl(L);for(;X||F;){let H=!1,ee=!1;if(X&&F){const Y=v(X,F);Y<0?ee=!0:Y>0&&(H=!0)}else X!=null?ee=!0:H=!0;H?(w(F),F=cl(L)):ee?(T(X),X=cl(R)):(X=cl(R),F=cl(L))}})(a,l,Yi,(f=>{u.push(this.jn(e,t,r,f))}),(f=>{u.push(this.Hn(e,t,r,f))})),U.waitFor(u)}Wn(e){let t=1;return hl(e).ee({index:R1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,f)=>Yi(u,f))).filter(((u,f,g)=>!f||Yi(u,g[f-1])!==0));const a=[];a.push(e);for(const u of r){const f=Yi(u,e),g=Yi(u,t);if(f===0)a[0]=e.En();else if(f>0&&g<0)a.push(u),a.push(u.En());else if(g>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const f=a[u].An(this.uid,Th,ye.empty()),g=a[u+1].An(this.uid,Th,ye.empty());l.push(IDBKeyRange.bound(f,g))}return l}Jn(e,t){return Yi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gx)}getMinOffset(e,t){return U.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||Te(44426))))).next(Gx)}}function Hx(i){return pn(i,Iu)}function dl(i){return pn(i,hu)}function Jc(i){return pn(i,l0)}function hl(i){return pn(i,du)}function Gx(i){Ne(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;i0(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new wr(e.readTime,e.documentKey,t)}const $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function zT(i,e,t){const r=i.store(Zr),a=i.store(Dl),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const g=r.ee({range:u},((v,w,T)=>(f++,T.delete())));l.push(g.next((()=>{Ne(f===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const w=I1(e,v.key.path,t.batchId);l.push(a.delete(w)),y.push(v.key)}return U.waitFor(l).next((()=>y))}function nf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Te(14731);e=i.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(LT,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Mf{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ne(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Mf(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qi(e).ee({index:ro,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=vl(e),u=Qi(e);return u.add({}).next((f=>{Ne(typeof f=="number",49019);const g=new y0(f,t,r,a),y=(function(R,L,X){const F=X.baseMutations.map((ee=>Zh(R.yt,ee))),H=X.mutations.map((ee=>Zh(R.yt,ee)));return{userId:L,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:F,mutations:H}})(this.serializer,this.userId,g),v=[];let w=new gt(((T,R)=>je(T.canonicalString(),R.canonicalString())));for(const T of a){const R=I1(this.userId,T.key.path,f);w=w.add(T.key.path.popLast()),v.push(u.put(y)),v.push(l.put(R,uN))}return w.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[f]=g.keys()})),U.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return Qi(e).get(t).next((r=>r?(Ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),eo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?U.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Qi(e).ee({index:ro,range:a},((u,f,g)=>{f.userId===this.userId&&(Ne(f.batchId>=r,47524,{Yn:r}),l=eo(this.serializer,f)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=io;return Qi(e).ee({index:ro,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,io],[this.userId,Number.POSITIVE_INFINITY]);return Qi(e).H(ro,t).next((r=>r.map((a=>eo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rh(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return vl(e).ee({range:a},((u,f,g)=>{const[y,v,w]=u,T=Ts(v);if(y===this.userId&&t.path.isEqual(T))return Qi(e).get(w).next((R=>{if(!R)throw Te(61480,{er:u,batchId:w});Ne(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:w}),l.push(eo(this.serializer,R))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(je);const a=[];return t.forEach((l=>{const u=Rh(this.userId,l.path),f=IDBKeyRange.lowerBound(u),g=vl(e).ee({range:f},((y,v,w)=>{const[T,R,L]=y,X=Ts(R);T===this.userId&&l.path.isEqual(X)?r=r.add(L):w.done()}));a.push(g)})),U.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Rh(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new gt(je);return vl(e).ee({range:u},((g,y,v)=>{const[w,T,R]=g,L=Ts(T);w===this.userId&&r.isPrefixOf(L)?L.length===a&&(f=f.add(R)):v.done()})).next((()=>this.tr(e,f)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Qi(e).get(l).next((u=>{if(u===null)throw Te(35274,{batchId:l});Ne(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(eo(this.serializer,u))})))})),U.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return zT(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),U.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return vl(e).ee({range:r},((l,u,f)=>{if(l[0]===this.userId){const g=Ts(l[1]);a.push(g)}else f.done()})).next((()=>{Ne(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return UT(e,this.userId,t)}ir(e){return BT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:io,lastStreamToken:""}))}}function UT(i,e,t){const r=Rh(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return vl(i).ee({range:l,Y:!0},((f,g,y)=>{const[v,w,T]=f;v===e&&w===a&&(u=!0),y.done()})).next((()=>u))}function Qi(i){return pn(i,Zr)}function vl(i){return pn(i,Dl)}function BT(i){return pn(i,Su)}class bo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new bo(0)}static ar(){return new bo(-1)}}class VC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new bo(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Re.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>fl(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ne(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return fl(e).ee(((u,f)=>{const g=au(f);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>U.waitFor(l))).next((()=>a))}forEachTarget(e,t){return fl(e).ee(((r,a)=>{const l=au(a);t(l)}))}ur(e){return Kx(e).get(Yh).next((t=>(Ne(t!==null,2888),t)))}cr(e,t){return Kx(e).put(Yh,t)}lr(e,t){return fl(e).put(OT(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=po(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return fl(e).ee({range:a,index:C1},((u,f,g)=>{const y=au(f);Gu(t,y.target)&&(l=y,g.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Zi(e);return t.forEach((u=>{const f=Un(u.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,u))})),U.waitFor(a)}removeMatchingKeys(e,t,r){const a=Zi(e);return U.forEach(t,(l=>{const u=Un(l.path);return U.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Zi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zi(e);let l=He();return a.ee({range:r,Y:!0},((u,f,g)=>{const y=Ts(u[1]),v=new ye(y);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=Un(t.path),a=IDBKeyRange.bound([r],[b1(r)],!1,!0);let l=0;return Zi(e).ee({index:o0,Y:!0,range:a},(([u,f],g,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return fl(e).get(t).next((r=>r?au(r):null))}}function fl(i){return pn(i,Ml)}function Kx(i){return pn(i,ao)}function Zi(i){return pn(i,kl)}const Yx="LruGarbageCollector",FT=1048576;function Qx([i,e],[t,r]){const a=je(i,t);return a===0?je(e,r):a}class jC{constructor(e){this.Pr=e,this.buffer=new gt(Qx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(Yx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?ce(Yx,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Ar(3e5)}))}}class PC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(ar.ce);const r=new jC(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve($x)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,u=Date.now(),this.nthSequenceNumber(e,a)))).next((w=>(r=w,f=Date.now(),this.removeTargets(e,r,t)))).next((w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),gl()<=Je.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w}))))}}function HT(i,e){return new PC(i,e)}class LC{constructor(e,t){this.db=e,this.garbageCollector=HT(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Eh(e,r)}removeReference(e,t,r){return Eh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Eh(e,t)}wr(e,t){return(function(a,l){let u=!1;return BT(a).te((f=>UT(a,f,l).next((g=>(g&&(u=!0),U.resolve(!g)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,f)=>{if(f<=t){const g=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Re.min()),Zi(e).delete((function(w){return[0,Un(w.path)]})(u)))))}));a.push(g)}})).next((()=>U.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Eh(e,t)}yr(e,t){const r=Zi(e);let a,l=ar.ce;return r.ee({index:o0},(([u,f],{path:g,sequenceNumber:y})=>{u===0?(l!==ar.ce&&t(new ye(Ts(a)),l),l=y,a=g):l=ar.ce})).next((()=>{l!==ar.ce&&t(new ye(Ts(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eh(i,e){return Zi(i).put((function(r,a){return{targetId:0,path:Un(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}class GT{constructor(){this.changes=new di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qa(e).put(r)}removeEntry(e,t,r){return Qa(e).delete((function(l,u){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],ef(u),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Gt.newInvalidDocument(t);return Qa(e).ee({index:Dh,range:IDBKeyRange.only(Wc(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Gt.newInvalidDocument(t)};return Qa(e).ee({index:Dh,range:IDBKeyRange.only(Wc(t))},((a,l)=>{r={document:this.Sr(t,l),size:nf(l)}})).next((()=>r))}getEntries(e,t){let r=vr();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=vr(),a=new Ct(ye.comparator);return this.Cr(e,t,((l,u)=>{const f=this.Sr(l,u);r=r.insert(l,f),a=a.insert(l,nf(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return U.resolve();let a=new gt(Wx);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(Wc(a.first()),Wc(a.last())),u=a.getIterator();let f=u.getNext();return Qa(e).ee({index:Dh,range:l},((g,y,v)=>{const w=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&Wx(f,w)<0;)r(f,null),f=u.getNext();f&&f.isEqual(w)&&(r(f,y),f=u.hasNext()?u.getNext():null),f?v.j(Wc(f)):v.done()})).next((()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qa(e).H(IDBKeyRange.bound(f,g,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let v=vr();for(const w of y){const T=this.Sr(ye.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Ku(t,T)||a.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=vr();const u=Jx(t,r),f=Jx(t,wr.max());return Qa(e).ee({index:N1,range:IDBKeyRange.bound(u,f,!0)},((g,y,v)=>{const w=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(w.key,w),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new UC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Xx(e).get(vg).next((t=>(Ne(!!t,20021),t)))}br(e,t){return Xx(e).put(vg,t)}Sr(e,t){if(t){const r=SC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Re.min())))return r}return Gt.newInvalidDocument(e)}}function $T(i){return new zC(i)}class UC extends GT{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new di((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new gt(((l,u)=>je(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),u.isValidDocument()){const g=kx(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=nf(g);r+=y-f.size,t.push(this.Mr.addEntry(e,l,g))}else if(r-=f.size,this.trackRemovals){const g=kx(this.Mr.serializer,u.convertToNoDocument(Re.min()));t.push(this.Mr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function Xx(i){return pn(i,Au)}function Qa(i){return pn(i,Kh)}function Wc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jx(i,e){const t=e.documentKey.path.toArray();return[i,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Wx(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=je(t[l],r[l]),a)return a;return a=je(t.length,r.length),a||(a=je(t[t.length-2],r[r.length-2]),a||je(t[t.length-1],r[r.length-1]))}class BC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KT{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&gu(r.mutation,a,or.empty(),mt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,He()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=He()){const a=Es();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=su();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Es();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,He())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,a){let l=vr();const u=pu(),f=(function(){return pu()})();return t.forEach(((g,y)=>{const v=r.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof hi)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),gu(v.mutation,y,v.mutation.getFieldMask(),mt.now())):u.set(y.key,or.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>f.set(y,new BC(v,u.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=pu();let a=new Ct(((u,f)=>u-f)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=r.get(g)||or.empty();v=f.applyToLocalView(y,v),r.set(g,v);const w=(a.get(f.batchId)||He()).add(g);a=a.insert(f.batchId,w)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,w=oT();v.forEach((T=>{if(!l.has(T)){const R=pT(t.get(T),r.get(T));R!==null&&w.set(T,R),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return U.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return KN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):U.resolve(Es());let f=Rl,g=l;return u.next((y=>U.forEach(y,((v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(v)?U.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,He()))).next((v=>({batchId:f,changes:aT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=su();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=su();return this.indexManager.getCollectionParents(e,l).next((f=>U.forEach(f,(g=>{const y=(function(w,T){return new Ql(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((v=>{v.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Gt.newInvalidDocument(v)))}));let f=su();return u.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&gu(v.mutation,y,or.empty(),mt.now()),Ku(t,y)&&(f=f.insert(g,y))})),f}))}}class FC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Qn(a.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:VT(a.bundledQuery),readTime:Qn(a.readTime)}})(t)),U.resolve()}}class qC{constructor(){this.overlays=new Ct(ye.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Es();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const a=Es(),l=t.length+1,u=new ye(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return U.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Ct(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=Es(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Es(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=a)););return U.resolve(f)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new _0(t,r));let l=this.Lr.get(t);l===void 0&&(l=He(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class HC{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class E0{constructor(){this.kr=new gt(bn.Kr),this.qr=new gt(bn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new bn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new ut([])),r=new bn(t,e),a=new bn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new ut([])),r=new bn(t,e),a=new bn(t,e+1);let l=He();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new bn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class GC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new gt(bn.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new y0(l,t,r,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new bn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return U.resolve(u)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return U.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?io:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),a=new bn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),U.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(je);return t.forEach((a=>{const l=new bn(a,0),u=new bn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(f=>{r=r.add(f.Hr)}))})),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new bn(new ye(l),0);let f=new gt(je);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(f=f.add(g.Hr)),!0)}),u),U.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ne(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(t.mutations,(a=>{const l=new bn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new bn(t,0),a=this.Jr.firstAfterOrEqual(r);return U.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $C{constructor(e){this.ti=e,this.docs=(function(){return new Ct(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=vr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Gt.newInvalidDocument(a))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=vr();const u=t.path,f=new ye(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||i0(w1(v),r)<=0||(a.has(v.key)||Ku(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return U.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Te(9500)}ni(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KC(this)}getSize(e){return U.resolve(this.size)}}class KC extends GT{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class YC{constructor(e){this.persistence=e,this.ri=new di((t=>po(t)),Gu),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new E0,this.targetCount=0,this.oi=bo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),U.waitFor(l).next((()=>a))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),U.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}}class S0{constructor(e,t){this._i={},this.overlays={},this.ai=new ar(0),this.ui=!1,this.ui=!0,this.ci=new HC,this.referenceDelegate=e(this),this.li=new YC(this),this.indexManager=new kC,this.remoteDocumentCache=(function(a){return new $C(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new kT(t),this.Pi=new FC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new GC(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new QC(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return U.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class QC extends E1{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ri=new E0,this.Ai=null}static Vi(e){return new kf(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class rf{constructor(e,t){this.persistence=e,this.fi=new di((r=>Un(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=HT(this,t)}static Vi(e,t){return new rf(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return U.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?U.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(r++,l.removeEntry(u,Re.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}wr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return U.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class XC{constructor(e){this.serializer=e}k(e,t,r,a){const l=new vf("createOrUpgrade",t);r<1&&a>=1&&((function(g){g.createObjectStore(Hu)})(e),(function(g){g.createObjectStore(Su,{keyPath:cN}),g.createObjectStore(Zr,{keyPath:cx,autoIncrement:!0}).createIndex(ro,ux,{unique:!0}),g.createObjectStore(Dl)})(e),Zx(e),(function(g){g.createObjectStore(Wa)})(e));let u=U.resolve();return r<3&&a>=3&&(r!==0&&((function(g){g.deleteObjectStore(kl),g.deleteObjectStore(Ml),g.deleteObjectStore(ao)})(e),Zx(e)),u=u.next((()=>(function(g){const y=g.store(ao),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return y.put(Yh,v)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(g,y){return y.store(Zr).H().next((w=>{g.deleteObjectStore(Zr),g.createObjectStore(Zr,{keyPath:cx,autoIncrement:!0}).createIndex(ro,ux,{unique:!0});const T=y.store(Zr),R=w.map((L=>T.put(L)));return U.waitFor(R)}))})(e,l)))),u=u.next((()=>{(function(g){g.createObjectStore(Ol,{keyPath:bN})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(g){g.createObjectStore(Au)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(g){g.createObjectStore(wf,{keyPath:_N})})(e),(function(g){g.createObjectStore(Tf,{keyPath:vN})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(g){const y=g.createObjectStore(Ef,{keyPath:IN});y.createIndex(wg,NN,{unique:!1}),y.createIndex(M1,CN,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(g){const y=g.createObjectStore(Kh,{keyPath:dN});y.createIndex(Dh,hN),y.createIndex(N1,fN)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Wa)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(g){g.createObjectStore(l0,{keyPath:xN,autoIncrement:!0}).createIndex(xg,wN,{unique:!1}),g.createObjectStore(du,{keyPath:TN}).createIndex(R1,EN,{unique:!1}),g.createObjectStore(hu,{keyPath:SN}).createIndex(D1,AN,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(du).clear()})).next((()=>{t.objectStore(hu).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(g){g.createObjectStore(c0,{keyPath:RN})})(e)}))),r<18&&a>=18&&s1()&&(u=u.next((()=>{t.objectStore(du).clear()})).next((()=>{t.objectStore(hu).clear()}))),u}pi(e){let t=0;return e.store(Wa).ee(((r,a)=>{t+=nf(a)})).next((()=>{const r={byteSize:t};return e.store(Au).put(vg,r)}))}gi(e){const t=e.store(Su),r=e.store(Zr);return t.H().next((a=>U.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,io],[l.userId,l.lastAcknowledgedBatchId]);return r.H(ro,u).next((f=>U.forEach(f,(g=>{Ne(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=eo(this.serializer,g);return zT(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(kl),r=e.store(Wa);return e.store(ao).get(Yh).next((a=>{const l=[];return r.ee(((u,f)=>{const g=new ut(u),y=(function(w){return[0,Un(w)]})(g);l.push(t.get(y).next((v=>v?U.resolve():(w=>t.put({targetId:0,path:Un(w),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(l)))}))}wi(e,t){e.createObjectStore(Iu,{keyPath:yN});const r=t.store(Iu),a=new T0,l=u=>{if(a.add(u)){const f=u.lastSegment(),g=u.popLast();return r.put({collectionId:f,parent:Un(g)})}};return t.store(Wa).ee({Y:!0},((u,f)=>{const g=new ut(u);return l(g.popLast())})).next((()=>t.store(Dl).ee({Y:!0},(([u,f,g],y)=>{const v=Ts(f);return l(v.popLast())}))))}bi(e){const t=e.store(Ml);return t.ee(((r,a)=>{const l=au(a),u=OT(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(Wa),a=[];return r.ee(((l,u)=>{const f=t.store(Kh),g=(function(w){return w.document?new ye(ut.fromString(w.document.name).popFirst(5)):w.noDocument?ye.fromSegments(w.noDocument.path):w.unknownDocument?ye.fromSegments(w.unknownDocument.path):Te(36783)})(u).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(f.put(y))})).next((()=>U.waitFor(a)))}Di(e,t){const r=t.store(Zr),a=$T(this.serializer),l=new S0(kf.Vi,this.serializer.yt);return r.H().next((u=>{const f=new Map;return u.forEach((g=>{let y=f.get(g.userId)??He();eo(this.serializer,g).keys().forEach((v=>y=y.add(v))),f.set(g.userId,y)})),U.forEach(f,((g,y)=>{const v=new _n(y),w=Df.wt(this.serializer,v),T=l.getIndexManager(v),R=Mf.wt(v,this.serializer,T,l.referenceDelegate);return new KT(a,R,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Tg(t,ar.ce),g).next()}))}))}}function Zx(i){i.createObjectStore(kl,{keyPath:pN}).createIndex(o0,gN,{unique:!0}),i.createObjectStore(Ml,{keyPath:"targetId"}).createIndex(C1,mN,{unique:!0}),i.createObjectStore(ao)}const Xi="IndexedDbPersistence",tg=18e5,ng=5e3,rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JC="main";class A0{constructor(e,t,r,a,l,u,f,g,y,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=f,this.Fi=y,this.Mi=v,this.xi=w,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!A0.v())throw new fe(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LC(this,a),this.Ki=t+JC,this.serializer=new kT(g),this.qi=new la(this.Ki,this.xi,new XC(this.serializer)),this.ci=new IC,this.li=new VC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$T(this.serializer),this.Pi=new AC,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Jt(Xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(W.FAILED_PRECONDITION,rg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ar(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ya(e))return ce(Xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Xi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Zc(e).get(ll).next((t=>U.resolve(this.Xi(t))))}Yi(e){return Sh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,tg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=pn(t,Ol);return r.H().next((a=>{const l=this.ns(a,tg),u=a.filter((f=>l.indexOf(f)===-1));return U.forEach(u,(f=>r.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?U.resolve(!0):Zc(e).get(ll).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,ng)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new fe(W.FAILED_PRECONDITION,rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sh(e).H().next((r=>this.ns(r,ng).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Xi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Hu,Ol],(e=>{const t=new Tg(e,ar.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Sh(e).H().next((t=>this.ns(t,tg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Mf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Df.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(Xi,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?kN:g===17?j1:g===16?MN:g===15?u0:g===14?V1:g===13?O1:g===12?DN:g===11?k1:void Te(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(f=>(u=new Tg(f,this.ai?this.ai.next():ar.ce),t==="readwrite-primary"?this.ji(u).next((g=>!!g||this.Hi(u))).next((g=>{if(!g)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new fe(W.FAILED_PRECONDITION,T1);return r(u)})).next((g=>this.Zi(u).next((()=>g)))):this.Ps(u).next((()=>r(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ps(e){return Zc(e).get(ll).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,ng)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(W.FAILED_PRECONDITION,rg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zc(e).put(ll,t)}static v(){return la.v()}Ji(e){const t=Zc(e);return t.get(ll).next((r=>this.Xi(r)?(ce(Xi,"Releasing primary lease."),t.delete(ll)):U.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Jt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;r1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ce(Xi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Jt(Xi,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zc(i){return pn(i,Hu)}function Sh(i){return pn(i,Ol)}function YT(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class I0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=He(),a=He();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new I0(e,t.fromCache,r,a)}}class WC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return r1()?8:S1(fn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new WC;return this.ys(e,t,u).next((f=>{if(l.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(gl()<=Je.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(gl()<=Je.DEBUG&&ce("QueryEngine","Query:",yl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(gl()<=Je.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):U.resolve())}gs(e,t){if(Tx(t))return U.resolve(null);let r=xr(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Jh(t,null,"F"),r=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=He(...l);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(t,f);return this.Ss(t,y,u,g.readTime)?this.gs(e,Jh(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,r,a){return Tx(t)||a.isEqual(Re.min())?U.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?U.resolve(null):(gl()<=Je.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),yl(t)),this.Ds(e,u,t,x1(a,Rl)).next((f=>f)))}))}bs(e,t){let r=new gt(sT(e));return t.forEach(((a,l)=>{Ku(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return gl()<=Je.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",yl(t)),this.fs.getDocumentsMatchingQuery(e,t,wr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const N0="LocalStore",ZC=3e8;class eR{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Ct(je),this.Fs=new di((l=>po(l)),Gu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function XT(i,e,t,r){return new eR(i,e,t,r)}async function JT(i,e){const t=Se(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],f=[];let g=He();for(const y of a){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:f})))}))}))}function tR(i,e){const t=Se(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const w=y.batch,T=w.keys();let R=U.resolve();return T.forEach((L=>{R=R.next((()=>v.getEntry(g,L))).next((X=>{const F=y.docVersions.get(L);Ne(F!==null,48541),X.version.compareTo(F)<0&&(w.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),v.addEntry(X)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let g=He();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function WT(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function nR(i,e){const t=Se(i),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((v,w)=>{const T=a.get(w);if(!T)return;f.push(t.li.removeMatchingKeys(l,v.removedDocuments,w).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,w))));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Wt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),a=a.insert(w,R),(function(X,F,H){return X.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=ZC?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,R,v)&&f.push(t.li.updateTargetData(l,R))}));let g=vr(),y=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(rR(l,u,e.documentUpdates).next((v=>{g=v.Bs,y=v.Ls}))),!r.isEqual(Re.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((w=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(v)}return U.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function rR(i,e,t){let r=He(),a=He();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let u=vr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ce(N0,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function sR(i,e){const t=Se(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=io),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sf(i,e){const t=Se(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,U.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ti(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ql(i,e,t){const r=Se(i),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!ya(u))throw u;ce(N0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Pg(i,e,t){const r=Se(i);let a=Re.min(),l=He();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,v){const w=Se(g),T=w.Fs.get(v);return T!==void 0?U.resolve(w.vs.get(T)):w.li.getTargetData(y,v)})(r,u,xr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Re.min(),t?l:He()))).next((f=>(tE(r,rT(e),f),{documents:f,ks:l})))))}function ZT(i,e){const t=Se(i),r=Se(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function eE(i,e){const t=Se(i),r=t.Ms.get(e)||Re.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,x1(r,Rl),Number.MAX_SAFE_INTEGER))).then((a=>(tE(t,e,a),a)))}function tE(i,e,t){let r=i.Ms.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Ms.set(e,r)}const nE="firestore_clients";function ew(i,e){return`${nE}_${i}_${e}`}const rE="firestore_mutations";function tw(i,e,t){let r=`${rE}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const sE="firestore_targets";function sg(i,e){return`${sE}_${i}_${e}`}const xs="SharedClientState";class af{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new fe(a.error.code,a.error.message))),u?new af(e,t,a.state,l):(Jt(xs,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new fe(r.error.code,r.error.message))),l?new yu(e,r.state,a):(Jt(xs,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class of{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=p0();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=A1(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new of(e,l):(Jt(xs,`Failed to parse client data for instance '${e}': ${t}`),null)}}class C0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new C0(t.clientId,t.onlineState):(Jt(xs,`Failed to parse online state: ${e}`),null)}}class Lg{constructor(){this.activeTargetIds=p0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ig{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Ct(je),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=ew(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Lg),this.eo=new RegExp(`^${nE}_${u}_([^_]*)$`),this.no=new RegExp(`^${rE}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${sE}_${u}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(ew(this.persistenceKey,r));if(a){const l=of.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(sg(this.persistenceKey,e));if(a){const l=yu.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(xs,"READ",e,t),t}setItem(e,t){ce(xs,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(xs,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(xs,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=ar.ce;if(l!=null)try{const f=JSON.parse(l);Ne(typeof f=="number",30636,{yo:l}),u=f}catch(f){Jt(xs,"Failed to read sequence number from WebStorage",f)}return u})(t.newValue);r!==ar.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new af(this.currentUser,e,t,r),l=tw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=tw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=sg(this.persistenceKey,e),l=new yu(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return of.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return af.$s(new _n(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return yu.$s(a,t)}_o(e){return C0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(xs,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],f=[];return l.forEach((g=>{a.has(g)||u.push(g)})),a.forEach((g=>{l.has(g)||f.push(g)})),this.syncEngine.Co(u,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=p0();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class iE{constructor(){this.vo=new Lg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Lg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iR{Mo(e){}shutdown(){}}const nw="ConnectivityMonitor";class rw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(nw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(nw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ah=null;function zg(){return Ah===null?Ah=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ah++,"0x"+Ah.toString(16)}const ag="RestConnection",aR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class oR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Cu?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=zg(),f=this.Qo(e,t.toUriEncodedString());ce(ag,`Sending RPC '${e}' ${u}:`,f,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(f),v=To(y);return this.zo(e,f,g,r,v).then((w=>(ce(ag,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw fo(ag,`RPC '${e}' ${u} failed with error: `,w,"url: ",f,"request:",r),w}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=aR[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class lR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Vn="WebChannelConnection",eu=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class wl extends oR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wl.c_){const e=m1();eu(e,f1.STAT_EVENT,(t=>{t.stat===yg.PROXY?ce(Vn,"STAT_EVENT: detected buffering proxy"):t.stat===yg.NOPROXY&&ce(Vn,"STAT_EVENT: detected no buffering proxy")})),wl.c_=!0}}zo(e,t,r,a,l){const u=zg();return new Promise(((f,g)=>{const y=new d1;y.setWithCredentials(!0),y.listenOnce(h1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Nh.NO_ERROR:const w=y.getResponseJson();ce(Vn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),f(w);break;case Nh.TIMEOUT:ce(Vn,`RPC '${e}' ${u} timed out`),g(new fe(W.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const T=y.getStatus();if(ce(Vn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R?.error;if(L&&L.status&&L.message){const X=(function(H){const ee=H.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ee)>=0?ee:W.UNKNOWN})(L.status);g(new fe(X,L.message))}else g(new fe(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Vn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ce(Vn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=zg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=l.join("");ce(Vn,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=u.createWebChannel(y,f);this.I_(v);let w=!1,T=!1;const R=new lR({Ho:L=>{T?ce(Vn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(w||(ce(Vn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),ce(Vn,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Jo:()=>v.close()});return eu(v,ru.EventType.OPEN,(()=>{T||(ce(Vn,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),eu(v,ru.EventType.CLOSE,(()=>{T||(T=!0,ce(Vn,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(v))})),eu(v,ru.EventType.ERROR,(L=>{T||(T=!0,fo(Vn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),R.o_(new fe(W.UNAVAILABLE,"The operation could not be completed")))})),eu(v,ru.EventType.MESSAGE,(L=>{if(!T){const X=L.data[0];Ne(!!X,16349);const F=X,H=F?.error||F[0]?.error;if(H){ce(Vn,`RPC '${e}' stream ${a} received error:`,H);const ee=H.status;let Y=(function(he){const S=on[he];if(S!==void 0)return bT(S)})(ee),le=H.message;ee==="NOT_FOUND"&&le.includes("database")&&le.includes("does not exist")&&le.includes(this.databaseId.database)&&fo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Y===void 0&&(Y=W.INTERNAL,le="Unknown error status: "+ee+" with message "+H.message),T=!0,R.o_(new fe(Y,le)),v.close()}else ce(Vn,`RPC '${e}' stream ${a} received:`,X),R.__(X)}})),wl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return p1()}}function cR(i){return new wl(i)}function aE(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function Of(i){return new pC(i,!0)}wl.c_=!1;class oE{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const sw="PersistentStream";class lE{constructor(e,t,r,a,l,u,f,g){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Jt(t.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new fe(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(sw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(sw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uR extends lE{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=bC(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Re.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Qn(u.readTime):Re.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Mg(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=Qh(g)?{documents:AT(l,g)}:{query:IT(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=xT(l,u.resumeToken);const y=Rg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=Fl(l,u.snapshotVersion.toTimestamp());const y=Rg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const r=vC(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Mg(this.serializer),t.removeTarget=e,this.K_(t)}}class dR extends lE{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_C(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Mg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Zh(this.serializer,r)))};this.K_(t)}}class hR{}class fR extends hR{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Dg(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(W.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Dg(t,r),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mR(i,e,t,r){return new fR(i,e,t,r)}class pR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _o="RemoteStore";class gR{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Eo(this)&&(ce(_o,"Restarting streams for network reachability change."),await(async function(g){const y=Se(g);y.Ea.add(4),await Xu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Vf(y)})(this))}))})),this.Va=new pR(r,a)}}async function Vf(i){if(Eo(i))for(const e of i.Ra)await e(!0)}async function Xu(i){for(const e of i.Ra)await e(!1)}function jf(i,e){const t=Se(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),M0(t)?D0(t):Wl(t).O_()&&R0(t,e))}function Hl(i,e){const t=Se(i),r=Wl(t);t.Ia.delete(e),r.O_()&&cE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Eo(t)&&t.Va.set("Unknown"))}function R0(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(i).Z_(e)}function cE(i,e){i.da.$e(e),Wl(i).X_(e)}function D0(i){i.da=new dC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Wl(i).start(),i.Va.ua()}function M0(i){return Eo(i)&&!Wl(i).x_()&&i.Ia.size>0}function Eo(i){return Se(i).Ea.size===0}function uE(i){i.da=void 0}async function yR(i){i.Va.set("Online")}async function bR(i){i.Ia.forEach(((e,t)=>{R0(i,e)}))}async function _R(i,e){uE(i),M0(i)?(i.Va.ha(e),D0(i)):i.Va.set("Unknown")}async function vR(i,e,t){if(i.Va.set("Online"),e instanceof vT&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(i,e)}catch(r){ce(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(i,r)}else if(e instanceof jh?i.da.Xe(e):e instanceof _T?i.da.st(e):i.da.tt(e),!t.isEqual(Re.min()))try{const r=await WT(i.localStore);t.compareTo(r)>=0&&await(function(l,u){const f=l.da.Tt(u);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),cE(l,g);const w=new ti(v.target,g,y,v.sequenceNumber);R0(l,w)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){ce(_o,"Failed to raise snapshot:",r),await lf(i,r)}}async function lf(i,e,t){if(!ya(e))throw e;i.Ea.add(1),await Xu(i),i.Va.set("Offline"),t||(t=()=>WT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ce(_o,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Vf(i)}))}function dE(i,e){return e().catch((t=>lf(i,t,e)))}async function Jl(i){const e=Se(i),t=ma(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:io;for(;xR(e);)try{const a=await sR(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,wR(e,a)}catch(a){await lf(e,a)}hE(e)&&fE(e)}function xR(i){return Eo(i)&&i.Ta.length<10}function wR(i,e){i.Ta.push(e);const t=ma(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function hE(i){return Eo(i)&&!ma(i).x_()&&i.Ta.length>0}function fE(i){ma(i).start()}async function TR(i){ma(i).ra()}async function ER(i){const e=ma(i);for(const t of i.Ta)e.ea(t.mutations)}async function SR(i,e,t){const r=i.Ta.shift(),a=b0.from(r,e,t);await dE(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Jl(i)}async function AR(i,e){e&&ma(i).Y_&&await(async function(r,a){if((function(u){return lC(u)&&u!==W.ABORTED})(a.code)){const l=r.Ta.shift();ma(r).B_(),await dE(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Jl(r)}})(i,e),hE(i)&&fE(i)}async function iw(i,e){const t=Se(i);t.asyncQueue.verifyOperationInProgress(),ce(_o,"RemoteStore received new credentials");const r=Eo(t);t.Ea.add(3),await Xu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vf(t)}async function Ug(i,e){const t=Se(i);e?(t.Ea.delete(2),await Vf(t)):e||(t.Ea.add(2),await Xu(t),t.Va.set("Unknown"))}function Wl(i){return i.ma||(i.ma=(function(t,r,a){const l=Se(t);return l.sa(),new uR(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:yR.bind(null,i),Yo:bR.bind(null,i),t_:_R.bind(null,i),J_:vR.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),M0(i)?D0(i):i.Va.set("Unknown")):(await i.ma.stop(),uE(i))}))),i.ma}function ma(i){return i.fa||(i.fa=(function(t,r,a){const l=Se(t);return l.sa(),new dR(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TR.bind(null,i),t_:AR.bind(null,i),ta:ER.bind(null,i),na:SR.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Jl(i)):(await i.fa.stop(),i.Ta.length>0&&(ce(_o,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class k0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,f=new k0(e,t,u,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(i,e){if(Jt("AsyncQueue",`${e}: ${i}`),ya(i))return new fe(W.UNAVAILABLE,`${e}: ${i}`);throw i}class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=su(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aw{constructor(){this.ga=new Ct(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Gl{constructor(e,t,r,a,l,u,f,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Gl(e,t,Tl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class IR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class NR{constructor(){this.queries=ow(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Se(t),l=a.queries;a.queries=ow(),l.forEach(((u,f)=>{for(const g of f.ba)g.onError(r)}))})(this,new fe(W.ABORTED,"Firestore shutting down"))}}function ow(){return new di((i=>nT(i)),If)}async function V0(i,e){const t=Se(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new IR,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=O0(u,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&P0(t)}async function j0(i,e){const t=Se(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CR(i,e){const t=Se(i);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.ba)f.Fa(a)&&(r=!0);u.wa=a}}r&&P0(t)}function RR(i,e,t){const r=Se(i),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function P0(i){i.Ca.forEach((e=>{e.next()}))}var Bg,lw;(lw=Bg||(Bg={})).Ma="default",lw.Cache="cache";class L0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}class mE{constructor(e){this.key=e}}class pE{constructor(e){this.key=e}}class DR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=sT(e),this.tu=new Tl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new aw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,w)=>{const T=a.get(v),R=Ku(this.query,w)?w:null,L=!!T&&this.mutatedKeys.has(T.key),X=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;T&&R?T.data.isEqual(R.data)?L!==X&&(r.track({type:3,doc:R}),F=!0):this.su(T,R)||(r.track({type:2,doc:R}),F=!0,(g&&this.eu(R,g)>0||y&&this.eu(R,y)<0)&&(f=!0)):!T&&R?(r.track({type:0,doc:R}),F=!0):T&&!R&&(r.track({type:1,doc:T}),F=!0,(g||y)&&(f=!0)),F&&(R?(u=u.add(R),l=X?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,w)=>(function(R,L){const X=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:F})}};return X(R)-X(L)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new Gl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new pE(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new mE(r))})),t}cu(e){this.Za=e.ks,this.Ya=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zl="SyncEngine";class MR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kR{constructor(e){this.key=e,this.hu=!1}}class OR{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new di((f=>nT(f)),If),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ct(ye.comparator),this.Au=new Map,this.Vu=new E0,this.du={},this.mu=new Map,this.fu=bo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VR(i,e,t=!0){const r=Pf(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await gE(r,e,t,!0),a}async function jR(i,e){const t=Pf(i);await gE(t,e,!0,!1)}async function gE(i,e,t,r){const a=await sf(i.localStore,xr(e)),l=a.targetId,u=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await z0(i,e,l,u==="current",a.resumeToken)),i.isPrimaryClient&&t&&jf(i.remoteStore,a),f}async function z0(i,e,t,r,a){i.pu=(w,T,R)=>(async function(X,F,H,ee){let Y=F.view.ru(H);Y.Ss&&(Y=await Pg(X.localStore,F.query,!1).then((({documents:S})=>F.view.ru(S,Y))));const le=ee&&ee.targetChanges.get(F.targetId),ae=ee&&ee.targetMismatches.get(F.targetId)!=null,he=F.view.applyChanges(Y,X.isPrimaryClient,le,ae);return Fg(X,F.targetId,he.au),he.snapshot})(i,w,T,R);const l=await Pg(i.localStore,e,!0),u=new DR(e,l.ks),f=u.ru(l.documents),g=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),y=u.applyChanges(f,i.isPrimaryClient,g);Fg(i,t,y.au);const v=new MR(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function PR(i,e,t){const r=Se(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!If(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ql(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Hl(r.remoteStore,a.targetId),$l(r,a.targetId)})).catch(ga)):($l(r,a.targetId),await ql(r.localStore,a.targetId,!0))}async function LR(i,e){const t=Se(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hl(t.remoteStore,r.targetId))}async function zR(i,e,t){const r=q0(i);try{const a=await(function(u,f){const g=Se(u),y=mt.now(),v=f.reduce(((R,L)=>R.add(L.key)),He());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=vr(),X=He();return g.xs.getEntries(R,v).next((F=>{L=F,L.forEach(((H,ee)=>{ee.isValidDocument()||(X=X.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,L))).next((F=>{w=F;const H=[];for(const ee of f){const Y=aC(ee,w.get(ee.key).overlayedDocument);Y!=null&&H.push(new hi(ee.key,Y,$1(Y.value.mapValue),zn.exists(!0)))}return g.mutationQueue.addMutationBatch(R,y,H,f)})).next((F=>{T=F;const H=F.applyToLocalDocumentSet(w,X);return g.documentOverlayCache.saveOverlays(R,F.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:aT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,f,g){let y=u.du[u.currentUser.toKey()];y||(y=new Ct(je)),y=y.insert(f,g),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await _a(r,a.changes),await Jl(r.remoteStore)}catch(a){const l=O0(a,"Failed to persist write");t.reject(l)}}async function yE(i,e){const t=Se(i);try{const r=await nR(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Ne(u.hu,14607):a.removedDocuments.size>0&&(Ne(u.hu,42227),u.hu=!1))})),await _a(t,r,e)}catch(r){await ga(r)}}function cw(i,e,t){const r=Se(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const g=Se(u);g.onlineState=f;let y=!1;g.queries.forEach(((v,w)=>{for(const T of w.ba)T.va(f)&&(y=!0)})),y&&P0(g)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UR(i,e,t){const r=Se(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new Ct(ye.comparator);u=u.insert(l,Gt.newNoDocument(l,Re.min()));const f=He().add(l),g=new Yu(Re.min(),new Map,new Ct(je),u,f);await yE(r,g),r.Ru=r.Ru.remove(l),r.Au.delete(e),F0(r)}else await ql(r.localStore,e,!1).then((()=>$l(r,e,t))).catch(ga)}async function BR(i,e){const t=Se(i),r=e.batch.batchId;try{const a=await tR(t.localStore,e);B0(t,r,null),U0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _a(t,a)}catch(a){await ga(a)}}async function FR(i,e,t){const r=Se(i);try{const a=await(function(u,f){const g=Se(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((w=>(Ne(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);B0(r,e,t),U0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _a(r,a)}catch(a){await ga(a)}}function U0(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function B0(i,e,t){const r=Se(i);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function $l(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||bE(i,r)}))}function bE(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Hl(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),F0(i))}function Fg(i,e,t){for(const r of t)r instanceof mE?(i.Vu.addReference(r.key,e),qR(i,r)):r instanceof pE?(ce(Zl,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||bE(i,r.key)):Te(19791,{wu:r})}function qR(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(ce(Zl,"New document in limbo: "+t),i.Eu.add(r),F0(i))}function F0(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ye(ut.fromString(e)),r=i.fu.next();i.Au.set(r,new kR(t)),i.Ru=i.Ru.insert(t,r),jf(i.remoteStore,new ti(xr($u(t.path)),r,"TargetPurposeLimboResolution",ar.ce))}}async function _a(i,e,t){const r=Se(i),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,g)=>{u.push(r.pu(g,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){a.push(y);const v=I0.Es(g.targetId,y);l.push(v)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(g,y){const v=Se(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>U.forEach(y,(T=>U.forEach(T.Ts,(R=>v.persistence.referenceDelegate.addReference(w,T.targetId,R))).next((()=>U.forEach(T.Is,(R=>v.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))))))}catch(w){if(!ya(w))throw w;ce(N0,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const R=v.vs.get(T),L=R.snapshotVersion,X=R.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(T,X)}}})(r.localStore,l))}async function HR(i,e){const t=Se(i);if(!t.currentUser.isEqual(e)){ce(Zl,"User change. New user:",e.toKey());const r=await JT(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new fe(W.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _a(t,r.Ns)}}function GR(i,e){const t=Se(i),r=t.Au.get(e);if(r&&r.hu)return He().add(r.key);{let a=He();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}async function $R(i,e){const t=Se(i),r=await Pg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Fg(t,e.targetId,a.au),a}async function KR(i,e){const t=Se(i);return eE(t.localStore,e).then((r=>_a(t,r)))}async function YR(i,e,t,r){const a=Se(i),l=await(function(f,g){const y=Se(f),v=Se(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.Xn(w,g).next((T=>T?y.localDocuments.getDocuments(w,T):U.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Jl(a.remoteStore):t==="acknowledged"||t==="rejected"?(B0(a,e,r||null),U0(a,e),(function(f,g){Se(Se(f).mutationQueue).nr(g)})(a.localStore,e)):Te(6720,"Unknown batchState",{bu:t}),await _a(a,l)):ce(Zl,"Cannot apply mutation batch with id: "+e)}async function QR(i,e){const t=Se(i);if(Pf(t),q0(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await uw(t,r.toArray());t.gu=!0,await Ug(t.remoteStore,!0);for(const l of a)jf(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>($l(t,u),ql(t.localStore,u,!0)))),Hl(t.remoteStore,u)})),await a,await uw(t,r),(function(u){const f=Se(u);f.Au.forEach(((g,y)=>{Hl(f.remoteStore,y)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Ct(ye.comparator)})(t),t.gu=!1,await Ug(t.remoteStore,!1)}}async function uw(i,e,t){const r=Se(i),a=[],l=[];for(const u of e){let f;const g=r.Iu.get(u);if(g&&g.length!==0){f=await sf(r.localStore,xr(g[0]));for(const y of g){const v=r.Tu.get(y),w=await $R(r,v);w.snapshot&&l.push(w.snapshot)}}else{const y=await ZT(r.localStore,u);f=await sf(r.localStore,y),await z0(r,_E(y),u,!1,f.resumeToken)}a.push(f)}return r.Pu.J_(l),a}function _E(i){return eT(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function XR(i){return(function(t){return Se(Se(t).persistence).hs()})(Se(i).localStore)}async function JR(i,e,t,r){const a=Se(i);if(a.gu)return void ce(Zl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await eE(a.localStore,rT(l[0])),f=Yu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Wt.EMPTY_BYTE_STRING);await _a(a,u,f);break}case"rejected":await ql(a.localStore,e,!0),$l(a,e,r);break;default:Te(64155,t)}}async function WR(i,e,t){const r=Pf(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Zl,"Adding an already active target "+a);continue}const l=await ZT(r.localStore,a),u=await sf(r.localStore,l);await z0(r,_E(l),u.targetId,!1,u.resumeToken),jf(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await ql(r.localStore,a,!1).then((()=>{Hl(r.remoteStore,a),$l(r,a)})).catch(ga)}}function Pf(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=yE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UR.bind(null,e),e.Pu.J_=CR.bind(null,e.eventManager),e.Pu.yu=RR.bind(null,e.eventManager),e}function q0(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FR.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return XT(this.persistence,new QT,e.initialUser,this.serializer)}Cu(e){return new S0(kf.Vi,this.serializer)}Du(e){return new iE}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class ZR extends Vu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ne(this.persistence.referenceDelegate instanceof rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qT(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new S0((r=>rf.Vi(r,t)),this.serializer)}}class vE extends Vu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await q0(this.xu.syncEngine),await Jl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return XT(this.persistence,new QT,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new qT(r,e.asyncQueue,t)}Mu(e,t){const r=new oN(t,this.persistence);return new aN(e.asyncQueue,r)}Cu(e){const t=YT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new A0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,aE(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new iE}}class e5 extends vE{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ig&&(this.sharedClientState.syncEngine={So:YR.bind(null,t),Do:JR.bind(null,t),Co:WR.bind(null,t),hs:XR.bind(null,t),bo:KR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await QR(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=aE();if(!ig.v(t))throw new fe(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ig(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ju{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HR.bind(null,this.syncEngine),await Ug(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NR})()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),r=cR(e.databaseInfo);return mR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,f){return new gR(r,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>cw(this.syncEngine,t,0)),(function(){return rw.v()?new rw:new iR})())}createSyncEngine(e,t){return(function(a,l,u,f,g,y,v){const w=new OR(a,l,u,f,g,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Se(t);ce(_o,"RemoteStore shutting down."),r.Ea.add(5),await Xu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ju.provider={build:()=>new ju};class H0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const pa="FirestoreClient";class t5{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=_n.UNAUTHENTICATED,this.clientId=s0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ce(pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=O0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function og(i,e){i.asyncQueue.verifyOperationInProgress(),ce(pa,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await JT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function dw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await n5(i);ce(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>iw(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>iw(e.remoteStore,a))),i._onlineComponents=e}async function n5(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(pa,"Using user provided OfflineComponentProvider");try{await og(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),await og(i,new Vu)}}else ce(pa,"Using default OfflineComponentProvider"),await og(i,new ZR(void 0));return i._offlineComponents}async function xE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(pa,"Using user provided OnlineComponentProvider"),await dw(i,i._uninitializedComponentsProvider._online)):(ce(pa,"Using default OnlineComponentProvider"),await dw(i,new ju))),i._onlineComponents}function r5(i){return xE(i).then((e=>e.syncEngine))}async function cf(i){const e=await xE(i),t=e.eventManager;return t.onListen=VR.bind(null,e.syncEngine),t.onUnlisten=PR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LR.bind(null,e.syncEngine),t}function s5(i,e,t,r){const a=new H0(r),l=new L0(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>V0(await cf(i),l))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>j0(await cf(i),l)))}}function i5(i,e,t={}){const r=new Ss;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,y){const v=new H0({next:T=>{v.Nu(),u.enqueueAndForget((()=>j0(l,w)));const R=T.docs.has(f);!R&&T.fromCache?y.reject(new fe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&g&&g.source==="server"?y.reject(new fe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new L0($u(f.path),v,{includeMetadataChanges:!0,Ka:!0});return V0(l,w)})(await cf(i),i.asyncQueue,e,t,r))),r.promise}function a5(i,e,t={}){const r=new Ss;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,y){const v=new H0({next:T=>{v.Nu(),u.enqueueAndForget((()=>j0(l,w))),T.fromCache&&g.source==="server"?y.reject(new fe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new L0(f,v,{includeMetadataChanges:!0,Ka:!0});return V0(l,w)})(await cf(i),i.asyncQueue,e,t,r))),r.promise}function o5(i,e){const t=new Ss;return i.asyncQueue.enqueueAndForget((async()=>zR(await r5(i),e,t))),t.promise}function wE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const l5="ComponentProvider",hw=new Map;function c5(i,e,t,r,a){return new VN(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,wE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const TE="firestore.googleapis.com",fw=!0;class mw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TE,this.ssl=fw}else this.host=e.host,this.ssl=e.ssl??fw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FT)throw new fe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $2;switch(r.type){case"firstParty":return new X2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=hw.get(t);r&&(ce(l5,"Removing Datastore"),hw.delete(t),r.terminate())})(this),Promise.resolve()}}function u5(i,e,t,r={}){i=lr(i,Lf);const a=To(e),l=i._getSettings(),u={...l,emulatorOptions:i._getEmulatorOptions()},f=`${e}:${t}`;a&&(Wg(`https://${f}`),t1("Firestore",!0)),l.host!==TE&&l.host!==f&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:r};if(!da(g,u)&&(i._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=_n.MOCK_USER;else{y=vI(r.mockUserToken,i._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new fe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new _n(w)}i._authCredentials=new K2(new y1(y,v))}}class fi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class $t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qu(t,$t._jsonSchema))return new $t(e,r||null,new ye(ut.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class ca extends fi{constructor(e,t,r){super(e,t,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ye(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function In(i,e,...t){if(i=mn(i),_1("collection","path",e),i instanceof Lf){const r=ut.fromString(e,...t);return sx(r),new ca(i,null,r)}{if(!(i instanceof $t||i instanceof ca))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ut.fromString(e,...t));return sx(r),new ca(i.firestore,null,r)}}function at(i,e,...t){if(i=mn(i),arguments.length===1&&(e=s0.newId()),_1("doc","path",e),i instanceof Lf){const r=ut.fromString(e,...t);return rx(r),new $t(i,null,new ye(r))}{if(!(i instanceof $t||i instanceof ca))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ut.fromString(e,...t));return rx(r),new $t(i.firestore,i instanceof ca?i.converter:null,new ye(r))}}const pw="AsyncQueue";class gw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oE(this,"async_queue_retry"),this._c=()=>{const r=Lh();r&&ce(pw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;ce(pw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Jt("INTERNAL UNHANDLED ERROR: ",yw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=k0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Te(47125,{Pc:yw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class li extends Lf{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new gw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gw(e),this._firestoreClient=void 0,await e}}}function d5(i,e,t){t||(t=Cu);const r=bf(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(da(l,e))return a;throw new fe(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FT)throw new fe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&To(e.host)&&Wg(e.host),r.initialize({options:e,instanceIdentifier:t})}function EE(i,e){const t=typeof i=="object"?i:n0(),r=typeof i=="string"?i:Cu,a=bf(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=bI("firestore");l&&u5(a,...l)}return a}function zf(i){if(i._terminated)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||h5(i),i._firestoreClient}function h5(i){const e=i._freezeSettings(),t=c5(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new t5(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(i._componentsProvider))}class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(Wt.fromBase64String(e))}catch(t){throw new fe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:ln("string",jr._jsonSchemaVersion),bytes:ln("string")};class G0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uf{constructor(e){this._methodName=e}}class As{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(qu(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:ln("string",As._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class rs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,rs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new rs(e.vectorValues);throw new fe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rs._jsonSchemaVersion="firestore/vectorValue/1.0",rs._jsonSchema={type:ln("string",rs._jsonSchemaVersion),vectorValues:ln("object")};const f5=/^__.*__$/;class m5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class SE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:i})}}class $0{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AE(this.dataSource)&&f5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class p5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Of(e)}createContext(e,t,r,a=!1){return new $0({dataSource:e,methodName:t,targetDoc:r,path:Ut.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(i){const e=i._freezeSettings(),t=Of(i._databaseId);return new p5(i._databaseId,!!e.ignoreUndefinedProperties,t)}function IE(i,e,t,r,a,l={}){const u=i.createContext(l.merge||l.mergeFields?2:0,e,t,a);Y0("Data must be an object, but it was:",u,r);const f=NE(r,u);let g,y;if(l.merge)g=new or(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const T=vo(e,w,t);if(!u.contains(T))throw new fe(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);DE(v,T)||v.push(T)}g=new or(v),y=u.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=u.fieldTransforms;return new m5(new Ln(f),g,y)}class Ff extends Uf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}class K0 extends Uf{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Bl(e.serializer,cT(e.serializer,this.Vc));return new mT(e.path,t)}isEqual(e){return e instanceof K0&&this.Vc===e.Vc}}function g5(i,e,t,r){const a=i.createContext(1,e,t);Y0("Data must be an object, but it was:",a,r);const l=[],u=Ln.empty();ba(r,((g,y)=>{const v=RE(e,g,t);y=mn(y);const w=a.childContextForFieldPath(v);if(y instanceof Ff)l.push(v);else{const T=Ju(y,w);T!=null&&(l.push(v),u.set(v,T))}}));const f=new or(l);return new SE(u,f,a.fieldTransforms)}function y5(i,e,t,r,a,l){const u=i.createContext(1,e,t),f=[vo(e,r,t)],g=[a];if(l.length%2!=0)throw new fe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(vo(e,l[T])),g.push(l[T+1]);const y=[],v=Ln.empty();for(let T=f.length-1;T>=0;--T)if(!DE(y,f[T])){const R=f[T];let L=g[T];L=mn(L);const X=u.childContextForFieldPath(R);if(L instanceof Ff)y.push(R);else{const F=Ju(L,X);F!=null&&(y.push(R),v.set(R,F))}}const w=new or(y);return new SE(v,w,u.fieldTransforms)}function b5(i,e,t,r=!1){return Ju(t,i.createContext(r?4:3,e))}function Ju(i,e){if(CE(i=mn(i)))return Y0("Unsupported field value:",e,i),NE(i,e);if(i instanceof Uf)return(function(r,a){if(!AE(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const f of r){let g=Ju(f,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=mt.fromDate(r);return{timestampValue:Fl(a.serializer,l)}}if(r instanceof mt){const l=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(a.serializer,l)}}if(r instanceof As)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:xT(a.serializer,r._byteString)};if(r instanceof $t){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:x0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof rs)return(function(u,f){const g=u instanceof rs?u.toArray():u;return{mapValue:{fields:{[h0]:{stringValue:f0},[Vl]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw f.createError("VectorValues must only contain numeric values.");return g0(f.serializer,v)}))}}}}}})(r,a);if(MT(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${_f(r)}`)})(i,e)}function NE(i,e){const t={};return P1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(i,((r,a)=>{const l=Ju(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function CE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof mt||i instanceof As||i instanceof jr||i instanceof $t||i instanceof Uf||i instanceof rs||MT(i))}function Y0(i,e,t){if(!CE(t)||!v1(t)){const r=_f(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function vo(i,e,t){if((e=mn(e))instanceof G0)return e._internalPath;if(typeof e=="string")return RE(i,e);throw uf("Field path arguments must be of type string or ",i,!1,void 0,t)}const _5=new RegExp("[~\\*/\\[\\]]");function RE(i,e,t){if(e.search(_5)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new G0(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function uf(i,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${r}`),u&&(g+=` in document ${a}`),g+=")"),new fe(W.INVALID_ARGUMENT,f+i+g)}function DE(i,e){return i.some((t=>t.isEqual(e)))}class v5{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ba(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Vl].arrayValue?.values?.map((r=>Lt(r.doubleValue)));return new rs(t)}convertGeoPoint(e){return new As(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=ai(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ne(DT(r),9688,{name:e});const a=new mo(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||Jt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Q0 extends v5{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function ml(i){return new K0("increment",i)}const bw="@firebase/firestore",_w="4.11.0";function vw(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}class ME{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(vo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class x5 extends ME{data(){return super.data()}}function kE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class J0 extends X0{}function ws(i,e,...t){let r=[];e instanceof X0&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((g=>g instanceof W0)).length,f=l.filter((g=>g instanceof qf)).length;if(u>1||u>0&&f>0)throw new fe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class qf extends J0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qf(e,t,r)}_apply(e){const t=this._parse(e);return OE(e._query,t),new fi(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=Bf(e.firestore);return(function(l,u,f,g,y,v,w){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Tw(w,v);const L=[];for(const X of w)L.push(ww(g,l,X));T={arrayValue:{values:L}}}else T=ww(g,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Tw(w,v),T=b5(f,u,w,v==="in"||v==="not-in");return We.create(y,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wi(i,e,t){const r=e,a=vo("where",i);return qf._create(a,r,t)}class W0 extends X0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new W0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const g of f)OE(u,g),u=Cg(u,g)})(e._query,t),new fi(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Z0 extends J0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Z0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(l,u)})(e._query,this._field,this._direction);return new fi(e.firestore,e.converter,QN(e._query,t))}}function El(i,e="asc"){const t=e,r=vo("orderBy",i);return Z0._create(r,t)}class ey extends J0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ey(e,t,r)}_apply(e){return new fi(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function xw(i){return rN("limit",i),ey._create("limit",i,"F")}function ww(i,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new fe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tT(e)&&t.indexOf("/")!==-1)throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!ye.isDocumentKey(r))throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Du(i,new ye(r))}if(t instanceof $t)return Du(i,t._key);throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(t)}.`)}function Tw(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OE(i,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function VE(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class w5{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=A5(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function T5(i){return new w5(i)}class E5{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ju.provider,this._offlineComponentProvider={build:t=>new vE(t,e?.cacheSizeBytes,this.forceOwnership)}}}class S5{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ju.provider,this._offlineComponentProvider={build:t=>new e5(t,e?.cacheSizeBytes)}}}function A5(i){return new E5(i?.forceOwnership)}function I5(){return new S5}class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends ME{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:ln("string",lo._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class zh extends lo{data(e={}){return super.data(e)}}class co{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ou(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new zh(this._firestore,this._userDataWriter,r.key,r,new ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const g=new zh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new zh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:N5(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=s0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function N5(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:ln("string",co._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};function Hf(i){i=lr(i,$t);const e=lr(i.firestore,li),t=zf(e);return i5(t,i._key).then((r=>jE(e,i,r)))}function lg(i){i=lr(i,fi);const e=lr(i.firestore,li),t=zf(e),r=new Q0(e);return kE(i._query),a5(t,i._query).then((a=>new co(e,r,i,a)))}function ua(i,e,t){i=lr(i,$t);const r=lr(i.firestore,li),a=VE(i.converter,e,t),l=Bf(r);return Gf(r,[IE(l,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,zn.none())])}function yr(i,e,t,...r){i=lr(i,$t);const a=lr(i.firestore,li),l=Bf(a);let u;return u=typeof(e=mn(e))=="string"||e instanceof G0?y5(l,"updateDoc",i._key,e,t,r):g5(l,"updateDoc",i._key,e),Gf(a,[u.toMutation(i._key,zn.exists(!0))])}function xl(i){return Gf(lr(i.firestore,li),[new Rf(i._key,zn.none())])}function bu(i,e){const t=lr(i.firestore,li),r=at(i),a=VE(i.converter,e),l=Bf(i.firestore);return Gf(t,[IE(l,"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function es(i,...e){i=mn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||vw(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(vw(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,f;if(i instanceof $t)u=lr(i.firestore,li),f=$u(i._key.path),l={next:y=>{e[r]&&e[r](jE(u,i,y))},error:e[r+1],complete:e[r+2]};else{const y=lr(i,fi);u=lr(y.firestore,li),f=y._query;const v=new Q0(u);l={next:w=>{e[r]&&e[r](new co(u,v,y,w))},error:e[r+1],complete:e[r+2]},kE(i._query)}const g=zf(u);return s5(g,f,a,l)}function Gf(i,e){const t=zf(i);return o5(t,e)}function jE(i,e,t){const r=t.docs.get(e._key),a=new Q0(i);return new lo(i,a,e._key,r,new ou(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){G2(Kl),Nl(new uo("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new li(new Y2(r.getProvider("auth-internal")),new J2(u,r.getProvider("app-check-internal")),jN(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),aa(bw,_w,e),aa(bw,_w,"esm2020")})();var C5="firebase",R5="12.9.0";aa(C5,R5,"app");function PE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D5=PE,LE=new Bu("auth","Firebase",PE());const df=new Zg("@firebase/auth");function M5(i,...e){df.logLevel<=Je.WARN&&df.warn(`Auth (${Kl}): ${i}`,...e)}function Uh(i,...e){df.logLevel<=Je.ERROR&&df.error(`Auth (${Kl}): ${i}`,...e)}function Pr(i,...e){throw ny(i,...e)}function ss(i,...e){return ny(i,...e)}function ty(i,e,t){const r={...D5(),[e]:t};return new Bu("auth","Firebase",r).create(e,{appName:i.name})}function si(i){return ty(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k5(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pr(i,"argument-error"),ty(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ny(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return LE.create(i,...e)}function ke(i,e,...t){if(!i)throw ny(e,...t)}function ni(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Uh(e),new Error(e)}function ci(i,e){i||ni(e)}function qg(){return typeof self<"u"&&self.location?.href||""}function O5(){return Ew()==="http:"||Ew()==="https:"}function Ew(){return typeof self<"u"&&self.location?.protocol||null}function V5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O5()||SI()||"connection"in navigator)?navigator.onLine:!0}function j5(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ci(t>e,"Short delay should be less than long delay!"),this.isMobile=TI()||AI()}get(){return V5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ry(i,e){ci(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class zE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const L5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z5=new Wu(3e4,6e4);function va(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function xa(i,e,t,r,a={}){return UE(i,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=Fu({key:i.config.apiKey,...u}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...l};return EI()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&To(i.emulatorConfig.host)&&(y.credentials="include"),zE.fetch()(await BE(i,i.config.apiHost,t,f),y)})}async function UE(i,e,t){i._canInitEmulator=!1;const r={...P5,...e};try{const a=new B5(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ih(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(i,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ih(i,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ih(i,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ty(i,v,y);Pr(i,v)}}catch(a){if(a instanceof ui)throw a;Pr(i,"network-request-failed",{message:String(a)})}}async function Zu(i,e,t,r,a={}){const l=await xa(i,e,t,r,a);return"mfaPendingCredential"in l&&Pr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function BE(i,e,t,r){const a=`${e}${t}?${r}`,l=i,u=l.config.emulator?ry(i.config,a):`${i.config.apiScheme}://${a}`;return L5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function U5(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ss(this.auth,"network-request-failed")),z5.get())})}}function Ih(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ss(i,e,r);return a.customData._tokenResponse=t,a}function Sw(i){return i!==void 0&&i.enterprise!==void 0}class F5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return U5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q5(i,e){return xa(i,"GET","/v2/recaptchaConfig",va(i,e))}async function H5(i,e){return xa(i,"POST","/v1/accounts:delete",e)}async function hf(i,e){return xa(i,"POST","/v1/accounts:lookup",e)}function _u(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G5(i,e=!1){const t=mn(i),r=await t.getIdToken(e),a=sy(r);ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:_u(cg(a.auth_time)),issuedAtTime:_u(cg(a.iat)),expirationTime:_u(cg(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function cg(i){return Number(i)*1e3}function sy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Xw(t);return a?JSON.parse(a):(Uh("Failed to decode base64 JWT payload"),null)}catch(a){return Uh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Aw(i){const e=sy(i);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ui&&$5(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function $5({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class K5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ff(i){const e=i.auth,t=await i.getIdToken(),r=await Pu(i,hf(e,{idToken:t}));ke(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?FE(a.providerUserInfo):[],u=Q5(i.providerData,l),f=i.isAnonymous,g=!(i.email&&a.passwordHash)&&!u?.length,y=f?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function Y5(i){const e=mn(i);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q5(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function FE(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function X5(i,e){const t=await UE(i,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,u=await BE(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:r};return i.emulatorConfig&&To(i.emulatorConfig.host)&&(g.credentials="include"),zE.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function J5(i,e){return xa(i,"POST","/v2/accounts:revokeToken",va(i,e))}class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Aw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Aw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await X5(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Sl;return r&&(ke(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(ke(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(ke(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return ni("not implemented")}}function Ji(i,e){ke(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ns{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new K5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G5(this,e)}reload(){return Y5(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await Pu(this,H5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:R,providerData:L,stsTokenManager:X}=t;ke(w&&X,e,"internal-error");const F=Sl.fromJSON(this.name,X);ke(typeof w=="string",e,"internal-error"),Ji(r,e.name),Ji(a,e.name),ke(typeof T=="boolean",e,"internal-error"),ke(typeof R=="boolean",e,"internal-error"),Ji(l,e.name),Ji(u,e.name),Ji(f,e.name),Ji(g,e.name),Ji(y,e.name),Ji(v,e.name);const H=new ns({uid:w,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:R,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:F,createdAt:y,lastLoginAt:v});return L&&Array.isArray(L)&&(H.providerData=L.map(ee=>({...ee}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,t,r=!1){const a=new Sl;a.updateFromServerResponse(t);const l=new ns({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ff(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?FE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,f=new Sl;f.updateFromIdToken(r);const g=new ns({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const Iw=new Map;function ri(i){ci(i instanceof Function,"Expected a class definition");let e=Iw.get(i);return e?(ci(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Iw.set(i,e),e)}class qE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qE.type="NONE";const Nw=qE;function Bh(i,e,t){return`firebase:${i}:${e}:${t}`}class Al{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Bh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Bh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hf(this.auth,{idToken:e}).catch(()=>{});return t?ns._fromGetAccountInfoResponse(this.auth,t,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Al(ri(Nw),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||ri(Nw);const u=Bh(r,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(u);if(v){let w;if(typeof v=="string"){const T=await hf(e,{idToken:v}).catch(()=>{});if(!T)break;w=await ns._fromGetAccountInfoResponse(e,T,v)}else w=ns._fromJSON(e,v);y!==l&&(f=w),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Al(l,e,r):(l=g[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Al(l,e,r))}}function Cw(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QE(e))return"Blackberry";if(XE(e))return"Webos";if(GE(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(YE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function HE(i=fn()){return/firefox\//i.test(i)}function GE(i=fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(i=fn()){return/crios\//i.test(i)}function KE(i=fn()){return/iemobile/i.test(i)}function YE(i=fn()){return/android/i.test(i)}function QE(i=fn()){return/blackberry/i.test(i)}function XE(i=fn()){return/webos/i.test(i)}function iy(i=fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function W5(i=fn()){return iy(i)&&!!window.navigator?.standalone}function Z5(){return II()&&document.documentMode===10}function JE(i=fn()){return iy(i)||YE(i)||XE(i)||QE(i)||/windows phone/i.test(i)||KE(i)}function WE(i,e=[]){let t;switch(i){case"Browser":t=Cw(fn());break;case"Worker":t=`${Cw(fn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${r}`}class eD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,f)=>{try{const g=e(l);u(g)}catch(g){f(g)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function tD(i,e={}){return xa(i,"GET","/v2/passwordPolicy",va(i,e))}const nD=6;class rD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class sD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rw(this),this.idTokenSubscription=new Rw(this),this.beforeStateQueue=new eD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hf(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_r(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(r=f.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(si(this));const t=e?mn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tD(this),t=new rD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await J5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ri(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&M5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wa(i){return mn(i)}class Rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=kI(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iD(i){$f=i}function ZE(i){return $f.loadJS(i)}function aD(){return $f.recaptchaEnterpriseScript}function oD(){return $f.gapiScript}function lD(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class cD{constructor(){this.enterprise=new uD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const dD="recaptcha-enterprise",eS="NO_RECAPTCHA";class hD{constructor(e){this.type=dD,this.auth=wa(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{q5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new F5(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{f(g)})})}function a(l,u,f){const g=window.grecaptcha;Sw(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(eS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!t&&Sw(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=aD();g.length!==0&&(g+=f),ZE(g).then(()=>{a(f,l,u)}).catch(y=>{u(y)})}}).catch(f=>{u(f)})})}}async function Dw(i,e,t,r=!1,a=!1){const l=new hD(i);let u;if(a)u=eS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Gg(i,e,t,r,a){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Dw(i,e,t,t==="getOobCode");return r(i,l)}else return r(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Dw(i,e,t,t==="getOobCode");return r(i,u)}else return Promise.reject(l)})}function fD(i,e){const t=bf(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(da(l,e??{}))return a;Pr(a,"already-initialized")}return t.initialize({options:e})}function mD(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ri);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function pD(i,e,t){const r=wa(i);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=tS(e),{host:u,port:f}=gD(e),g=f===null?"":`:${f}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(da(y,r.config.emulator)&&da(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,To(u)?(Wg(`${l}//${u}${g}`),t1("Auth",!0)):yD()}function tS(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function gD(i){const e=tS(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Mw(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:Mw(u)}}}function Mw(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function yD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}async function bD(i,e){return xa(i,"POST","/v1/accounts:signUp",e)}async function _D(i,e){return Zu(i,"POST","/v1/accounts:signInWithPassword",va(i,e))}async function vD(i,e){return Zu(i,"POST","/v1/accounts:signInWithEmailLink",va(i,e))}async function xD(i,e){return Zu(i,"POST","/v1/accounts:signInWithEmailLink",va(i,e))}class Lu extends ay{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Lu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Lu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,t,"signInWithPassword",_D);case"emailLink":return vD(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,r,"signUpPassword",bD);case"emailLink":return xD(e,{idToken:t,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Il(i,e){return Zu(i,"POST","/v1/accounts:signInWithIdp",va(i,e))}const wD="http://localhost";class xo extends ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new xo(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Il(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Il(e,t)}buildRequest(){const e={requestUri:wD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}function TD(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ED(i){const e=tu(nu(i)).link,t=e?tu(nu(e)).deep_link_id:null,r=tu(nu(i)).deep_link_id;return(r?tu(nu(r)).link:null)||r||t||e||i}class oy{constructor(e){const t=tu(nu(e)),r=t.apiKey??null,a=t.oobCode??null,l=TD(t.mode??null);ke(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ED(e);try{return new oy(t)}catch{return null}}}class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,t){return Lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=oy.parseLink(t);return ke(r,"argument-error"),Lu._fromEmailAndCode(e,r.code,r.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ed extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends ed{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";ea.PROVIDER_ID="facebook.com";class ts extends ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ts.credential(t,r)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";class ta extends ed{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";class na extends ed{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return na.credential(t,r)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";async function SD(i,e){return Zu(i,"POST","/v1/accounts:signUp",va(i,e))}class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ns._fromIdTokenResponse(e,r,a),u=kw(r);return new wo({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=kw(r);return new wo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function kw(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class mf extends ui{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new mf(e,t,r,a)}}function nS(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(i,l,e,r):l})}async function AD(i,e,t=!1){const r=await Pu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return wo._forOperation(i,"link",r)}async function ID(i,e,t=!1){const{auth:r}=i;if(_r(r.app))return Promise.reject(si(r));const a="reauthenticate";try{const l=await Pu(i,nS(r,a,e,i),t);ke(l.idToken,r,"internal-error");const u=sy(l.idToken);ke(u,r,"internal-error");const{sub:f}=u;return ke(i.uid===f,r,"user-mismatch"),wo._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Pr(r,"user-mismatch"),l}}async function rS(i,e,t=!1){if(_r(i.app))return Promise.reject(si(i));const r="signIn",a=await nS(i,r,e),l=await wo._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function ND(i,e){return rS(wa(i),e)}async function sS(i){const e=wa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CD(i,e,t){if(_r(i.app))return Promise.reject(si(i));const r=wa(i),u=await Gg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&sS(i),g}),f=await wo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function RD(i,e,t){return _r(i.app)?Promise.reject(si(i)):ND(mn(i),ec.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sS(i),r})}function DD(i,e,t,r){return mn(i).onIdTokenChanged(e,t,r)}function MD(i,e,t){return mn(i).beforeAuthStateChanged(e,t)}function kD(i,e,t,r){return mn(i).onAuthStateChanged(e,t,r)}function OD(i){return mn(i).signOut()}const pf="__sak";class iS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const VD=1e3,jD=10;class aS extends iS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Z5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,jD):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},VD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aS.type="LOCAL";const PD=aS;class oS extends iS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oS.type="SESSION";const lS=oS;function LD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(u).map(async y=>y(t.origin,l)),g=await LD(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];function cy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,g)=>{const y=cy("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Is(){return window}function UD(i){Is().location.href=i}function cS(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function BD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FD(){return navigator?.serviceWorker?.controller||null}function qD(){return cS()?self:null}const uS="firebaseLocalStorageDb",HD=1,gf="firebaseLocalStorage",dS="fbase_key";class td{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(i,e){return i.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function GD(){const i=indexedDB.deleteDatabase(uS);return new td(i).toPromise()}function $g(){const i=indexedDB.open(uS,HD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(gf,{keyPath:dS})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(gf)?e(r):(r.close(),await GD(),e(await $g()))})})}async function Ow(i,e,t){const r=Yf(i,!0).put({[dS]:e,value:t});return new td(r).toPromise()}async function $D(i,e){const t=Yf(i,!1).get(e),r=await new td(t).toPromise();return r===void 0?null:r.value}function Vw(i,e){const t=Yf(i,!0).delete(e);return new td(t).toPromise()}const KD=800,YD=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>YD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(qD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BD(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await Ow(e,pf,"1"),await Vw(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ow(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$D(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Yf(a,!1).getAll();return new td(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const QD=hS;new Wu(3e4,6e4);function fS(i,e){return e?ri(e):(ke(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class uy extends ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XD(i){return rS(i.auth,new uy(i),i.bypassAuthState)}function JD(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),ID(t,new uy(i),i.bypassAuthState)}async function WD(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),AD(t,new uy(i),i.bypassAuthState)}class mS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return JD;default:Pr(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ZD=new Wu(2e3,1e4);async function e4(i,e,t){if(_r(i.app))return Promise.reject(ss(i,"operation-not-supported-in-this-environment"));const r=wa(i);k5(i,e,ly);const a=fS(r,t);return new so(r,"signInViaPopup",e,a).executeNotNull()}class so extends mS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZD.get())};e()}}so.currentPopupAction=null;const t4="pendingRedirect",Fh=new Map;class n4 extends mS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const r=await r4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r4(i,e){const t=a4(e),r=i4(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function s4(i,e){Fh.set(i._key(),e)}function i4(i){return ri(i._redirectPersistence)}function a4(i){return Bh(t4,i.config.apiKey,i.name)}async function o4(i,e,t=!1){if(_r(i.app))return Promise.reject(si(i));const r=wa(i),a=fS(r,e),u=await new n4(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const l4=600*1e3;class c4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ss(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l4&&this.cachedEventUids.clear(),this.cachedEventUids.has(jw(e))}saveEventToCache(e){this.cachedEventUids.add(jw(e)),this.lastProcessedEventTime=Date.now()}}function jw(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function pS({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function u4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(i);default:return!1}}async function d4(i,e={}){return xa(i,"GET","/v1/projects",e)}const h4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f4=/^https?/;async function m4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await d4(i);for(const t of e)try{if(p4(t))return}catch{}Pr(i,"unauthorized-domain")}function p4(i){const e=qg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!f4.test(t))return!1;if(h4.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const g4=new Wu(3e4,6e4);function Pw(){const i=Is().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function y4(i){return new Promise((e,t)=>{function r(){Pw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pw(),t(ss(i,"network-request-failed"))},timeout:g4.get()})}if(Is().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Is().gapi?.load)r();else{const a=lD("iframefcb");return Is()[a]=()=>{gapi.load?r():t(ss(i,"network-request-failed"))},ZE(`${oD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw qh=null,e})}let qh=null;function b4(i){return qh=qh||y4(i),qh}const _4=new Wu(5e3,15e3),v4="__/auth/iframe",x4="emulator/auth/iframe",w4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E4(i){const e=i.config;ke(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ry(e,x4):`https://${i.config.authDomain}/${v4}`,r={apiKey:e.apiKey,appName:i.name,v:Kl},a=T4.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Fu(r).slice(1)}`}async function S4(i){const e=await b4(i),t=Is().gapi;return ke(t,i,"internal-error"),e.open({where:document.body,url:E4(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w4,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=ss(i,"network-request-failed"),f=Is().setTimeout(()=>{l(u)},_4.get());function g(){Is().clearTimeout(f),a(r)}r.ping(g).then(g,()=>{l(u)})}))}const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I4=500,N4=600,C4="_blank",R4="http://localhost";class Lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(i,e,t,r=I4,a=N4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const g={...A4,width:r.toString(),height:a.toString(),top:l,left:u},y=fn().toLowerCase();t&&(f=$E(y)?C4:t),HE(y)&&(e=e||R4,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[R,L])=>`${T}${R}=${L},`,"");if(W5(y)&&f!=="_self")return M4(e||"",f),new Lw(null);const w=window.open(e||"",f,v);ke(w,i,"popup-blocked");try{w.focus()}catch{}return new Lw(w)}function M4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const k4="__/auth/handler",O4="emulator/auth/handler",V4=encodeURIComponent("fac");async function zw(i,e,t,r,a,l){ke(i.config.authDomain,i,"auth-domain-config-required"),ke(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Kl,eventId:a};if(e instanceof ly){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",MI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof ed){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await i._getAppCheckToken(),y=g?`#${V4}=${encodeURIComponent(g)}`:"";return`${j4(i)}?${Fu(f).slice(1)}${y}`}function j4({config:i}){return i.emulator?ry(i,O4):`https://${i.authDomain}/${k4}`}const ug="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lS,this._completeRedirectFn=o4,this._overrideRedirectResult=s4}async _openPopup(e,t,r,a){ci(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await zw(e,t,r,qg(),a);return D4(e,l,cy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await zw(e,t,r,qg(),a);return UD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ci(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await S4(e),r=new c4(e);return t.register("authEvent",a=>(ke(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ug,{type:ug},a=>{const l=a?.[0]?.[ug];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=m4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JE()||GE()||iy()}}const L4=P4;var Uw="@firebase/auth",Bw="1.12.0";class z4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function U4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B4(i){Nl(new uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(i)},y=new sD(r,a,l,g);return mD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nl(new uo("auth-internal",e=>{const t=wa(e.getProvider("auth").getImmediate());return(r=>new z4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(Uw,Bw,U4(i)),aa(Uw,Bw,"esm2020")}const F4=300,q4=e1("authIdTokenMaxAge")||F4;let Fw=null;const H4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>q4)return;const a=t?.token;Fw!==a&&(Fw=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gS(i=n0()){const e=bf(i,"auth");if(e.isInitialized())return e.getImmediate();const t=fD(i,{popupRedirectResolver:L4,persistence:[QD,PD,lS]}),r=e1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=H4(l.toString());MD(t,u,()=>u(t.currentUser)),DD(t,f=>u(f))}}const a=Ww("auth");return a&&pD(t,`http://${a}`),t}function G4(){return document.getElementsByTagName("head")?.[0]??document}iD({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=ss("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",G4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B4("Browser");const $4={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},yS=t0($4),Oe=EE(yS),qw=gS(yS);new ts;const dy=i=>i?typeof i=="number"?i:i.val?dy(i.val):Number(i.value)||Number(i.coins)||Number(i.lofiCoins)||0:0,Hw=async i=>{try{const e=at(Oe,"users",i,"data","wallet"),t=await Hf(e);return t.exists()?dy(t.data()):0}catch(e){throw console.error("Error en servicio getWalletBalance:",e),e}},K4=async(i,e)=>{const t=typeof e=="object"?dy(e):Number(e),r=at(Oe,"users",i,"data","wallet");return await ua(r,{val:{value:t,coins:t,lofiCoins:t},value:t,coins:t,lofiCoins:t}),t},Y4=i=>{const[e,t]=j.useState(0),[r,a]=j.useState(!0),l=j.useRef(null),u=j.useRef(null);j.useEffect(()=>{if(!i?.uid)return;(async()=>{try{a(!0);const w=await Hw(i.uid);t(w),u.current=w}catch{console.error("Fall la carga de billetera")}finally{a(!1)}})()},[i]);const f=j.useCallback(v=>{i?.uid&&(t(v),u.current=v,l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const w=u.current;await K4(i.uid,w),console.log(" Saldo guardado en Firebase:",w)}catch{console.error("Error guardando saldo, revertimos...");const T=await Hw(i.uid);t(T)}},2e3))},[i]);return{balance:e,loading:r,updateBalance:f,addCoins:v=>f(e+v),spendCoins:v=>e>=v?(f(e-v),!0):!1}},Q4={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},Kg=O2().length>0?n0():t0(Q4);let Yg;try{Yg=d5(Kg,{localCache:T5({tabManager:I5()})})}catch{Yg=EE(Kg)}const vu=gS(Kg);new ts;const X4=()=>{const[i,e]=j.useState(null),[t,r]=j.useState(!0);return j.useEffect(()=>{const a=kD(vu,l=>{e(l),r(!1)});return()=>a()},[]),{user:i,loading:t}},ei=(i,e,t,r)=>{const[a,l]=j.useState(t),[u,f]=j.useState(!0),g=j.useCallback(()=>r?at(Yg,"users",r.uid,i,e):null,[r,i,e]);return j.useEffect(()=>{const v=g();if(!v){f(!1);return}const w=es(v,T=>{f(!1),T.exists()?l(T.data().val):l(t)},T=>{console.error("Firestore read error",T),f(!1)});return()=>w()},[g]),[a,async v=>{const w=g();if(w){l(v);try{await ua(w,{val:v},{merge:!0})}catch(T){console.error("Error writing to Firestore",T)}}},u]},J4=[{name:"Seba y Estefania",date:"12-08"},{name:"Bianca",date:"12-18"},{name:"Mica",date:"08-01"},{name:"Arturo",date:"04-01"},{name:"Mica",date:"11-21"},{name:"Angie",date:"11-19"},{name:"Dana",date:"08-28"},{name:"Luciano",date:"07-07"}],bS=["Tienda Lujosa","Clara Tienda","Clara Tierra","Bella Divina"],_S=["Columna CONFIRMADO","Columna POR UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Chat en vivo (filtro Pendiente)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats","Meeting"],Qg=[],W4=i=>{const[e,t]=ei("data","tasks",[],i),[r,a]=j.useState(""),[l,u]=j.useState(null),f=j.useRef(e);j.useEffect(()=>{f.current=e},[e]);const[,g]=j.useState(0);j.useEffect(()=>{const S=setInterval(()=>{f.current&&f.current.some(A=>A.running)&&g(A=>A+1)},1e3);return()=>clearInterval(S)},[]);const y=j.useCallback(()=>{const S=Date.now();return e.map(A=>A.running?{...A,elapsedTime:A.elapsedTime+(S-A.lastTime)}:A)},[e]),v=j.useCallback(S=>{const A=[],N=new Set(e.map(D=>D.name.toLowerCase()));let O=0;return S.forEach((D,P)=>{const{shopInput:C,taskName:me}=D,de=`${me} [${C}]`;if(N.has(de.toLowerCase())){O++;return}const q=!_S.includes(me)&&!Object.values(Qg).includes(me),oe={id:Date.now()+P+Math.random(),name:de,rawTaskName:me,shop:C,quantity:null,elapsedTime:0,running:!1,lastTime:null,isCustom:q};A.push(oe),N.add(de.toLowerCase())}),A.length>0?(t([...e,...A]),a(""),!0):(O>0&&a("Esas tareas ya existen en la lista."),!1)},[e,t]),w=j.useCallback(S=>v([S]),[v]),T=j.useCallback(S=>t(e.filter(A=>A.id!==S)),[e,t]),R=j.useCallback(()=>{t([]),a("")},[t]),L=j.useCallback(S=>{const A=Date.now(),N=e.map(O=>O.running&&O.id!==S?{...O,running:!1,elapsedTime:O.elapsedTime+(A-O.lastTime),lastTime:null}:O.id===S?O.running?{...O,running:!1,elapsedTime:O.elapsedTime+(A-O.lastTime),lastTime:null}:{...O,running:!0,lastTime:A}:O);t(N)},[e,t]),X=j.useCallback(()=>{let S=!1,A=null;const N=Date.now(),O=e.map(D=>D.running?(S=!0,A=D.id,{...D,running:!1,elapsedTime:D.elapsedTime+(N-D.lastTime),lastTime:null}):D);if(!S){u({text:"No hay tareas activas.",taskIdToResume:null});return}t(O),u({text:"Tareas detenidas.",taskIdToResume:A})},[e,t]),F=j.useCallback(()=>{!l||l.taskIdToResume===null||(L(l.taskIdToResume),u(null))},[l,L]),H=j.useCallback(()=>{u(null)},[]),ee=j.useCallback(S=>{t(e.map(A=>A.id===S?{...A,elapsedTime:0,running:!1,lastTime:null,quantity:null}:A))},[e,t]),Y=j.useCallback((S,A)=>{t(e.map(N=>{if(N.id===S){const O=A.rawTaskName!==void 0?A.rawTaskName:N.rawTaskName,D=A.shop!==void 0?A.shop:N.shop,P=O?`${O} [${D}]`:N.name;return{...N,...A,rawTaskName:O,shop:D,name:P}}return N}))},[e,t]),le=j.useCallback(()=>t([...e].sort((S,A)=>S.shop.localeCompare(A.shop))),[e,t]),ae=j.useCallback((S,A)=>{if(!S||S.length===0)return;const N=Math.floor(A/S.length),O=A%S.length;let D=!1;const P=e.map(C=>{if(S.includes(C.id)){let me=N;D||(me+=O,D=!0);const de=Math.max(0,C.elapsedTime+me);return{...C,elapsedTime:de}}return C});t(P)},[e,t]),he=j.useCallback((S,A,N)=>{if(typeof S=="number"){const de=S;if(e.length===0)return;const q=Math.floor(de/e.length),oe=de%e.length;let be=!1;const Ve=e.map((Pe,M)=>{let ne=q;be||(ne+=oe,be=!0);const ue=Math.max(0,Pe.elapsedTime+ne);return{...Pe,elapsedTime:ue}});t(Ve);return}let O=0;const D=S.toString().trim();if(D.includes(":")){const de=D.split(":"),q=parseInt(de[0]||"0",10),oe=parseInt(de[1]||"0",10);O=q*3600*1e3+oe*60*1e3}else{const de=parseFloat(D);isNaN(de)||(O=de*60*1e3)}const P=e.reduce((de,q)=>de+q.elapsedTime,0),C=O-P;if(Math.abs(C)<1e3)return;let me=[...e];if(A==="all"){if(me.length===0)return;const de=me.length,q=Math.floor(C/de),oe=C%de;me=me.map((be,Ve)=>{let Pe=q+(Ve===0?oe:0),M=Math.max(0,be.elapsedTime+Pe);return{...be,elapsedTime:M}})}else A==="single"&&N&&(me=me.map(de=>{if(de.id===N){let q=Math.max(0,de.elapsedTime+C);return{...de,elapsedTime:q}}return de}));t(me)},[e,t]);return{tasks:y(),errorMessage:r,setErrorMessage:a,addTask:w,addMultipleTasks:v,deleteTask:T,deleteAllTasks:R,toggleTimer:L,updateTaskDetails:Y,sortTasksByShop:le,resetTaskTimer:ee,stopAllTimers:X,statusMessage:l,resumeStoppedTimers:F,clearStatusMessage:H,syncTasksTime:he,distributeTasksTime:ae}},jn={seasonal_valentines:{id:"seasonal_valentines",name:"valentines",label:" San Valentn",hidden:!0,type:"theme",bodyBg:"bg-pink-950",rawBg:"radial-gradient(circle at 50% 10%, #be185d 0%, #831843 40%, #000000 100%)",cardBg:"bg-pink-900/60 backdrop-blur-md shadow-[0_0_40px_rgba(236,72,153,0.3)] border border-pink-500/30",primaryText:"text-pink-100",secondaryText:"text-pink-200",accentText:"text-white font-bold drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]",inputBorder:"border-pink-500 focus:border-pink-300 bg-pink-900/50",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-400 hover:to-rose-400 text-white shadow-lg shadow-pink-900/50",buttonAdd:"bg-rose-600 hover:bg-rose-700 text-white shadow-md",modalBg:"bg-pink-950 border-pink-500",customCss:`cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%23ec4899" stroke="white" stroke-width="1.5" stroke-linejoin="round"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg>') 0 0, auto !important;`,activeEffects:["valentine_hearts"]},seasonal_halloween:{id:"seasonal_halloween",name:"halloween",label:" Halloween",hidden:!0,type:"theme",bodyBg:"bg-gray-950",rawBg:"linear-gradient(to bottom, #1a0b00 0%, #000000 100%)",cardBg:"bg-[#0a0a0a] shadow-2xl border border-orange-600/50",primaryText:"text-orange-500",secondaryText:"text-gray-400",accentText:"text-yellow-400 font-bold tracking-widest",inputBorder:"border-gray-700 focus:border-orange-500 bg-gray-900",shopSelectBorder:"border-orange-500",buttonAction:"bg-purple-700 hover:bg-purple-800 text-white border border-orange-500 shadow-[0_0_15px_rgba(255,165,0,0.4)]",buttonAdd:"bg-orange-600 hover:bg-orange-700 text-white",modalBg:"bg-gray-900 border-orange-600",activeEffects:["ghost","spiderweb"]},seasonal_christmas:{id:"seasonal_christmas",name:"christmas",label:" Navidad",hidden:!0,type:"theme",bodyBg:"bg-red-950",rawBg:"linear-gradient(to bottom, #022c22 0%, #14532d 100%)",cardBg:"bg-green-900/90 backdrop-blur-sm border border-yellow-400/30",primaryText:"text-white",secondaryText:"text-gray-200",accentText:"text-yellow-300 font-bold",inputBorder:"border-red-400 focus:border-yellow-300 bg-red-900/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-yellow-500 hover:bg-yellow-600 text-green-900 font-bold shadow-lg",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-green-900 border-yellow-400",activeEffects:["snow","lights"]},seasonal_bianca_bday:{id:"seasonal_bianca_bday",name:"biancaBday",label:" Cumple Bianca",hidden:!0,type:"theme",bodyBg:"bg-black",rawBg:"radial-gradient(circle at top right, #4c1d95, #000)",cardBg:"bg-gray-900/90 backdrop-blur-sm shadow-2xl shadow-purple-500/30 border border-purple-500/50",primaryText:"text-purple-400",secondaryText:"text-pink-300",accentText:"text-pink-400 font-bold animate-pulse",inputBorder:"border-gray-700 focus:border-purple-500 bg-gray-800",shopSelectBorder:"border-pink-400",buttonAction:"bg-purple-600 hover:bg-purple-700 text-white shadow-[0_0_15px_rgba(192,132,252,0.5)]",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-gray-900 border-pink-500",activeEffects:["mickey_confetti"]},seasonal_party:{id:"seasonal_party",name:"party",label:" Cumpleaos",hidden:!0,type:"theme",bodyBg:"bg-slate-900",cardBg:"bg-gray-900/80 backdrop-blur-sm border border-fuchsia-500/30",primaryText:"text-fuchsia-400",secondaryText:"text-gray-200",accentText:"text-cyan-400 font-bold",inputBorder:"border-gray-600 focus:border-fuchsia-500 bg-gray-800",shopSelectBorder:"border-cyan-500",buttonAction:"bg-gradient-to-r from-fuchsia-600 to-cyan-600 text-white",buttonAdd:"bg-fuchsia-600 hover:bg-fuchsia-700 text-white",modalBg:"bg-gray-900 border-fuchsia-500",activeEffects:["mickey_confetti"]},default:{id:"default",name:"default",label:" Default Nexus",type:"theme",price:0,bodyBg:"bg-gradient-to-b from-slate-900 via-[#0f172a] to-[#020617]",cardBg:"bg-slate-800/95 backdrop-blur-sm border border-slate-700 shadow-xl",primaryText:"text-slate-100 tracking-wide",secondaryText:"text-slate-400",accentText:"text-blue-400 font-semibold drop-shadow-sm",inputBorder:"border-slate-600 focus:border-blue-500 bg-slate-950/50",shopSelectBorder:"border-blue-500/30",buttonAction:"bg-blue-600 hover:bg-blue-500 text-white shadow-md border border-blue-500/20",buttonAdd:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-md",modalBg:"bg-slate-900 border-slate-700",activeEffects:[]},lofi:{id:"lofi",name:"lofi",label:" Lofi Chill",type:"theme",price:500,bodyBg:"bg-black",cardBg:"bg-[#1a120e]/85 backdrop-blur-xl border border-[#d1c4e9]/30 shadow-2xl",primaryText:"text-[#efebe9]",secondaryText:"text-[#a1887f]",accentText:"text-[#d1c4e9] font-bold",inputBorder:"border-[#5d4037] bg-[#3e2723]/50",shopSelectBorder:"border-[#d1c4e9]/40",buttonAction:"bg-[#3e2723] hover:bg-[#4e342e] text-[#efebe9] border border-[#d1c4e9]/30",buttonAdd:"bg-[#d97706] text-white",modalBg:"bg-[#1a120e] border-[#d1c4e9]/40",activeEffects:["lofi_notes","cozy_lights","rain"]},neon:{id:"neon",name:"neon",label:" Neon Metropolis",type:"theme",price:650,bodyBg:"bg-black",rawBg:null,cardBg:"bg-black/80 backdrop-blur-xl border-2 border-cyan-500/50 shadow-[0_0_50px_rgba(6,182,212,0.4)]",primaryText:"text-cyan-400 font-mono tracking-widest uppercase",secondaryText:"text-fuchsia-400",accentText:"text-yellow-300 font-bold",inputBorder:"border-cyan-600 bg-slate-900/90",shopSelectBorder:"border-cyan-500",buttonAction:"bg-cyan-700 hover:bg-cyan-600 text-white border border-cyan-400",buttonAdd:"bg-fuchsia-700 hover:bg-fuchsia-600 text-white",modalBg:"bg-slate-900 border-2 border-cyan-500",activeEffects:["neon_grid","rain"]},neko:{id:"neko",name:"neko",label:" Neko Cafe",type:"theme",price:600,bodyBg:"bg-pink-50",rawBg:null,cardBg:"bg-white/60 backdrop-blur-xl border-4 border-pink-300 shadow-xl rounded-[2rem]",primaryText:"text-pink-600 font-sans font-bold",secondaryText:"text-orange-400",accentText:"text-pink-500 font-bold",inputBorder:"border-pink-300 bg-white/80 rounded-xl",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-400 to-orange-300 text-white rounded-full shadow-lg",buttonAdd:"bg-pink-500 text-white rounded-full",modalBg:"bg-pink-50 border-pink-300",customCss:`body { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23f472b6" stroke="white" stroke-width="2"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto !important; }`,activeEffects:["neko_pattern","valentine_hearts"]},winter:{id:"winter",name:"winter",label:" Winter",type:"theme",price:200,bodyBg:"bg-black",rawBg:"linear-gradient(to bottom, #020617 0%, #0f172a 60%, #1e3a8a 100%)",cardBg:"bg-slate-900/50 backdrop-blur-lg border border-cyan-200/20 shadow-[0_0_30px_rgba(165,243,252,0.15)]",primaryText:"text-cyan-50",secondaryText:"text-blue-200",accentText:"text-cyan-300 drop-shadow-[0_0_10px_rgba(103,232,249,0.8)]",inputBorder:"border-blue-400/30",shopSelectBorder:"border-cyan-400/50",buttonAction:"bg-cyan-900/80 hover:bg-cyan-800 text-white border border-cyan-500/40",buttonAdd:"bg-blue-700 hover:bg-blue-600 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)]",modalBg:"bg-slate-900 border-cyan-500",activeEffects:["snow_effect"]},crimson:{id:"crimson",name:"crimson",label:" Vampire Lord",type:"theme",price:250,bodyBg:"bg-black",rawBg:"linear-gradient(to bottom, #2a0a0a 0%, #000000 100%)",cardBg:"bg-red-950/20 backdrop-blur-md border border-red-900/80 shadow-[0_0_50px_rgba(153,27,27,0.4)]",primaryText:"text-red-50 font-serif tracking-widest",secondaryText:"text-red-400",accentText:"text-red-600 font-bold drop-shadow-[0_0_8px_rgba(220,38,38,1)]",inputBorder:"border-red-900/60 focus:border-red-600",shopSelectBorder:"border-red-800",buttonAction:"bg-red-950 hover:bg-red-900 text-red-100 border border-red-800",buttonAdd:"bg-red-800 hover:bg-red-700 text-white shadow-[0_0_15px_#b91c1c]",modalBg:"bg-black border-red-900",activeEffects:["mystic_fog","vampire_bats"],customCss:`
            .app-card { animation: heartbeat 4s infinite ease-in-out; }
            @keyframes heartbeat {
                0%, 100% { box-shadow: 0 0 30px rgba(153, 27, 27, 0.3); border-color: rgba(127, 29, 29, 0.6); }
                50% { box-shadow: 0 0 60px rgba(220, 38, 38, 0.5); border-color: rgba(220, 38, 38, 0.8); }
            }
        `},royal:{id:"royal",name:"royal",label:" Royal",type:"theme",price:500,bodyBg:"bg-black",rawBg:"radial-gradient(ellipse at center, #713f12 0%, #312e81 40%, #020617 100%)",cardBg:"bg-indigo-950/60 backdrop-blur-xl border-2 border-yellow-500/70 shadow-[0_0_50px_rgba(234,179,8,0.4)]",primaryText:"text-indigo-50 font-serif",secondaryText:"text-yellow-200/60",accentText:"text-yellow-400 font-bold uppercase tracking-widest",inputBorder:"border-yellow-600/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-indigo-900 hover:bg-indigo-800 text-yellow-100 border border-yellow-600",buttonAdd:"bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-white border border-yellow-300 shadow-[0_0_20px_rgba(234,179,8,0.5)]",modalBg:"bg-indigo-950 border-yellow-500",activeEffects:["golden_dust"]},forest:{id:"forest",name:"forest",label:" Mystic Forest",type:"theme",price:150,bodyBg:"bg-black",rawBg:"linear-gradient(180deg, #022c22 0%, #052e16 100%)",cardBg:"bg-[#064e3b]/30 backdrop-blur-md border border-emerald-800/50 shadow-2xl",primaryText:"text-emerald-50",secondaryText:"text-emerald-400/80",accentText:"text-emerald-300 drop-shadow-[0_0_10px_rgba(52,211,153,0.6)]",inputBorder:"border-emerald-900",shopSelectBorder:"border-emerald-700/50",buttonAction:"bg-emerald-950 hover:bg-emerald-900 text-emerald-100 border border-emerald-800",buttonAdd:"bg-emerald-700 hover:bg-emerald-600 text-white shadow-lg",modalBg:"bg-gray-900 border-emerald-800",activeEffects:["pine_forest","mystic_fog","forest_flora"]},beach:{name:"Lanterns: Fuego",emoji:"",price:1200,category:"theme",description:"Atardecer carmes. Pasin y calidez.",rawBg:"linear-gradient(180deg, #240b0b 0%, #751010 40%, #d94f04 70%, #ffca28 100%)",cardBg:"bg-[#3b0a0a]/60 backdrop-blur-md border border-orange-500/30 shadow-[0_0_40px_rgba(255,69,0,0.3)]",primaryText:"text-orange-50 font-bold",secondaryText:"text-orange-200",accentText:"text-yellow-400",itemBg:"bg-red-950/40 hover:bg-red-900/60 border-l-2 border-orange-500",buttonAction:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white",borderClass:"border-l-4 border-orange-500",activeEffects:["lanterns"],customCss:`
            @keyframes warm-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: warm-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #ffca28; }
        `},beach_night:{name:"Lanterns: Mstico",emoji:"",price:1200,category:"theme",description:"Noche profunda y magia arcana.",rawBg:"linear-gradient(180deg, #020024 0%, #090979 40%, #2a004e 100%)",cardBg:"bg-[#1a0b2e]/60 backdrop-blur-md border border-purple-500/30 shadow-[0_0_40px_rgba(147,51,234,0.3)]",primaryText:"text-purple-100 font-bold",secondaryText:"text-indigo-200",accentText:"text-pink-400",itemBg:"bg-indigo-950/40 hover:bg-indigo-900/60 border-l-2 border-purple-500",buttonAction:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",borderClass:"border-l-4 border-purple-500",activeEffects:["lanterns"],customCss:`
            @keyframes night-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: night-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #d8b4fe; }
            
            /* TRUCO: Cambiamos el color de las linternas rojas a rosadas/violetas con un filtro */
            .lantern-item { filter: hue-rotate(280deg) drop-shadow(0 0 10px #d8b4fe) !important; }
        `},beach_spirit:{name:"Lanterns: Zen",emoji:"",price:1200,category:"theme",description:"Bosque sagrado. Luces fatuas y serenidad.",rawBg:"linear-gradient(180deg, #011810 0%, #064e3b 40%, #115e59 70%, #0f393b 100%)",cardBg:"bg-[#062c1b]/70 backdrop-blur-md border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.2)]",primaryText:"text-emerald-50 font-medium tracking-widest",secondaryText:"text-emerald-200/80",accentText:"text-teal-300 drop-shadow-[0_0_8px_rgba(45,212,191,0.8)]",itemBg:"bg-emerald-950/50 hover:bg-emerald-900/70 border-l-2 border-emerald-400 transition-all",buttonAction:"bg-gradient-to-r from-teal-700 to-emerald-600 hover:from-teal-600 hover:to-emerald-500 text-white shadow-lg shadow-emerald-900/40",borderClass:"border-l-4 border-emerald-500",activeEffects:["lanterns","forest_flora"],customCss:`
            /* Animacin de respiracin lenta para el fondo */
            @keyframes forest-breath { 
                0% { background-position: 0% 50%; } 
                50% { background-position: 100% 50%; } 
                100% { background-position: 0% 50%; } 
            }
            body { 
                background-size: 200% 200% !important; 
                animation: forest-breath 30s ease-in-out infinite; 
            }
            ::-webkit-scrollbar-thumb { background: #34d399; }

            /* TRUCO: Linternas color "Luz Fatu" (Verde espectral) + Desenfoque leve */
            .lantern-item { 
                filter: hue-rotate(85deg) brightness(1.2) drop-shadow(0 0 15px #34d399) !important; 
                opacity: 0.8; 
            }
        `},galaxy:{id:"galaxy",name:"galaxy",label:" Galaxy",type:"theme",price:300,bodyBg:"bg-black",rawBg:"radial-gradient(circle at 20% 10%, #4c1d95 0%, #000000 40%), radial-gradient(circle at 80% 90%, #1e3a8a 0%, #000000 40%), linear-gradient(to bottom, #020617, #000000)",cardBg:"bg-[#0f172a]/70 backdrop-blur-xl border border-purple-500/30 shadow-[0_0_50px_rgba(124,58,237,0.2)]",primaryText:"text-purple-50 tracking-wide",secondaryText:"text-blue-200/70",accentText:"text-cyan-400 font-bold drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",inputBorder:"border-purple-800/60 focus:border-cyan-400",shopSelectBorder:"border-cyan-500/50",buttonAction:"bg-indigo-900/80 hover:bg-indigo-800 text-cyan-50 border border-indigo-500",buttonAdd:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-[0_0_20px_rgba(147,51,234,0.4)]",modalBg:"bg-[#020617] border-purple-500/40",activeEffects:["mystic_fog","shooting_stars"]},border_default:{id:"border_default",type:"border",label:"Sin Borde",borderClass:""},border_blue:{id:"border_blue",type:"border",label:" Azul Elctrico",price:200,customCss:`
            .app-card { 
                border: 4px solid #3b82f6 !important; 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.6) !important;
            }
        `},border_red:{id:"border_red",type:"border",label:" Rojo Pasin",price:200,customCss:`
            .app-card { 
                border: 4px solid #ef4444 !important; 
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.6) !important;
            }
        `},border_green:{id:"border_green",type:"border",label:" Verde Matrix",price:200,customCss:`
            .app-card { 
                border: 4px solid #22c55e !important; 
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.6) !important;
            }
        `},border_neon:{id:"border_neon",type:"border",label:" Ultra Nen",borderClass:"border-[3px] border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.6)]",customCss:`
            .app-card { animation: border-pulse-neon 2s infinite alternate; }
            @keyframes border-pulse-neon {
                0% { box-shadow: 0 0 10px #06b6d4, inset 0 0 5px #06b6d4; border-color: #06b6d4; }
                100% { box-shadow: 0 0 25px #d946ef, inset 0 0 10px #d946ef; border-color: #d946ef; }
            }
        `},border_rgb:{id:"border_rgb",type:"border",label:" RGB Gamer",borderClass:"border-[5px] border-transparent",customCss:`
            .app-card {
                border-image: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000) 1;
                /* Sin animaciones locas que muevan el DOM */
            }
        `},border_glitch:{id:"border_glitch",type:"border",label:" Cyber Glitch",borderClass:"border-2 border-white",customCss:`
            .app-card { animation: glitch-border 3s infinite; box-shadow: 5px 0 0 #ff00ff, -5px 0 0 #00ffff; }
            @keyframes glitch-border {
                0% { transform: translate(0); }
                20% { transform: translate(-2px, 2px); }
                40% { transform: translate(-2px, -2px); }
                60% { transform: translate(2px, 2px); }
                80% { transform: translate(2px, -2px); }
                100% { transform: translate(0); }
            }
        `},border_electric:{id:"border_electric",type:"border",label:" Electro Shock",borderClass:"border-2 border-yellow-300",customCss:`
            .app-card { animation: shock-border 0.5s infinite alternate; }
            @keyframes shock-border {
                0% { box-shadow: 0 0 5px #facc15, 0 0 10px #3b82f6; border-color: #facc15; }
                100% { box-shadow: 0 0 20px #3b82f6, 0 0 40px #facc15; border-color: #ffffff; }
            }
        `},border_fire:{id:"border_fire",type:"border",label:" Fuego Mstico",borderClass:"border-4 border-orange-500",customCss:`
            .app-card { box-shadow: 0 -5px 20px rgba(239, 68, 68, 0.8), 0 0 10px rgba(249, 115, 22, 0.8) inset; animation: fire-pulse 2s infinite alternate; }
            @keyframes fire-pulse { 0% { border-color: #ef4444; } 100% { border-color: #f97316; } }
        `},border_gold:{id:"border_gold",type:"border",label:" Marco de Oro",price:2500,borderClass:"border-[8px] border-double border-yellow-500 shadow-[inset_0_0_20px_rgba(234,179,8,0.3)]",customCss:`
            .app-card { 
                border-image: linear-gradient(45deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c) 1; 
                border-width: 6px; 
                border-style: solid; 
            }
        `},border_wood:{id:"border_wood",type:"border",label:" Marco Rstico",borderClass:"border-[12px] border-[#5c3a21] shadow-2xl",customCss:`
            .app-card { 
                border-image: url("https://www.transparenttextures.com/patterns/wood-pattern.png") 30 round;
                border-radius: 0 !important; 
                box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 5px 5px 15px rgba(0,0,0,0.5);
            }
        `}},Z4=i=>{if(i<0)return"00:00:00";const e=Math.floor(i/1e3),t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return`${t}:${r}:${a}`},zu=()=>{const i=new Date,e=i.getTimezoneOffset();return new Date(i.getTime()-e*60*1e3).toISOString().split("T")[0]},gk=i=>{if(!i)return 0;const e=i.match(/Hours worked: (\d+)h (\d+)m/)||i.match(/Tiempo Total: (\d+)h (\d+)m/);if(e){const t=parseInt(e[1],10),r=parseInt(e[2],10);return t+r/60}return 0},eM=()=>{const i=new Date,e=new Date(i);e.setDate(i.getDate()+7);const t=e.getFullYear(),r=new Date(t,0,1),a=(e-r)/864e5,l=Math.ceil((a+r.getDay()+1)/7);return`${t}-W${String(l).padStart(2,"0")}`},Xg=()=>{const i=new Date,e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+e.getDay()+1)/7);return`${i.getFullYear()}-W${t}`},tM=(i,e,t,r)=>{const a=j.useMemo(()=>(Xg(),e.filter(g=>!0).reduce((g,y)=>g+(y.hours||0),0)),[e]),l=j.useMemo(()=>{const f=zu(),[g,y,v]=f.split("-"),w=parseInt(y),T=parseInt(v);if(r&&jn[r])return jn[r];if(w===2&&T>=13&&T<=14)return jn.seasonal_valentines||jn.default;if(w===10&&T===31)return jn.seasonal_halloween||jn.default;if(w===12&&(T===24||T===25))return jn.seasonal_christmas||jn.default;const R=i.find(L=>L.date===`${y}-${v}`);return R?R.name==="Bianca"?jn.seasonal_bianca_bday||jn.seasonal_party:jn.seasonal_party||jn.default:jn.default},[r,i,e]),u=j.useMemo(()=>{if(l.id==="seasonal_valentines")return" Feliz San Valentn! ";if(l.id==="seasonal_halloween")return" Dulce o Truco! ";if(l.id==="seasonal_christmas")return" Feliz Navidad! ";const f=zu().split("-").slice(1).join("-"),g=i.find(y=>y.date===f);return g?` Feliz Cumpleaos, ${g.name}! `:""},[l,i]);return{strategy:l,message:u,weeklyHoursWorked:a,isUnlocked:!0}},nM=async(i,e,t,r)=>{if(!i)throw new Error("No user");const a=e.reduce((R,L)=>{const X=L.running?Date.now()-L.lastTime:0;return R+L.elapsedTime+X},0),l=e.map(R=>{const L=parseInt(R.quantity)||0,X=R.running?Date.now()-R.lastTime:0,F=R.elapsedTime+X,H=F/36e5,ee=H>0?(L/H).toFixed(2):"0.00";return{id:R.id,name:R.rawTaskName||R.text,category:R.category||"General",count:L,timeMs:F,speed:ee}}),u=r?.team||"default",f=r?.name||i.displayName||i.email,g=new Date().toLocaleString("es-AR"),y={uid:i.uid,userName:f,team:u,date:t,lastUpdated:Date.now(),metrics:{totalTasks:e.reduce((R,L)=>R+(parseInt(L.quantity)||0),0),totalTimeMs:a,globalSpeed:a>0?(e.reduce((R,L)=>R+(parseInt(L.quantity)||0),0)/(a/36e5)).toFixed(2):"0.00"},taskBreakdown:l,timestampStr:g};await ua(at(Oe,"daily_reports",`${i.uid}_${t}`),y);const v=a/(1e3*60*60);return{totalReward:Math.floor(v*10)+15,reportData:y}},rM=(i,e,t)=>{e||(e=new Date().toISOString().split("T")[0]);const[r,a,l]=e.split("-"),u=new Date(Number(r),Number(a)-1,Number(l)),f={weekday:"long",year:"numeric",month:"long",day:"numeric"},g=u.toLocaleDateString("en-US",f),y=R=>{if(!R)return"0h 0m";const L=Math.floor(R/36e5),X=Math.floor(R%36e5/6e4);return`${L}h ${X}m`};let v=0;const w={};i.forEach(R=>{let L=R.elapsedTime||0;R.running&&R.lastTime&&(L+=Date.now()-R.lastTime),v+=L;const X=R.shop||R.category||"General";w[X]||(w[X]=[]);let H=(R.text||R.name||"Tarea sin nombre").replace(/\s*\[.*?\]/g,"").trim();w[X].push({name:H,qty:parseInt(R.count||R.quantity)||0,timeStr:y(L)})});let T=`End of Day Report: ${g}
`;return T+=`Hours worked: ${y(v)}

`,T+=`Today I worked on the following tasks:
`,Object.keys(w).sort().forEach(R=>{T+=`--- ${R} ---
`,w[R].forEach(L=>{const X=L.qty>0?` (${L.qty} orders)`:"";T+=`${L.name}${X}: ${L.timeStr}
`})}),T},sM=(i,e,t,r,a)=>{const[l,u]=j.useState(!1);return{handleGenerate:async(g,y,v)=>{u(!0);try{t();const w=`${i.uid}_${g}`,T=at(Oe,"daily_reports",w),L=(await Hf(T)).exists(),{totalReward:X,reportData:F}=await nM(i,e,g,a),H=rM(e,g,y);i&&g&&await yr(T,{report:H,date:g,content:H}).catch(ee=>{console.warn("Actualizacin secundaria:",ee)}),!L&&X>0?(r(X),alert(` Reporte NUEVO guardado.
 Ganaste: ${X} Lofi Coins!`)):alert(` Reporte ACTUALIZADO correctamente.
(No se otorgan monedas por editar reportes existentes)`),v&&v(H,F)}catch(w){console.error("Error generando reporte:",w),alert("Error al generar el reporte. Revisa la consola.")}finally{u(!1)}},isProcessing:l}},iM=({processedData:i,detectedTasks:e,taskGoals:t,selectedTeam:r,isLoading:a,selectedTaskFilter:l,setSelectedTaskFilter:u,viewMode:f,setViewMode:g,filterDate:y,setFilterDate:v,expandedReportId:w,fetchTeamData:T,toggleRow:R,formatTime:L,getPerformanceColor:X})=>p.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[p.jsxs("div",{className:"flex flex-col xl:flex-row items-center justify-between gap-4 bg-slate-900 border border-white/10 p-4 rounded-xl shadow-xl",children:[p.jsxs("div",{className:"flex items-center gap-3 w-full xl:w-auto bg-black/30 p-1.5 rounded-lg border border-white/5",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase px-2",children:"Filtrar:"}),p.jsxs("select",{value:l,onChange:F=>u(F.target.value),className:"bg-transparent text-white text-xs font-bold outline-none w-full xl:w-64 cursor-pointer hover:text-indigo-400 transition-colors",children:[p.jsx("option",{value:"ALL",className:"bg-slate-900",children:" TODAS LAS TAREAS"}),e.map(F=>p.jsx("option",{value:F,className:"bg-slate-900",children:F},F))]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full xl:w-auto",children:[p.jsx("div",{className:"flex bg-black/30 rounded-lg p-1 border border-white/5",children:["daily","weekly","monthly"].map(F=>p.jsx("button",{onClick:()=>g(F),className:`px-3 py-1.5 rounded text-[10px] font-bold uppercase transition-all ${f===F?"bg-indigo-600 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:{daily:"Da",weekly:"Semana",monthly:"Mes"}[F]},F))}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx("span",{className:"text-indigo-400 text-xs",children:""})}),p.jsx("input",{type:"date",value:y,onChange:F=>v(F.target.value),className:"bg-black/30 border border-white/10 text-white text-xs font-bold rounded-lg py-2 pl-9 pr-3 outline-none focus:border-indigo-500 transition-all cursor-pointer hover:bg-black/50"})]}),p.jsx("button",{onClick:T,disabled:a,className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all shadow-lg active:scale-95 border border-indigo-400/50",children:a?"...":""})]})]}),p.jsx("div",{className:"bg-slate-900/50 backdrop-blur border border-white/5 rounded-2xl overflow-hidden shadow-2xl",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-black/40 text-slate-400 text-[10px] uppercase tracking-wider border-b border-white/5",children:[p.jsx("th",{className:"p-5 font-bold",children:"Agente"}),p.jsx("th",{className:"p-5 font-bold text-center",children:"Tareas"}),p.jsx("th",{className:"p-5 font-bold text-center text-indigo-400",children:"Velocidad"}),p.jsx("th",{className:"p-5 font-bold text-center",children:"Tiempo"}),p.jsx("th",{className:"p-5 font-bold text-center",children:"Estado"}),p.jsx("th",{className:"p-5 text-right",children:"Accin"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:i.length>0?i.map(F=>{let H=F.metrics.totalTasks,ee=F.metrics.globalSpeed,Y=F.metrics.totalTimeMs,le="text-slate-300";if(l!=="ALL"){const ae=F.taskBreakdown.find(he=>he.name===l);if(ae){H=ae.count,ee=ae.speed,Y=ae.timeMs;let he=t[l];he===void 0&&(he=-1),le=X(ee,he)}else H=0,ee="0.00",Y=0,le="text-slate-600"}else le="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-bold";return p.jsxs(tI.Fragment,{children:[p.jsxs("tr",{className:"hover:bg-white/[0.03] transition-colors group cursor-pointer",onClick:()=>R(F.id),children:[p.jsxs("td",{className:"p-5 font-medium text-slate-200 flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-800 border border-white/5 flex items-center justify-center text-xs text-indigo-400 font-bold",children:F.userName?.charAt(0)||"?"}),p.jsxs("div",{children:[p.jsx("div",{children:F.userName}),r==="ALL_TEAMS"&&p.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:F.team})]})]}),p.jsx("td",{className:"p-5 text-center font-mono text-slate-300",children:H}),p.jsxs("td",{className:"p-5 text-center",children:[p.jsx("span",{className:`text-lg ${le}`,children:ee}),p.jsx("span",{className:"text-[10px] text-slate-600 ml-1",children:"/h"})]}),p.jsx("td",{className:"p-5 text-center text-slate-500 font-mono",children:L(Y)}),p.jsx("td",{className:"p-5 text-center",children:p.jsx("span",{className:"bg-green-900/30 text-green-400 text-[10px] px-2 py-1 rounded border border-green-500/20",children:"ACTIVO"})}),p.jsx("td",{className:"p-5 text-right",children:p.jsx("button",{className:"text-[10px] bg-white/5 hover:bg-white/10 text-slate-400 px-3 py-1.5 rounded transition-all",children:w===F.id?"Cerrar ":"Ver "})})]}),w===F.id&&p.jsx("tr",{className:"bg-black/30",children:p.jsx("td",{colSpan:6,className:"p-4",children:p.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 border border-white/5 shadow-inner",children:[p.jsx("h4",{className:"text-xs font-bold text-slate-500 mb-3 uppercase flex items-center gap-2",children:" Desglose Detallado"}),F.taskBreakdown?.length>0?p.jsxs("table",{className:"w-full text-xs",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-slate-600 border-b border-white/5 text-left",children:[p.jsx("th",{className:"pb-2 pl-2",children:"Tarea"}),p.jsx("th",{className:"pb-2 text-center",children:"Cant."}),p.jsx("th",{className:"pb-2 text-center",children:"Tiempo"}),p.jsx("th",{className:"pb-2 text-right pr-4",children:"Rendimiento"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5",children:F.taskBreakdown.map((ae,he)=>{let S=t[ae.name];S===void 0&&(S=-1);const A=X(ae.speed,S),N=S===-1;return p.jsxs("tr",{className:`text-slate-300 hover:bg-white/5 transition-colors ${l===ae.name?"bg-indigo-900/20":""}`,children:[p.jsx("td",{className:"py-2 pl-2 font-medium",children:ae.name}),p.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:ae.count}),p.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:L(ae.timeMs)}),p.jsxs("td",{className:"py-2 text-right pr-4",children:[p.jsxs("span",{className:A,children:[ae.speed," /h"]}),p.jsx("span",{className:"text-[9px] text-slate-600 ml-1",children:N?"":`(Meta: ${S})`})]})]},he)})})]}):p.jsx("p",{className:"text-xs text-slate-500 italic",children:"Sin datos."})]})})})]},F.id)}):p.jsx("tr",{children:p.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-500 text-sm italic border-t border-white/5",children:a?"Cargando datos...":"No hay actividad registrada en este periodo."})})})]})})})]}),aM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],dg=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],oM={Lunes:"Monday",Martes:"Tuesday",Mircoles:"Wednesday",Jueves:"Thursday",Viernes:"Friday",Sbado:"Saturday",Domingo:"Sunday"},lM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],cM=({squad:i,weeklyPlan:e,setWeeklyPlan:t,agentSchedules:r,visibleShops:a,nextWeekId:l,targetWeek:u,setTargetWeek:f})=>{const[g,y]=j.useState("kanban"),[v,w]=j.useState("Lunes"),[T,R]=j.useState(null),L=(H,ee)=>{R(ee),H.dataTransfer.setData("agent",JSON.stringify(ee))},X=async(H,ee,Y)=>{H.preventDefault();try{const le=JSON.parse(H.dataTransfer.getData("agent")),ae={...e};ae[v]||(ae[v]={}),ae[v][ee]||(ae[v][ee]={}),ae[v][ee][Y]||(ae[v][ee][Y]=[]);const he=ae[v][ee][Y];le.id==="ALL"?i.forEach(S=>{he.find(A=>A.id===S.id)||he.push({id:S.id,name:S.name||S.email})}):he.find(S=>S.id===le.id)||he.push({id:le.id,name:le.name||le.email}),t(ae),await ua(at(Oe,"weekly_plans",l),{weekId:l,plan:ae,updatedAt:Date.now()},{merge:!0})}catch(le){console.error(le),alert("Error de permisos.")}},F=async(H,ee,Y)=>{const le={...e};le[v][H][ee]=le[v][H][ee].filter(ae=>ae.id!==Y),t(le);try{await ua(at(Oe,"weekly_plans",l),{plan:le},{merge:!0})}catch(ae){console.error(ae)}};return p.jsxs("div",{className:"flex flex-col h-[85vh] animate-fadeIn gap-4",children:[p.jsx("div",{className:"flex flex-wrap gap-4 justify-between items-center bg-slate-900/50 p-2 rounded-xl border border-white/5",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[p.jsxs("button",{onClick:()=>y("kanban"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${g==="kanban"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[p.jsx("span",{children:""})," Asignar"]}),p.jsxs("button",{onClick:()=>y("table"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${g==="table"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[p.jsx("span",{children:""})," Planilla"]})]}),p.jsx("div",{className:"w-px h-6 bg-white/10"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 hidden sm:block",children:"Editando:"}),p.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[p.jsx("button",{onClick:()=>f("current"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="current"?"bg-teal-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Semana Actual"}),p.jsx("button",{onClick:()=>f("next"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="next"?"bg-purple-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Prxima Semana"})]}),p.jsxs("span",{className:"text-[9px] font-mono text-slate-600 border border-white/5 px-2 py-1 rounded bg-black/20",title:"ID de la semana en base de datos",children:["ID: ",l]})]})]})}),g==="kanban"&&p.jsxs("div",{className:"flex gap-6 flex-1 overflow-hidden",children:[p.jsxs("div",{className:"w-64 min-w-[250px] bg-slate-900 border border-white/10 rounded-xl p-4 overflow-y-auto flex flex-col gap-2",children:[p.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Mi Squad"}),p.jsxs("div",{draggable:!0,onDragStart:H=>L(H,{id:"ALL",name:"TODOS"}),className:"bg-yellow-600 hover:bg-yellow-500 text-white p-3 rounded-lg cursor-grab active:cursor-grabbing font-bold text-center border border-yellow-400 shadow-lg mb-4 flex items-center justify-center gap-2",children:[p.jsx("span",{children:""})," ASIGNAR A TODOS"]}),i.map(H=>{const ee=oM[v],Y=r[H.id],le=v,ae=Y?Y[ee]||Y[le]:null;let he=p.jsx("span",{className:"text-[9px] text-slate-600",children:"?"});return ae&&(ae.off?he=p.jsx("span",{className:"text-[9px] bg-red-900/40 text-red-400 px-1 rounded font-bold border border-red-500/20",children:"OFF"}):he=p.jsxs("span",{className:"text-[9px] bg-green-900/40 text-green-400 px-1 rounded font-bold border border-green-500/20",children:[ae.hours,"h"]})),p.jsxs("div",{draggable:!0,onDragStart:S=>L(S,{id:H.id,name:H.name||H.email}),className:"bg-slate-800 hover:bg-slate-700 p-3 rounded-lg cursor-grab active:cursor-grabbing border border-white/5 flex items-center gap-3 transition-colors",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center font-bold text-xs text-white",children:(H.name||H.email).substring(0,2).toUpperCase()}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm truncate font-medium text-slate-300",children:H.name||H.email}),p.jsx("div",{className:"flex justify-end",children:he})]})]},H.id)})]}),p.jsxs("div",{className:"flex-1 flex flex-col bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[p.jsx("div",{className:"flex bg-black/40 border-b border-white/10",children:dg.map(H=>p.jsx("button",{onClick:()=>w(H),className:`flex-1 py-3 text-xs font-bold uppercase transition-colors ${v===H?"bg-indigo-600 text-white":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:H},H))}),p.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#0b0e14]",children:p.jsxs("table",{className:"w-full border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left p-3 text-slate-500 text-xs uppercase w-48 min-w-[200px] border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:"Tarea"}),a.map(H=>p.jsx("th",{className:"p-3 text-indigo-400 text-xs uppercase border-l border-white/5 min-w-[180px] text-center border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:H},H))]})}),p.jsx("tbody",{children:aM.map(H=>p.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[p.jsx("td",{className:"p-3 text-xs font-medium text-slate-300",children:H}),a.map(ee=>p.jsx("td",{onDragOver:Y=>Y.preventDefault(),onDrop:Y=>X(Y,H,ee),className:"p-2 border-l border-white/5 min-h-[50px] relative hover:bg-white/5 transition-colors",children:p.jsx("div",{className:"min-h-[40px] rounded p-1 flex flex-wrap gap-1",children:e[v]?.[H]?.[ee]?.map(Y=>p.jsxs("div",{className:"bg-indigo-600/30 text-indigo-200 border border-indigo-500/40 text-[10px] px-2 py-1 rounded flex items-center gap-1 font-bold shadow-sm",children:[Y.name," ",p.jsx("button",{onClick:()=>F(H,ee,Y.id),className:"ml-1 text-indigo-400 hover:text-red-400 font-bold",children:""})]},Y.id))})},ee))]},H))})]})})]})]}),g==="table"&&p.jsxs("div",{className:"flex-1 bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[p.jsxs("div",{className:"p-4 bg-black/20 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"font-bold text-green-400 flex items-center gap-2",children:" Disponibilidad Global"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 bg-green-900/50 border border-green-500/30 rounded"}),p.jsx("span",{className:"text-xs text-slate-400",children:"Disponible"}),p.jsx("div",{className:"w-3 h-3 bg-red-900/50 border border-red-500/30 rounded ml-2"}),p.jsx("span",{className:"text-xs text-slate-400",children:"Franco (OFF)"})]})]}),p.jsx("div",{className:"flex-1 overflow-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{className:"bg-[#0b0e14] sticky top-0 z-10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 w-64 bg-[#0b0e14] sticky left-0 z-20 border-r border-white/5",children:"Agente"}),dg.map(H=>p.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 text-center min-w-[100px]",children:H},H))]})}),p.jsxs("tbody",{className:"divide-y divide-white/5 text-sm",children:[i.map(H=>{const ee=r[H.id];return p.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[p.jsxs("td",{className:"p-4 bg-slate-900 sticky left-0 z-10 border-r border-white/5",children:[p.jsx("div",{className:"font-bold text-white",children:H.name||H.email}),p.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:H.team})]}),lM.map((Y,le)=>{const ae=dg[le],he=ee?.[Y]||ee?.[ae];let S=p.jsx("span",{className:"text-slate-700",children:"-"}),A="";return he&&(he.off?(S=p.jsx("span",{className:"font-bold text-[10px]",children:"OFF"}),A="bg-red-900/20 text-red-400 border border-red-500/10"):he.hours&&(S=p.jsxs("span",{className:"font-mono font-bold",children:[he.hours,"hs"]}),A="bg-green-900/20 text-green-400 border border-green-500/10")),p.jsx("td",{className:"p-1 text-center border-l border-white/5",children:p.jsx("div",{className:`h-8 flex items-center justify-center rounded ${A} mx-1`,children:S})},Y)})]},H.id)}),i.length===0&&p.jsx("tr",{children:p.jsx("td",{colSpan:8,className:"p-10 text-center text-slate-500 italic",children:"No hay agentes en este equipo."})})]})]})})]})]})},uM=({newsList:i,newNewsText:e,setNewNewsText:t,newNewsType:r,setNewNewsType:a,addNews:l,deleteNews:u})=>p.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[p.jsx("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 mb-6",children:p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{value:e,onChange:f=>t(f.target.value),placeholder:"Mensaje...",className:"flex-1 bg-black/30 border border-white/10 rounded-lg p-3 text-white outline-none"}),p.jsxs("select",{value:r,onChange:f=>a(f.target.value),className:"bg-black/30 border border-white/10 rounded-lg p-3 text-white",children:[p.jsx("option",{value:"info",children:"Info"}),p.jsx("option",{value:"critical",children:"Crtico"}),p.jsx("option",{value:"party",children:"Fiesta"})]}),p.jsx("button",{onClick:l,className:"bg-indigo-600 px-6 rounded-lg font-bold hover:bg-indigo-500",children:"Publicar"})]})}),p.jsx("div",{className:"space-y-3",children:i.map(f=>p.jsxs("div",{className:"flex justify-between items-center bg-slate-900/50 p-4 rounded-xl border border-white/5",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase ${f.type==="critical"?"bg-red-900 text-red-300":f.type==="party"?"bg-yellow-900 text-yellow-300":"bg-blue-900 text-blue-300"}`,children:f.type}),p.jsx("span",{className:"text-sm",children:f.text})]}),p.jsx("button",{onClick:()=>u(f.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Borrar"})]},f.id))})]}),dM=({quizzes:i,editingQuiz:e,setEditingQuiz:t,saveQuiz:r,deleteQuiz:a,toggleQuiz:l})=>p.jsx("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:e?p.jsx(hM,{quiz:e,onSave:r,onCancel:()=>t(null)}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>t({title:"",reward:100,questions:[],version:1}),className:"bg-green-600 px-4 py-2 rounded-lg font-bold text-sm mb-6",children:"+ Nuevo Mdulo"}),p.jsx("div",{className:"grid gap-4",children:i.map(u=>p.jsxs("div",{className:"bg-slate-900 p-5 rounded-xl border border-white/10 flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-lg",children:u.title}),p.jsxs("div",{className:"text-xs text-slate-500",children:["Reward: ",u.reward," | v",u.version]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>t(u),className:"text-indigo-400 text-xs bg-indigo-900/30 px-3 py-1 rounded",children:"Edit"}),p.jsx("button",{onClick:()=>l(u),className:`text-xs px-3 py-1 rounded ${u.active?"bg-green-900/30 text-green-400":"bg-slate-700 text-slate-400"}`,children:u.active?"Activo":"Inactivo"}),p.jsx("button",{onClick:()=>a(u.id),className:"text-red-400 text-xs bg-red-900/30 px-3 py-1 rounded",children:"Del"})]})]},u.id))})]})}),hM=({quiz:i,onSave:e,onCancel:t})=>{const[r,a]=j.useState(i),[l,u]=j.useState(!1),f=()=>a({...r,questions:[...r.questions||[],{text:"",options:["",""],correct:0}]}),g=(v,w,T)=>{const R=[...r.questions];R[v]={...R[v],[w]:T},a({...r,questions:R})},y=(v,w,T)=>{const R=[...r.questions];R[v].options[w]=T,a({...r,questions:R})};return p.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 space-y-4 animate-fadeIn",children:[p.jsx("h2",{className:"font-bold text-xl border-b border-white/10 pb-2",children:"Editor de Mdulo"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{value:r.title,onChange:v=>a({...r,title:v.target.value}),placeholder:"Ttulo",className:"bg-black/30 border border-white/10 p-2 rounded text-white"}),p.jsx("input",{type:"number",value:r.reward,onChange:v=>a({...r,reward:parseInt(v.target.value)}),placeholder:"Reward",className:"bg-black/30 border border-white/10 p-2 rounded text-white"})]}),i.id&&p.jsxs("label",{className:"flex items-center gap-2 text-yellow-200 text-xs",children:[p.jsx("input",{type:"checkbox",checked:l,onChange:v=>u(v.target.checked)})," Actualizacin Mayor (Reinicia progress)"]}),p.jsxs("div",{className:"space-y-4",children:[r.questions?.map((v,w)=>p.jsxs("div",{className:"bg-black/20 p-4 rounded border border-white/5",children:[p.jsx("input",{value:v.text,onChange:T=>g(w,"text",T.target.value),placeholder:"Pregunta",className:"w-full bg-transparent border-b border-white/10 mb-2 font-bold"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:v.options.map((T,R)=>p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"radio",checked:v.correct===R,onChange:()=>g(w,"correct",R)}),p.jsx("input",{value:T,onChange:L=>y(w,R,L.target.value),className:"bg-white/5 rounded px-2 text-xs w-full"})]},R))})]},w)),p.jsx("button",{onClick:f,className:"w-full py-2 border border-dashed border-white/20 text-slate-400 text-xs rounded",children:"+ Pregunta"})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>e({...r,isMajorUpdate:l}),className:"flex-1 bg-green-600 py-2 rounded font-bold",children:"Guardar"}),p.jsx("button",{onClick:t,className:"bg-slate-700 px-4 rounded",children:"Cancelar"})]})]})},fM=({activeTab:i,showArchived:e,setShowArchived:t,fetchIdeas:r,filteredIdeas:a,generateMondaySummary:l,handleSaveAnalysis:u,handleIdeaVerdict:f,handleArchiveIdea:g,handleDeleteIdea:y,handleRestoreIdea:v,handleAnalysisChange:w})=>p.jsxs("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:i==="ideas"?" Laboratorio de Ideas":" Tickets de Soporte & Bugs"}),p.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Estado: ",p.jsx("span",{className:"text-indigo-400 font-bold",children:e?"ARCHIVADOS":"ACTIVOS"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[i==="ideas"&&p.jsx("button",{onClick:l,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-500 transition-colors shadow-lg flex items-center gap-2 border border-indigo-400/50",children:" RESUMEN"}),p.jsx("button",{onClick:()=>t(!e),className:`px-3 py-2 rounded-lg text-[10px] font-bold uppercase transition-all border ${e?"bg-slate-700 text-white border-slate-500":"bg-black/40 text-slate-500 border-slate-700 hover:text-white"}`,children:e?" Ver Activos":" Ver Archivados"}),p.jsx("button",{onClick:r,className:"bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg text-xs text-slate-300 border border-white/10",children:""})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(T=>{const R=T.status==="approved",L=T.status==="rejected",X=T.status==="new",F=T.type==="dev";return p.jsxs("div",{className:`bg-slate-900 border rounded-xl p-5 flex flex-col gap-3 relative group transition-all animate-fadeIn hover:shadow-xl ${F?"border-purple-500/20 shadow-[0_0_10px_rgba(147,51,234,0.05)]":"border-white/10"}`,children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:`font-bold text-sm ${F?"text-purple-300 font-mono":"text-white"}`,children:T.userName}),F&&p.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded border bg-purple-900/30 text-purple-300 border-purple-500/30",children:"BUG/DEV"})]}),p.jsx("p",{className:"text-[10px] text-slate-500 font-mono mt-1",children:T.timestampStr})]}),R&&p.jsx("span",{className:"text-[10px] bg-green-900/30 text-green-400 px-2 py-1 rounded border border-green-500/20 font-bold",children:" APROBADA"}),L&&p.jsx("span",{className:"text-[10px] bg-red-900/30 text-red-400 px-2 py-1 rounded border border-red-500/20 font-bold",children:" RECHAZADA"}),X&&p.jsx("span",{className:"text-[10px] bg-yellow-900/30 text-yellow-500 px-2 py-1 rounded border border-yellow-500/20 font-bold",children:" PENDIENTE"})]}),p.jsxs("div",{className:`p-4 rounded-lg border min-h-[80px] ${F?"bg-black/60 border-purple-900/30 font-mono text-xs text-green-400":"bg-black/30 border-white/5 text-sm text-slate-300 italic"}`,children:['"',T.content,'"']}),!F&&p.jsxs("div",{className:"space-y-2 mt-2",children:[p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-green-500 font-bold",children:"PROS"}),p.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-green-500 outline-none h-16 resize-none",value:T.analysis?.pros||"",onChange:H=>w(T.id,"pros",H.target.value)})]}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-red-500 font-bold",children:"CONS"}),p.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-red-500 outline-none h-16 resize-none",value:T.analysis?.cons||"",onChange:H=>w(T.id,"cons",H.target.value)})]})]}),p.jsxs("div",{className:"flex gap-2 mt-auto pt-4 border-t border-white/5",children:[!F&&p.jsx("button",{onClick:()=>u(T.id,T.analysis),className:"flex-1 bg-white/5 hover:bg-white/10 text-slate-400 text-xs font-bold py-2 rounded transition-colors",children:" Guardar"}),X&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>f(T,"approved"),className:"flex-1 bg-green-600/20 hover:bg-green-600 hover:text-white text-green-400 text-xs font-bold py-2 rounded transition-colors border border-green-600/30",children:" Aprobar"}),p.jsx("button",{onClick:()=>f(T,"rejected"),className:"w-10 flex items-center justify-center bg-red-600/20 hover:bg-red-600 hover:text-white text-red-400 font-bold rounded transition-colors border border-red-600/30",children:""})]}),(R||L)&&!e&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>g(T.id),className:"w-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-400 font-bold rounded transition-colors border border-slate-600",title:"Archivar",children:""}),p.jsx("button",{onClick:()=>y(T.id),className:"w-10 flex items-center justify-center bg-red-900/20 hover:bg-red-900/80 text-red-500 hover:text-white font-bold rounded transition-colors border border-red-900/30",title:"Eliminar",children:""})]}),e&&p.jsx("button",{onClick:()=>v(T.id),className:"w-full flex items-center justify-center bg-blue-900/30 hover:bg-blue-600 text-blue-400 hover:text-white font-bold py-2 rounded transition-colors border border-blue-500/20",children:" Restaurar"})]})]},T.id)})})]}),mM=({usersList:i,editingUserId:e,setEditingUserId:t,editForm:r,setEditForm:a,setPointsToSend:l,handleGivePoints:u,saveUserChanges:f,startEditingUser:g})=>p.jsx("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:p.jsx("div",{className:"bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-xl",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"bg-black/30 text-slate-400 text-[10px] uppercase font-bold",children:p.jsxs("tr",{className:"border-b border-white/5",children:[p.jsx("th",{className:"p-4",children:"Usuario"}),p.jsx("th",{className:"p-4",children:"Rol Actual"}),p.jsx("th",{className:"p-4",children:"Equipo"}),p.jsx("th",{className:"p-4 text-right",children:"Gestin"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:i.map(y=>p.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[p.jsxs("td",{className:"p-4",children:[p.jsx("div",{className:"font-bold text-white",children:y.name}),p.jsx("div",{className:"text-xs text-slate-500",children:y.email})]}),e===y.id?p.jsxs(p.Fragment,{children:[p.jsx("td",{className:"p-4",children:p.jsxs("select",{value:r.role,onChange:v=>a({...r,role:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"agent",children:"Agente"}),p.jsx("option",{value:"team_leader",children:"TL"}),p.jsx("option",{value:"admin",children:"Admin"}),p.jsx("option",{value:"tester",children:"Tester"})]})}),p.jsx("td",{className:"p-4",children:p.jsxs("select",{value:r.team,onChange:v=>a({...r,team:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"default",children:"Default"}),p.jsx("option",{value:"team1",children:"Team 1"}),p.jsx("option",{value:"team2",children:"Team 2"})]})}),p.jsxs("td",{className:"p-4 text-right flex items-center justify-end gap-2",children:[p.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg p-1 border border-white/5",children:[p.jsx("input",{type:"number",placeholder:"Bonus",className:"w-16 bg-transparent text-xs text-yellow-400 text-center outline-none",onChange:v=>l(v.target.value)}),p.jsx("button",{onClick:()=>u(y.id),className:"bg-yellow-600 text-black px-2 py-1 rounded text-[10px] font-bold hover:bg-yellow-500",children:" ENVIAR"})]}),p.jsx("button",{onClick:()=>f(y.id),className:"text-green-400 text-xs font-bold hover:underline ml-2",children:"GUARDAR"}),p.jsx("button",{onClick:()=>t(null),className:"text-red-400 text-xs font-bold hover:underline ml-2",children:"CANCELAR"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("td",{className:"p-4",children:p.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded border ${y.role==="admin"?"bg-purple-900/30 text-purple-300 border-purple-500/30":y.role==="team_leader"?"bg-blue-900/30 text-blue-300 border-blue-500/30":"bg-slate-800 text-slate-400 border-slate-700"}`,children:y.role})}),p.jsx("td",{className:"p-4 text-xs text-slate-400",children:y.team}),p.jsx("td",{className:"p-4 text-right",children:p.jsx("button",{onClick:()=>g(y),className:"text-indigo-400 text-xs font-bold hover:text-white transition-colors",children:"EDITAR "})})]})]},y.id))})]})})}),pM=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],gM=({isOpen:i,onClose:e,scheduleRequests:t,pendingIdeas:r,handleApproveRequest:a,handleRejectRequest:l,onNavigate:u})=>{const[f,g]=j.useState("schedule");return i?p.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-fadeIn",children:p.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-2xl shadow-2xl flex flex-col max-h-[85vh]",children:[p.jsxs("div",{className:"p-5 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-slate-900 to-slate-800",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsx("h3",{className:"text-lg font-bold text-white",children:"Centro de Notificaciones"})]}),p.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:""})]}),p.jsxs("div",{className:"flex border-b border-white/5 bg-black/20",children:[p.jsxs("button",{onClick:()=>g("schedule"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${f==="schedule"?"border-yellow-500 text-yellow-400 bg-yellow-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Horarios (",t.length,")"]}),p.jsxs("button",{onClick:()=>g("ideas"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${f==="ideas"?"border-indigo-500 text-indigo-400 bg-indigo-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Ideas (",r.length,")"]})]}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4 custom-scrollbar bg-[#0b0e14]",children:[f==="schedule"&&p.jsx(p.Fragment,{children:t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[p.jsx("span",{className:"text-2xl mb-2",children:""}),p.jsx("p",{className:"text-sm",children:"Todo al da."})]}):t.map(y=>{const v=y.type==="urgent",w=!!y.currentSchedule;return p.jsxs("div",{className:`bg-white/5 border rounded-xl p-4 flex flex-col gap-3 ${v?"border-orange-500/30":"border-white/5"}`,children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"font-bold text-white flex items-center gap-2",children:[y.userName," ",v&&p.jsx("span",{className:"text-[9px] bg-orange-600 text-white px-1.5 py-0.5 rounded animate-pulse",children:"URGENTE"})]}),p.jsx("p",{className:`text-xs mt-1 font-bold ${v?"text-orange-400":"text-blue-300"}`,children:y.message||"Solicitud de cambio"}),p.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Semana ID: ",y.weekId]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>a(y),className:"bg-green-600 hover:bg-green-500 px-3 py-1.5 rounded text-xs font-bold text-white shadow-lg",children:" APROBAR"}),p.jsx("button",{onClick:()=>l(y.id),className:"bg-red-900/50 hover:bg-red-600 px-3 py-1.5 rounded text-xs font-bold text-red-200 hover:text-white border border-red-500/30",children:" RECHAZAR"})]})]}),p.jsxs("div",{className:"bg-black/20 p-3 rounded-lg space-y-2",children:[w&&Gw(y.currentSchedule,"ACTUAL",!0),Gw(y.proposedSchedule,w?"NUEVO":"HORARIO")]})]},y.id)})}),f==="ideas"&&p.jsx(p.Fragment,{children:r.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[p.jsx("span",{className:"text-2xl mb-2",children:""}),p.jsx("p",{className:"text-sm",children:"Sin ideas nuevas."})]}):r.map(y=>p.jsxs("div",{className:"bg-indigo-900/10 border border-indigo-500/20 rounded-xl p-4 flex justify-between items-center hover:bg-indigo-900/20 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"h-10 w-10 bg-indigo-600/20 text-indigo-400 rounded-full flex items-center justify-center text-xl border border-indigo-500/30",children:""}),p.jsxs("div",{children:[p.jsxs("h4",{className:"font-bold text-indigo-200 text-sm",children:[p.jsx("span",{className:"text-white",children:y.userName})," tuvo una nueva idea"]}),p.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:y.timestampStr}),p.jsxs("p",{className:"text-xs text-slate-400 italic mt-1 line-clamp-1",children:['"',y.content,'"']})]})]}),p.jsx("button",{onClick:()=>u("ideas"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded-lg shadow-lg border border-indigo-400/50 flex items-center gap-2 transition-all active:scale-95",children:"VER EN LAB "})]},y.id))})]})]})}):null},Gw=(i,e,t=!1)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:`w-16 text-[9px] font-bold text-right uppercase ${t?"text-slate-500":"text-indigo-300"}`,children:e}),p.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1",children:pM.map(r=>{const a=i?.[r];if(!a)return p.jsxs("div",{className:"text-center opacity-20",children:[p.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r);const l=t?"text-slate-500 bg-slate-800/50":"text-red-300 bg-red-900/30 font-bold",u=t?"text-slate-400 bg-slate-800/50":"text-green-300 bg-green-900/30 font-bold";return a.off?p.jsxs("div",{className:`text-center rounded p-1 ${l}`,children:[p.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),p.jsx("div",{className:"text-[9px]",children:"OFF"})]},r):a.hours>0?p.jsxs("div",{className:`text-center rounded p-1 ${u}`,children:[p.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),p.jsxs("div",{className:"text-[9px]",children:[a.hours,"h"]})]},r):p.jsxs("div",{className:"text-center opacity-20",children:[p.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r)})})]}),pl=[{name:"yellow",bg:"bg-[#fff59d] text-yellow-900",tab:"bg-[#fff59d]",btn:"bg-yellow-400"},{name:"green",bg:"bg-[#c5e1a5] text-green-900",tab:"bg-[#c5e1a5]",btn:"bg-green-400"},{name:"blue",bg:"bg-[#90caf9] text-blue-900",tab:"bg-[#90caf9]",btn:"bg-blue-400"},{name:"pink",bg:"bg-[#f48fb1] text-pink-900",tab:"bg-[#f48fb1]",btn:"bg-pink-400"},{name:"purple",bg:"bg-[#ce93d8] text-purple-900",tab:"bg-[#ce93d8]",btn:"bg-purple-400"},{name:"white",bg:"bg-[#eeeeee] text-slate-800",tab:"bg-[#eeeeee]",btn:"bg-slate-200"}],vS=({user:i})=>{const[e,t]=j.useState(!1),[r,a]=j.useState([]),[l,u]=j.useState(null),[f,g]=j.useState(!1),[y,v]=j.useState(null),[w,T]=j.useState(null),[R,L]=j.useState(""),F=(()=>{try{const se=localStorage.getItem(`nexus_notes_config_${i?.uid}`);return se?JSON.parse(se):null}catch{return null}})(),[H,ee]=j.useState(F?.position||{x:window.innerWidth-80,y:window.innerHeight-200}),[Y,le]=j.useState(F?.size||{width:340,height:450}),[ae,he]=j.useState(!1),[S,A]=j.useState({x:0,y:0}),[N,O]=j.useState({x:0,y:0}),D=j.useRef(null),P=j.useRef(null);j.useEffect(()=>{if(!i)return;const se=In(Oe,`users/${i.uid}/quick_notes`),ge=ws(se,El("createdAt","asc")),Ie=es(ge,rt=>{const Ge=rt.docs.map(Tt=>({id:Tt.id,...Tt.data()}));a(Ge),Ge.length>0?u(Tt=>Ge.find(vn=>vn.id===Tt)?Tt:Ge[Ge.length-1].id):u(null)});return()=>Ie()},[i]);const C=(se,ge)=>{if(!i)return;const Ie={position:se,size:ge};localStorage.setItem(`nexus_notes_config_${i.uid}`,JSON.stringify(Ie))},me=se=>{se.button===0&&(he(!0),O({x:se.clientX,y:se.clientY}),A({x:se.clientX-H.x,y:se.clientY-H.y}))},de=se=>{if(ae&&(he(!1),Math.sqrt(Math.pow(se.clientX-N.x,2)+Math.pow(se.clientY-N.y,2))>5?C(H,Y):t(Ie=>!Ie)),e&&D.current){const ge=D.current.offsetWidth,Ie=D.current.offsetHeight;if(ge!==Y.width||Ie!==Y.height){const rt={width:ge,height:Ie};le(rt),C(H,rt)}}};j.useEffect(()=>{const se=ge=>{ae&&(ge.preventDefault(),ee({x:ge.clientX-S.x,y:ge.clientY-S.y}))};return(ae||e)&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",de)),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",de)}},[ae,S,N,e,H,Y]);const q=async()=>{const se=await bu(In(Oe,`users/${i.uid}/quick_notes`),{title:"Nueva Nota",text:"",color:"yellow",createdAt:Date.now(),updatedAt:Date.now()});u(se.id),T(se.id),L("Nueva Nota"),g(!1)},oe=async(se,ge,Ie)=>{const rt=at(Oe,`users/${i.uid}/quick_notes`,se);await yr(rt,{[ge]:Ie,updatedAt:Date.now()})},be=async(se,ge)=>{se.stopPropagation(),window.confirm("Borrar nota?")&&await xl(at(Oe,`users/${i.uid}/quick_notes`,ge))},Ve=(se,ge)=>{se.stopPropagation(),T(ge.id),L(ge.title||"Nota")},Pe=async se=>{R.trim()!==""&&await oe(se,"title",R),T(null)},M=(se,ge)=>{se.key==="Enter"&&Pe(ge)},ne=(se,ge)=>{se.trim()&&(navigator.clipboard.writeText(se.trim()),v(ge),setTimeout(()=>v(null),1e3))},ue=r.find(se=>se.id===l),ve=ue&&pl.find(se=>se.name===ue.color)||pl[0];return i?p.jsxs(p.Fragment,{children:[e&&p.jsxs("div",{ref:D,className:"fixed z-[90] flex flex-col animate-fadeIn shadow-2xl rounded-xl overflow-hidden border border-white/20",style:{left:H.x-Y.width+50,top:H.y-Y.height-10,width:`${Y.width}px`,height:`${Y.height}px`,resize:"both",minWidth:"280px",minHeight:"200px"},onMouseDown:se=>se.stopPropagation(),children:[p.jsxs("div",{className:"flex bg-[#2d3748] overflow-x-auto custom-scrollbar-hide cursor-move items-end pt-1 px-1 gap-1 h-9 flex-shrink-0",title:"Arrastrar widget",children:[r.map((se,ge)=>{const Ie=se.id===l,rt=se.id===w,Ge=pl.find(Tt=>Tt.name===se.color)||pl[0];return p.jsxs("div",{onClick:()=>!rt&&u(se.id),onDoubleClick:Tt=>Ve(Tt,se),className:`group relative flex items-center justify-between min-w-[100px] max-w-[140px] h-8 px-3 rounded-t-lg text-xs font-bold select-none transition-all ${Ie?`${Ge.tab} text-slate-900`:"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[rt?p.jsx("input",{autoFocus:!0,value:R,onChange:Tt=>L(Tt.target.value),onBlur:()=>Pe(se.id),onKeyDown:Tt=>M(Tt,se.id),className:"w-full bg-transparent outline-none border-b border-black/50 text-slate-900 px-0 py-0"}):p.jsx("span",{className:"truncate mr-4 w-full",title:"Doble clic para editar",children:se.title||`Nota ${ge+1}`}),!rt&&p.jsx("button",{onClick:Tt=>be(Tt,se.id),className:`absolute right-1 top-1.5 w-5 h-5 flex items-center justify-center rounded-full hover:bg-black/10 text-[10px] ${Ie?"text-black/50":"text-white/30 hidden group-hover:flex"}`,children:""})]},se.id)}),p.jsx("button",{onClick:q,className:"h-7 w-7 mb-0.5 flex items-center justify-center rounded-lg bg-slate-800 text-slate-400 hover:text-white hover:bg-indigo-600 transition-colors flex-shrink-0",children:"+"})]}),ue&&p.jsxs("div",{className:`flex justify-between items-center px-3 py-1 border-b border-black/5 ${ve.bg}`,children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>g(!1),className:`p-1 rounded hover:bg-black/10 transition-colors ${f?"text-black/40":"text-black font-bold bg-black/5"}`,title:"Modo Edicin",children:""}),p.jsx("button",{onClick:()=>g(!0),className:`p-1 rounded hover:bg-black/10 transition-colors ${f?"text-blue-600 font-bold bg-blue-500/10":"text-black/40"}`,title:"Modo Snippets (Copiar al clic)",children:""})]}),p.jsx("div",{className:"flex gap-1",children:pl.map(se=>p.jsx("button",{onClick:()=>oe(ue.id,"color",se.name),className:`w-3 h-3 rounded-full border border-black/10 ${se.btn} hover:scale-125 transition-transform`},se.name))})]}),p.jsxs("div",{className:`flex-1 flex flex-col relative ${ue?ve.bg:"bg-slate-800"} overflow-hidden`,children:[ue?p.jsxs(p.Fragment,{children:[!f&&p.jsx("textarea",{className:"flex-1 w-full h-full bg-transparent resize-none outline-none p-4 text-sm font-medium placeholder-black/30 leading-relaxed custom-scrollbar",placeholder:"Escribe aqu... (Un rengln = Un botn en modo )",value:ue.text,onChange:se=>{const ge=r.map(Ie=>Ie.id===ue.id?{...Ie,text:se.target.value}:Ie);a(ge)},onBlur:se=>oe(ue.id,"text",se.target.value),autoFocus:!0}),f&&p.jsx("div",{className:"flex-1 w-full h-full overflow-y-auto p-2 custom-scrollbar space-y-1",children:ue.text.trim()===""?p.jsx("div",{className:"text-center mt-10 text-black/40 text-xs italic",children:"Escribe algo en modo  para ver tus snippets aqu."}):ue.text.split(`
`).map((se,ge)=>{if(!se.trim())return p.jsx("div",{className:"h-2"},ge);const Ie=y===ge;return p.jsxs("div",{onClick:()=>ne(se,ge),className:`
                                                            group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-all text-sm font-medium border border-black/5
                                                            ${Ie?"bg-green-500 text-white shadow-md transform scale-[1.02]":"bg-white/40 hover:bg-white/80 hover:shadow-sm text-slate-800"}
                                                        `,children:[p.jsx("span",{className:"truncate",children:se}),p.jsx("span",{className:`text-[10px] font-bold ${Ie?"text-white":"text-transparent group-hover:text-black/30"}`,children:Ie?"COPIADO!":"COPIAR"})]},ge)})})]}):p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500",children:[p.jsx("span",{className:"text-3xl mb-2",children:""}),p.jsx("p",{className:"text-xs",children:"Sin notas abiertas."}),p.jsx("button",{onClick:q,className:"mt-3 text-xs bg-indigo-600 px-3 py-1.5 rounded-lg text-white hover:bg-indigo-500",children:"Crear una"})]}),p.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none z-0",children:p.jsx("span",{className:"text-black/50 text-[8px] rotate-45",children:""})})]})]}),p.jsx("div",{ref:P,onMouseDown:me,className:`fixed z-[100] w-14 h-14 rounded-full shadow-[0_0_20px_rgba(250,204,21,0.4)] flex items-center justify-center border-2 border-white/20 cursor-grab active:cursor-grabbing transition-transform hover:scale-110 ${e?"bg-yellow-400 text-black rotate-12":"bg-slate-800 text-yellow-400 hover:bg-slate-700"}`,style:{left:H.x,top:H.y,touchAction:"none"},title:"Notas Rpidas (Arrastra para mover)",children:p.jsx("span",{className:"text-2xl pointer-events-none",children:""})})]}):null},yM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],bM=()=>{const i=new Date,e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+e.getDay()+1)/7);return`${i.getFullYear()}-W${t.toString().padStart(2,"0")}`},_M=({onLogout:i,currentUserTeam:e,isAdmin:t})=>{const r=j.useMemo(()=>{const te={team1:["Tienda Lujosa","Clara Tienda","Bella Divina"],team2:["Clara Tierra"],all:["Tienda Lujosa","Clara Tienda","Bella Divina","Clara Tierra"]};return t?te.all:te[e?.replace("_","")||"team1"]||te.team1},[e,t]),[a,l]=j.useState("planner"),[u,f]=j.useState("current"),g=j.useMemo(()=>u==="next"?eM():bM(),[u]),[y,v]=j.useState([]),[w,T]=j.useState({}),[R,L]=j.useState({}),[X,F]=j.useState([]),[H,ee]=j.useState([]),[Y,le]=j.useState(!1),[ae,he]=j.useState([]),[S,A]=j.useState(new Date().toISOString().split("T")[0]),[N,O]=j.useState("daily"),[D,P]=j.useState("ALL"),[C,me]=j.useState(e),[de,q]=j.useState(null),[oe,be]=j.useState(!1),[Ve,Pe]=j.useState([]),[M,ne]=j.useState(yM),[ue,ve]=j.useState(()=>{try{return JSON.parse(localStorage.getItem("specificTaskGoals"))||{}}catch{return{}}}),[se,ge]=j.useState(!1),[Ie,rt]=j.useState(""),[Ge,Tt]=j.useState([]),[Xn,vn]=j.useState(""),[cr,Jn]=j.useState("info"),[Cs,Cn]=j.useState([]),[Rs,Tr]=j.useState(null),[Rt,yt]=j.useState([]),[Lr,mi]=j.useState(!1),[Ye,Zt]=j.useState(!1),[zr,Ds]=j.useState(""),[is,Rn]=j.useState(!1),[Ta,Ur]=j.useState(!1),[as,Ms]=j.useState(""),[Bn,Bt]=j.useState("monday"),[Dn,At]=j.useState([]),[pi,Er]=j.useState(null),[os,Fn]=j.useState({role:"",team:""}),[Br,Dt]=j.useState(0);j.useEffect(()=>{(async()=>{const _e=(await lg(In(Oe,"users"))).docs.map(tt=>({id:tt.id,...tt.data()}));At(_e),v(_e),T({});try{const tt=at(Oe,"weekly_plans",g),ot=await Hf(tt);ot.exists()&&T(ot.data().plan||{})}catch(tt){console.error(tt)}const Me=ws(In(Oe,"weekly_schedules"),Wi("weekId","==",g)),Nt=es(Me,tt=>{const ot={};tt.docs.forEach($n=>{const dn=$n.data();dn.uid&&(ot[dn.uid]=dn.schedule)}),L(ot)}),Et=es(ws(In(Oe,"schedule_requests"),Wi("status","==","pending")),tt=>F(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),Ze=es(ws(In(Oe,"monday_ideas"),Wi("status","==","new")),tt=>ee(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),un=es(ws(In(Oe,"news_ticker"),El("createdAt","desc")),tt=>Tt(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),qe=es(In(Oe,"training_modules"),tt=>Cn(tt.docs.map(ot=>({id:ot.id,...ot.data()}))));return a==="dashboard"&&qn(),(a==="ideas"||a==="dev")&&Mn(),()=>{Nt(),Et(),Ze(),un(),qe()}})()},[a,g,S,C,N]);const qn=async()=>{be(!0),he([]),Pe([]);try{const te=xn(),xe=In(Oe,"daily_reports"),_e=[Wi("date",">=",te.start),Wi("date","<=",te.end),El("date","desc")];C!=="ALL_TEAMS"&&_e.push(Wi("team","==",C)),_e.push(limit(100));const Me=ws(xe,..._e),Et=(await lg(Me)).docs.map(qe=>({id:qe.id,...qe.data()}));he(Et);const Ze={};Et.forEach(qe=>{Ze[qe.uid]||(Ze[qe.uid]={id:qe.uid,uid:qe.uid,userName:qe.userName||"Usuario Desconocido",team:qe.team||"Sin Equipo",totalTasks:0,totalTimeMs:0,taskBreakdownMap:{},lastUpdate:qe.timestampStr||qe.date});const tt=Ze[qe.uid];tt.totalTasks+=qe.metrics?.totalTasks||0,tt.totalTimeMs+=qe.metrics?.totalTimeMs||0,qe.timestampStr>tt.lastUpdate&&(tt.lastUpdate=qe.timestampStr),Array.isArray(qe.taskBreakdown)&&qe.taskBreakdown.forEach(ot=>{const $n=ot.name||ot.text||"Tarea Genrica";tt.taskBreakdownMap[$n]||(tt.taskBreakdownMap[$n]={count:0,timeMs:0}),tt.taskBreakdownMap[$n].count+=ot.count||1,tt.taskBreakdownMap[$n].timeMs+=ot.elapsedTime||ot.timeMs||0})});const un=Object.values(Ze).map(qe=>{const tt=Object.entries(qe.taskBreakdownMap).map(([dn,Mt])=>{const Kt=Mt.timeMs/36e5;return{name:dn,count:Mt.count,timeMs:Mt.timeMs,speed:Kt>0?(Mt.count/Kt).toFixed(2):"0.00"}}),ot=qe.totalTimeMs/36e5,$n=ot>0?(qe.totalTasks/ot).toFixed(2):"0.00";return{...qe,metrics:{totalTasks:qe.totalTasks,totalTimeMs:qe.totalTimeMs,globalSpeed:$n},taskBreakdown:tt,timestampStr:qe.lastUpdate}});Pe(un)}catch(te){console.error("Error cargando reportes:",te)}finally{be(!1)}},Mn=async()=>{mi(!0);try{let te=ws(In(Oe,"monday_ideas"),El("timestamp","desc")),_e=(await lg(te)).docs.map(Me=>({id:Me.id,...Me.data()}));t||(_e=_e.filter(Me=>Me.type!=="dev")),yt(_e)}catch(te){console.error(te)}mi(!1)},xn=()=>{const[te,xe,_e]=S.split("-"),Me=new Date(parseInt(te),parseInt(xe)-1,parseInt(_e)),Nt=Et=>`${Et.getFullYear()}-${String(Et.getMonth()+1).padStart(2,"0")}-${String(Et.getDate()).padStart(2,"0")}`;if(N==="daily")return{start:S,end:S};if(N==="weekly"){const Et=Me.getDay(),Ze=Me.getDate()-Et+(Et===0?-6:1),un=new Date(Me);un.setDate(Ze);const qe=new Date(un);return qe.setDate(un.getDate()+6),{start:Nt(un),end:Nt(qe),startDateObj:un,endDateObj:qe}}if(N==="monthly"){const Et=new Date(Me.getFullYear(),Me.getMonth(),1),Ze=new Date(Me.getFullYear(),Me.getMonth()+1,0);return{start:Nt(Et),end:Nt(Ze),startDateObj:Et,endDateObj:Ze}}return{start:S,end:S}},ks=(te,xe)=>{if(xe===-1||xe===void 0)return"text-blue-400 font-normal italic";const _e=parseFloat(te)||0,Me=parseFloat(xe)||1;return _e>=Me?"text-green-400 font-bold":_e>=Me*.7?"text-yellow-400 font-bold":"text-red-500 font-bold"},Fr=te=>q(de===te?null:te),Wn=te=>{if(!te)return"0h 0m";const xe=Math.floor(te/36e5),_e=Math.floor(te%36e5/6e4);return`${xe}h ${_e}m`},qr=()=>{const te=xn();let xe=Rt;if(a==="ideas"?xe=xe.filter(_e=>_e.type==="monday"):a==="dev"&&(xe=xe.filter(_e=>_e.type==="dev")),N!=="daily"){const _e=te.startDateObj?te.startDateObj.getTime():0,Me=te.endDateObj?te.endDateObj.getTime():9999999999999;xe=xe.filter(Nt=>Nt.timestamp>=_e&&Nt.timestamp<=Me)}return xe=xe.filter(_e=>is?_e.isArchived:!_e.isArchived),xe},Ea=async()=>{Xn&&(await bu(In(Oe,"news_ticker"),{text:Xn,type:cr,createdAt:Date.now()}),vn(""))},Hr=async te=>{await xl(at(Oe,"news_ticker",te))},Os=async te=>{const xe={...te,active:!0,version:te.version||1};te.id?(te.isMajorUpdate&&(xe.version+=1),await yr(at(Oe,"training_modules",te.id),xe)):await bu(In(Oe,"training_modules"),xe),Tr(null)},Vs=async te=>{window.confirm("Borrar?")&&await xl(at(Oe,"training_modules",te))},gn=async te=>{await yr(at(Oe,"training_modules",te.id),{active:!te.active})},zt=async()=>{if(!as.trim())return;const te=qw.currentUser;if(!te)return;const _e=new Date().toLocaleString("es-AR"),Me={uid:te.uid,userName:te.displayName||"Admin",team:e||"admin",content:as,type:Bn,timestamp:Date.now(),timestampStr:_e,analysis:{pros:"",cons:""},status:"new",isArchived:!1};await bu(In(Oe,"monday_ideas"),Me),Ms(""),Ur(!1),Mn()},gi=async(te,xe)=>{xe==="approved"?(await yr(at(Oe,"monday_ideas",te.id),{status:"approved"}),await ua(at(Oe,"users",te.uid,"data","wallet"),{val:{value:ml(50),coins:ml(50),lofiCoins:ml(50)}},{merge:!0}),alert("Aprobada +50")):await yr(at(Oe,"monday_ideas",te.id),{status:"rejected"}),yt(_e=>_e.map(Me=>Me.id===te.id?{...Me,status:xe}:Me))},Hn=async te=>{window.confirm("Archivar?")&&(await yr(at(Oe,"monday_ideas",te),{isArchived:!0}),yt(xe=>xe.map(_e=>_e.id===te?{..._e,isArchived:!0}:_e)))},Gn=async te=>{await yr(at(Oe,"monday_ideas",te),{isArchived:!1}),yt(xe=>xe.map(_e=>_e.id===te?{..._e,isArchived:!1}:_e))},Vt=async te=>{window.confirm("Eliminar?")&&(await xl(at(Oe,"monday_ideas",te)),yt(xe=>xe.filter(_e=>_e.id!==te)))},Ft=async(te,xe)=>{await yr(at(Oe,"monday_ideas",te),{analysis:xe}),alert("Guardado")},we=(te,xe,_e)=>{yt(Me=>Me.map(Nt=>Nt.id===te?{...Nt,analysis:{...Nt.analysis||{pros:"",cons:""},[xe]:_e}}:Nt))},ze=()=>{const te=Rt.filter(Me=>Me.type==="monday"&&!Me.isArchived&&Me.status==="approved");if(te.length===0){alert("Sin ideas aprobadas.");return}const xe=xn();let _e=` *RESUMEN*
 ${xe.start} - ${xe.end}

`;te.forEach((Me,Nt)=>{_e+=` *#${Nt+1}* (${Me.userName})
"${Me.content}"

`}),Ds(_e),Zt(!0)},It=te=>{Er(te.id),Fn({role:te.role||"agent",team:te.team||"default"})},bt=async te=>{try{await yr(at(Oe,"users",te),os),At(xe=>xe.map(_e=>_e.id===te?{..._e,...os}:_e)),Er(null),alert("Guardado")}catch{alert("Error")}},ls=async te=>{const xe=parseInt(Br);xe&&(await ua(at(Oe,"users",te,"data","wallet"),{val:{value:ml(xe),coins:ml(xe),lofiCoins:ml(xe)}},{merge:!0}),alert(`Enviados ${xe}`),Dt(0))},kn=async te=>{try{await ua(at(Oe,"weekly_schedules",`${te.uid}_${te.weekId}`),{uid:te.uid,userName:te.userName,weekId:te.weekId,schedule:te.proposedSchedule,updatedAt:Date.now()}),await xl(at(Oe,"schedule_requests",te.id)),alert(" Aprobada")}catch{alert("Error")}},cn=async te=>{window.confirm("Rechazar?")&&await xl(at(Oe,"schedule_requests",te))},en=te=>{l(te),le(!1)},tn=X.length+H.length;return p.jsxs("div",{className:"min-h-screen w-full bg-slate-950 text-white font-inter animate-fadeIn pb-20 relative overflow-x-hidden selection:bg-indigo-500 selection:text-white",children:[p.jsx("div",{className:"absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/30 via-slate-950 to-black pointer-events-none"}),p.jsx("div",{className:"relative z-10 w-full bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 shadow-2xl",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:p.jsx("span",{className:"text-xl",children:""})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold uppercase",children:"Nexus Control"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-mono tracking-widest uppercase",children:t?"Admin":"Team Leader"})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>le(!0),className:`px-4 py-2 rounded-lg text-xs font-bold border transition-all flex items-center gap-2 relative ${tn>0?"bg-indigo-600 text-white border-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse":"bg-slate-800 text-slate-400 border-white/5"}`,children:[p.jsx("span",{children:""}),tn>0&&p.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[9px] border border-slate-900 shadow-sm",children:tn})]}),p.jsx("button",{onClick:()=>ge(!0),className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs font-bold border border-white/5 flex items-center gap-2",children:" METAS"}),p.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold border border-blue-500/20",children:" ATRS"})]})]})}),p.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto p-4 md:p-8",children:[p.jsx("div",{className:"flex flex-wrap gap-2 mb-8 p-1 bg-slate-900/50 backdrop-blur rounded-xl border border-white/5 w-fit",children:["dashboard","planner","news","academy","ideas",t?"dev":null,t?"users":null].filter(Boolean).map(te=>p.jsx("button",{onClick:()=>l(te),className:`px-5 py-2.5 rounded-lg font-bold text-xs uppercase tracking-wide transition-all ${a===te?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:{dashboard:" Reportes",planner:" Planner",news:" Noticias",academy:" Academy",ideas:" Ideas",dev:" Dev",users:" Usuarios"}[te]},te))}),a==="dashboard"&&p.jsx(iM,{processedData:Ve,detectedTasks:M,taskGoals:ue,selectedTeam:C,isLoading:oe,selectedTaskFilter:D,setSelectedTaskFilter:P,viewMode:N,setViewMode:O,filterDate:S,setFilterDate:A,expandedReportId:de,fetchTeamData:qn,toggleRow:Fr,formatTime:Wn,getPerformanceColor:ks}),a==="planner"&&p.jsx(cM,{squad:y,weeklyPlan:w,setWeeklyPlan:T,agentSchedules:R,visibleShops:r,nextWeekId:g,targetWeek:u,setTargetWeek:f}),a==="news"&&p.jsx(uM,{newsList:Ge,newNewsText:Xn,setNewNewsText:vn,newNewsType:cr,setNewNewsType:Jn,addNews:Ea,deleteNews:Hr}),a==="academy"&&p.jsx(dM,{quizzes:Cs,editingQuiz:Rs,setEditingQuiz:Tr,saveQuiz:Os,deleteQuiz:Vs,toggleQuiz:gn}),(a==="ideas"||a==="dev")&&p.jsx(fM,{activeTab:a,showArchived:is,setShowArchived:Rn,fetchIdeas:Mn,filteredIdeas:qr(),generateMondaySummary:ze,handleSaveAnalysis:Ft,handleIdeaVerdict:gi,handleArchiveIdea:Hn,handleDeleteIdea:Vt,handleRestoreIdea:Gn,handleAnalysisChange:we}),a==="users"&&t&&p.jsx(mM,{usersList:Dn,editingUserId:pi,setEditingUserId:Er,editForm:os,setEditForm:Fn,setPointsToSend:Dt,handleGivePoints:ls,saveUserChanges:bt,startEditingUser:It})]}),p.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50",children:[p.jsx("button",{onClick:()=>{Bt("dev"),Ur(!0)},className:"flex items-center justify-center w-12 h-12 bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-lg border border-white/20",children:""}),p.jsx("button",{onClick:()=>{Bt("monday"),Ur(!0)},className:"flex items-center justify-center w-14 h-14 bg-yellow-500 hover:bg-yellow-400 text-black rounded-full shadow-lg font-bold text-xl border border-white/20",children:""})]}),Ta&&p.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:p.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl p-6",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nueva Idea"}),p.jsx("textarea",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-4 text-white text-sm h-40",value:as,onChange:te=>Ms(te.target.value)}),p.jsxs("div",{className:"flex gap-2 mt-4",children:[p.jsx("button",{onClick:zt,className:"flex-1 bg-indigo-600 py-2 rounded font-bold",children:"Enviar"}),p.jsx("button",{onClick:()=>Ur(!1),className:"px-4 bg-slate-700 rounded",children:"X"})]})]})}),Ye&&p.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/90 p-4",children:p.jsxs("div",{className:"bg-slate-900 w-full max-w-2xl h-[80vh] flex flex-col",children:[p.jsx("textarea",{readOnly:!0,value:zr,className:"flex-1 bg-slate-950 p-6 text-green-400 font-mono"}),p.jsx("button",{onClick:()=>Zt(!1),className:"py-3 bg-slate-800 text-white font-bold",children:"Cerrar"})]})}),se&&p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 p-4",children:p.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-lg p-6 max-h-[80vh] overflow-y-auto",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Metas"}),p.jsx("div",{className:"space-y-2",children:M.map(te=>p.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[p.jsx("span",{children:te}),p.jsx("input",{type:"number",value:ue[te]||"",onChange:xe=>ve({...ue,[te]:xe.target.value}),className:"bg-black/40 w-16 text-center text-green-400"})]},te))}),p.jsx("button",{onClick:()=>ge(!1),className:"mt-4 w-full bg-indigo-600 py-2 rounded font-bold",children:"Listo"})]})}),p.jsx(vS,{user:qw.currentUser}),p.jsx(gM,{isOpen:Y,onClose:()=>le(!1),scheduleRequests:X,pendingIdeas:H,handleApproveRequest:kn,handleRejectRequest:cn,onNavigate:en})]})},vM=()=>{const[i,e]=j.useState(!1),[t,r]=j.useState(""),[a,l]=j.useState(""),[u,f]=j.useState(""),[g,y]=j.useState(!1),v=async()=>{f(""),y(!0);const T=new ts;try{await e4(vu,T)}catch(R){console.error("Google Auth Error:",R),R.code==="auth/unauthorized-domain"?f(`Dominio no autorizado. Agrega "${window.location.hostname}" en Firebase Console.`):R.code==="auth/popup-closed-by-user"?f("Ventana cerrada por el usuario."):f("Error al iniciar con Google. Verifica la consola."),y(!1)}},w=async T=>{T.preventDefault(),f(""),y(!0);try{i?await CD(vu,t,a):await RD(vu,t,a)}catch(R){console.error("Email Auth Error:",R);let L="Error de autenticacin.";R.code==="auth/wrong-password"&&(L="Contrasea incorrecta."),R.code==="auth/user-not-found"&&(L="Usuario no encontrado."),R.code==="auth/email-already-in-use"&&(L="El correo ya est registrado."),R.code==="auth/weak-password"&&(L="La contrasea es muy dbil."),f(L),y(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-4",children:p.jsxs("div",{className:"w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-700",children:[p.jsxs("div",{className:"p-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2",children:"Bienvenido"}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Task Manager TL - Secured"})]}),p.jsx("button",{onClick:v,disabled:g,className:"w-full bg-white text-gray-900 font-bold py-3 rounded-lg flex items-center justify-center gap-3 hover:bg-gray-100 transition shadow-md mb-6",children:g?"Cargando...":p.jsxs(p.Fragment,{children:[p.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Iniciar con Google"]})}),p.jsxs("div",{className:"relative flex py-2 items-center mb-6",children:[p.jsx("div",{className:"flex-grow border-t border-gray-600"}),p.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs",children:"O usa tu correo"}),p.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),p.jsxs("form",{onSubmit:w,className:"space-y-4",children:[p.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:T=>r(T.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),p.jsx("input",{type:"password",placeholder:"Contrasea",value:a,onChange:T=>l(T.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),u&&p.jsx("p",{className:"text-red-400 text-xs text-center font-bold bg-red-900/50 p-2 rounded",children:u}),p.jsx("button",{type:"submit",disabled:g,className:`w-full py-3 rounded-lg font-bold text-white transition shadow-lg ${i?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:g?"Procesando...":i?"Registrarse":"Iniciar Sesin"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("button",{onClick:()=>e(!i),className:"text-sm text-gray-400 hover:text-white underline",children:i?"Ya tienes cuenta? Inicia sesin":"No tienes cuenta? Regstrate"})})]}),p.jsx("div",{className:"bg-gray-700/30 p-4 text-center border-t border-gray-700",children:p.jsx("p",{className:"text-xs text-gray-500",children:" Tus datos se guardan seguros en Firebase"})})]})})},xM="/themesTaskmanager/assets/logo-C6jEf1_1.png",wM=({coins:i,onOpenShop:e})=>{const t=typeof i=="number"?i:0;return p.jsx("div",{className:"fixed top-5 left-1/2 transform -translate-x-1/2 z-50 animate-slideDown",children:p.jsxs("div",{className:"flex items-center gap-1 p-1.5 bg-[#0f172a]/80 backdrop-blur-xl border border-white/10 rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.5)]",children:[p.jsxs("div",{className:"flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 pr-6",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-[#d1c4e9] flex items-center justify-center overflow-hidden border border-white/20 shadow-inner",children:p.jsx("img",{src:xM,alt:"Coin",className:"w-full h-full object-cover transform scale-[1.7]"})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Lofi Coins"}),p.jsx("span",{className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-300 leading-tight tabular-nums",children:t.toLocaleString()})]})]}),p.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),p.jsxs("button",{onClick:e,className:"group relative w-10 h-10 flex items-center justify-center rounded-full bg-transparent hover:bg-white/10 transition-all duration-300",title:"Abrir Tienda",children:[p.jsx("span",{className:"text-xl filter drop-shadow-md group-hover:scale-110 transition-transform",children:""}),p.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Tienda"})]})]})})},TM=({themeClasses:i,celebrationMessage:e})=>{const t=i.name==="halloween"?"[text-shadow:0_0_8px_rgba(255,165,0,0.6)]":i.name==="party"?"[text-shadow:0_0_10px_rgba(217,70,239,0.7)]":i.name==="biancaBday"?"[text-shadow:0_0_12px_rgba(236,72,153,0.6)]":"",[r,a]=i.iconPair||[null,null],l=i.name==="lofi",u=()=>{confirm("Seguro que quieres cerrar sesin?")&&OD(vu)};return p.jsxs("div",{className:"text-center mb-4 flex flex-col items-center relative",children:[p.jsx("button",{onClick:u,className:"absolute top-0 right-0 text-xs bg-red-900/50 hover:bg-red-800 text-red-200 px-2 py-1 rounded border border-red-800 transition",children:"Salir"}),l&&p.jsx("div",{className:"mb-2 animate-bounce-slow",children:p.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Logo",className:"w-32 h-32 object-cover rounded-full border-4 border-[#C084FC] shadow-lg hover:scale-105 transition-transform duration-500",onError:f=>{f.target.onerror=null,f.target.style.display="none"}})}),p.jsxs("h1",{className:`text-4xl font-extrabold transition-colors duration-500 ${i.primaryText} ${i.titleFont} ${t}`,children:[r&&p.jsx("span",{className:"inline-block transform -rotate-12 scale-110 mr-2 text-3xl",children:r}),l?"Task Manager":"Task Manager TL",a&&p.jsx("span",{className:"inline-block transform rotate-12 scale-110 ml-2 text-3xl",children:a})]}),l&&p.jsx("div",{className:"mt-2 bg-[#FDFCDC] text-[#2E1065] px-3 py-1 rounded-full text-xs font-bold font-lofidex tracking-widest uppercase border border-[#C084FC] shadow-md flex items-center gap-1 animate-pulse",children:p.jsx("span",{children:" Powered by LofiDex "})}),e&&p.jsx("p",{className:`mt-2 text-lg font-semibold animate-pulse ${i.accentText}`,children:e})]})},EM=({message:i,resumeAction:e,dismissAction:t})=>{if(!i)return null;const r=i.taskIdToResume!==null,a=r?"bg-green-700/80":"bg-yellow-700/80",l=r?"border-green-400":"border-yellow-400";return p.jsx("div",{className:"fixed top-0 left-0 w-full p-4 z-[60] backdrop-blur-sm transition-all duration-300 transform translate-y-0",children:p.jsxs("div",{className:`max-w-xl mx-auto p-4 rounded-xl shadow-2xl flex flex-col sm:flex-row items-center justify-between gap-3 ${a} border ${l} text-white`,children:[p.jsx("p",{className:"font-semibold text-center sm:text-left flex-grow",children:i.text}),p.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[i.taskIdToResume!==null&&p.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-bold rounded-full bg-blue-500 hover:bg-blue-600 transition duration-200 shadow-md",children:" Reanudar Tarea "}),p.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-bold rounded-full bg-gray-600 hover:bg-gray-700 transition duration-200",children:" Cerrar "})]})]})})},SM=({addTask:i,addMultipleTasks:e,errorMessage:t,setErrorMessage:r,themeClasses:a})=>{const[l,u]=j.useState(""),[f,g]=j.useState([]),[y,v]=j.useState(""),[w,T]=j.useState(!1);j.useEffect(()=>{g([]),l&&T(!0)},[l]);const R=j.useMemo(()=>{let Y=[..._S];return l&&Qg[l]&&(Y=[Qg[l],...Y]),Y},[l]),L=Y=>{u(Y.target.value)},X=Y=>{l&&g(le=>le.includes(Y)?le.filter(ae=>ae!==Y):[...le,Y])},F=Y=>{if(Y.preventDefault(),!l){r("Primero selecciona una tienda.");return}if(f.length===0){r("Selecciona al menos una tarea.");return}const le=[];f.forEach(ae=>{let he=ae;if(ae==="OTHER_CUSTOM_TASK"){if(!y.trim())return;he=y.trim()}le.push({shopInput:l,taskName:he,quantity:null})}),e?e(le)&&(g([]),v(""),r("")):(le.forEach(ae=>i(ae)),g([]),r(""))},H="bg-gray-800 text-white",ee=f.includes("OTHER_CUSTOM_TASK");return p.jsxs("form",{onSubmit:F,className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[p.jsxs("select",{value:l,onChange:L,className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.accentText} ${a.shopSelectBorder} rounded-full focus:outline-none transition-all font-semibold appearance-none cursor-pointer`,required:!0,children:[p.jsx("option",{value:"",disabled:!0,className:H,children:"--- Seleccionar Tienda ---"}),bS.map(Y=>p.jsx("option",{value:Y,className:H,children:Y},Y))]}),l&&p.jsxs("div",{className:"flex flex-col gap-2 animate-fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center px-2",children:[p.jsx("span",{className:`text-xs uppercase font-bold tracking-widest ${a.secondaryText} opacity-70`,children:"Tareas Disponibles"}),p.jsx("button",{type:"button",onClick:()=>T(!w),className:`text-[10px] font-bold px-2 py-1 rounded border border-gray-600 ${a.secondaryText} hover:bg-gray-700 transition`,children:w?"OCULTAR ":"MOSTRAR "})]}),w&&p.jsx("div",{className:`p-3 rounded-xl border ${a.inputBorder} ${a.cardBg} max-h-60 overflow-y-auto task-scroll`,children:p.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[R.map(Y=>{const le=f.includes(Y);return p.jsx("button",{type:"button",onClick:()=>X(Y),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                                    ${le?"bg-green-600 text-white border-green-400 shadow-md transform scale-105":`bg-transparent ${a.secondaryText} ${a.inputBorder} hover:bg-gray-700 hover:text-white`}`,children:Y},Y)}),p.jsx("button",{type:"button",onClick:()=>X("OTHER_CUSTOM_TASK"),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                            ${ee?"bg-purple-600 text-white border-purple-400 shadow-md":"bg-transparent text-purple-300 border-purple-900/50 hover:bg-purple-900/20"}`,children:"+ Otra"})]})})]}),ee&&w&&p.jsx("input",{type:"text",value:y,onChange:Y=>v(Y.target.value),placeholder:"Nombre de la tarea personalizada...",className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.secondaryText} ${a.inputBorder} rounded-full focus:outline-none transition-all animate-pulse`,required:!0})]}),t&&p.jsx("p",{className:"text-red-400 font-medium bg-red-900/50 p-3 rounded-xl text-center border border-red-500/30",children:t}),p.jsx("button",{type:"submit",className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${a.buttonAdd} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!l||f.length===0,children:f.length>1?`Agregar ${f.length} Tareas`:"Agregar Tarea"})]})},AM=({task:i,toggleTimer:e,deleteTask:t,updateTaskDetails:r,themeClasses:a,resetTaskTimer:l,celebrationThemeName:u})=>{const[f,g]=j.useState(!1),[y,v]=j.useState(""),[w,T]=j.useState(!1),[R,L]=j.useState(i.quantity||""),[X,F]=j.useState(!1),[H,ee]=j.useState(i.shop),[Y,le]=j.useState(!1),[ae,he]=j.useState(i.rawTaskName),[S,A]=j.useState(!1),[N,O]=j.useState(!1),D=Z4(i.elapsedTime);j.useEffect(()=>{f&&v(D)},[f]);const P=i.isCustom,C=()=>{const M=y.split(":").map(Number);if(M.length===3&&!M.some(isNaN)){const ne=(M[0]*3600+M[1]*60+M[2])*1e3;r(i.id,{elapsedTime:ne,lastTime:i.running?Date.now():null})}g(!1)},me=()=>{r(i.id,{quantity:parseInt(R)||0}),T(!1)},de=()=>{H&&r(i.id,{shop:H}),F(!1)},q=()=>{const M=ae.trim()||"Tarea sin Nombre";r(i.id,{rawTaskName:M}),le(!1)},oe=()=>{l(i.id),A(!1)},be=()=>{t(i.id),O(!1)},Ve=i.running?u==="biancaBday"?"border-l-4 border-pink-400":"border-l-4 border-green-500":"border-l-4 border-gray-600",Pe=i.running?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200";return p.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-3 sm:gap-4 sm:p-4 rounded-xl shadow-md transition-all duration-300 ${a.itemBg} ${Ve}`,children:[p.jsxs("div",{className:"flex flex-col gap-1 min-w-0 flex-grow",children:[X?p.jsx("select",{value:H,onChange:M=>ee(M.target.value),onBlur:de,className:`px-2 py-1 border-b-2 bg-gray-900 focus:outline-none w-full sm:w-40 rounded ${a.accentText} border-pink-500 text-xs sm:text-sm font-bold`,autoFocus:!0,children:bS.map(M=>p.jsx("option",{value:M,children:M},M))}):p.jsx("span",{className:`font-bold text-xs sm:text-sm uppercase tracking-wider opacity-80 cursor-pointer hover:text-white transition-colors ${a.accentText}`,onClick:()=>{ee(i.shop),F(!0)},children:i.shop||"Sin Tienda"}),Y&&P?p.jsx("input",{type:"text",value:ae,onChange:M=>he(M.target.value),onBlur:q,onKeyPress:M=>M.key==="Enter"&&q(),className:`font-medium text-base sm:text-lg border-b-2 bg-transparent focus:outline-none w-full ${a.secondaryText} border-pink-500`,autoFocus:!0}):p.jsx("span",{className:`font-medium text-base sm:text-lg break-words ${P?"cursor-pointer hover:underline decoration-dashed":""} ${a.secondaryText}`,onClick:()=>{P&&(he(i.rawTaskName),le(!0))},children:i.rawTaskName||i.name}),p.jsx("div",{className:"flex items-center gap-3 mt-1",children:w?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-xs text-gray-400",children:"Cant:"}),p.jsx("input",{type:"number",value:R,onChange:M=>L(M.target.value),onBlur:me,onKeyPress:M=>M.key==="Enter"&&me(),className:`font-mono text-sm sm:text-base border-b-2 bg-gray-800/50 focus:outline-none w-16 sm:w-20 text-center rounded px-1 ${a.primaryText} border-blue-500`,autoFocus:!0})]}):p.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/40 px-2 py-1 rounded-lg border border-gray-700/50",children:[p.jsx("span",{className:`font-mono text-sm sm:text-base cursor-pointer hover:text-white transition-colors ${a.secondaryText}`,onClick:()=>{L(i.quantity||""),T(!0)},children:i.quantity?`${i.quantity} rdenes`:"0 rdenes"}),p.jsx("button",{onClick:M=>{M.stopPropagation(),r(i.id,{quantity:(i.quantity||0)+1})},className:`text-[10px] font-bold px-2 py-0.5 rounded shadow-sm transition-transform active:scale-95 ${Pe}`,children:" +1 "})]})})]}),p.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-4 w-full sm:w-auto flex-shrink-0 pt-2 sm:pt-0 border-t border-gray-700/30 sm:border-none mt-2 sm:mt-0",children:[f?p.jsx("input",{type:"text",value:y,onChange:M=>v(M.target.value),onBlur:C,onKeyPress:M=>M.key==="Enter"&&C(),className:`font-mono text-xl sm:text-2xl border-b-2 bg-gray-900 focus:outline-none w-28 sm:w-32 text-center rounded ${a.primaryText} border-blue-500 tracking-widest`,autoFocus:!0}):p.jsx("span",{className:`font-mono text-xl sm:text-2xl cursor-pointer hover:scale-105 transition-transform tracking-widest ${i.running?"text-green-400 font-bold":a.primaryText}`,onClick:()=>{g(!0)},children:D}),p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("button",{onClick:()=>e(i.id),className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-bold transition-all shadow-lg active:scale-95 ${i.running?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-green-600 hover:bg-green-500"}`,children:i.running?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),p.jsxs("div",{className:"flex flex-col gap-1",children:[S?p.jsx("button",{onClick:oe,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Conf?"}):p.jsx("button",{onClick:()=>{A(!0),O(!1)},className:"text-gray-500 hover:text-gray-300 transition",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2A8.001 8.001 0 0019.418 15m0 0H15"})})}),N?p.jsx("button",{onClick:be,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Borrar?"}):p.jsx("button",{onClick:()=>{O(!0),A(!1)},className:"text-gray-500 hover:text-red-500 transition",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]})},IM=({reports:i=[],selectedDate:e,onSelectDate:t,themeClasses:r})=>{const[a,l]=j.useState(new Date),u=j.useMemo(()=>{const R=a.getFullYear(),L=a.getMonth();return new Date(R,L+1,0).getDate()},[a]),f=j.useMemo(()=>{const R=a.getFullYear(),L=a.getMonth();return new Date(R,L,1).getDay()},[a]),g=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],y=["D","L","M","M","J","V","S"],v=()=>{l(new Date(a.getFullYear(),a.getMonth()-1,1))},w=()=>{l(new Date(a.getFullYear(),a.getMonth()+1,1))},T=()=>{const R=[];for(let L=0;L<f;L++)R.push(p.jsx("div",{className:"h-10 w-10"},`empty-${L}`));for(let L=1;L<=u;L++){const X=new Date(a.getFullYear(),a.getMonth(),L),F=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(X.getDate()).padStart(2,"0")}`,H=e===F,ee=Array.isArray(i)&&i.some(he=>he.id===F),Y=F===zu();let le="hover:bg-gray-600/50",ae=r.secondaryText;H?(le=r.calendarActive||"bg-blue-600 text-white",ae="text-white font-bold"):Y&&(le="border border-gray-500 bg-gray-700/50"),R.push(p.jsxs("div",{onClick:()=>t(F),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${le} ${ae}`,children:[p.jsx("span",{className:"text-sm z-10",children:L}),ee&&p.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${r.calendarDot||"bg-yellow-400"}`})]},L))}return R};return p.jsxs("div",{className:`p-4 rounded-xl shadow-lg ${r.itemBg} transition-colors duration-500`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("button",{onClick:v,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:"<"}),p.jsxs("span",{className:`font-bold text-lg ${r.primaryText}`,children:[g[a.getMonth()]," ",a.getFullYear()]}),p.jsx("button",{onClick:w,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:">"})]}),p.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:y.map((R,L)=>p.jsx("div",{className:`text-xs font-bold opacity-70 ${r.secondaryText}`,children:R},L))}),p.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:T()})]})},yk=({reports:i=[],selectedDates:e,onToggleDate:t,onBatchUpdate:r,themeClasses:a})=>{const[l,u]=j.useState(new Date),f=j.useMemo(()=>{const H=l.getFullYear(),ee=l.getMonth();return new Date(H,ee+1,0).getDate()},[l]),g=j.useMemo(()=>{const H=l.getFullYear(),ee=l.getMonth();return new Date(H,ee,1).getDay()},[l]),y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],v=["D","L","M","M","J","V","S"],w=()=>{u(new Date(l.getFullYear(),l.getMonth()-1,1))},T=()=>{u(new Date(l.getFullYear(),l.getMonth()+1,1))},R=()=>{const H=l.getFullYear(),ee=l.getMonth(),Y=[];for(let le=1;le<=f;le++)Y.push(`${H}-${String(ee+1).padStart(2,"0")}-${String(le).padStart(2,"0")}`);return Y},L=()=>{r&&r(R(),"add")},X=()=>{r&&r(R(),"remove")},F=()=>{const H=[];for(let ee=0;ee<g;ee++)H.push(p.jsx("div",{className:"h-10 w-10"},`empty-${ee}`));for(let ee=1;ee<=f;ee++){const Y=new Date(l.getFullYear(),l.getMonth(),ee),le=`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`,ae=e.includes(le),he=Array.isArray(i)&&i.some(N=>N.id===le);let S="hover:bg-gray-600/50",A=a.secondaryText;ae&&(S="bg-green-600 text-white font-bold border border-green-400",A="text-white"),H.push(p.jsxs("div",{onClick:()=>t(le),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${S} ${A}`,children:[p.jsx("span",{className:"text-sm z-10",children:ee}),he&&p.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${ae?"bg-white":a.calendarDot||"bg-yellow-400"}`})]},ee))}return H};return p.jsxs("div",{className:`p-4 rounded-xl shadow-lg border transition-colors duration-500 ${a.cardBg} ${a.inputBorder}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("button",{onClick:w,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:"<"}),p.jsxs("span",{className:`font-bold text-lg ${a.primaryText}`,children:[y[l.getMonth()]," ",l.getFullYear()]}),p.jsx("button",{onClick:T,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:">"})]}),p.jsxs("div",{className:"flex gap-2 mb-3 justify-center",children:[p.jsx("button",{onClick:L,className:"text-xs px-3 py-1 bg-green-700 hover:bg-green-600 text-white rounded-full transition",children:"Todos"}),p.jsx("button",{onClick:X,className:"text-xs px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-full transition",children:"Ninguno"})]}),p.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:v.map(H=>p.jsx("div",{className:`text-xs font-bold opacity-70 ${a.secondaryText}`,children:H},H))}),p.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:F()})]})},$w=({content:i,themeClasses:e,placeholder:t})=>{const[r,a]=j.useState(!1),l=()=>{if(i)if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(i).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)});else{const u=document.createElement("textarea");u.value=i,document.body.appendChild(u),u.select();try{document.execCommand("copy"),a(!0),setTimeout(()=>a(!1),2e3)}catch(f){console.error("Fallback copy failed",f)}document.body.removeChild(u)}};return p.jsxs("div",{className:"relative w-full group",children:[p.jsx("div",{className:`w-full p-5 rounded-xl font-mono text-sm whitespace-pre-wrap transition-colors duration-500 ${e.itemBg} ${e.secondaryText} min-h-[100px]`,children:i||p.jsx("p",{className:"text-center opacity-70 italic pt-8",children:t})}),i&&p.jsx("button",{onClick:l,className:`absolute top-2 right-2 px-3 py-1 text-xs font-bold rounded transition-all duration-200 shadow-md flex items-center gap-1 ${r?"bg-green-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,title:"Copiar reporte",children:r?p.jsxs(p.Fragment,{children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copiado!"]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copiar"]})})]})},NM=({isUnlocked:i,weeklyHours:e,targetHours:t,setTargetHours:r,onClaimBonus:a,bonusClaimed:l})=>{const u=Math.min(e/t*100,100),f=e>=t;return p.jsxs("div",{className:"mb-6 bg-black/40 rounded-xl p-4 border border-gray-700/50 backdrop-blur-sm shadow-inner transition-all hover:border-gray-600/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-gray-400",children:"Meta Semanal"}),p.jsx("input",{type:"number",value:t,onChange:g=>r(Number(g.target.value)),className:"w-12 bg-gray-800 border border-gray-600 rounded text-center text-xs text-white focus:border-purple-500 outline-none transition-colors",min:"1"}),p.jsx("span",{className:"text-xs text-gray-500",children:"hrs"})]}),p.jsxs("div",{className:"text-xs font-mono text-white",children:[p.jsx("span",{className:f?"text-green-400 font-bold":"",children:e.toFixed(1)}),p.jsx("span",{className:"text-gray-500",children:" / "}),p.jsx("span",{children:t})," hrs"]})]}),p.jsx("div",{className:"h-3 w-full bg-gray-800 rounded-full overflow-hidden border border-gray-700 mb-3 relative group shadow-inner",children:p.jsx("div",{className:`h-full transition-all duration-1000 ease-out relative ${f?"bg-gradient-to-r from-green-500 to-emerald-400":"bg-gradient-to-r from-purple-600 to-blue-500"}`,style:{width:`${u}%`},children:p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/20 animate-pulse"})})}),p.jsx("div",{className:"flex justify-center items-center mt-2",children:f?l?p.jsxs("div",{className:"text-[10px] sm:text-xs font-bold text-green-400 flex items-center gap-1 bg-green-900/20 px-4 py-1.5 rounded-full border border-green-500/30 animate-fade-in",children:[p.jsx("span",{children:""})," Recompensa Semanal Cobrada"]}):p.jsxs("button",{onClick:a,className:"w-full sm:w-auto text-xs font-bold text-white bg-gradient-to-r from-amber-500 to-yellow-600 hover:from-amber-400 hover:to-yellow-500 px-6 py-2 rounded-full shadow-[0_0_15px_rgba(245,158,11,0.4)] animate-bounce border border-yellow-300/50 transition-all hover:scale-105 active:scale-95 flex justify-center items-center gap-2",children:[p.jsx("span",{children:""})," RECLAMAR 100 MONEDAS!"]}):p.jsxs("span",{className:"text-[10px] text-gray-500 italic flex items-center gap-1",children:[p.jsx("span",{children:""})," Faltan ",(t-e).toFixed(1)," hrs para tu bonus."]})})]})},CM=({onClick:i})=>{const[e,t]=j.useState(!0);return j.useEffect(()=>{const r=setTimeout(()=>t(!1),1e4);return()=>clearTimeout(r)},[]),p.jsxs("div",{className:"fixed bottom-4 left-4 sm:bottom-6 sm:left-6 z-50 group",children:[e&&p.jsx("div",{className:"absolute -top-3 -right-4 bg-red-600 text-white text-[10px] font-extrabold px-2 py-0.5 rounded-full shadow-lg wiggle-animation z-50 border-2 border-white tracking-widest transition-opacity duration-1000",children:" NUEVO! "}),p.jsxs("button",{onClick:i,className:"relative w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-green-600 hover:bg-green-500 text-white shadow-2xl flex items-center justify-center border-4 border-gray-900 transition-transform duration-300 active:scale-95 hover:scale-110 overflow-hidden",title:"Calcular Salario",children:[p.jsx("div",{className:"shine-bar"}),p.jsx("span",{className:"text-xl sm:text-3xl font-bold relative z-10",children:"$"})]})]})},RM=({news:i})=>!i||i.length===0?null:p.jsx("div",{className:"fixed top-0 left-0 w-full z-50 bg-black/80 border-b border-white/10 h-8 flex items-center backdrop-blur-sm",children:p.jsx("div",{className:"marquee-container w-full",children:p.jsx("div",{className:"marquee-content flex gap-8",children:i.map(e=>p.jsxs("span",{className:`text-xs font-bold font-mono px-4 ${e.type==="critical"?"text-red-400 animate-pulse":e.type==="party"?"text-yellow-400":"text-blue-400"}`,children:[e.type==="critical"&&""," ",e.type==="party"&&""," ",e.type==="info"&&""," ",e.text]},e.id))})})}),DM=({isLeader:i,onOpenDashboard:e,onOpenIdeas:t,onOpenAvailability:r,setIdeaType:a})=>p.jsxs(p.Fragment,{children:[i&&p.jsx("button",{onClick:e,className:"fixed top-12 right-4 z-50 bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:" LDER"}),p.jsxs("button",{onClick:()=>{a("dev"),t()},className:"fixed bottom-20 right-4 z-50 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"BUGS / IDEAS APP"})]}),p.jsxs("button",{onClick:()=>{a("monday"),t()},className:"fixed bottom-4 right-4 z-50 bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"IDEAS LUNES"})]}),p.jsxs("button",{onClick:r,className:"fixed bottom-36 right-4 z-50 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 rounded-full font-bold shadow-lg text-xs flex items-center gap-2",children:[p.jsx("span",{children:""}),p.jsx("span",{className:"hidden sm:inline",children:"DISPONIBILIDAD"})]})]}),MM=({isOpen:i,onClose:e,onGenerate:t,tasks:r,distributeTasksTime:a,themeClasses:l,selectedReportDate:u,setSelectedReportDate:f,pastReports:g=[]})=>{const y=j.useRef(null),[v,w]=j.useState(!1),[T,R]=j.useState(""),[L,X]=j.useState("00:00:00"),[F,H]=j.useState([]),ee=j.useMemo(()=>r.reduce((me,de)=>{const q=de.running?Date.now()-de.lastTime:0;return me+de.elapsedTime+q},0),[r,i]);if(j.useEffect(()=>{const me=Math.floor(ee/36e5).toString().padStart(2,"0"),de=Math.floor(ee%36e5/6e4).toString().padStart(2,"0"),q=Math.floor(ee%6e4/1e3).toString().padStart(2,"0");X(`${me}:${de}:${q}`)},[ee]),!i)return null;const Y=me=>{if(!me)return"DD/MM/YYYY";const[de,q,oe]=me.split("-");return`${oe}/${q}/${de}`},le=me=>{if(!me)return 0;const de=me.split(":").map(Number);let q=0,oe=0,be=0;return de.length===3?[q,oe,be]=de:de.length===2&&([q,oe]=de),(q*3600+oe*60+be)*1e3},ae=me=>{const de=Math.abs(me),q=Math.floor(de/36e5).toString().padStart(2,"0"),oe=Math.floor(de%36e5/6e4).toString().padStart(2,"0"),be=Math.floor(de%6e4/1e3).toString().padStart(2,"0");return`${me<0?"-":""}${q}:${oe}:${be}`},S=le(T)-ee,A=()=>{if(y.current)try{y.current.showPicker()}catch{y.current.focus(),y.current.click()}},N=()=>{Array.isArray(g)&&g.some(de=>de.id===u)?w(!0):t()},O=me=>{let de=me.target.value.replace(/\D/g,"");de.length>6&&(de=de.slice(0,6)),de.length>4?de=de.replace(/^(\d{2})(\d{2})(\d{0,2})/,"$1:$2:$3"):de.length>2&&(de=de.replace(/^(\d{2})(\d{0,2})/,"$1:$2")),R(de)},D=me=>{H(de=>de.includes(me)?de.filter(q=>q!==me):[...de,me])},P=()=>{F.length===r.length?H([]):H(r.map(me=>me.id))},C=()=>{if(S===0)return;if(F.length===0){alert("Por favor selecciona al menos una tarea.");return}a(F,S);const me=S>0?"repartido":"descontado";alert(`Se han ${me} ${ae(Math.abs(S))} entre las ${F.length} tareas seleccionadas.`)};return p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:p.jsx("div",{className:`relative w-full max-w-lg p-6 rounded-2xl shadow-2xl ${l.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content max-h-[90vh] overflow-y-auto flex flex-col`,children:v?p.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[p.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:""}),p.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Cuidado!"}),p.jsx("p",{className:"text-gray-300 mb-6",children:"Ya existe un reporte para esta fecha."}),p.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[p.jsx("button",{onClick:()=>t(),className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Sobreescribir"}),p.jsx("button",{onClick:()=>w(!1),className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("h2",{className:`text-xl font-bold mb-4 text-center ${l.primaryText}`,children:"Preparar Reporte"}),p.jsx("div",{className:"mb-4 flex justify-center",children:p.jsxs("div",{onClick:A,className:"relative group cursor-pointer border border-cyan-500/30 bg-black/40 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-black/60 transition-colors",children:[p.jsx("span",{className:"text-white font-mono pointer-events-none select-none",children:Y(u)}),p.jsx("span",{className:"text-cyan-400 pointer-events-none",children:""}),p.jsx("input",{ref:y,type:"date",value:u,onChange:me=>f(me.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})}),p.jsxs("div",{className:"bg-black/30 p-4 rounded-xl border border-white/10 mb-4",children:[p.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Sincronizacin"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"text-center p-2 bg-black/20 rounded-lg",children:[p.jsx("label",{className:"text-[10px] text-gray-500 block",children:"TIEMPO APP"}),p.jsx("span",{className:"text-lg font-mono font-bold text-white",children:L})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("label",{className:"text-[10px] text-cyan-400 block mb-1",children:"WEBWORK (HH:MM:SS)"}),p.jsx("input",{type:"text",value:T,onChange:O,placeholder:"00:00:00",maxLength:8,className:`w-full bg-black/50 border ${l.inputBorder} text-cyan-300 text-lg font-mono p-1 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-cyan-500`})]})]}),T.length>=4&&p.jsx("div",{className:`text-center mb-4 text-sm font-bold py-1 rounded ${S>0?"bg-green-900/30 text-green-400":S<0?"bg-red-900/30 text-red-400":"text-gray-500"}`,children:S>0?`Faltan cargar: ${ae(S)}`:S<0?`Te pasaste por: ${ae(S)}`:"Sincronizado!"}),S!==0&&p.jsxs("div",{className:"animate-fadeIn",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("p",{className:"text-xs text-gray-400",children:S>0?"Elige dnde SUMAR tiempo:":"Elige dnde RESTAR tiempo:"}),p.jsx("button",{onClick:P,className:"text-[10px] text-cyan-400 hover:text-cyan-300 underline",children:F.length===r.length?"Deseleccionar":"Todos"})]}),p.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar border border-white/5 rounded-lg bg-black/20 p-2 space-y-1",children:r.map(me=>p.jsxs("div",{onClick:()=>D(me.id),className:`flex items-center gap-3 p-2 rounded cursor-pointer transition-colors ${F.includes(me.id)?S>0?"bg-emerald-900/30 border border-emerald-500/30":"bg-red-900/30 border border-red-500/30":"hover:bg-white/5 border border-transparent"}`,children:[p.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${F.includes(me.id)?S>0?"bg-emerald-500 border-emerald-500":"bg-red-500 border-red-500":"border-gray-600"}`,children:F.includes(me.id)&&p.jsx("span",{className:"text-black text-[10px] font-bold",children:""})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("p",{className:"text-sm text-gray-200 truncate",children:me.text||me.name})}),p.jsx("span",{className:"text-xs font-mono text-gray-500",children:ae(me.elapsedTime)})]},me.id))}),p.jsxs("p",{className:"text-[10px] text-center mt-2 text-cyan-200/70",children:[S>0?"Se sumarn":"Se restarn"," ",p.jsx("span",{className:"font-bold",children:F.length>0?ae(Math.abs(S/F.length)):"00:00:00"})," ",S>0?"a":"de"," cada tarea seleccionada."]})]}),p.jsx("button",{onClick:C,disabled:T.length<4||S!==0&&F.length===0,className:`w-full mt-4 py-3 rounded-xl font-bold uppercase tracking-wider transition-all shadow-lg flex items-center justify-center gap-2 ${S===0?"bg-gray-700 text-gray-400 cursor-not-allowed":S>0?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-900/50":"bg-red-600 hover:bg-red-500 text-white shadow-red-900/50"}`,children:S>0?" Repartir (Sumar)":S<0?" Recortar (Restar)":"Perfecto"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:N,className:`flex-1 py-3 rounded-full font-bold text-white shadow-lg ${l.buttonAction}`,children:"Generar Reporte"}),p.jsx("button",{onClick:e,className:"px-6 py-3 rounded-full font-bold text-gray-300 bg-gray-700 hover:bg-gray-600",children:"Cancelar"})]})]})})})},kM=({isOpen:i,onClose:e,onConfirm:t,themeClasses:r})=>i?p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:p.jsx("div",{className:`relative w-full max-w-sm p-6 rounded-2xl shadow-2xl ${r.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content`,children:p.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[p.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),p.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Empezar Da Nuevo?"}),p.jsxs("p",{className:`${r.secondaryText||"text-gray-300"} mb-6 text-sm`,children:["Ests a punto de borrar ",p.jsx("strong",{children:"todas las tareas"})," de la lista. ",p.jsx("br",{}),p.jsx("br",{})," ",p.jsx("span",{className:"text-xs opacity-70",children:"Asegrate de haber generado tu E.O.D.R. antes de continuar. Esta accin no se puede deshacer."})]}),p.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[p.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Limpiar Todo"}),p.jsx("button",{onClick:e,className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]})})}):null,OM=()=>{const i=Array.from({length:50}).map((e,t)=>{const r={left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${Math.random()*10+5}s`,opacity:Math.random()*.7+.3,width:`${Math.random()*6+2}px`,height:`${Math.random()*6+2}px`};return p.jsx("div",{className:"snowflake absolute top-[-10px] bg-white rounded-full blur-[1px]",style:r},t)});return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[p.jsx("style",{children:`
                @keyframes snowfall {
                    0% { transform: translateY(-10vh) translateX(0); }
                    100% { transform: translateY(110vh) translateX(20px); }
                }
                .snowflake {
                    animation: snowfall linear infinite;
                }
            `}),i]})},VM=()=>{const i=j.useMemo(()=>{const e=["#ffb700","#ff6a00","#ff8c00","#ffd700","#ff4500"];return Array.from({length:30}).map((t,r)=>({key:r,left:`${Math.random()*100}vw`,top:`${Math.random()*120}vh`,size:`${Math.random()*400+150}px`,color:e[Math.floor(Math.random()*e.length)],opacity:Math.random()*.3+.3,duration:`${Math.random()*15+15}s`,delay:`-${Math.random()*20}s`,blur:`${Math.random()*60+40}px`}))},[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-plus-lighter",children:[p.jsx("style",{children:`
                @keyframes float-pulse {
                    0%, 100% { transform: translate(0, 0) scale(1); opacity: var(--base-opacity); }
                    50% { transform: translate(var(--tx), var(--ty)) scale(1.2); opacity: calc(var(--base-opacity) + 0.2); }
                }
                .cozy-orb {
                    position: absolute;
                    border-radius: 50%;
                    animation: float-pulse infinite ease-in-out alternate;
                    --tx: ${(Math.random()-.5)*100}px;
                    --ty: ${(Math.random()-.5)*100}px;
                }
            `}),i.map(e=>p.jsx("div",{className:"cozy-orb",style:{left:e.left,top:e.top,width:e.size,height:e.size,backgroundColor:e.color,"--base-opacity":e.opacity,animationDuration:e.duration,animationDelay:e.delay,filter:`blur(${e.blur})`}},e.key))]})},jM=({themeId:i})=>{const t=i==="crimson"?"153, 27, 27":"6, 78, 59";return p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[p.jsx("div",{className:"absolute inset-0",style:{background:`radial-gradient(circle at 50% 110%, rgba(${t}, 0.6) 0%, rgba(${t}, 0.2) 40%, transparent 70%)`}}),p.jsx("div",{className:"absolute inset-x-[-20%] bottom-0 h-[80%] animate-breathe-fog opacity-60",style:{background:`radial-gradient(ellipse at 50% 100%, rgba(${t}, 0.5) 0%, transparent 60%)`,filter:"blur(40px)"}}),p.jsx("div",{className:"absolute inset-x-[-20%] bottom-[-10%] h-[60%] animate-drift-fog opacity-50 mix-blend-screen",style:{background:`radial-gradient(ellipse at 60% 100%, rgba(${t}, 0.4) 0%, transparent 50%)`,filter:"blur(60px)"}}),p.jsx("style",{jsx:!0,children:`
                @keyframes breathe-fog {
                    0% { transform: scaleY(1) translateX(0); opacity: 0.6; }
                    50% { transform: scaleY(1.1) translateX(-2%); opacity: 0.4; }
                    100% { transform: scaleY(1) translateX(0); opacity: 0.6; }
                }
                .animate-breathe-fog { animation: breathe-fog 15s ease-in-out infinite; }

                @keyframes drift-fog {
                    0% { transform: translateX(5%); }
                    100% { transform: translateX(-5%); }
                }
                .animate-drift-fog { animation: drift-fog 20s ease-in-out infinite alternate; }
            `})]})},PM=`
    @keyframes firefly-move {
        0%, 100% { transform: translate(0, 0); opacity: 0; }
        25% { opacity: 1; }
        50% { transform: translate(50px, -50px); opacity: 0.5; }
        75% { transform: translate(-30px, 30px); opacity: 1; }
    }
    
    @keyframes flora-fall {
        0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
        10% { opacity: 0.8; }
        100% { transform: translateY(110vh) rotate(360deg) translateX(50px); opacity: 0; }
    }

    .firefly {
        position: absolute;
        background: #bef264;
        border-radius: 50%;
        box-shadow: 0 0 10px #bef264;
        animation: firefly-move ease-in-out infinite;
    }

    .flora-particle {
        position: absolute;
        top: -20px;
        border-radius: 4px 10px;
        animation: flora-fall linear infinite;
    }
`,Kw=()=>{const i=j.useMemo(()=>Array.from({length:20}).map((t,r)=>({key:`fly-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*10+10}s`,delay:`-${Math.random()*10}s`,opacity:Math.random()*.5+.3})),[]),e=j.useMemo(()=>{const t=["#86efac","#4ade80","#fbcfe8","#fdf2f8"];return Array.from({length:15}).map((r,a)=>({key:`leaf-${a}`,left:`${Math.random()*100}vw`,size:`${Math.random()*8+4}px`,color:t[Math.floor(Math.random()*t.length)],duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*10}s`,rotation:Math.random()*360}))},[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:PM}}),i.map(t=>p.jsx("div",{className:"firefly",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDuration:t.duration,animationDelay:t.delay}},t.key)),e.map(t=>p.jsx("div",{className:"flora-particle",style:{left:t.left,width:t.size,height:t.size,backgroundColor:t.color,animationDuration:t.duration,animationDelay:t.delay}},t.key))]})},LM=`
    /* Fondo de estrellas parpadeantes */
    @keyframes twinkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
    }

    /* Meteorito cruzando la pantalla */
    @keyframes shooting {
        0% { transform: translateX(0) translateY(0) rotate(315deg); opacity: 1; }
        70% { opacity: 1; }
        100% { transform: translateX(-100vw) translateY(100vh) rotate(315deg); opacity: 0; }
    }

    .star-static {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle infinite ease-in-out;
    }

    .shooting-star {
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 2px;
        background: linear-gradient(90deg, rgba(255,255,255,1), transparent);
        animation: shooting 4s linear infinite;
        opacity: 0;
    }
    
    /* Cabeza del meteorito */
    .shooting-star::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #4c1d95;
    }
`,zM=()=>{const i=j.useMemo(()=>Array.from({length:50}).map((t,r)=>({key:`s-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*2+1}px`,delay:`${Math.random()*5}s`,duration:`${Math.random()*3+2}s`})),[]),e=j.useMemo(()=>Array.from({length:3}).map((t,r)=>({key:`m-${r}`,top:`${Math.random()*50}vh`,right:`${Math.random()*20-20}vw`,delay:`${Math.random()*10+2}s`,duration:`${Math.random()*2+3}s`})),[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:LM}}),i.map(t=>p.jsx("div",{className:"star-static",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDelay:t.delay,animationDuration:t.duration}},t.key)),e.map(t=>p.jsx("div",{className:"shooting-star",style:{top:t.top,right:t.right,animationDelay:t.delay,animationDuration:t.duration}},t.key))]})},UM=`
    @keyframes float-up {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.8; }
        90% { opacity: 0.8; }
        100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    .gold-particle {
        position: absolute;
        background: radial-gradient(circle, #fcd34d 0%, #b45309 100%); /* Degradado dorado */
        border-radius: 50%;
        box-shadow: 0 0 5px #f59e0b;
        animation: float-up linear infinite;
    }
`,BM=()=>{const i=j.useMemo(()=>Array.from({length:30}).map((e,t)=>({key:`gold-${t}`,left:`${Math.random()*100}vw`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*20}s`})),[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:UM}}),i.map(e=>p.jsx("div",{className:"gold-particle",style:{left:e.left,width:e.size,height:e.size,animationDuration:e.duration,animationDelay:e.delay}},e.key))]})},FM=`
    @keyframes float-music {
        0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0; }
        10% { opacity: 0.6; }
        50% { transform: translateY(50vh) translateX(20px) rotate(10deg); opacity: 0.8; }
        100% { transform: translateY(-10vh) translateX(-20px) rotate(-10deg); opacity: 0; }
    }

    .music-note {
        position: absolute;
        color: #d1c4e9; /* Lila suave de tu marca */
        text-shadow: 0 0 10px rgba(209, 196, 233, 0.5);
        font-family: 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
        user-select: none;
        animation: float-music linear infinite;
    }
`,qM=()=>{const i=j.useMemo(()=>{const e=["","","",""];return Array.from({length:15}).map((t,r)=>({key:`note-${r}`,symbol:e[Math.floor(Math.random()*e.length)],left:`${Math.random()*95}vw`,size:`${Math.random()*20+15}px`,duration:`${Math.random()*10+15}s`,delay:`-${Math.random()*20}s`,opacity:Math.random()*.4+.2}))},[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:FM}}),i.map(e=>p.jsx("div",{className:"music-note",style:{left:e.left,fontSize:e.size,animationDuration:e.duration,animationDelay:e.delay,opacity:e.opacity},children:e.symbol},e.key))]})},HM=()=>{const i=j.useMemo(()=>Array.from({length:60}).map((e,t)=>({key:t,left:`${Math.random()*100}vw`,height:`${Math.random()*20+10}px`,duration:`${Math.random()*.5+.5}s`,delay:`${Math.random()*2}s`})),[]);return p.jsx("div",{className:"w-full h-full absolute top-0 left-0 overflow-hidden",children:i.map(e=>p.jsx("div",{className:"rain-drop",style:{left:e.left,height:e.height,"--duration":e.duration,"--delay":e.delay}},e.key))})},GM=()=>p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"spider-web",children:[p.jsx("div",{className:"line1"}),p.jsx("div",{className:"line2"})]}),p.jsxs("div",{className:"spider-web",style:{left:"auto",right:0,transform:"scaleX(-1)"},children:[p.jsx("div",{className:"line1"}),p.jsx("div",{className:"line2"})]})]}),$M=()=>{const i=j.useRef(null),[e,t]=j.useState(!1),r=()=>{i.current&&(e?i.current.pause():i.current.play().catch(a=>console.log("Audio play failed",a)),t(!e))};return p.jsxs("div",{className:"fixed top-4 right-4 z-50",children:[p.jsx("audio",{ref:i,loop:!0,src:"https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3"}),p.jsx("button",{onClick:r,className:"bg-black/50 hover:bg-black/70 text-white p-2 rounded-full backdrop-blur-md border border-white/20 transition-all shadow-lg group hover:scale-110 active:scale-95 duration-300",children:p.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center rounded-full overflow-hidden",children:[p.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Cup",className:`w-full h-full object-cover ${e?"animate-pulse":"opacity-80 grayscale"}`,onError:a=>{a.target.onerror=null,a.target.src="https://placehold.co/100x100?text="}}),!e&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-xs bg-black/40 rounded-full",children:"OFF"})]})})]})},KM=()=>{const i=j.useRef(null);return j.useEffect(()=>{const e=i.current,t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%",a=14,l=e.width/a,u=Array(Math.floor(l)).fill(1),g=setInterval(()=>{t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#0F0",t.font=`${a}px monospace`;for(let v=0;v<u.length;v++){const w=r[Math.floor(Math.random()*r.length)];t.fillText(w,v*a,u[v]*a),u[v]*a>e.height&&Math.random()>.975&&(u[v]=0),u[v]++}},33),y=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",y),()=>{clearInterval(g),window.removeEventListener("resize",y)}},[]),p.jsx("canvas",{ref:i,className:"fixed top-0 left-0 w-full h-full z-0 pointer-events-none opacity-50"})},YM=()=>{const i=j.useMemo(()=>Array.from({length:25}).map((e,t)=>({id:t,left:`${Math.random()*100}%`,duration:`${15+Math.random()*20}s`,delay:`-${Math.random()*20}s`,scale:.6+Math.random()*.6})),[]);return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[1] overflow-hidden",children:[p.jsx("style",{children:`
                    @keyframes lanternFloatUp {
                        0% {
                            transform: translateY(105vh) rotate(-5deg);
                            opacity: 0;
                        }
                        10% {
                            opacity: 0.9;
                        }
                        50% {
                            transform: translateY(50vh) rotate(5deg);
                            opacity: 1;
                        }
                        90% {
                            opacity: 0.8;
                        }
                        100% {
                            transform: translateY(-20vh) rotate(-5deg);
                            opacity: 0;
                        }
                    }

                    .lantern-item {
                        position: absolute;
                        top: 0; /* Posicionamos arriba para usar vh relativo hacia abajo */
                        will-change: transform, opacity;
                        filter: drop-shadow(0 0 15px rgba(255, 160, 50, 0.6)); /* Brillo naranja */
                    }
                `}),i.map(e=>p.jsx("div",{className:"lantern-item",style:{left:e.left,fontSize:`${e.scale*2.5}rem`,animationName:"lanternFloatUp",animationDuration:e.duration,animationDelay:e.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},children:""},e.id))]})},QM=()=>{const[i,e]=j.useState([]);return j.useEffect(()=>{const t=Array.from({length:8}).map((r,a)=>({id:a,delay:Math.random()*6,duration:10+Math.random()*8,topStart:10+Math.random()*70,scale:.3+Math.random()*.5,flapSpeed:.15+Math.random()*.1}));e(t)},[]),p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-20",children:[p.jsx("svg",{width:"0",height:"0",children:p.jsx("defs",{children:p.jsxs("filter",{id:"blood-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[p.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),p.jsx("feFlood",{floodColor:"#dc2626",result:"color"}),p.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"shadow"}),p.jsxs("feMerge",{children:[p.jsx("feMergeNode",{in:"shadow"}),p.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),i.map(t=>p.jsx("div",{className:"absolute -left-[10%] animate-bat-flight",style:{top:`${t.topStart}%`,animationDelay:`${t.delay}s`,animationDuration:`${t.duration}s`,transform:`scale(${t.scale})`},children:p.jsx("svg",{width:"60",height:"35",viewBox:"0 0 100 60",className:"overflow-visible",filter:"url(#blood-glow)",children:p.jsx("path",{fill:"#000000",d:"M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z",children:p.jsx("animate",{attributeName:"d",values:`\r
                                    M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z;\r
                                    M50,35 C40,50 25,60 15,55 L20,45 C30,50 40,40 50,40 C60,40 70,50 80,45 L85,55 C75,60 60,50 50,35 Z;\r
                                    M50,30 C35,30 15,10 5,20 L10,30 C25,25 40,35 50,40 C60,35 75,25 90,30 L95,20 C85,10 65,30 50,30 Z`,dur:`${t.flapSpeed}s`,repeatCount:"indefinite",calcMode:"discrete"})})})},t.id)),p.jsx("style",{jsx:!0,children:`
                @keyframes bat-flight {
                    0% { left: -10%; transform: translateX(0) translateY(0) scale(var(--tw-scale-x)) rotate(-5deg); }
                    25% { transform: translateX(30vw) translateY(-40px) scale(var(--tw-scale-x)) rotate(5deg); }
                    50% { transform: translateX(60vw) translateY(20px) scale(var(--tw-scale-x)) rotate(-5deg); }
                    75% { transform: translateX(90vw) translateY(-30px) scale(var(--tw-scale-x)) rotate(5deg); }
                    100% { left: 110%; transform: translateX(0) translateY(0) scale(var(--tw-scale-x)) rotate(-5deg); }
                }
                .animate-bat-flight {
                    animation-name: bat-flight;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                    will-change: transform, left; /* Optimizacin de rendimiento */
                }
            `})]})},XM=()=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40vh] bg-gradient-to-t from-orange-600/20 via-orange-900/10 to-transparent animate-fire-pulse"}),p.jsx("div",{className:"absolute inset-0",children:[...Array(15)].map((i,e)=>{const t=Math.random()*4+2,r=Math.random()*100,a=5+Math.random()*5,l=Math.random()*5;return p.jsx("div",{className:"absolute bottom-[-10px] rounded-full bg-orange-400 animate-ember-rise blur-[1px]",style:{width:`${t}px`,height:`${t}px`,left:`${r}%`,opacity:0,animationDuration:`${a}s`,animationDelay:`${l}s`,boxShadow:`0 0 ${t*2}px #f97316`}},e)})}),p.jsx("style",{jsx:!0,children:`
                @keyframes fire-pulse {
                    0%, 100% { opacity: 0.6; height: 35vh; }
                    50% { opacity: 0.9; height: 45vh; }
                }
                .animate-fire-pulse { animation: fire-pulse 4s ease-in-out infinite; }

                @keyframes ember-rise {
                    0% { transform: translateY(0) translateX(0); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translateY(-40vh) translateX(20px); opacity: 0.8; }
                    100% { transform: translateY(-80vh) translateX(-20px); opacity: 0; }
                }
                .animate-ember-rise {
                    animation-name: ember-rise;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
            `})]}),JM=()=>{const i=j.useMemo(()=>Array.from({length:40}).map((e,t)=>({id:t,left:`${Math.random()*100}%`,delay:`${Math.random()*5}s`,duration:`${10+Math.random()*15}s`,size:`${2+Math.random()*4}px`,blur:`${Math.random()*2}px`,opacity:.3+Math.random()*.5})),[]);return p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0 bg-[#020617]",children:[p.jsx("div",{className:"absolute inset-0 z-0",children:i.map(e=>p.jsx("div",{className:"absolute bg-blue-100 rounded-full animate-snow-fall",style:{left:e.left,width:e.size,height:e.size,animationDelay:e.delay,animationDuration:e.duration,opacity:e.opacity,filter:`blur(${e.blur})`}},e.id))}),p.jsxs("div",{className:"absolute inset-0 border-[40px] md:border-[80px] border-[#0a0705] shadow-[inset_0_0_150px_rgba(0,0,0,1)] z-10",children:[p.jsx("div",{className:"absolute top-0 bottom-0 left-1/3 w-12 bg-[#0a0705] shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"}),p.jsx("div",{className:"absolute top-0 bottom-0 right-1/3 w-12 bg-[#0a0705] shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"}),p.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-12 bg-[#0a0705] -translate-y-1/2 shadow-[0_0_50px_rgba(0,0,0,1)] blur-[3px]"})]}),p.jsx("div",{className:"absolute top-1/4 bottom-0 left-0 w-[60vw] bg-gradient-to-r from-orange-600/30 via-orange-500/10 to-transparent blur-3xl z-20 mix-blend-screen animate-fire-flicker"}),p.jsx("div",{className:"absolute top-1/4 right-0 w-[40vw] h-[70vh] bg-gradient-to-l from-yellow-500/20 to-transparent blur-3xl z-20 mix-blend-screen"}),[...Array(6)].map((e,t)=>p.jsx("div",{className:"absolute rounded-full bg-orange-400/10 z-30 animate-float-bokeh pointer-events-none",style:{left:`${Math.random()*100}%`,bottom:`${Math.random()*60}%`,width:`${100+Math.random()*250}px`,height:`${100+Math.random()*250}px`,filter:"blur(50px)",animationDuration:`${15+Math.random()*20}s`,animationDelay:`${Math.random()*5}s`}},`bokeh-${t}`)),p.jsx("style",{jsx:!0,children:`
                @keyframes snow-fall {
                    0% { transform: translateY(-10vh) translateX(0); }
                    100% { transform: translateY(110vh) translateX(15px); }
                }
                .animate-snow-fall {
                    animation-name: snow-fall;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }

                @keyframes fire-flicker {
                    0%, 100% { opacity: 0.6; transform: scaleX(1); }
                    50% { opacity: 0.9; transform: scaleX(1.1); }
                }
                .animate-fire-flicker { animation: fire-flicker 4s ease-in-out infinite alternate; }

                @keyframes float-bokeh {
                    0%, 100% { transform: translate(0, 0); }
                    50% { transform: translate(40px, -40px); }
                }
                .animate-float-bokeh { animation: float-bokeh ease-in-out infinite alternate; }
            `})]})},WM=()=>{const i=j.useMemo(()=>{const t=Array.from({length:45}).map((l,u)=>({left:Math.random()*100,height:15+Math.random()*10,width:3+Math.random()*2,color:"#064e3b",opacity:.5,delay:Math.random()*5})),r=Array.from({length:30}).map((l,u)=>({left:Math.random()*100,height:25+Math.random()*15,width:5+Math.random()*3,color:"#022c22",opacity:.8,delay:Math.random()*5})),a=Array.from({length:15}).map((l,u)=>({left:Math.random()*100,height:40+Math.random()*25,width:8+Math.random()*4,color:"#000000",opacity:1,delay:Math.random()*5}));return{backTrees:t,midTrees:r,frontTrees:a}},[]),e=({tree:t})=>p.jsx("div",{className:"absolute bottom-0 flex flex-col items-center origin-bottom animate-sway",style:{left:`${t.left}%`,height:`${t.height}%`,width:`${t.width}%`,opacity:t.opacity,zIndex:t.zIndex,animationDelay:`${t.delay}s`,animationDuration:`${5+Math.random()*3}s`},children:p.jsx("svg",{viewBox:"0 0 100 200",preserveAspectRatio:"none",className:"w-full h-full drop-shadow-xl",children:p.jsx("path",{d:`M50,0 \r
                       L70,40 L60,40 \r
                       L80,90 L65,90 \r
                       L95,150 L80,150 \r
                       L100,200 \r
                       L0,200 \r
                       L20,150 L5,150 \r
                       L35,90 L20,90 \r
                       L40,40 L30,40 \r
                       Z`,fill:t.color})})});return p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[p.jsx("div",{className:"absolute inset-0 bottom-[5%]",children:i.backTrees.map((t,r)=>p.jsx(e,{tree:t},`back-${r}`))}),p.jsx("div",{className:"absolute inset-0 bottom-[2%]",children:i.midTrees.map((t,r)=>p.jsx(e,{tree:t},`mid-${r}`))}),p.jsx("div",{className:"absolute inset-0 bottom-[-1%]",children:i.frontTrees.map((t,r)=>p.jsx(e,{tree:t},`front-${r}`))}),p.jsx("style",{jsx:!0,children:`
                @keyframes sway {
                    0%, 100% { transform: rotate(0deg) scaleY(1); }
                    50% { transform: rotate(1.5deg) scaleY(1.02); }
                }
                .animate-sway {
                    animation-name: sway;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    transform-origin: bottom center;
                }
            `})]})},ZM=({isTimerRunning:i=!1})=>{const e=j.useMemo(()=>Array.from({length:35}).map((r,a)=>({id:`ff-${a}`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,size:`${1.5+Math.random()*3}px`,duration:`${3+Math.random()*5}s`,delay:`-${Math.random()*5}s`})),[]),t=[-75,-50,-25,0,25,50,75];return p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0 bg-[#0c0805] flex items-center justify-center",children:[p.jsxs("div",{className:`relative w-[95vw] max-w-[850px] aspect-square rounded-full border-[15px] md:border-[30px] border-[#180d06] shadow-[0_0_80px_rgba(0,0,0,0.9),inset_0_0_100px_rgba(0,0,0,0.9)] overflow-hidden transition-colors duration-1000 ${i?"bg-[#064e3b]":"bg-[#02180e]"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#022c22] via-transparent to-transparent opacity-80"}),e.map(r=>p.jsx("div",{className:`absolute rounded-full bg-yellow-200 animate-firefly transition-opacity duration-1000 ${i?"opacity-100":"opacity-30"}`,style:{left:r.left,top:r.top,width:r.size,height:r.size,boxShadow:"0 0 10px 2px rgba(253,230,138,0.8)",animationDuration:r.duration,animationDelay:r.delay}},r.id)),p.jsx("div",{className:"absolute bottom-0 w-full h-1/3 bg-[#01110a]/60 blur-[3px]",style:{clipPath:"polygon(0% 100%, 10% 40%, 30% 80%, 50% 20%, 70% 80%, 90% 30%, 100% 100%)"}})]}),p.jsx("div",{className:"absolute top-1/2 left-1/2 w-[95vw] max-w-[850px] aspect-square rounded-full",children:t.map((r,a)=>p.jsx("div",{className:"absolute top-1/2 left-1/2 w-full h-full",style:{transform:`translate(-50%, -50%) rotate(${r}deg)`},children:p.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-2 md:-mt-4 flex flex-col items-center",children:[p.jsx("div",{className:"w-1 h-3 md:h-5 bg-black/80 rounded-b-sm"}),p.jsx("div",{className:"w-4 h-4 md:w-5 md:h-5 bg-yellow-100 rounded-full animate-bulb-glow",style:{animationDelay:`${a*.4}s`}}),p.jsx("div",{className:"absolute top-4 w-16 h-16 bg-orange-500/20 rounded-full blur-xl"})]})},`bulb-${a}`))}),p.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] md:left-[-5%] w-[50vw] max-w-[450px] opacity-95 drop-shadow-[15px_15px_30px_rgba(0,0,0,1)]",children:p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#080d08] fill-current animate-sway-left origin-bottom",children:[p.jsx("path",{d:"M50,100 Q60,50 80,0",fill:"none",stroke:"currentColor",strokeWidth:"3"}),p.jsx("path",{d:"M50,90 Q20,80 30,50 Q60,60 50,90"}),p.jsx("path",{d:"M55,70 Q90,70 80,40 Q50,40 55,70"}),p.jsx("path",{d:"M60,50 Q30,30 40,10 Q70,30 60,50"}),p.jsx("path",{d:"M65,30 Q90,20 90,0 Q60,10 65,30"}),p.jsx("path",{d:"M50,100 Q10,70 20,40 Q40,60 50,100"})]})}),p.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] md:right-[-5%] w-[50vw] max-w-[450px] opacity-95 drop-shadow-[15px_15px_30px_rgba(0,0,0,1)] scale-x-[-1]",children:p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#080d08] fill-current animate-sway-right origin-bottom",children:[p.jsx("path",{d:"M50,100 Q60,50 80,0",fill:"none",stroke:"currentColor",strokeWidth:"3"}),p.jsx("path",{d:"M50,90 Q20,80 30,50 Q60,60 50,90"}),p.jsx("path",{d:"M55,70 Q90,70 80,40 Q50,40 55,70"}),p.jsx("path",{d:"M60,50 Q30,30 40,10 Q70,30 60,50"}),p.jsx("path",{d:"M65,30 Q90,20 90,0 Q60,10 65,30"}),p.jsx("path",{d:"M50,100 Q10,70 20,40 Q40,60 50,100"})]})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40vh] bg-gradient-to-t from-orange-900/40 via-orange-800/10 to-transparent mix-blend-screen blur-[40px] animate-fire-base"}),p.jsx("style",{jsx:!0,children:`
                /* Movimiento de las lucirnagas */
                @keyframes firefly {
                    0% { transform: translate(0, 0) scale(1); }
                    100% { transform: translate(20px, -40px) scale(1.5); }
                }
                .animate-firefly { animation: firefly 4s ease-in-out infinite alternate; }

                /* Resplandor intermitente de las bombillas */
                @keyframes bulb-glow {
                    0%, 100% { opacity: 0.7; transform: scale(1); box-shadow: 0 0 15px 2px rgba(249,115,22,0.4); }
                    50% { opacity: 1; transform: scale(1.1); box-shadow: 0 0 25px 8px rgba(249,115,22,0.8); }
                }
                .animate-bulb-glow { animation: bulb-glow 3s infinite alternate; }

                /* Mecer natural de las plantas */
                @keyframes sway-left {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(-3deg); }
                }
                .animate-sway-left { animation: sway-left 6s ease-in-out infinite; }

                @keyframes sway-right {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(3deg); }
                }
                .animate-sway-right { animation: sway-right 7s ease-in-out infinite; }

                /* Latido del fuego base */
                @keyframes fire-base {
                    0%, 100% { opacity: 0.5; }
                    50% { opacity: 0.8; }
                }
                .animate-fire-base { animation: fire-base 5s ease-in-out infinite alternate; }
            `})]})},ek=()=>p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[[...Array(5)].map((i,e)=>p.jsx("svg",{viewBox:"0 0 100 125",className:"fixed bottom-[-150px] fill-white/10 drop-shadow-[0_0_15px_rgba(200,220,255,0.6)] animate-floatGhost",style:{left:`${Math.random()*80+10}vw`,width:`${Math.random()*50+50}px`,animationDuration:`${Math.random()*15+10}s`,animationDelay:`${Math.random()*10}s`},children:p.jsx("path",{d:"M10 115 C 10 115, 10 95, 20 95 C 30 95, 30 115, 30 115 C 30 115, 30 95, 40 95 C 50 95, 50 115, 50 115 C 50 115, 50 95, 60 95 C 70 95, 70 115, 70 115 C 70 115, 70 95, 80 95 C 90 95, 90 115, 90 115 L 90 60 C 90 20, 50 10, 50 10 C 50 10, 10 20, 10 60 Z M 30 60 C 35 60, 35 50, 30 50 C 25 50, 25 60, 30 60 Z M 70 60 C 75 60, 75 50, 70 50 C 65 50, 65 60, 70 60 Z"})},e)),p.jsx("style",{children:`
            @keyframes floatGhost { 
                0% { transform: translateY(0) scale(1); opacity: 0; } 
                20% { opacity: 0.6; } 
                100% { transform: translateY(-120vh) scale(1.1); opacity: 0; } 
            } 
            .animate-floatGhost { 
                animation-name: floatGhost; 
                animation-timing-function: ease-in-out; 
                animation-iteration-count: infinite; 
            }
        `})]}),tk=()=>p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(30)].map((i,e)=>p.jsx("div",{className:"absolute rounded-full bg-pink-400 animate-pulse",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,width:`${Math.random()*4+1}px`,height:`${Math.random()*4+1}px`,opacity:Math.random()*.6+.2,animationDuration:`${Math.random()*3+2}s`,boxShadow:"0 0 6px 2px rgba(244, 114, 182, 0.4)"}},`dust-${e}`)),[...Array(15)].map((i,e)=>p.jsx("div",{className:"absolute text-pink-300 opacity-40 animate-floatUp",style:{top:`${Math.random()*100+10}%`,left:`${Math.random()*100}%`,fontSize:`${Math.random()*10+10}px`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,textShadow:"0 0 5px rgba(236, 72, 153, 0.5)"},children:["","",""][Math.floor(Math.random()*3)]},`heart-${e}`)),p.jsx("style",{children:`
                @keyframes floatUp {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    20% { opacity: 0.6; }
                    80% { opacity: 0.6; }
                    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
                }
                .animate-floatUp {
                    animation-name: floatUp;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
             `})]}),nk=()=>{const i=["#f44336","#4caf50","#2196f3","#ffeb3b"];return p.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:[...Array(40)].map((e,t)=>p.jsx("div",{className:"absolute rounded-full animate-pulse",style:{top:`${Math.random()*100}vh`,left:`${Math.random()*100}vw`,width:"10px",height:"10px",backgroundColor:i[t%i.length],boxShadow:`0 0 15px 5px ${i[t%i.length]}66`,animationDuration:"2s",animationDelay:`${Math.random()}s`}},t))})},rk=()=>p.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-[#050a14]",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-slate-900 to-[#2a0a3b]"}),p.jsx("div",{className:"absolute top-[20%] left-1/2 -translate-x-1/2 w-[50vh] h-[50vh] rounded-full bg-gradient-to-t from-fuchsia-600 to-yellow-400 blur-[60px] opacity-60"}),p.jsx("div",{className:"cyber-grid"}),p.jsx("div",{className:"city-skyline"}),p.jsx("style",{children:`
                .cyber-grid {
                    position: absolute;
                    width: 200%;
                    height: 100%;
                    bottom: -50%;
                    left: -50%;
                    background-image: 
                        linear-gradient(rgba(6, 182, 212, 0.5) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(6, 182, 212, 0.5) 1px, transparent 1px);
                    background-size: 50px 50px;
                    transform: perspective(300px) rotateX(60deg);
                    animation: gridMove 4s linear infinite;
                    box-shadow: 0 0 150px rgba(6, 182, 212, 0.3);
                }

                .city-skyline {
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    height: 25%;
                    background: repeating-linear-gradient(
                        90deg,
                        #000 0px,
                        #000 15px,
                        transparent 15px,
                        transparent 25px
                    );
                    opacity: 0.8;
                    filter: drop-shadow(0 0 15px #d946ef);
                    z-index: -1;
                }

                @keyframes gridMove {
                    0% { transform: perspective(300px) rotateX(60deg) translateY(0); }
                    100% { transform: perspective(300px) rotateX(60deg) translateY(50px); }
                }
            `})]}),sk=()=>p.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-pink-50",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-200 via-orange-100 to-purple-200 animate-gradient-xy opacity-80"}),[...Array(15)].map((i,e)=>p.jsx("div",{className:"absolute text-pink-300/40 animate-float-neko",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,fontSize:`${Math.random()*3+2}rem`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,transform:`rotate(${Math.random()*45}deg)`},children:""},e)),p.jsx("style",{children:`
                @keyframes gradient-xy {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                }
                .animate-gradient-xy {
                    background-size: 200% 200%;
                    animation: gradient-xy 15s ease infinite;
                }
                @keyframes float-neko {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    50% { opacity: 0.6; }
                    100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
                }
                .animate-float-neko {
                    animation-name: float-neko;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                }
            `})]}),ik=()=>{const i=["","","","","","","",""];return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(35)].map((e,t)=>p.jsx("div",{className:"absolute animate-fallTopToBottom opacity-70",style:{left:Math.random()*100+"%",top:"-10%",fontSize:Math.random()*1.5+1+"rem",animationDuration:Math.random()*5+4+"s",animationDelay:Math.random()*5+"s",transform:`rotate(${Math.random()*360}deg)`},children:i[Math.floor(Math.random()*i.length)]},t)),p.jsx("style",{children:"@keyframes fallTopToBottom { 0% { transform: translateY(0); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(110vh); opacity: 0; } } .animate-fallTopToBottom { animation-name: fallTopToBottom; animation-timing-function: linear; animation-iteration-count: infinite; }"})]})},ak=({themeClasses:i,activeEffect:e})=>{const t={lofi_notes:qM,cozy_lights:VM,lanterns:YM,mystic_fog:jM,forest:Kw,forest_flora:Kw,golden_dust:BM,shooting_stars:zM,snow_effect:OM,matrix_effect:KM,ghost:ek,valentine_hearts:tk,lights:nk,rain:HM,neon_grid:rk,neko_pattern:sk,cozy_fireplace:XM,vampire_bats:QM,lofi_ambience:JM,pine_forest:WM,cozy_ambience:ZM,mickey_confetti:ik};j.useEffect(()=>{const a=document.body;a.style.background="",a.style.backgroundImage="",a.style.cursor="";const l=document.getElementById("theme-custom-css");if(l&&l.remove(),a.className=`${i.bodyBg||"bg-gray-900"} min-h-screen transition-colors duration-500`,i.rawBg&&(a.style.background=i.rawBg,a.style.backgroundAttachment="fixed",a.style.backgroundSize="cover"),i.customCss){const u=document.createElement("style");u.id="theme-custom-css",u.innerHTML=`body { ${i.customCss} }`,document.head.appendChild(u)}else if(i.name==="neko"){const u=`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ff69b4" stroke="white" stroke-width="1.5"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto`;a.style.cursor=u}},[i]);const r=()=>{const a=[...i.activeEffects||[]];return e&&!a.includes(e)&&a.push(e),p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),a.map(l=>{const u=t[l];return u?p.jsx(u,{},l):null})]})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 pointer-events-none -z-10 mix-blend-overlay opacity-[0.05]",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),p.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:r()}),i.name==="lofi"&&p.jsx($M,{})]})},ok=j.lazy(()=>Uu(()=>import("./SalaryCalculatorModal-EcW9L634.js"),[])),lk=j.lazy(()=>Uu(()=>import("./IdeasModal-xQ0kOvln.js"),[])),ck=j.lazy(()=>Uu(()=>import("./MarketplaceModal-CrNHxFy2.js"),[])),uk=j.lazy(()=>Uu(()=>import("./QuizModal-CzU_929a.js"),[])),dk=j.lazy(()=>Uu(()=>import("./AvailabilityModal-IP5ZS5GE.js"),[])),hk=()=>{const{user:i,loading:e}=X4(),[t,r]=j.useState(null),[a,l]=j.useState(!1);if(j.useEffect(()=>{i&&(async()=>{try{const g=at(Oe,"users",i.uid),y=await Hf(g);if(y.exists())r(y.data());else{const v={uid:i.uid,email:i.email,userName:i.displayName||i.email.split("@")[0],role:"agent",team:"default",createdAt:Date.now(),photoURL:i.photoURL||null};await setDoc(g,v),r(v),console.log("Perfil de usuario fantasma creado automticamente.")}}catch(g){console.error("Error fetching/creating user role",g)}})()},[i]),e)return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:"Loading Nexus OS..."});if(!i)return p.jsx(vM,{});const u=t&&(t.role==="admin"||t.role==="team_leader");return u&&a?p.jsx(_M,{onLogout:()=>l(!1),currentUserTeam:t.team||"default",isAdmin:t.role==="admin"}):p.jsx(fk,{user:i,loading:e,isLeader:u,onOpenDashboard:()=>l(!0),userProfile:t})},fk=({user:i,loading:e,isLeader:t,onOpenDashboard:r,userProfile:a})=>{const l=i,{balance:u,addCoins:f,spendCoins:g}=Y4(i),[y,v]=ei("config","hourlyRate","",l?i:null),[w,T]=ei("config","weeklyGoal",10,l?i:null),[R,L]=ei("data","inventory",["default"],l?i:null);ei("data","lastLoginBonus",null,l?i:null);const[X,F]=ei("data","lastWeeklyBonus","",l?i:null),[H,ee]=ei("config","pet",null,l?i:null),[Y,le]=ei("config","effect",null,l?i:null),[ae,he]=ei("config","border",null,l?i:null),[S,A]=j.useState("tasks"),[N,O]=j.useState(""),[D,P]=j.useState(zu()),[C,me]=j.useState(zu()),[de,q]=j.useState([]),[oe,be]=j.useState(null),Ve=j.useRef(!1);j.useEffect(()=>{a&&!Ve.current&&(a.currentSkin&&be(a.currentSkin),Ve.current=!0)},[a]);const[Pe,M]=j.useState(!1),[ne,ue]=j.useState(!1),[ve,se]=j.useState(!1),[ge,Ie]=j.useState(!1),[rt,Ge]=j.useState(!1),[Tt,Xn]=j.useState(!1),[vn,cr]=j.useState(null),[Jn,Cs]=j.useState([]),[Cn,Rs]=j.useState([]),[Tr,Rt]=j.useState({}),[yt,Lr]=j.useState("monday"),mi=tM(J4,de,be,oe),{strategy:Ye,message:Zt,isUnlocked:zr,weeklyHoursWorked:Ds}=mi,is=W4(l?i:null),{tasks:Rn,addTask:Ta,addMultipleTasks:Ur,deleteTask:as,deleteAllTasks:Ms,toggleTimer:Bn,updateTaskDetails:Bt,resetTaskTimer:Dn,stopAllTimers:At,statusMessage:pi,resumeStoppedTimers:Er,clearStatusMessage:os,syncTasksTime:Fn,errorMessage:Br,setErrorMessage:Dt,distributeTasksTime:qn,sortTasksByShop:Mn}=is,{handleGenerate:xn}=sM(i,Rn,At,f,a),ks=async(we,ze={})=>{try{await bu(In(Oe,"app_analytics"),{eventName:we,uid:i.uid,timestamp:Date.now(),data:ze})}catch(It){console.error("Log error",It)}};j.useEffect(()=>{if(!i)return;const we=ws(In(Oe,"news_ticker"),El("createdAt","desc"),xw(5)),ze=es(we,cn=>Cs(cn.docs.map(en=>({id:en.id,...en.data()})))),It=es(ws(In(Oe,"training_modules"),Wi("active","==",!0)),cn=>Rs(cn.docs.map(en=>({id:en.id,...en.data()})))),bt=es(at(Oe,"users",i.uid),cn=>{cn.exists()&&Rt(cn.data().quizProgress||{})}),ls=ws(In(Oe,"daily_reports"),Wi("uid","==",i.uid),El("date","desc"),xw(45)),kn=es(ls,cn=>{const en=cn.docs.map(tn=>{const te=tn.data();let xe=te.date;if(!xe&&tn.id.includes("_")){const Me=tn.id.match(/(\d{4}-\d{2}-\d{2})/);Me&&(xe=Me[0])}if(!xe&&te.timestamp&&(xe=new Date(te.timestamp).toLocaleDateString("en-CA")),!xe)return null;let _e=te.report||te.content||te.text||te.body;if(!_e&&te.taskBreakdown){const Me=Array.isArray(te.taskBreakdown)?te.taskBreakdown:[],Nt=Ze=>{if(!Ze||isNaN(Ze))return"00:00:00";const un=Math.floor(Ze/1e3%60),qe=Math.floor(Ze/(1e3*60)%60);return`${Math.floor(Ze/(1e3*60*60)).toString().padStart(2,"0")}:${qe.toString().padStart(2,"0")}:${un.toString().padStart(2,"0")}`},Et=Me.reduce((Ze,un)=>Ze+(un.elapsedTime||0),0);_e=` REPORTE RECUPERADO (${xe})

 Tiempo Total Real: ${Nt(Et)}
 Tareas Realizadas: ${Me.length}
-----------------------------------
`,Me.length>0?_e+=Me.map(Ze=>` ${Ze.name||Ze.text||"Tarea"} (${Ze.timeFormatted||Nt(Ze.elapsedTime)})`).join(`
`):_e+="Sin detalles."}return{id:xe,content:_e||"Datos ilegibles"}}).filter(Boolean);q(en)},cn=>console.warn("Index warning:",cn));return()=>{ze(),It(),bt(),kn()}},[i]),j.useEffect(()=>{if(i&&Ye.name){const we=setTimeout(()=>{yr(at(Oe,"users",i.uid),{currentSkin:Ye.name}).catch(ze=>console.log("Skin sync skip",ze))},2e3);return()=>clearTimeout(we)}},[Ye.name,i]);const Fr=j.useMemo(()=>{if(Cn.length===0)return{isGraduated:!1,isRusted:!1};let we=0,ze=!1;return Cn.forEach(It=>{const bt=Tr[It.id];bt&&bt.passed&&(we++,bt.version<It.version&&(ze=!0))}),{isGraduated:we===Cn.length,isRusted:ze}},[Cn,Tr]);j.useEffect(()=>{const we="min-h-screen transition-colors duration-500",ze=`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ff69b4" stroke="%23ffffff" stroke-width="1.5"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto`;Ye.rawBg?(document.body.className=we,document.body.style.background=Ye.rawBg,document.body.style.backgroundAttachment="fixed",document.body.style.backgroundSize="cover"):(document.body.className=`${Ye.bodyBg||"bg-gray-900"} ${we}`,document.body.style.background=""),Ye.name==="neko"?document.body.style.cursor=ze:document.body.style.cursor="auto"},[Ye]);const Wn=async we=>{const ze=vn.id,It=vn.version||1;try{await yr(at(Oe,"users",i.uid),{[`quizProgress.${ze}`]:{passed:!0,version:It,completedAt:Date.now()}}),f(we),alert(` FELICIDADES!
Has completado el mdulo.`),ks("QUIZ_COMPLETE",{quizId:vn.id,reward:we}),cr(null)}catch(bt){console.error(bt)}},qr=()=>{const we=Ye?.name||"default";xn(C,we,(ze,It)=>{O(ze);const bt={id:C,content:ze};q(ls=>[bt,...ls.filter(kn=>kn.id!==C)]),M(!1)})},Ea=()=>{const we=Xg();if(X===we){alert("Ya has cobrado!");return}f(100),F(we),alert(` FELICIDADES!
Meta semanal cumplida. +100 Coins.`)},Hr=X===Xg(),Os=()=>Ie(!1),Vs=we=>{if(g(we.price)){const ze=[...R||[],we.id];L(ze),yr(at(Oe,"users",i.uid),{walletBalance:u-we.price,inventory:ze}).catch(It=>console.error(It)),ks("SHOP_BUY",{item:we.id}),alert("Item adquirido correctamente!")}else alert("No tienes suficientes Lofi Coins.")},gn=j.useRef(null),zt=j.useRef(null),gi=we=>{switch(gn.current&&(clearTimeout(gn.current),gn.current=null,zt.current=null),we.category){case"theme":be(we.id);break;case"pet":ee(H===we.id?null:we.id);break;case"effect":le(Y===we.id?null:we.id);break;case"border":he(ae===we.id?null:we.id);break;default:be(we.id)}},Hn=we=>{let ze=we.category,It,bt;if(ze==="theme")It=oe,bt=be;else if(ze==="border")It=ae,bt=he;else if(ze==="effect")It=Y,bt=le;else return;gn.current?zt.current&&zt.current.category!==ze&&(zt.current.setter(zt.current.value),zt.current={category:ze,value:It,setter:bt}):zt.current={category:ze,value:It,setter:bt},gn.current&&clearTimeout(gn.current),bt(we.id),gn.current=setTimeout(()=>{zt.current&&zt.current.category===ze&&bt(zt.current.value),gn.current=null,zt.current=null},7e3)},Gn=()=>{if(!ae)return"";const we=jn[ae];return we?we.borderClass:""};j.useEffect(()=>{if(ae&&jn[ae]?.customCss){const we=document.createElement("style");return we.id="border-custom-css",we.innerHTML=jn[ae].customCss,document.head.appendChild(we),()=>{const ze=document.getElementById("border-custom-css");ze&&ze.remove()}}},[ae]);const Vt=Ye.name==="halloween"?"glow-card":"",Ft=j.useMemo(()=>{const we=de.find(ze=>ze.id===D);return we?we.content:null},[de,D]);return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),p.jsx(RM,{news:Jn}),Fr.isGraduated&&p.jsxs("div",{className:"fixed top-12 left-4 z-40 flex flex-col items-center animate-fadeIn",children:[p.jsx("div",{className:`text-4xl ${Fr.isRusted?"grad-badge-rust":"grad-badge-glow"}`,title:Fr.isRusted?"Certificacin Vencida":"Agente Certificado",children:""}),Fr.isRusted&&p.jsx("span",{className:"text-[9px] bg-red-600 text-white px-1 rounded animate-bounce",children:"UPDATE"})]}),p.jsx(DM,{isLeader:t,onOpenDashboard:r,onOpenIdeas:()=>Ge(!0),onOpenAvailability:()=>Xn(!0),setIdeaType:Lr}),p.jsxs(j.Suspense,{fallback:p.jsx("div",{className:"fixed inset-0 z-[200] pointer-events-none"}),children:[p.jsx(lk,{isOpen:rt,onClose:()=>Ge(!1),user:i,userProfile:a,initialType:yt}),p.jsx(dk,{isOpen:Tt,onClose:()=>Xn(!1),user:i,userProfile:a,addCoins:f,logEvent:ks}),vn&&p.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:p.jsx(uk,{isOpen:!0,quiz:vn,onClose:()=>cr(null),onComplete:Wn,user:i})}),p.jsx(ok,{isOpen:ne,onClose:()=>ue(!1),pastReports:de,hourlyRate:y,setHourlyRate:v,themeClasses:Ye}),p.jsx(ck,{isOpen:ge,onClose:Os,userCoins:u,ownedItems:R,currentTheme:Ye.name,activePet:H,activeBorder:ae,activeEffect:Y,onBuy:Vs,onEquip:gi,onPreview:Hn})]}),p.jsx("div",{className:"relative z-50",children:p.jsx(vS,{user:i})}),p.jsx(ak,{themeClasses:Ye,activeEffect:Y}),p.jsx(EM,{message:pi,resumeAction:Er,dismissAction:os}),p.jsx(wM,{coins:u||0,onOpenShop:()=>Ie(!0)}),p.jsx(CM,{onClick:()=>ue(!0)}),p.jsx(MM,{isOpen:Pe,onClose:()=>M(!1),onGenerate:qr,tasks:Rn,syncTasksTime:Fn,distributeTasksTime:qn,themeClasses:Ye,selectedReportDate:C,setSelectedReportDate:me,pastReports:de}),p.jsx(kM,{isOpen:ve,onClose:()=>se(!1),onConfirm:()=>{Ms(),se(!1),M(!1)},themeClasses:Ye}),p.jsx("div",{className:"app-container relative z-10 flex flex-col items-center justify-center py-10 mt-8",children:p.jsx("div",{className:"relative w-11/12 max-w-xl mt-8",children:p.jsxs("div",{className:`w-full rounded-2xl shadow-2xl p-4 sm:p-8 pt-8 sm:pt-12 transition-all duration-500 ${Ye.cardBg} min-h-[85vh] relative ${Vt} ${Gn()} app-card`,children:[Ye.activeEffects&&Ye.activeEffects.includes("spiderweb")&&p.jsx(GM,{}),p.jsxs("div",{className:"relative z-20 space-y-6 h-full flex flex-col",children:[p.jsx(TM,{themeClasses:Ye,celebrationMessage:Zt}),Cn.length>0&&p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Cn.map(we=>{const ze=Tr[we.id],It=ze?.passed,bt=It&&ze.version<we.version;return It&&!bt?null:p.jsxs("button",{onClick:()=>cr(we),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap border ${bt?"bg-red-900/30 border-red-500 text-red-300":"bg-indigo-900/30 border-indigo-500 text-indigo-300"}`,children:[p.jsx("span",{children:""})," ",bt?"UPDATE:":"NUEVO:"," ",we.title," (+",we.reward,")"]},we.id)})}),p.jsx(NM,{isUnlocked:zr,weeklyHours:Ds,targetHours:w,setTargetHours:T,onClaimBonus:Ea,bonusClaimed:Hr}),p.jsxs("div",{className:"flex justify-center gap-4 border-b border-white/10 pb-2 mb-2",children:[p.jsx("button",{onClick:()=>A("tasks"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="tasks"?"bg-white/20 text-white":"text-slate-400"}`,children:" TAREAS"}),p.jsx("button",{onClick:()=>A("history"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="history"?"bg-white/20 text-white":"text-slate-400"}`,children:" HISTORIAL"})]}),S==="tasks"&&p.jsxs("div",{className:"flex-1 flex flex-col gap-4 animate-fadeIn",children:[p.jsx(SM,{addTask:Ta,addMultipleTasks:Ur,errorMessage:Br,setErrorMessage:Dt,themeClasses:Ye}),Rn.length>0&&p.jsxs("div",{className:"flex items-center justify-between gap-3 px-1 mb-1 animate-fadeIn",children:[p.jsxs("button",{onClick:Mn,className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-600 text-slate-300 text-xs font-bold uppercase tracking-wider rounded-full border border-slate-600 hover:border-slate-400 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[p.jsx("span",{children:""})," Ordenar por Tienda"]}),p.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-red-900/30 hover:bg-red-800 text-red-400 hover:text-red-100 text-xs font-bold uppercase tracking-wider rounded-full border border-red-900 hover:border-red-500 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[p.jsx("span",{children:""})," Limpiar Todo"]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto task-scroll pr-2 space-y-3 min-h-[50vh] max-h-[65vh] border border-white/5 rounded-xl p-2 bg-black/10",children:Rn.length>0?Rn.map(we=>p.jsx(AM,{task:we,toggleTimer:Bn,deleteTask:as,updateTaskDetails:Bt,themeClasses:Ye,resetTaskTimer:Dn,celebrationThemeName:Ye.name},we.id)):p.jsx("p",{className:`text-center italic mt-10 ${Ye.secondaryText}`,children:"No hay tareas activas."})}),p.jsxs("div",{className:"flex flex-col items-center w-full bg-black/20 p-4 rounded-xl border border-white/5 mt-auto",children:[p.jsx("button",{type:"button",onClick:()=>M(!0),className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${Ye.buttonAction}`,children:"Generar E.O.D.R."}),p.jsx($w,{content:N,themeClasses:Ye,placeholder:"El reporte aparecer aqu..."})]})]}),S==="history"&&p.jsx("div",{className:"flex-1 flex flex-col gap-6 animate-fadeIn",children:p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:`text-2xl font-bold text-center ${Ye.primaryText}`,children:"Calendario de Reportes"}),p.jsx(IM,{reports:de,selectedDate:D,onSelectDate:P,themeClasses:Ye}),p.jsxs("h3",{className:`font-bold mb-2 text-center ${Ye.accentText}`,children:["Reporte del: ",D.split("-").reverse().join("/")]}),p.jsx($w,{content:Ft,themeClasses:Ye,placeholder:"No hay reporte guardado para este da."})]})})]})]})})})]})};lI.createRoot(document.getElementById("root")).render(p.jsx(j.StrictMode,{children:p.jsx(hk,{})}));export{yk as M,zu as a,In as b,mk as c,Oe as d,lg as e,bu as f,JA as g,eM as h,at as i,p as j,Hf as k,xM as m,El as o,gk as p,ws as q,j as r,ua as s,Y4 as u,Wi as w};
