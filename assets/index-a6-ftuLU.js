(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var ck=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fp={exports:{}},Kc={};var Mv;function WA(){if(Mv)return Kc;Mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Kc.Fragment=e,Kc.jsx=t,Kc.jsxs=t,Kc}var kv;function ZA(){return kv||(kv=1,Fp.exports=WA()),Fp.exports}var g=ZA(),qp={exports:{}},Le={};var Ov;function eI(){if(Ov)return Le;Ov=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),w=Symbol.iterator;function C(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,q={};function G(M,ne,ue){this.props=M,this.context=ne,this.refs=q,this.updater=ue||L}G.prototype.isReactComponent={},G.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},G.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ee(){}ee.prototype=G.prototype;function Y(M,ne,ue){this.props=M,this.context=ne,this.refs=q,this.updater=ue||L}var le=Y.prototype=new ee;le.constructor=Y,X(le,G.prototype),le.isPureReactComponent=!0;var ae=Array.isArray;function he(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(M,ne,ue){var ve=ue.ref;return{$$typeof:s,type:M,key:ne,ref:ve!==void 0?ve:null,props:ue}}function O(M,ne){return N(M.type,ne,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function j(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return ne[ue]})}var R=/\/+/g;function me(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):ne.toString(36)}function de(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(he,he):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,ne,ue,ve,ie){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var Ie=!1;if(M===null)Ie=!0;else switch(ge){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(M.$$typeof){case s:case e:Ie=!0;break;case v:return Ie=M._init,F(Ie(M._payload),ne,ue,ve,ie)}}if(Ie)return ie=ie(M),Ie=ve===""?"."+me(M,0):ve,ae(ie)?(ue="",Ie!=null&&(ue=Ie.replace(R,"$&/")+"/"),F(ie,ne,ue,"",function(wt){return wt})):ie!=null&&(D(ie)&&(ie=O(ie,ue+(ie.key==null||M&&M.key===ie.key?"":(""+ie.key).replace(R,"$&/")+"/")+Ie)),ne.push(ie)),1;Ie=0;var rt=ve===""?".":ve+":";if(ae(M))for(var Ge=0;Ge<M.length;Ge++)ve=M[Ge],ge=rt+me(ve,Ge),Ie+=F(ve,ne,ue,ge,ie);else if(Ge=C(M),typeof Ge=="function")for(M=Ge.call(M),Ge=0;!(ve=M.next()).done;)ve=ve.value,ge=rt+me(ve,Ge++),Ie+=F(ve,ne,ue,ge,ie);else if(ge==="object"){if(typeof M.then=="function")return F(de(M),ne,ue,ve,ie);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function oe(M,ne,ue){if(M==null)return M;var ve=[],ie=0;return F(M,ve,"","",function(ge){return ne.call(ue,ge,ie++)}),ve}function be(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:oe,forEach:function(M,ne,ue){oe(M,function(){ne.apply(this,arguments)},ue)},count:function(M){var ne=0;return oe(M,function(){ne++}),ne},toArray:function(M){return oe(M,function(ne){return ne})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Le.Activity=T,Le.Children=Pe,Le.Component=G,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=Y,Le.StrictMode=r,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return S.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(M,ne,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ve=X({},M.props),ie=M.key;if(ne!=null)for(ge in ne.key!==void 0&&(ie=""+ne.key),ne)!A.call(ne,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&ne.ref===void 0||(ve[ge]=ne[ge]);var ge=arguments.length-2;if(ge===1)ve.children=ue;else if(1<ge){for(var Ie=Array(ge),rt=0;rt<ge;rt++)Ie[rt]=arguments[rt+2];ve.children=Ie}return N(M.type,ie,ve)},Le.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Le.createElement=function(M,ne,ue){var ve,ie={},ge=null;if(ne!=null)for(ve in ne.key!==void 0&&(ge=""+ne.key),ne)A.call(ne,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(ie[ve]=ne[ve]);var Ie=arguments.length-2;if(Ie===1)ie.children=ue;else if(1<Ie){for(var rt=Array(Ie),Ge=0;Ge<Ie;Ge++)rt[Ge]=arguments[Ge+2];ie.children=rt}if(M&&M.defaultProps)for(ve in Ie=M.defaultProps,Ie)ie[ve]===void 0&&(ie[ve]=Ie[ve]);return N(M,ge,ie)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:f,render:M}},Le.isValidElement=D,Le.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:be}},Le.memo=function(M,ne){return{$$typeof:y,type:M,compare:ne===void 0?null:ne}},Le.startTransition=function(M){var ne=S.T,ue={};S.T=ue;try{var ve=M(),ie=S.S;ie!==null&&ie(ue,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(he,Ve)}catch(ge){Ve(ge)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),S.T=ne}},Le.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Le.use=function(M){return S.H.use(M)},Le.useActionState=function(M,ne,ue){return S.H.useActionState(M,ne,ue)},Le.useCallback=function(M,ne){return S.H.useCallback(M,ne)},Le.useContext=function(M){return S.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,ne){return S.H.useDeferredValue(M,ne)},Le.useEffect=function(M,ne){return S.H.useEffect(M,ne)},Le.useEffectEvent=function(M){return S.H.useEffectEvent(M)},Le.useId=function(){return S.H.useId()},Le.useImperativeHandle=function(M,ne,ue){return S.H.useImperativeHandle(M,ne,ue)},Le.useInsertionEffect=function(M,ne){return S.H.useInsertionEffect(M,ne)},Le.useLayoutEffect=function(M,ne){return S.H.useLayoutEffect(M,ne)},Le.useMemo=function(M,ne){return S.H.useMemo(M,ne)},Le.useOptimistic=function(M,ne){return S.H.useOptimistic(M,ne)},Le.useReducer=function(M,ne,ue){return S.H.useReducer(M,ne,ue)},Le.useRef=function(M){return S.H.useRef(M)},Le.useState=function(M){return S.H.useState(M)},Le.useSyncExternalStore=function(M,ne,ue){return S.H.useSyncExternalStore(M,ne,ue)},Le.useTransition=function(){return S.H.useTransition()},Le.version="19.2.4",Le}var Vv;function Jg(){return Vv||(Vv=1,qp.exports=eI()),qp.exports}var P=Jg();const tI=JA(P);var Hp={exports:{}},Yc={},Gp={exports:{}},$p={};var jv;function nI(){return jv||(jv=1,(function(s){function e(F,oe){var be=F.length;F.push(oe);e:for(;0<be;){var Ve=be-1>>>1,Pe=F[Ve];if(0<a(Pe,oe))F[Ve]=oe,F[be]=Pe,be=Ve;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var oe=F[0],be=F.pop();if(be!==oe){F[0]=be;e:for(var Ve=0,Pe=F.length,M=Pe>>>1;Ve<M;){var ne=2*(Ve+1)-1,ue=F[ne],ve=ne+1,ie=F[ve];if(0>a(ue,be))ve<Pe&&0>a(ie,ue)?(F[Ve]=ie,F[ve]=be,Ve=ve):(F[Ve]=ue,F[ne]=be,Ve=ne);else if(ve<Pe&&0>a(ie,be))F[Ve]=ie,F[ve]=be,Ve=ve;else break e}}return oe}function a(F,oe){var be=F.sortIndex-oe.sortIndex;return be!==0?be:F.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var p=[],y=[],v=1,T=null,w=3,C=!1,L=!1,X=!1,q=!1,G=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function le(F){for(var oe=t(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=F)r(y),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(y)}}function ae(F){if(X=!1,le(F),!L)if(t(p)!==null)L=!0,he||(he=!0,j());else{var oe=t(y);oe!==null&&de(ae,oe.startTime-F)}}var he=!1,S=-1,A=5,N=-1;function O(){return q?!0:!(s.unstable_now()-N<A)}function D(){if(q=!1,he){var F=s.unstable_now();N=F;var oe=!0;try{e:{L=!1,X&&(X=!1,ee(S),S=-1),C=!0;var be=w;try{t:{for(le(F),T=t(p);T!==null&&!(T.expirationTime>F&&O());){var Ve=T.callback;if(typeof Ve=="function"){T.callback=null,w=T.priorityLevel;var Pe=Ve(T.expirationTime<=F);if(F=s.unstable_now(),typeof Pe=="function"){T.callback=Pe,le(F),oe=!0;break t}T===t(p)&&r(p),le(F)}else r(p);T=t(p)}if(T!==null)oe=!0;else{var M=t(y);M!==null&&de(ae,M.startTime-F),oe=!1}}break e}finally{T=null,w=be,C=!1}oe=void 0}}finally{oe?j():he=!1}}}var j;if(typeof Y=="function")j=function(){Y(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,me=R.port2;R.port1.onmessage=D,j=function(){me.postMessage(null)}}else j=function(){G(D,0)};function de(F,oe){S=G(function(){F(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(F){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var be=w;w=oe;try{return F()}finally{w=be}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(F,oe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var be=w;w=F;try{return oe()}finally{w=be}},s.unstable_scheduleCallback=function(F,oe,be){var Ve=s.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ve+be:Ve):be=Ve,F){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=be+Pe,F={id:v++,callback:oe,priorityLevel:F,startTime:be,expirationTime:Pe,sortIndex:-1},be>Ve?(F.sortIndex=be,e(y,F),t(p)===null&&F===t(y)&&(X?(ee(S),S=-1):X=!0,de(ae,be-Ve))):(F.sortIndex=Pe,e(p,F),L||C||(L=!0,he||(he=!0,j()))),F},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(F){var oe=w;return function(){var be=w;w=oe;try{return F.apply(this,arguments)}finally{w=be}}}})($p)),$p}var Pv;function rI(){return Pv||(Pv=1,Gp.exports=nI()),Gp.exports}var Kp={exports:{}},On={};var Lv;function iI(){if(Lv)return On;Lv=1;var s=Jg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,y,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:y,implementation:v}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,On.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,v)},On.flushSync=function(p){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=y,r.p=v,r.d.f()}},On.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},On.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},On.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,T=f(v,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:C}):v==="script"&&r.d.X(p,{crossOrigin:T,integrity:w,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},On.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},On.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,T=f(v,y.crossOrigin);r.d.L(p,v,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},On.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=f(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},On.requestFormReset=function(p){r.d.r(p)},On.unstable_batchedUpdates=function(p,y){return p(y)},On.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},On.useFormStatus=function(){return u.H.useHostTransitionStatus()},On.version="19.2.4",On}var Uv;function sI(){if(Uv)return Kp.exports;Uv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Kp.exports=iI(),Kp.exports}var zv;function aI(){if(zv)return Yc;zv=1;var s=rI(),e=Jg(),t=sI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return p(h),n;if(m===c)return p(h),i;m=m.sibling}throw Error(r(188))}if(o.return!==c.return)o=h,c=m;else{for(var _=!1,E=h.child;E;){if(E===o){_=!0,o=h,c=m;break}if(E===c){_=!0,c=h,o=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===o){_=!0,o=m,c=h;break}if(E===c){_=!0,c=m,o=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case G:return"Profiler";case q:return"StrictMode";case ae:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case Y:return n.displayName||"Context";case ee:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return i=n.displayName||null,i!==null?i:me(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return me(n(i))}catch{}}return null}var de=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Ve=[],Pe=-1;function M(n){return{current:n}}function ne(n){0>Pe||(n.current=Ve[Pe],Ve[Pe]=null,Pe--)}function ue(n,i){Pe++,Ve[Pe]=n.current,n.current=i}var ve=M(null),ie=M(null),ge=M(null),Ie=M(null);function rt(n,i){switch(ue(ge,i),ue(ie,n),ue(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?tv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=tv(i),n=nv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(ve),ue(ve,n)}function Ge(){ne(ve),ne(ie),ne(ge)}function wt(n){n.memoizedState!==null&&ue(Ie,n);var i=ve.current,o=nv(i,n.type);i!==o&&(ue(ie,n),ue(ve,o))}function Xn(n){ie.current===n&&(ne(ve),ne(ie)),Ie.current===n&&(ne(Ie),qc._currentValue=be)}var vn,cr;function Jn(n){if(vn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);vn=i&&i[1]||"",cr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vn+n+cr}var Ri=!1;function Rn(n,i){if(!n||Ri)return"";Ri=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var K=J}Reflect.construct(n,[],se)}else{try{se.call()}catch(J){K=J}n.call(se.prototype)}}else{try{throw Error()}catch(J){K=J}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var k=_.split(`
`),$=E.split(`
`);for(h=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(c===k.length||h===$.length)for(c=k.length-1,h=$.length-1;1<=c&&0<=h&&k[c]!==$[h];)h--;for(;1<=c&&0<=h;c--,h--)if(k[c]!==$[h]){if(c!==1||h!==1)do if(c--,h--,0>h||k[c]!==$[h]){var Z=`
`+k[c].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=c&&0<=h);break}}}finally{Ri=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Jn(o):""}function Ci(n,i){switch(n.tag){case 26:case 27:case 5:return Jn(n.type);case 16:return Jn("Lazy");case 13:return n.child!==i&&i!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return Rn(n.type,!1);case 11:return Rn(n.type.render,!1);case 1:return Rn(n.type,!0);case 31:return Jn("Activity");default:return""}}function wr(n){try{var i="",o=null;do i+=Ci(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,yt=s.unstable_scheduleCallback,Lr=s.unstable_cancelCallback,ms=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Zt=s.unstable_now,Ur=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,si=s.unstable_UserBlockingPriority,Cn=s.unstable_NormalPriority,wa=s.unstable_LowPriority,zr=s.unstable_IdlePriority,ai=s.log,Mi=s.unstable_setDisableYieldValue,Bn=null,Bt=null;function Dn(n){if(typeof ai=="function"&&Mi(n),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Bn,n)}catch{}}var At=Math.clz32?Math.clz32:oi,ps=Math.log,Er=Math.LN2;function oi(n){return n>>>=0,n===0?32:31-(ps(n)/Er|0)|0}var Fn=256,Br=262144,Dt=4194304;function qn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Mn(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var h=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?h=qn(c):(_&=E,_!==0?h=qn(_):o||(o=E&~n,o!==0&&(h=qn(o))))):(E=c&~m,E!==0?h=qn(E):_!==0?h=qn(_):o||(o=c&~n,o!==0&&(h=qn(o)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:h}function xn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ki(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var n=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),n}function Wn(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function qr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ea(n,i,o,c,h,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,k=n.expirationTimes,$=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-At(o),se=1<<Z;E[Z]=0,k[Z]=-1;var K=$[Z];if(K!==null)for($[Z]=null,Z=0;Z<K.length;Z++){var J=K[Z];J!==null&&(J.lane&=-536870913)}o&=~se}c!==0&&Hr(n,c,0),m!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~i))}function Hr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-At(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Oi(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-At(o),h=1<<c;h&i|n[c]&i&&(n[c]|=i),o&=~h}}function Vi(n,i){var o=i&-i;return o=(o&42)!==0?1:gn(o),(o&(n.suspendedLanes|i))!==0?0:o}function gn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ut(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gs(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:Sv(n.type))}function Hn(n,i){var o=oe.p;try{return oe.p=n,i()}finally{oe.p=o}}var Gn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Gn,Ft="__reactProps$"+Gn,Te="__reactContainer$"+Gn,Ue="__reactEvents$"+Gn,It="__reactListeners$"+Gn,bt="__reactHandles$"+Gn,li="__reactResources$"+Gn,kn="__reactMarker$"+Gn;function cn(n){delete n[Vt],delete n[Ft],delete n[Ue],delete n[It],delete n[bt]}function en(n){var i=n[Vt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Te]||o[Vt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=cv(n);n!==null;){if(o=n[Vt])return o;n=cv(n)}return i}n=o,o=n.parentNode}return null}function tn(n){if(n=n[Vt]||n[Te]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function te(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function xe(n){var i=n[li];return i||(i=n[li]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _e(n){n[kn]=!0}var Me=new Set,Nt={};function Et(n,i){Ze(n,i),Ze(n+"Capture",i)}function Ze(n,i){for(Nt[n]=i,n=0;n<i.length;n++)Me.add(i[n])}var un=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qe={},tt={};function ot(n){return Ct.call(tt,n)?!0:Ct.call(qe,n)?!1:un.test(n)?tt[n]=!0:(qe[n]=!0,!1)}function $n(n,i,o){if(ot(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function dn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Mt(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ys(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function tc(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,m=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function dt(n){if(!n._valueTracker){var i=ys(n)?"checked":"value";n._valueTracker=tc(n,i,""+n[i])}}function Sa(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=ys(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function ci(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Aa=/[\n"\\]/g;function Zn(n){return n.replace(Aa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function So(n,i,o,c,h,m,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Kt(i)):n.value!==""+Kt(i)&&(n.value=""+Kt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?nc(n,_,Kt(i)):o!=null?nc(n,_,Kt(o)):c!=null&&n.removeAttribute("value"),h==null&&m!=null&&(n.defaultChecked=!!m),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Kt(E):n.removeAttribute("name")}function nd(n,i,o,c,h,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){dt(n);return}o=o!=null?""+Kt(o):"",i=i!=null?""+Kt(i):o,E||i===n.value||(n.value=i),n.defaultValue=i}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),dt(n)}function nc(n,i,o){i==="number"&&ci(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function bs(n,i,o,c){if(n=n.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=i.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Kt(o),i=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function rd(n,i,o){if(i!=null&&(i=""+Kt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Kt(o):""}function _s(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(de(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Kt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),dt(n)}function er(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rc(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||id.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function ic(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in i)c=i[h],i.hasOwnProperty(h)&&o[h]!==c&&rc(n,h,c)}else for(var m in i)i.hasOwnProperty(m)&&rc(n,m,i[m])}function Ao(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(n){return vs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Gr(){}var sc=null;function Sr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xs=null,ui=null;function Ia(n){var i=tn(n);if(i&&(n=i.stateNode)){var o=n[Ft]||null;e:switch(n=i.stateNode,i.type){case"input":if(So(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var h=c[Ft]||null;if(!h)throw Error(r(90));So(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Sa(c)}break e;case"textarea":rd(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&bs(n,!!o.multiple,i,!1)}}}var No=!1;function Ts(n,i,o){if(No)return n(i,o);No=!0;try{var c=n(i);return c}finally{if(No=!1,(xs!==null||ui!==null)&&(Wd(),xs&&(i=xs,n=ui,ui=xs=null,Ia(i),n)))for(i=0;i<n.length;i++)Ia(n[i])}}function $r(n,i){var o=n.stateNode;if(o===null)return null;var c=o[Ft]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(Ar)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Na=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Na=!1}var di=null,ac=null,Ra=null;function oc(){if(Ra)return Ra;var n,i=ac,o=i.length,c,h="value"in di?di.value:di.textContent,m=h.length;for(n=0;n<o&&i[n]===h[n];n++);var _=o-n;for(c=1;c<=_&&i[o-c]===h[m-c];c++);return Ra=h.slice(n,1<c?1-c:void 0)}function Ca(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ji(){return!0}function Kr(){return!1}function Tn(n){function i(o,c,h,m,_){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:Kr,this.isPropagationStopped=Kr,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),i}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=Tn(Pi),ws=T({},Pi,{view:0,detail:0}),lc=Tn(ws),Es,Ro,fi,Co=T({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fi&&(fi&&n.type==="mousemove"?(Es=n.screenX-fi.screenX,Ro=n.screenY-fi.screenY):Ro=Es=0,fi=n),Es)},movementY:function(n){return"movementY"in n?n.movementY:Ro}}),cc=Tn(Co),Da=T({},Co,{dataTransfer:0}),ad=Tn(Da),od=T({},ws,{relatedTarget:0}),Ma=Tn(od),uc=T({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),ld=Tn(uc),Do=T({},Pi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cd=Tn(Do),ud=T({},Pi,{data:0}),mi=Tn(ud),dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function md(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=fd[n])?!!i[n]:!1}function Ss(){return md}var Kn=T({},ws,{key:function(n){if(n.key){var i=dd[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ca(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(n){return n.type==="keypress"?Ca(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ca(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pd=Tn(Kn),gd=T({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=Tn(gd),d=T({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),b=Tn(d),x=T({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Tn(x),B=T({},Co,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Tn(B),pe=T({},Pi,{newState:0,oldState:0}),ze=Tn(pe),Yt=[9,13,27,32],lt=Ar&&"CompositionEvent"in window,jt=null;Ar&&"documentMode"in document&&(jt=document.documentMode);var Ir=Ar&&"TextEvent"in window&&!jt,pi=Ar&&(!lt||jt&&8<jt&&11>=jt),Yr=" ",Qr=!1;function ka(n,i){switch(n){case"keyup":return Yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ko=!1;function xS(n,i){switch(n){case"compositionend":return Mo(i);case"keypress":return i.which!==32?null:(Qr=!0,Yr);case"textInput":return n=i.data,n===Yr&&Qr?null:n;default:return null}}function TS(n,i){if(ko)return n==="compositionend"||!lt&&ka(n,i)?(n=oc(),Ra=ac=di=null,ko=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pi&&i.locale!=="ko"?null:i.data;default:return null}}var wS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!wS[n.type]:i==="textarea"}function fy(n,i,o,c){xs?ui?ui.push(c):ui=[c]:xs=c,i=sh(i,"onChange"),0<i.length&&(o=new hi("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var dc=null,hc=null;function ES(n){Q_(n,0)}function yd(n){var i=te(n);if(Sa(i))return n}function my(n,i){if(n==="change")return i}var py=!1;if(Ar){var Qf;if(Ar){var Xf="oninput"in document;if(!Xf){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),Xf=typeof gy.oninput=="function"}Qf=Xf}else Qf=!1;py=Qf&&(!document.documentMode||9<document.documentMode)}function yy(){dc&&(dc.detachEvent("onpropertychange",by),hc=dc=null)}function by(n){if(n.propertyName==="value"&&yd(hc)){var i=[];fy(i,hc,n,Sr(n)),Ts(ES,i)}}function SS(n,i,o){n==="focusin"?(yy(),dc=i,hc=o,dc.attachEvent("onpropertychange",by)):n==="focusout"&&yy()}function AS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yd(hc)}function IS(n,i){if(n==="click")return yd(i)}function NS(n,i){if(n==="input"||n==="change")return yd(i)}function RS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ur=typeof Object.is=="function"?Object.is:RS;function fc(n,i){if(ur(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Ct.call(i,h)||!ur(n[h],i[h]))return!1}return!0}function _y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vy(n,i){var o=_y(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=_y(o)}}function xy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?xy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ty(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ci(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ci(n.document)}return i}function Jf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var CS=Ar&&"documentMode"in document&&11>=document.documentMode,Oo=null,Wf=null,mc=null,Zf=!1;function wy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zf||Oo==null||Oo!==ci(c)||(c=Oo,"selectionStart"in c&&Jf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),mc&&fc(mc,c)||(mc=c,c=sh(Wf,"onSelect"),0<c.length&&(i=new hi("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Oo)))}function Oa(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Vo={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},em={},Ey={};Ar&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Va(n){if(em[n])return em[n];if(!Vo[n])return n;var i=Vo[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ey)return em[n]=i[o];return n}var Sy=Va("animationend"),Ay=Va("animationiteration"),Iy=Va("animationstart"),DS=Va("transitionrun"),MS=Va("transitionstart"),kS=Va("transitioncancel"),Ny=Va("transitionend"),Ry=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function Xr(n,i){Ry.set(n,i),Et(i,[n])}var bd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Nr=[],jo=0,nm=0;function _d(){for(var n=jo,i=nm=jo=0;i<n;){var o=Nr[i];Nr[i++]=null;var c=Nr[i];Nr[i++]=null;var h=Nr[i];Nr[i++]=null;var m=Nr[i];if(Nr[i++]=null,c!==null&&h!==null){var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}m!==0&&Cy(o,h,m)}}function vd(n,i,o,c){Nr[jo++]=n,Nr[jo++]=i,Nr[jo++]=o,Nr[jo++]=c,nm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function rm(n,i,o,c){return vd(n,i,o,c),xd(n)}function ja(n,i){return vd(n,null,null,i),xd(n)}function Cy(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var h=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(h=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,h&&i!==null&&(h=31-At(o),n=m.hiddenUpdates,c=n[h],c===null?n[h]=[i]:c.push(i),i.lane=o|536870912),m):null}function xd(n){if(50<jc)throw jc=0,hp=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Po={};function OS(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(n,i,o,c){return new OS(n,i,o,c)}function im(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ui(n,i){var o=n.alternate;return o===null?(o=dr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Dy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Td(n,i,o,c,h,m){var _=0;if(c=n,typeof n=="function")im(n)&&(_=1);else if(typeof n=="string")_=UA(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=dr(31,o,i,h),n.elementType=N,n.lanes=m,n;case X:return Pa(o.children,h,m,i);case q:_=8,h|=24;break;case G:return n=dr(12,o,i,h|2),n.elementType=G,n.lanes=m,n;case ae:return n=dr(13,o,i,h),n.elementType=ae,n.lanes=m,n;case he:return n=dr(19,o,i,h),n.elementType=he,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:_=10;break e;case ee:_=9;break e;case le:_=11;break e;case S:_=14;break e;case A:_=16,c=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=dr(_,o,i,h),i.elementType=n,i.type=c,i.lanes=m,i}function Pa(n,i,o,c){return n=dr(7,n,c,i),n.lanes=o,n}function sm(n,i,o){return n=dr(6,n,null,i),n.lanes=o,n}function My(n){var i=dr(18,null,null,0);return i.stateNode=n,i}function am(n,i,o){return i=dr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ky=new WeakMap;function Rr(n,i){if(typeof n=="object"&&n!==null){var o=ky.get(n);return o!==void 0?o:(i={value:n,source:i,stack:wr(i)},ky.set(n,i),i)}return{value:n,source:i,stack:wr(i)}}var Lo=[],Uo=0,wd=null,pc=0,Cr=[],Dr=0,As=null,gi=1,yi="";function zi(n,i){Lo[Uo++]=pc,Lo[Uo++]=wd,wd=n,pc=i}function Oy(n,i,o){Cr[Dr++]=gi,Cr[Dr++]=yi,Cr[Dr++]=As,As=n;var c=gi;n=yi;var h=32-At(c)-1;c&=~(1<<h),o+=1;var m=32-At(i)+h;if(30<m){var _=h-h%5;m=(c&(1<<_)-1).toString(32),c>>=_,h-=_,gi=1<<32-At(i)+h|o<<h|c,yi=m+n}else gi=1<<m|o<<h|c,yi=n}function om(n){n.return!==null&&(zi(n,1),Oy(n,1,0))}function lm(n){for(;n===wd;)wd=Lo[--Uo],Lo[Uo]=null,pc=Lo[--Uo],Lo[Uo]=null;for(;n===As;)As=Cr[--Dr],Cr[Dr]=null,yi=Cr[--Dr],Cr[Dr]=null,gi=Cr[--Dr],Cr[Dr]=null}function Vy(n,i){Cr[Dr++]=gi,Cr[Dr++]=yi,Cr[Dr++]=As,gi=i.id,yi=i.overflow,As=n}var wn=null,kt=null,et=!1,Is=null,Mr=!1,cm=Error(r(519));function Ns(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(Rr(i,n)),cm}function jy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Vt]=n,i[Ft]=c,o){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Ke(Lc[o],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),nd(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),_s(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Z_(i.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),c.onScroll!=null&&Ke("scroll",i),c.onScrollEnd!=null&&Ke("scrollend",i),c.onClick!=null&&(i.onclick=Gr),i=!0):i=!1,i||Ns(n,!0)}function Py(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 31:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:wn=wn.return}}function zo(n){if(n!==wn)return!1;if(!et)return Py(n),et=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ip(n.type,n.memoizedProps)),o=!o),o&&kt&&Ns(n),Py(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=lv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));kt=lv(n)}else i===27?(i=kt,Fs(n.type)?(n=Mp,Mp=null,kt=n):kt=i):kt=wn?Or(n.stateNode.nextSibling):null;return!0}function La(){kt=wn=null,et=!1}function um(){var n=Is;return n!==null&&(ir===null?ir=n:ir.push.apply(ir,n),Is=null),n}function gc(n){Is===null?Is=[n]:Is.push(n)}var dm=M(null),Ua=null,Bi=null;function Rs(n,i,o){ue(dm,i._currentValue),i._currentValue=o}function Fi(n){n._currentValue=dm.current,ne(dm)}function hm(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function fm(n,i,o,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var k=0;k<i.length;k++)if(E.context===i[k]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),hm(m.return,o,n),c||(_=null);break e}m=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),hm(_,o,n),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===n){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Bo(n,i,o,c){n=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;ur(h.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(h===Ie.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(qc):n=[qc])}h=h.return}n!==null&&fm(i,n,o,c),i.flags|=262144}function Ed(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function za(n){Ua=n,Bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function En(n){return Ly(Ua,n)}function Sd(n,i){return Ua===null&&za(n),Ly(n,i)}function Ly(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Bi===null){if(n===null)throw Error(r(308));Bi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Bi=Bi.next=i;return o}var VS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},jS=s.unstable_scheduleCallback,PS=s.unstable_NormalPriority,nn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new VS,data:new Map,refCount:0}}function yc(n){n.refCount--,n.refCount===0&&jS(PS,function(){n.controller.abort()})}var bc=null,pm=0,Fo=0,qo=null;function LS(n,i){if(bc===null){var o=bc=[];pm=0,Fo=bp(),qo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return pm++,i.then(Uy,Uy),i}function Uy(){if(--pm===0&&bc!==null){qo!==null&&(qo.status="fulfilled");var n=bc;bc=null,Fo=0,qo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function US(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var zy=F.S;F.S=function(n,i){w_=Zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&LS(n,i),zy!==null&&zy(n,i)};var Ba=M(null);function gm(){var n=Ba.current;return n!==null?n:St.pooledCache}function Ad(n,i){i===null?ue(Ba,Ba.current):ue(Ba,i.pool)}function By(){var n=gm();return n===null?null:{parent:nn._currentValue,pool:n}}var Ho=Error(r(460)),ym=Error(r(474)),Id=Error(r(542)),Nd={then:function(){}};function Fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Gr,Gr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gy(n),n;default:if(typeof i.status=="string")i.then(Gr,Gr);else{if(n=St,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=c}},function(c){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gy(n),n}throw qa=i,Ho}}function Fa(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(qa=o,Ho):o}}var qa=null;function Hy(){if(qa===null)throw Error(r(459));var n=qa;return qa=null,n}function Gy(n){if(n===Ho||n===Id)throw Error(r(483))}var Go=null,_c=0;function Rd(n){var i=_c;return _c+=1,Go===null&&(Go=[]),qy(Go,n,i)}function vc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Cd(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function $y(n){function i(U,V){if(n){var H=U.deletions;H===null?(U.deletions=[V],U.flags|=16):H.push(V)}}function o(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=Ui(U,V),U.index=0,U.sibling=null,U}function m(U,V,H){return U.index=H,n?(H=U.alternate,H!==null?(H=H.index,H<V?(U.flags|=67108866,V):H):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function _(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function E(U,V,H,re){return V===null||V.tag!==6?(V=sm(H,U.mode,re),V.return=U,V):(V=h(V,H),V.return=U,V)}function k(U,V,H,re){var Re=H.type;return Re===X?Z(U,V,H.props.children,re,H.key):V!==null&&(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Fa(Re)===V.type)?(V=h(V,H.props),vc(V,H),V.return=U,V):(V=Td(H.type,H.key,H.props,null,U.mode,re),vc(V,H),V.return=U,V)}function $(U,V,H,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=am(H,U.mode,re),V.return=U,V):(V=h(V,H.children||[]),V.return=U,V)}function Z(U,V,H,re,Re){return V===null||V.tag!==7?(V=Pa(H,U.mode,re,Re),V.return=U,V):(V=h(V,H),V.return=U,V)}function se(U,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=sm(""+V,U.mode,H),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case C:return H=Td(V.type,V.key,V.props,null,U.mode,H),vc(H,V),H.return=U,H;case L:return V=am(V,U.mode,H),V.return=U,V;case A:return V=Fa(V),se(U,V,H)}if(de(V)||j(V))return V=Pa(V,U.mode,H,null),V.return=U,V;if(typeof V.then=="function")return se(U,Rd(V),H);if(V.$$typeof===Y)return se(U,Sd(U,V),H);Cd(U,V)}return null}function K(U,V,H,re){var Re=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Re!==null?null:E(U,V,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return H.key===Re?k(U,V,H,re):null;case L:return H.key===Re?$(U,V,H,re):null;case A:return H=Fa(H),K(U,V,H,re)}if(de(H)||j(H))return Re!==null?null:Z(U,V,H,re,null);if(typeof H.then=="function")return K(U,V,Rd(H),re);if(H.$$typeof===Y)return K(U,V,Sd(U,H),re);Cd(U,H)}return null}function J(U,V,H,re,Re){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(H)||null,E(V,U,""+re,Re);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return U=U.get(re.key===null?H:re.key)||null,k(V,U,re,Re);case L:return U=U.get(re.key===null?H:re.key)||null,$(V,U,re,Re);case A:return re=Fa(re),J(U,V,H,re,Re)}if(de(re)||j(re))return U=U.get(H)||null,Z(V,U,re,Re,null);if(typeof re.then=="function")return J(U,V,H,Rd(re),Re);if(re.$$typeof===Y)return J(U,V,H,Sd(V,re),Re);Cd(V,re)}return null}function Ee(U,V,H,re){for(var Re=null,it=null,Ae=V,Fe=V=0,Xe=null;Ae!==null&&Fe<H.length;Fe++){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var st=K(U,Ae,H[Fe],re);if(st===null){Ae===null&&(Ae=Xe);break}n&&Ae&&st.alternate===null&&i(U,Ae),V=m(st,V,Fe),it===null?Re=st:it.sibling=st,it=st,Ae=Xe}if(Fe===H.length)return o(U,Ae),et&&zi(U,Fe),Re;if(Ae===null){for(;Fe<H.length;Fe++)Ae=se(U,H[Fe],re),Ae!==null&&(V=m(Ae,V,Fe),it===null?Re=Ae:it.sibling=Ae,it=Ae);return et&&zi(U,Fe),Re}for(Ae=c(Ae);Fe<H.length;Fe++)Xe=J(Ae,U,Fe,H[Fe],re),Xe!==null&&(n&&Xe.alternate!==null&&Ae.delete(Xe.key===null?Fe:Xe.key),V=m(Xe,V,Fe),it===null?Re=Xe:it.sibling=Xe,it=Xe);return n&&Ae.forEach(function(Ks){return i(U,Ks)}),et&&zi(U,Fe),Re}function De(U,V,H,re){if(H==null)throw Error(r(151));for(var Re=null,it=null,Ae=V,Fe=V=0,Xe=null,st=H.next();Ae!==null&&!st.done;Fe++,st=H.next()){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var Ks=K(U,Ae,st.value,re);if(Ks===null){Ae===null&&(Ae=Xe);break}n&&Ae&&Ks.alternate===null&&i(U,Ae),V=m(Ks,V,Fe),it===null?Re=Ks:it.sibling=Ks,it=Ks,Ae=Xe}if(st.done)return o(U,Ae),et&&zi(U,Fe),Re;if(Ae===null){for(;!st.done;Fe++,st=H.next())st=se(U,st.value,re),st!==null&&(V=m(st,V,Fe),it===null?Re=st:it.sibling=st,it=st);return et&&zi(U,Fe),Re}for(Ae=c(Ae);!st.done;Fe++,st=H.next())st=J(Ae,U,Fe,st.value,re),st!==null&&(n&&st.alternate!==null&&Ae.delete(st.key===null?Fe:st.key),V=m(st,V,Fe),it===null?Re=st:it.sibling=st,it=st);return n&&Ae.forEach(function(XA){return i(U,XA)}),et&&zi(U,Fe),Re}function Tt(U,V,H,re){if(typeof H=="object"&&H!==null&&H.type===X&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case C:e:{for(var Re=H.key;V!==null;){if(V.key===Re){if(Re=H.type,Re===X){if(V.tag===7){o(U,V.sibling),re=h(V,H.props.children),re.return=U,U=re;break e}}else if(V.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Fa(Re)===V.type){o(U,V.sibling),re=h(V,H.props),vc(re,H),re.return=U,U=re;break e}o(U,V);break}else i(U,V);V=V.sibling}H.type===X?(re=Pa(H.props.children,U.mode,re,H.key),re.return=U,U=re):(re=Td(H.type,H.key,H.props,null,U.mode,re),vc(re,H),re.return=U,U=re)}return _(U);case L:e:{for(Re=H.key;V!==null;){if(V.key===Re)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){o(U,V.sibling),re=h(V,H.children||[]),re.return=U,U=re;break e}else{o(U,V);break}else i(U,V);V=V.sibling}re=am(H,U.mode,re),re.return=U,U=re}return _(U);case A:return H=Fa(H),Tt(U,V,H,re)}if(de(H))return Ee(U,V,H,re);if(j(H)){if(Re=j(H),typeof Re!="function")throw Error(r(150));return H=Re.call(H),De(U,V,H,re)}if(typeof H.then=="function")return Tt(U,V,Rd(H),re);if(H.$$typeof===Y)return Tt(U,V,Sd(U,H),re);Cd(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(o(U,V.sibling),re=h(V,H),re.return=U,U=re):(o(U,V),re=sm(H,U.mode,re),re.return=U,U=re),_(U)):o(U,V)}return function(U,V,H,re){try{_c=0;var Re=Tt(U,V,H,re);return Go=null,Re}catch(Ae){if(Ae===Ho||Ae===Id)throw Ae;var it=dr(29,Ae,null,U.mode);return it.lanes=re,it.return=U,it}}}var Ha=$y(!0),Ky=$y(!1),Cs=!1;function bm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ds(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ms(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,i=xd(n),Cy(n,null,o),i}return vd(n,c,i,o),xd(n)}function xc(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oi(n,o)}}function vm(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=i:m=m.next=i}else h=m=i;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var xm=!1;function Tc(){if(xm){var n=qo;if(n!==null)throw n}}function wc(n,i,o,c){xm=!1;var h=n.updateQueue;Cs=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var k=E,$=k.next;k.next=null,_===null?m=$:_.next=$,_=k;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==_&&(E===null?Z.firstBaseUpdate=$:E.next=$,Z.lastBaseUpdate=k))}if(m!==null){var se=h.baseState;_=0,Z=$=k=null,E=m;do{var K=E.lane&-536870913,J=K!==E.lane;if(J?(Qe&K)===K:(c&K)===K){K!==0&&K===Fo&&(xm=!0),Z!==null&&(Z=Z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=n,De=E;K=i;var Tt=o;switch(De.tag){case 1:if(Ee=De.payload,typeof Ee=="function"){se=Ee.call(Tt,se,K);break e}se=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=De.payload,K=typeof Ee=="function"?Ee.call(Tt,se,K):Ee,K==null)break e;se=T({},se,K);break e;case 2:Cs=!0}}K=E.callback,K!==null&&(n.flags|=64,J&&(n.flags|=8192),J=h.callbacks,J===null?h.callbacks=[K]:J.push(K))}else J={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?($=Z=J,k=se):Z=Z.next=J,_|=K;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;J=E,E=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);Z===null&&(k=se),h.baseState=k,h.firstBaseUpdate=$,h.lastBaseUpdate=Z,m===null&&(h.shared.lanes=0),Ps|=_,n.lanes=_,n.memoizedState=se}}function Yy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Qy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Yy(o[n],i)}var $o=M(null),Dd=M(0);function Xy(n,i){n=Ji,ue(Dd,n),ue($o,i),Ji=n|i.baseLanes}function Tm(){ue(Dd,Ji),ue($o,$o.current)}function wm(){Ji=Dd.current,ne($o),ne(Dd)}var hr=M(null),kr=null;function ks(n){var i=n.alternate;ue(Qt,Qt.current&1),ue(hr,n),kr===null&&(i===null||$o.current!==null||i.memoizedState!==null)&&(kr=n)}function Em(n){ue(Qt,Qt.current),ue(hr,n),kr===null&&(kr=n)}function Jy(n){n.tag===22?(ue(Qt,Qt.current),ue(hr,n),kr===null&&(kr=n)):Os()}function Os(){ue(Qt,Qt.current),ue(hr,hr.current)}function fr(n){ne(hr),kr===n&&(kr=null),ne(Qt)}var Qt=M(0);function Md(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cp(o)||Dp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qi=0,Be=null,vt=null,rn=null,kd=!1,Ko=!1,Ga=!1,Od=0,Ec=0,Yo=null,zS=0;function qt(){throw Error(r(321))}function Sm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!ur(n[o],i[o]))return!1;return!0}function Am(n,i,o,c,h,m){return qi=m,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=n===null||n.memoizedState===null?Ob:Bm,Ga=!1,m=o(c,h),Ga=!1,Ko&&(m=Zy(i,o,c,h)),Wy(n),m}function Wy(n){F.H=Ic;var i=vt!==null&&vt.next!==null;if(qi=0,rn=vt=Be=null,kd=!1,Ec=0,Yo=null,i)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Ed(n)&&(sn=!0))}function Zy(n,i,o,c){Be=n;var h=0;do{if(Ko&&(Yo=null),Ec=0,Ko=!1,25<=h)throw Error(r(301));if(h+=1,rn=vt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=Vb,m=i(o,c)}while(Ko);return m}function BS(){var n=F.H,i=n.useState()[0];return i=typeof i.then=="function"?Sc(i):i,n=n.useState()[0],(vt!==null?vt.memoizedState:null)!==n&&(Be.flags|=1024),i}function Im(){var n=Od!==0;return Od=0,n}function Nm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Rm(n){if(kd){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kd=!1}qi=0,rn=vt=Be=null,Ko=!1,Ec=Od=0,Yo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Be.memoizedState=rn=n:rn=rn.next=n,rn}function Xt(){if(vt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var i=rn===null?Be.memoizedState:rn.next;if(i!==null)rn=i,vt=n;else{if(n===null)throw Be.alternate===null?Error(r(467)):Error(r(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},rn===null?Be.memoizedState=rn=n:rn=rn.next=n}return rn}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(n){var i=Ec;return Ec+=1,Yo===null&&(Yo=[]),n=qy(Yo,n,i),i=Be,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Ob:Bm),n}function jd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Sc(n);if(n.$$typeof===Y)return En(n)}throw Error(r(438,String(n)))}function Cm(n){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Vd(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=O;return i.index++,o}function Hi(n,i){return typeof i=="function"?i(n):i}function Pd(n){var i=Xt();return Dm(i,vt,n)}function Dm(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var h=n.baseQueue,m=c.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}i.baseQueue=h=m,c.pending=null}if(m=n.baseState,h===null)n.memoizedState=m;else{i=h.next;var E=_=null,k=null,$=i,Z=!1;do{var se=$.lane&-536870913;if(se!==$.lane?(Qe&se)===se:(qi&se)===se){var K=$.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),se===Fo&&(Z=!0);else if((qi&K)===K){$=$.next,K===Fo&&(Z=!0);continue}else se={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(E=k=se,_=m):k=k.next=se,Be.lanes|=K,Ps|=K;se=$.action,Ga&&o(m,se),m=$.hasEagerState?$.eagerState:o(m,se)}else K={lane:se,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(E=k=K,_=m):k=k.next=K,Be.lanes|=se,Ps|=se;$=$.next}while($!==null&&$!==i);if(k===null?_=m:k.next=E,!ur(m,n.memoizedState)&&(sn=!0,Z&&(o=qo,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=k,c.lastRenderedState=m}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Mm(n){var i=Xt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,h=o.pending,m=i.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=n(m,_.action),_=_.next;while(_!==h);ur(m,i.memoizedState)||(sn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,c]}function eb(n,i,o){var c=Be,h=Xt(),m=et;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=i();var _=!ur((vt||h).memoizedState,o);if(_&&(h.memoizedState=o,sn=!0),h=h.queue,Vm(rb.bind(null,c,h,n),[n]),h.getSnapshot!==i||_||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,Qo(9,{destroy:void 0},nb.bind(null,c,h,o,i),null),St===null)throw Error(r(349));m||(qi&127)!==0||tb(c,i,o)}return o}function tb(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Vd(),Be.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function nb(n,i,o,c){i.value=o,i.getSnapshot=c,ib(i)&&sb(n)}function rb(n,i,o){return o(function(){ib(i)&&sb(n)})}function ib(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!ur(n,o)}catch{return!0}}function sb(n){var i=ja(n,2);i!==null&&sr(i,n,2)}function km(n){var i=Yn();if(typeof n=="function"){var o=n;if(n=o(),Ga){Dn(!0);try{o()}finally{Dn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},i}function ab(n,i,o,c){return n.baseState=o,Dm(n,vt,typeof c=="function"?c:Hi)}function FS(n,i,o,c,h){if(zd(n))throw Error(r(485));if(n=i.action,n!==null){var m={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};F.T!==null?o(!0):m.isTransition=!1,c(m),o=i.pending,o===null?(m.next=i.pending=m,ob(i,m)):(m.next=o.next,i.pending=o.next=m)}}function ob(n,i){var o=i.action,c=i.payload,h=n.state;if(i.isTransition){var m=F.T,_={};F.T=_;try{var E=o(h,c),k=F.S;k!==null&&k(_,E),lb(n,i,E)}catch($){Om(n,i,$)}finally{m!==null&&_.types!==null&&(m.types=_.types),F.T=m}}else try{m=o(h,c),lb(n,i,m)}catch($){Om(n,i,$)}}function lb(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){cb(n,i,c)},function(c){return Om(n,i,c)}):cb(n,i,o)}function cb(n,i,o){i.status="fulfilled",i.value=o,ub(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,ob(n,o)))}function Om(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,ub(i),i=i.next;while(i!==c)}n.action=null}function ub(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function db(n,i){return i}function hb(n,i){if(et){var o=St.formState;if(o!==null){e:{var c=Be;if(et){if(kt){t:{for(var h=kt,m=Mr;h.nodeType!==8;){if(!m){h=null;break t}if(h=Or(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){kt=Or(h.nextSibling),c=h.data==="F!";break e}}Ns(c)}c=!1}c&&(i=o[0])}}return o=Yn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:db,lastRenderedState:i},o.queue=c,o=Db.bind(null,Be,c),c.dispatch=o,c=km(!1),m=zm.bind(null,Be,!1,c.queue),c=Yn(),h={state:i,dispatch:null,action:n,pending:null},c.queue=h,o=FS.bind(null,Be,h,m,o),h.dispatch=o,c.memoizedState=n,[i,o,!1]}function fb(n){var i=Xt();return mb(i,vt,n)}function mb(n,i,o){if(i=Dm(n,i,db)[0],n=Pd(Hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Sc(i)}catch(_){throw _===Ho?Id:_}else c=i;i=Xt();var h=i.queue,m=h.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,Qo(9,{destroy:void 0},qS.bind(null,h,o),null)),[c,m,n]}function qS(n,i){n.action=i}function pb(n){var i=Xt(),o=vt;if(o!==null)return mb(i,o,n);Xt(),i=i.memoizedState,o=Xt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function Qo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Vd(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function gb(){return Xt().memoizedState}function Ld(n,i,o,c){var h=Yn();Be.flags|=n,h.memoizedState=Qo(1|i,{destroy:void 0},o,c===void 0?null:c)}function Ud(n,i,o,c){var h=Xt();c=c===void 0?null:c;var m=h.memoizedState.inst;vt!==null&&c!==null&&Sm(c,vt.memoizedState.deps)?h.memoizedState=Qo(i,m,o,c):(Be.flags|=n,h.memoizedState=Qo(1|i,m,o,c))}function yb(n,i){Ld(8390656,8,n,i)}function Vm(n,i){Ud(2048,8,n,i)}function HS(n){Be.flags|=4;var i=Be.updateQueue;if(i===null)i=Vd(),Be.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function bb(n){var i=Xt().memoizedState;return HS({ref:i,nextImpl:n}),function(){if((ct&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function _b(n,i){return Ud(4,2,n,i)}function vb(n,i){return Ud(4,4,n,i)}function xb(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Tb(n,i,o){o=o!=null?o.concat([n]):null,Ud(4,4,xb.bind(null,i,n),o)}function jm(){}function wb(n,i){var o=Xt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Sm(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Eb(n,i){var o=Xt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Sm(i,c[1]))return c[0];if(c=n(),Ga){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[c,i],c}function Pm(n,i,o){return o===void 0||(qi&1073741824)!==0&&(Qe&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=S_(),Be.lanes|=n,Ps|=n,o)}function Sb(n,i,o,c){return ur(o,i)?o:$o.current!==null?(n=Pm(n,o,c),ur(n,i)||(sn=!0),n):(qi&42)===0||(qi&1073741824)!==0&&(Qe&261930)===0?(sn=!0,n.memoizedState=o):(n=S_(),Be.lanes|=n,Ps|=n,i)}function Ab(n,i,o,c,h){var m=oe.p;oe.p=m!==0&&8>m?m:8;var _=F.T,E={};F.T=E,zm(n,!1,i,o);try{var k=h(),$=F.S;if($!==null&&$(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=US(k,c);Ac(n,i,Z,gr(n))}else Ac(n,i,c,gr(n))}catch(se){Ac(n,i,{then:function(){},status:"rejected",reason:se},gr())}finally{oe.p=m,_!==null&&E.types!==null&&(_.types=E.types),F.T=_}}function GS(){}function Lm(n,i,o,c){if(n.tag!==5)throw Error(r(476));var h=Ib(n).queue;Ab(n,h,i,be,o===null?GS:function(){return Nb(n),o(c)})}function Ib(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:be},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Nb(n){var i=Ib(n);i.next===null&&(i=n.alternate.memoizedState),Ac(n,i.next.queue,{},gr())}function Um(){return En(qc)}function Rb(){return Xt().memoizedState}function Cb(){return Xt().memoizedState}function $S(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=gr();n=Ds(o);var c=Ms(i,n,o);c!==null&&(sr(c,i,o),xc(c,i,o)),i={cache:mm()},n.payload=i;return}i=i.return}}function KS(n,i,o){var c=gr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},zd(n)?Mb(i,o):(o=rm(n,i,o,c),o!==null&&(sr(o,n,c),kb(o,i,c)))}function Db(n,i,o){var c=gr();Ac(n,i,o,c)}function Ac(n,i,o,c){var h={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(zd(n))Mb(i,h);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,E=m(_,o);if(h.hasEagerState=!0,h.eagerState=E,ur(E,_))return vd(n,i,h,0),St===null&&_d(),!1}catch{}if(o=rm(n,i,h,c),o!==null)return sr(o,n,c),kb(o,i,c),!0}return!1}function zm(n,i,o,c){if(c={lane:2,revertLane:bp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},zd(n)){if(i)throw Error(r(479))}else i=rm(n,o,c,2),i!==null&&sr(i,n,2)}function zd(n){var i=n.alternate;return n===Be||i!==null&&i===Be}function Mb(n,i){Ko=kd=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function kb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oi(n,o)}}var Ic={readContext:En,use:jd,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};Ic.useEffectEvent=qt;var Ob={readContext:En,use:jd,useCallback:function(n,i){return Yn().memoizedState=[n,i===void 0?null:i],n},useContext:En,useEffect:yb,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Ld(4194308,4,xb.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Ld(4194308,4,n,i)},useInsertionEffect:function(n,i){Ld(4,2,n,i)},useMemo:function(n,i){var o=Yn();i=i===void 0?null:i;var c=n();if(Ga){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Yn();if(o!==void 0){var h=o(i);if(Ga){Dn(!0);try{o(i)}finally{Dn(!1)}}}else h=i;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=KS.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var i=Yn();return n={current:n},i.memoizedState=n},useState:function(n){n=km(n);var i=n.queue,o=Db.bind(null,Be,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:jm,useDeferredValue:function(n,i){var o=Yn();return Pm(o,n,i)},useTransition:function(){var n=km(!1);return n=Ab.bind(null,Be,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Be,h=Yn();if(et){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),St===null)throw Error(r(349));(Qe&127)!==0||tb(c,i,o)}h.memoizedState=o;var m={value:o,getSnapshot:i};return h.queue=m,yb(rb.bind(null,c,m,n),[n]),c.flags|=2048,Qo(9,{destroy:void 0},nb.bind(null,c,m,o,i),null),o},useId:function(){var n=Yn(),i=St.identifierPrefix;if(et){var o=yi,c=gi;o=(c&~(1<<32-At(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Od++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=zS++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Um,useFormState:hb,useActionState:hb,useOptimistic:function(n){var i=Yn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=zm.bind(null,Be,!0,o),o.dispatch=i,[n,i]},useMemoCache:Cm,useCacheRefresh:function(){return Yn().memoizedState=$S.bind(null,Be)},useEffectEvent:function(n){var i=Yn(),o={impl:n};return i.memoizedState=o,function(){if((ct&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Bm={readContext:En,use:jd,useCallback:wb,useContext:En,useEffect:Vm,useImperativeHandle:Tb,useInsertionEffect:_b,useLayoutEffect:vb,useMemo:Eb,useReducer:Pd,useRef:gb,useState:function(){return Pd(Hi)},useDebugValue:jm,useDeferredValue:function(n,i){var o=Xt();return Sb(o,vt.memoizedState,n,i)},useTransition:function(){var n=Pd(Hi)[0],i=Xt().memoizedState;return[typeof n=="boolean"?n:Sc(n),i]},useSyncExternalStore:eb,useId:Rb,useHostTransitionStatus:Um,useFormState:fb,useActionState:fb,useOptimistic:function(n,i){var o=Xt();return ab(o,vt,n,i)},useMemoCache:Cm,useCacheRefresh:Cb};Bm.useEffectEvent=bb;var Vb={readContext:En,use:jd,useCallback:wb,useContext:En,useEffect:Vm,useImperativeHandle:Tb,useInsertionEffect:_b,useLayoutEffect:vb,useMemo:Eb,useReducer:Mm,useRef:gb,useState:function(){return Mm(Hi)},useDebugValue:jm,useDeferredValue:function(n,i){var o=Xt();return vt===null?Pm(o,n,i):Sb(o,vt.memoizedState,n,i)},useTransition:function(){var n=Mm(Hi)[0],i=Xt().memoizedState;return[typeof n=="boolean"?n:Sc(n),i]},useSyncExternalStore:eb,useId:Rb,useHostTransitionStatus:Um,useFormState:pb,useActionState:pb,useOptimistic:function(n,i){var o=Xt();return vt!==null?ab(o,vt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Cm,useCacheRefresh:Cb};Vb.useEffectEvent=bb;function Fm(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:T({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var qm={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=gr(),h=Ds(c);h.payload=i,o!=null&&(h.callback=o),i=Ms(n,h,c),i!==null&&(sr(i,n,c),xc(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=gr(),h=Ds(c);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Ms(n,h,c),i!==null&&(sr(i,n,c),xc(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=gr(),c=Ds(o);c.tag=2,i!=null&&(c.callback=i),i=Ms(n,c,o),i!==null&&(sr(i,n,o),xc(i,n,o))}};function jb(n,i,o,c,h,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):i.prototype&&i.prototype.isPureReactComponent?!fc(o,c)||!fc(h,m):!0}function Pb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&qm.enqueueReplaceState(i,i.state,null)}function $a(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=T({},o));for(var h in n)o[h]===void 0&&(o[h]=n[h])}return o}function Lb(n){bd(n)}function Ub(n){console.error(n)}function zb(n){bd(n)}function Bd(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Bb(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hm(n,i,o){return o=Ds(o),o.tag=3,o.payload={element:null},o.callback=function(){Bd(n,i)},o}function Fb(n){return n=Ds(n),n.tag=3,n}function qb(n,i,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=c.value;n.payload=function(){return h(m)},n.callback=function(){Bb(i,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Bb(i,o,c),typeof h!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function YS(n,i,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Bo(i,o,h,!0),o=hr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?Zd():o.alternate===null&&Ht===0&&(Ht=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Nd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),pp(n,c,h)),!1;case 22:return o.flags|=65536,c===Nd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),pp(n,c,h)),!1}throw Error(r(435,o.tag))}return pp(n,c,h),Zd(),!1}if(et)return i=hr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,c!==cm&&(n=Error(r(422),{cause:c}),gc(Rr(n,o)))):(c!==cm&&(i=Error(r(423),{cause:c}),gc(Rr(i,o))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=Rr(c,o),h=Hm(n.stateNode,c,h),vm(n,h),Ht!==4&&(Ht=2)),!1;var m=Error(r(520),{cause:c});if(m=Rr(m,o),Vc===null?Vc=[m]:Vc.push(m),Ht!==4&&(Ht=2),i===null)return!0;c=Rr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=h&-h,o.lanes|=n,n=Hm(o.stateNode,c,n),vm(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ls===null||!Ls.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Fb(h),qb(h,n,o,c),vm(o,h),!1}o=o.return}while(o!==null);return!1}var Gm=Error(r(461)),sn=!1;function Sn(n,i,o,c){i.child=n===null?Ky(i,null,o,c):Ha(i,n.child,o,c)}function Hb(n,i,o,c,h){o=o.render;var m=i.ref;if("ref"in c){var _={};for(var E in c)E!=="ref"&&(_[E]=c[E])}else _=c;return za(i),c=Am(n,i,o,_,m,h),E=Im(),n!==null&&!sn?(Nm(n,i,h),Gi(n,i,h)):(et&&E&&om(i),i.flags|=1,Sn(n,i,c,h),i.child)}function Gb(n,i,o,c,h){if(n===null){var m=o.type;return typeof m=="function"&&!im(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,$b(n,i,m,c,h)):(n=Td(o.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Zm(n,h)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:fc,o(_,c)&&n.ref===i.ref)return Gi(n,i,h)}return i.flags|=1,n=Ui(m,c),n.ref=i.ref,n.return=i,i.child=n}function $b(n,i,o,c,h){if(n!==null){var m=n.memoizedProps;if(fc(m,c)&&n.ref===i.ref)if(sn=!1,i.pendingProps=c=m,Zm(n,h))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,Gi(n,i,h)}return $m(n,i,o,c,h)}function Kb(n,i,o,c){var h=c.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=i.child=n.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~m}else c=0,i.child=null;return Yb(n,i,m,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ad(i,m!==null?m.cachePool:null),m!==null?Xy(i,m):Tm(),Jy(i);else return c=i.lanes=536870912,Yb(n,i,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Ad(i,m.cachePool),Xy(i,m),Os(),i.memoizedState=null):(n!==null&&Ad(i,null),Tm(),Os());return Sn(n,i,h,o),i.child}function Nc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yb(n,i,o,c,h){var m=gm();return m=m===null?null:{parent:nn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&Ad(i,null),Tm(),Jy(i),n!==null&&Bo(n,i,c,!0),i.childLanes=h,null}function Fd(n,i){return i=Hd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Qb(n,i,o){return Ha(i,n.child,null,o),n=Fd(i,i.pendingProps),n.flags|=2,fr(i),i.memoizedState=null,n}function QS(n,i,o){var c=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(et){if(c.mode==="hidden")return n=Fd(i,c),i.lanes=536870912,Nc(null,n);if(Em(i),(n=kt)?(n=ov(n,Mr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:As!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},o=My(n),o.return=i,i.child=o,wn=i,kt=null)):n=null,n===null)throw Ns(i);return i.lanes=536870912,null}return Fd(i,c)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(Em(i),h)if(i.flags&256)i.flags&=-257,i=Qb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(sn||Bo(n,i,o,!1),h=(o&n.childLanes)!==0,sn||h){if(c=St,c!==null&&(_=Vi(c,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,ja(n,_),sr(c,n,_),Gm;Zd(),i=Qb(n,i,o)}else n=m.treeContext,kt=Or(_.nextSibling),wn=i,et=!0,Is=null,Mr=!1,n!==null&&Vy(i,n),i=Fd(i,c),i.flags|=4096;return i}return n=Ui(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function qd(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function $m(n,i,o,c,h){return za(i),o=Am(n,i,o,c,void 0,h),c=Im(),n!==null&&!sn?(Nm(n,i,h),Gi(n,i,h)):(et&&c&&om(i),i.flags|=1,Sn(n,i,o,h),i.child)}function Xb(n,i,o,c,h,m){return za(i),i.updateQueue=null,o=Zy(i,c,o,h),Wy(n),c=Im(),n!==null&&!sn?(Nm(n,i,m),Gi(n,i,m)):(et&&c&&om(i),i.flags|=1,Sn(n,i,o,m),i.child)}function Jb(n,i,o,c,h){if(za(i),i.stateNode===null){var m=Po,_=o.contextType;typeof _=="object"&&_!==null&&(m=En(_)),m=new o(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},bm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?En(_):Po,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Fm(i,o,_,c),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&qm.enqueueReplaceState(m,m.state,null),wc(i,c,m,h),Tc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){m=i.stateNode;var E=i.memoizedProps,k=$a(o,E);m.props=k;var $=m.context,Z=o.contextType;_=Po,typeof Z=="object"&&Z!==null&&(_=En(Z));var se=o.getDerivedStateFromProps;Z=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||$!==_)&&Pb(i,m,c,_),Cs=!1;var K=i.memoizedState;m.state=K,wc(i,c,m,h),Tc(),$=i.memoizedState,E||K!==$||Cs?(typeof se=="function"&&(Fm(i,o,se,c),$=i.memoizedState),(k=Cs||jb(i,o,k,c,K,$,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=$),m.props=c,m.state=$,m.context=_,c=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,_m(n,i),_=i.memoizedProps,Z=$a(o,_),m.props=Z,se=i.pendingProps,K=m.context,$=o.contextType,k=Po,typeof $=="object"&&$!==null&&(k=En($)),E=o.getDerivedStateFromProps,($=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==se||K!==k)&&Pb(i,m,c,k),Cs=!1,K=i.memoizedState,m.state=K,wc(i,c,m,h),Tc();var J=i.memoizedState;_!==se||K!==J||Cs||n!==null&&n.dependencies!==null&&Ed(n.dependencies)?(typeof E=="function"&&(Fm(i,o,E,c),J=i.memoizedState),(Z=Cs||jb(i,o,Z,c,K,J,k)||n!==null&&n.dependencies!==null&&Ed(n.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,J,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,J,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=J),m.props=c,m.state=J,m.context=k,c=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return m=c,qd(n,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&c?(i.child=Ha(i,n.child,null,h),i.child=Ha(i,null,o,h)):Sn(n,i,o,h),i.memoizedState=m.state,n=i.child):n=Gi(n,i,h),n}function Wb(n,i,o,c){return La(),i.flags|=256,Sn(n,i,o,c),i.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(n){return{baseLanes:n,cachePool:By()}}function Qm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=pr),n}function Zb(n,i,o){var c=i.pendingProps,h=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(h?ks(i):Os(),(n=kt)?(n=ov(n,Mr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:As!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},o=My(n),o.return=i,i.child=o,wn=i,kt=null)):n=null,n===null)throw Ns(i);return Dp(n)?i.lanes=32:i.lanes=536870912,null}var E=c.children;return c=c.fallback,h?(Os(),h=i.mode,E=Hd({mode:"hidden",children:E},h),c=Pa(c,h,o,null),E.return=i,c.return=i,E.sibling=c,i.child=E,c=i.child,c.memoizedState=Ym(o),c.childLanes=Qm(n,_,o),i.memoizedState=Km,Nc(null,c)):(ks(i),Xm(i,E))}var k=n.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(m)i.flags&256?(ks(i),i.flags&=-257,i=Jm(n,i,o)):i.memoizedState!==null?(Os(),i.child=n.child,i.flags|=128,i=null):(Os(),E=c.fallback,h=i.mode,c=Hd({mode:"visible",children:c.children},h),E=Pa(E,h,o,null),E.flags|=2,c.return=i,E.return=i,c.sibling=E,i.child=c,Ha(i,n.child,null,o),c=i.child,c.memoizedState=Ym(o),c.childLanes=Qm(n,_,o),i.memoizedState=Km,i=Nc(null,c));else if(ks(i),Dp(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var $=_.dgst;_=$,c=Error(r(419)),c.stack="",c.digest=_,gc({value:c,source:null,stack:null}),i=Jm(n,i,o)}else if(sn||Bo(n,i,o,!1),_=(o&n.childLanes)!==0,sn||_){if(_=St,_!==null&&(c=Vi(_,o),c!==0&&c!==k.retryLane))throw k.retryLane=c,ja(n,c),sr(_,n,c),Gm;Cp(E)||Zd(),i=Jm(n,i,o)}else Cp(E)?(i.flags|=192,i.child=n.child,i=null):(n=k.treeContext,kt=Or(E.nextSibling),wn=i,et=!0,Is=null,Mr=!1,n!==null&&Vy(i,n),i=Xm(i,c.children),i.flags|=4096);return i}return h?(Os(),E=c.fallback,h=i.mode,k=n.child,$=k.sibling,c=Ui(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,$!==null?E=Ui($,E):(E=Pa(E,h,o,null),E.flags|=2),E.return=i,c.return=i,c.sibling=E,i.child=c,Nc(null,c),c=i.child,E=n.child.memoizedState,E===null?E=Ym(o):(h=E.cachePool,h!==null?(k=nn._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=By(),E={baseLanes:E.baseLanes|o,cachePool:h}),c.memoizedState=E,c.childLanes=Qm(n,_,o),i.memoizedState=Km,Nc(n.child,c)):(ks(i),o=n.child,n=o.sibling,o=Ui(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=o,i.memoizedState=null,o)}function Xm(n,i){return i=Hd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Hd(n,i){return n=dr(22,n,null,i),n.lanes=0,n}function Jm(n,i,o){return Ha(i,n.child,null,o),n=Xm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function e_(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),hm(n.return,i,o)}function Wm(n,i,o,c,h,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=h,_.treeForkCount=m)}function t_(n,i,o){var c=i.pendingProps,h=c.revealOrder,m=c.tail;c=c.children;var _=Qt.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,ue(Qt,_),Sn(n,i,c,o),c=et?pc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e_(n,o,i);else if(n.tag===19)e_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(o=i.child,h=null;o!==null;)n=o.alternate,n!==null&&Md(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),Wm(i,!1,h,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Md(n)===null){i.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}Wm(i,!0,o,null,m,c);break;case"together":Wm(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Gi(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Ps|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Bo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Ui(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Ui(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Zm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Ed(n)))}function XS(n,i,o){switch(i.tag){case 3:rt(i,i.stateNode.containerInfo),Rs(i,nn,n.memoizedState.cache),La();break;case 27:case 5:wt(i);break;case 4:rt(i,i.stateNode.containerInfo);break;case 10:Rs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Em(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ks(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Zb(n,i,o):(ks(i),n=Gi(n,i,o),n!==null?n.sibling:null);ks(i);break;case 19:var h=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Bo(n,i,o,!1),c=(o&i.childLanes)!==0),h){if(c)return t_(n,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(Qt,Qt.current),c)break;return null;case 22:return i.lanes=0,Kb(n,i,o,i.pendingProps);case 24:Rs(i,nn,n.memoizedState.cache)}return Gi(n,i,o)}function n_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!Zm(n,o)&&(i.flags&128)===0)return sn=!1,XS(n,i,o);sn=(n.flags&131072)!==0}else sn=!1,et&&(i.flags&1048576)!==0&&Oy(i,pc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Fa(i.elementType),i.type=n,typeof n=="function")im(n)?(c=$a(n,c),i.tag=1,i=Jb(null,i,n,c,o)):(i.tag=0,i=$m(null,i,n,c,o));else{if(n!=null){var h=n.$$typeof;if(h===le){i.tag=11,i=Hb(null,i,n,c,o);break e}else if(h===S){i.tag=14,i=Gb(null,i,n,c,o);break e}}throw i=me(n)||n,Error(r(306,i,""))}}return i;case 0:return $m(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,h=$a(c,i.pendingProps),Jb(n,i,c,h,o);case 3:e:{if(rt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var m=i.memoizedState;h=m.element,_m(n,i),wc(i,c,null,o);var _=i.memoizedState;if(c=_.cache,Rs(i,nn,c),c!==m.cache&&fm(i,[nn],o,!0),Tc(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Wb(n,i,c,o);break e}else if(c!==h){h=Rr(Error(r(424)),i),gc(h),i=Wb(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,kt=Or(n.firstChild),wn=i,et=!0,Is=null,Mr=!0,o=Ky(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(La(),c===h){i=Gi(n,i,o);break e}Sn(n,i,c,o)}i=i.child}return i;case 26:return qd(n,i),n===null?(o=fv(i.type,null,i.pendingProps,null))?i.memoizedState=o:et||(o=i.type,n=i.pendingProps,c=ah(ge.current).createElement(o),c[Vt]=i,c[Ft]=n,An(c,o,n),_e(c),i.stateNode=c):i.memoizedState=fv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return wt(i),n===null&&et&&(c=i.stateNode=uv(i.type,i.pendingProps,ge.current),wn=i,Mr=!0,h=kt,Fs(i.type)?(Mp=h,kt=Or(c.firstChild)):kt=h),Sn(n,i,i.pendingProps.children,o),qd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((h=c=kt)&&(c=AA(c,i.type,i.pendingProps,Mr),c!==null?(i.stateNode=c,wn=i,kt=Or(c.firstChild),Mr=!1,h=!0):h=!1),h||Ns(i)),wt(i),h=i.type,m=i.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,Ip(h,m)?c=null:_!==null&&Ip(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Am(n,i,BS,null,null,o),qc._currentValue=h),qd(n,i),Sn(n,i,c,o),i.child;case 6:return n===null&&et&&((n=o=kt)&&(o=IA(o,i.pendingProps,Mr),o!==null?(i.stateNode=o,wn=i,kt=null,n=!0):n=!1),n||Ns(i)),null;case 13:return Zb(n,i,o);case 4:return rt(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Ha(i,null,c,o):Sn(n,i,c,o),i.child;case 11:return Hb(n,i,i.type,i.pendingProps,o);case 7:return Sn(n,i,i.pendingProps,o),i.child;case 8:return Sn(n,i,i.pendingProps.children,o),i.child;case 12:return Sn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Rs(i,i.type,c.value),Sn(n,i,c.children,o),i.child;case 9:return h=i.type._context,c=i.pendingProps.children,za(i),h=En(h),c=c(h),i.flags|=1,Sn(n,i,c,o),i.child;case 14:return Gb(n,i,i.type,i.pendingProps,o);case 15:return $b(n,i,i.type,i.pendingProps,o);case 19:return t_(n,i,o);case 31:return QS(n,i,o);case 22:return Kb(n,i,o,i.pendingProps);case 24:return za(i),c=En(nn),n===null?(h=gm(),h===null&&(h=St,m=mm(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),i.memoizedState={parent:c,cache:h},bm(i),Rs(i,nn,h)):((n.lanes&o)!==0&&(_m(n,i),wc(i,null,null,o),Tc()),h=n.memoizedState,m=i.memoizedState,h.parent!==c?(h={parent:c,cache:c},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Rs(i,nn,c)):(c=m.cache,Rs(i,nn,c),c!==h.cache&&fm(i,[nn],o,!0))),Sn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function $i(n){n.flags|=4}function ep(n,i,o,c,h){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(R_())n.flags|=8192;else throw qa=Nd,ym}else n.flags&=-16777217}function r_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!bv(i))if(R_())n.flags|=8192;else throw qa=Nd,ym}function Gd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Fr():536870912,n.lanes|=i,Zo|=i)}function Rc(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function JS(n,i,o){var c=i.pendingProps;switch(lm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Ot(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Fi(nn),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(zo(i)?$i(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,um())),Ot(i),null;case 26:var h=i.type,m=i.memoizedState;return n===null?($i(i),m!==null?(Ot(i),r_(i,m)):(Ot(i),ep(i,h,null,c,o))):m?m!==n.memoizedState?($i(i),Ot(i),r_(i,m)):(Ot(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&$i(i),Ot(i),ep(i,h,n,c,o)),null;case 27:if(Xn(i),o=ge.current,h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&$i(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ot(i),null}n=ve.current,zo(i)?jy(i):(n=uv(h,c,o),i.stateNode=n,$i(i))}return Ot(i),null;case 5:if(Xn(i),h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&$i(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ot(i),null}if(m=ve.current,zo(i))jy(i);else{var _=ah(ge.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(h,{is:c.is}):_.createElement(h)}}m[Vt]=i,m[Ft]=c;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(An(m,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&$i(i)}}return Ot(i),ep(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&$i(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=ge.current,zo(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,h=wn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[Vt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Z_(n.nodeValue,o)),n||Ns(i,!0)}else n=ah(n).createTextNode(c),n[Vt]=i,i.stateNode=n}return Ot(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=zo(i),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Vt]=i}else La(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),n=!1}else o=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(fr(i),i):(fr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Ot(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=zo(i),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Vt]=i}else La(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),h=!1}else h=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(fr(i),i):(fr(i),null)}return fr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Gd(i,i.updateQueue),Ot(i),null);case 4:return Ge(),n===null&&Tp(i.stateNode.containerInfo),Ot(i),null;case 10:return Fi(i.type),Ot(i),null;case 19:if(ne(Qt),c=i.memoizedState,c===null)return Ot(i),null;if(h=(i.flags&128)!==0,m=c.rendering,m===null)if(h)Rc(c,!1);else{if(Ht!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Md(n),m!==null){for(i.flags|=128,Rc(c,!1),n=m.updateQueue,i.updateQueue=n,Gd(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Dy(o,n),o=o.sibling;return ue(Qt,Qt.current&1|2),et&&zi(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Zt()>Xd&&(i.flags|=128,h=!0,Rc(c,!1),i.lanes=4194304)}else{if(!h)if(n=Md(m),n!==null){if(i.flags|=128,h=!0,n=n.updateQueue,i.updateQueue=n,Gd(i,n),Rc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!et)return Ot(i),null}else 2*Zt()-c.renderingStartTime>Xd&&o!==536870912&&(i.flags|=128,h=!0,Rc(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(n=c.last,n!==null?n.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Zt(),n.sibling=null,o=Qt.current,ue(Qt,h?o&1|2:o&1),et&&zi(i,c.treeForkCount),n):(Ot(i),null);case 22:case 23:return fr(i),wm(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),o=i.updateQueue,o!==null&&Gd(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&ne(Ba),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Fi(nn),Ot(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function WS(n,i){switch(lm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fi(nn),Ge(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Xn(i),null;case 31:if(i.memoizedState!==null){if(fr(i),i.alternate===null)throw Error(r(340));La()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(fr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));La()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ne(Qt),null;case 4:return Ge(),null;case 10:return Fi(i.type),null;case 22:case 23:return fr(i),wm(),n!==null&&ne(Ba),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Fi(nn),null;case 25:return null;default:return null}}function i_(n,i){switch(lm(i),i.tag){case 3:Fi(nn),Ge();break;case 26:case 27:case 5:Xn(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&fr(i);break;case 13:fr(i);break;case 19:ne(Qt);break;case 10:Fi(i.type);break;case 22:case 23:fr(i),wm(),n!==null&&ne(Ba);break;case 24:Fi(nn)}}function Cc(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&n)===n){c=void 0;var m=o.create,_=o.inst;c=m(),_.destroy=c}o=o.next}while(o!==h)}}catch(E){ft(i,i.return,E)}}function Vs(n,i,o){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&n)===n){var _=c.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var k=o,$=E;try{$()}catch(Z){ft(h,k,Z)}}}c=c.next}while(c!==m)}}catch(Z){ft(i,i.return,Z)}}function s_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Qy(i,o)}catch(c){ft(n,n.return,c)}}}function a_(n,i,o){o.props=$a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ft(n,i,c)}}function Dc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(h){ft(n,i,h)}}function bi(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){ft(n,i,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ft(n,i,h)}else o.current=null}function o_(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){ft(n,n.return,h)}}function tp(n,i,o){try{var c=n.stateNode;vA(c,n.type,o,i),c[Ft]=i}catch(h){ft(n,n.return,h)}}function l_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Fs(n.type)||n.tag===4}function np(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||l_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Fs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rp(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Gr));else if(c!==4&&(c===27&&Fs(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(rp(n,i,o),n=n.sibling;n!==null;)rp(n,i,o),n=n.sibling}function $d(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Fs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for($d(n,i,o),n=n.sibling;n!==null;)$d(n,i,o),n=n.sibling}function c_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);An(i,c,o),i[Vt]=n,i[Ft]=o}catch(m){ft(n,n.return,m)}}var Ki=!1,an=!1,ip=!1,u_=typeof WeakSet=="function"?WeakSet:Set,yn=null;function ZS(n,i){if(n=n.containerInfo,Sp=fh,n=Ty(n),Jf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,E=-1,k=-1,$=0,Z=0,se=n,K=null;t:for(;;){for(var J;se!==o||h!==0&&se.nodeType!==3||(E=_+h),se!==m||c!==0&&se.nodeType!==3||(k=_+c),se.nodeType===3&&(_+=se.nodeValue.length),(J=se.firstChild)!==null;)K=se,se=J;for(;;){if(se===n)break t;if(K===o&&++$===h&&(E=_),K===m&&++Z===c&&(k=_),(J=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=J}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ap={focusedElem:n,selectionRange:o},fh=!1,yn=i;yn!==null;)if(i=yn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,yn=n;else for(;yn!==null;){switch(i=yn,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)h=n[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,h=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Ee=$a(o.type,h);n=c.getSnapshotBeforeUpdate(Ee,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(De){ft(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Rp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,yn=n;break}yn=i.return}}function d_(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Qi(n,o),c&4&&Cc(5,o);break;case 1:if(Qi(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(_){ft(o,o.return,_)}else{var h=$a(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(h,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(o,o.return,_)}}c&64&&s_(o),c&512&&Dc(o,o.return);break;case 3:if(Qi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Qy(n,i)}catch(_){ft(o,o.return,_)}}break;case 27:i===null&&c&4&&c_(o);case 26:case 5:Qi(n,o),i===null&&c&4&&o_(o),c&512&&Dc(o,o.return);break;case 12:Qi(n,o);break;case 31:Qi(n,o),c&4&&m_(n,o);break;case 13:Qi(n,o),c&4&&p_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=lA.bind(null,o),NA(n,o))));break;case 22:if(c=o.memoizedState!==null||Ki,!c){i=i!==null&&i.memoizedState!==null||an,h=Ki;var m=an;Ki=c,(an=i)&&!m?Xi(n,o,(o.subtreeFlags&8772)!==0):Qi(n,o),Ki=h,an=m}break;case 30:break;default:Qi(n,o)}}function h_(n){var i=n.alternate;i!==null&&(n.alternate=null,h_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&cn(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Pt=null,tr=!1;function Yi(n,i,o){for(o=o.child;o!==null;)f_(n,i,o),o=o.sibling}function f_(n,i,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Bn,o)}catch{}switch(o.tag){case 26:an||bi(o,i),Yi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||bi(o,i);var c=Pt,h=tr;Fs(o.type)&&(Pt=o.stateNode,tr=!1),Yi(n,i,o),zc(o.stateNode),Pt=c,tr=h;break;case 5:an||bi(o,i);case 6:if(c=Pt,h=tr,Pt=null,Yi(n,i,o),Pt=c,tr=h,Pt!==null)if(tr)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(o.stateNode)}catch(m){ft(o,i,m)}else try{Pt.removeChild(o.stateNode)}catch(m){ft(o,i,m)}break;case 18:Pt!==null&&(tr?(n=Pt,sv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ol(n)):sv(Pt,o.stateNode));break;case 4:c=Pt,h=tr,Pt=o.stateNode.containerInfo,tr=!0,Yi(n,i,o),Pt=c,tr=h;break;case 0:case 11:case 14:case 15:Vs(2,o,i),an||Vs(4,o,i),Yi(n,i,o);break;case 1:an||(bi(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&a_(o,i,c)),Yi(n,i,o);break;case 21:Yi(n,i,o);break;case 22:an=(c=an)||o.memoizedState!==null,Yi(n,i,o),an=c;break;default:Yi(n,i,o)}}function m_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ol(n)}catch(o){ft(i,i.return,o)}}}function p_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ol(n)}catch(o){ft(i,i.return,o)}}function eA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new u_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new u_),i;default:throw Error(r(435,n.tag))}}function Kd(n,i){var o=eA(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var h=cA.bind(null,n,c);c.then(h,h)}})}function nr(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],m=n,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Fs(E.type)){Pt=E.stateNode,tr=!1;break e}break;case 5:Pt=E.stateNode,tr=!1;break e;case 3:case 4:Pt=E.stateNode.containerInfo,tr=!0;break e}E=E.return}if(Pt===null)throw Error(r(160));f_(m,_,h),Pt=null,tr=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)g_(i,n),i=i.sibling}var Jr=null;function g_(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:nr(i,n),rr(n),c&4&&(Vs(3,n,n.return),Cc(3,n),Vs(5,n,n.return));break;case 1:nr(i,n),rr(n),c&512&&(an||o===null||bi(o,o.return)),c&64&&Ki&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=Jr;if(nr(i,n),rr(n),c&512&&(an||o===null||bi(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":m=h.getElementsByTagName("title")[0],(!m||m[kn]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(c),h.head.insertBefore(m,h.querySelector("head > title"))),An(m,c,o),m[Vt]=n,_e(m),c=m;break e;case"link":var _=gv("link","href",h).get(c+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}m=h.createElement(c),An(m,c,o),h.head.appendChild(m);break;case"meta":if(_=gv("meta","content",h).get(c+(o.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}m=h.createElement(c),An(m,c,o),h.head.appendChild(m);break;default:throw Error(r(468,c))}m[Vt]=n,_e(m),c=m}n.stateNode=c}else yv(h,n.type,n.stateNode);else n.stateNode=pv(h,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?yv(h,n.type,n.stateNode):pv(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&tp(n,n.memoizedProps,o.memoizedProps)}break;case 27:nr(i,n),rr(n),c&512&&(an||o===null||bi(o,o.return)),o!==null&&c&4&&tp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(nr(i,n),rr(n),c&512&&(an||o===null||bi(o,o.return)),n.flags&32){h=n.stateNode;try{er(h,"")}catch(Ee){ft(n,n.return,Ee)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,tp(n,h,o!==null?o.memoizedProps:h)),c&1024&&(ip=!0);break;case 6:if(nr(i,n),rr(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ee){ft(n,n.return,Ee)}}break;case 3:if(ch=null,h=Jr,Jr=oh(i.containerInfo),nr(i,n),Jr=h,rr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ol(i.containerInfo)}catch(Ee){ft(n,n.return,Ee)}ip&&(ip=!1,y_(n));break;case 4:c=Jr,Jr=oh(n.stateNode.containerInfo),nr(i,n),rr(n),Jr=c;break;case 12:nr(i,n),rr(n);break;case 31:nr(i,n),rr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 13:nr(i,n),rr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Qd=Zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 22:h=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,$=Ki,Z=an;if(Ki=$||h,an=Z||k,nr(i,n),an=Z,Ki=$,rr(n),c&8192)e:for(i=n.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||k||Ki||an||Ka(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=k.stateNode;var se=k.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ee){ft(k,k.return,Ee)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(Ee){ft(k,k.return,Ee)}}}else if(i.tag===18){if(o===null){k=i;try{var J=k.stateNode;h?av(J,!0):av(k.stateNode,!1)}catch(Ee){ft(k,k.return,Ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Kd(n,o))));break;case 19:nr(i,n),rr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Kd(n,c)));break;case 30:break;case 21:break;default:nr(i,n),rr(n)}}function rr(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(l_(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var h=o.stateNode,m=np(n);$d(n,m,h);break;case 5:var _=o.stateNode;o.flags&32&&(er(_,""),o.flags&=-33);var E=np(n);$d(n,E,_);break;case 3:case 4:var k=o.stateNode.containerInfo,$=np(n);rp(n,$,k);break;default:throw Error(r(161))}}catch(Z){ft(n,n.return,Z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function y_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;y_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Qi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)d_(n,i.alternate,i),i=i.sibling}function Ka(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Vs(4,i,i.return),Ka(i);break;case 1:bi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&a_(i,i.return,o),Ka(i);break;case 27:zc(i.stateNode);case 26:case 5:bi(i,i.return),Ka(i);break;case 22:i.memoizedState===null&&Ka(i);break;case 30:Ka(i);break;default:Ka(i)}n=n.sibling}}function Xi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,h=n,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Xi(h,m,o),Cc(4,m);break;case 1:if(Xi(h,m,o),c=m,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){ft(c,c.return,$)}if(c=m,h=c.updateQueue,h!==null){var E=c.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Yy(k[h],E)}catch($){ft(c,c.return,$)}}o&&_&64&&s_(m),Dc(m,m.return);break;case 27:c_(m);case 26:case 5:Xi(h,m,o),o&&c===null&&_&4&&o_(m),Dc(m,m.return);break;case 12:Xi(h,m,o);break;case 31:Xi(h,m,o),o&&_&4&&m_(h,m);break;case 13:Xi(h,m,o),o&&_&4&&p_(h,m);break;case 22:m.memoizedState===null&&Xi(h,m,o),Dc(m,m.return);break;case 30:break;default:Xi(h,m,o)}i=i.sibling}}function sp(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&yc(o))}function ap(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&yc(n))}function Wr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)b_(n,i,o,c),i=i.sibling}function b_(n,i,o,c){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Wr(n,i,o,c),h&2048&&Cc(9,i);break;case 1:Wr(n,i,o,c);break;case 3:Wr(n,i,o,c),h&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&yc(n)));break;case 12:if(h&2048){Wr(n,i,o,c),n=i.stateNode;try{var m=i.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){ft(i,i.return,k)}}else Wr(n,i,o,c);break;case 31:Wr(n,i,o,c);break;case 13:Wr(n,i,o,c);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Wr(n,i,o,c):Mc(n,i):m._visibility&2?Wr(n,i,o,c):(m._visibility|=2,Xo(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),h&2048&&sp(_,i);break;case 24:Wr(n,i,o,c),h&2048&&ap(i.alternate,i);break;default:Wr(n,i,o,c)}}function Xo(n,i,o,c,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,_=i,E=o,k=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:Xo(m,_,E,k,h),Cc(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Xo(m,_,E,k,h):Mc(m,_):(Z._visibility|=2,Xo(m,_,E,k,h)),h&&$&2048&&sp(_.alternate,_);break;case 24:Xo(m,_,E,k,h),h&&$&2048&&ap(_.alternate,_);break;default:Xo(m,_,E,k,h)}i=i.sibling}}function Mc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,h=c.flags;switch(c.tag){case 22:Mc(o,c),h&2048&&sp(c.alternate,c);break;case 24:Mc(o,c),h&2048&&ap(c.alternate,c);break;default:Mc(o,c)}i=i.sibling}}var kc=8192;function Jo(n,i,o){if(n.subtreeFlags&kc)for(n=n.child;n!==null;)__(n,i,o),n=n.sibling}function __(n,i,o){switch(n.tag){case 26:Jo(n,i,o),n.flags&kc&&n.memoizedState!==null&&zA(o,Jr,n.memoizedState,n.memoizedProps);break;case 5:Jo(n,i,o);break;case 3:case 4:var c=Jr;Jr=oh(n.stateNode.containerInfo),Jo(n,i,o),Jr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=kc,kc=16777216,Jo(n,i,o),kc=c):Jo(n,i,o));break;default:Jo(n,i,o)}}function v_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Oc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,T_(c,n)}v_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)x_(n),n=n.sibling}function x_(n){switch(n.tag){case 0:case 11:case 15:Oc(n),n.flags&2048&&Vs(9,n,n.return);break;case 3:Oc(n);break;case 12:Oc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Yd(n)):Oc(n);break;default:Oc(n)}}function Yd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,T_(c,n)}v_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Vs(8,i,i.return),Yd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Yd(i));break;default:Yd(i)}n=n.sibling}}function T_(n,i){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:Vs(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,yn=c;else e:for(o=n;yn!==null;){c=yn;var h=c.sibling,m=c.return;if(h_(c),c===o){yn=null;break e}if(h!==null){h.return=m,yn=h;break e}yn=m}}}var tA={getCacheForType:function(n){var i=En(nn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return En(nn).controller.signal}},nA=typeof WeakMap=="function"?WeakMap:Map,ct=0,St=null,$e=null,Qe=0,ht=0,mr=null,js=!1,Wo=!1,op=!1,Ji=0,Ht=0,Ps=0,Ya=0,lp=0,pr=0,Zo=0,Vc=null,ir=null,cp=!1,Qd=0,w_=0,Xd=1/0,Jd=null,Ls=null,hn=0,Us=null,el=null,Wi=0,up=0,dp=null,E_=null,jc=0,hp=null;function gr(){return(ct&2)!==0&&Qe!==0?Qe&-Qe:F.T!==null?bp():gs()}function S_(){if(pr===0)if((Qe&536870912)===0||et){var n=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),pr=n}else pr=536870912;return n=hr.current,n!==null&&(n.flags|=32),pr}function sr(n,i,o){(n===St&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(tl(n,0),zs(n,Qe,pr,!1)),qr(n,o),((ct&2)===0||n!==St)&&(n===St&&((ct&2)===0&&(Ya|=o),Ht===4&&zs(n,Qe,pr,!1)),_i(n))}function A_(n,i,o){if((ct&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||xn(n,i),h=c?sA(n,i):mp(n,i,!0),m=c;do{if(h===0){Wo&&!c&&zs(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!rA(o)){h=mp(n,i,!1),m=!1;continue}if(h===2){if(m=i,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=n;h=Vc;var k=E.current.memoizedState.isDehydrated;if(k&&(tl(E,_).flags|=256),_=mp(E,_,!1),_!==2){if(op&&!k){E.errorRecoveryDisabledLanes|=m,Ya|=m,h=4;break e}m=ir,ir=h,m!==null&&(ir===null?ir=m:ir.push.apply(ir,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){tl(n,0),zs(n,i,0,!0);break}e:{switch(c=n,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:zs(c,i,pr,!js);break e;case 2:ir=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=Qd+300-Zt(),10<h)){if(zs(c,i,pr,!js),Mn(c,0,!0)!==0)break e;Wi=i,c.timeoutHandle=rv(I_.bind(null,c,o,ir,Jd,cp,i,pr,Ya,Zo,js,m,"Throttled",-0,0),h);break e}I_(c,o,ir,Jd,cp,i,pr,Ya,Zo,js,m,null,-0,0)}}break}while(!0);_i(n)}function I_(n,i,o,c,h,m,_,E,k,$,Z,se,K,J){if(n.timeoutHandle=-1,se=i.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gr},__(i,m,se);var Ee=(m&62914560)===m?Qd-Zt():(m&4194048)===m?w_-Zt():0;if(Ee=BA(se,Ee),Ee!==null){Wi=m,n.cancelPendingCommit=Ee(V_.bind(null,n,i,m,o,c,h,_,E,k,Z,se,null,K,J)),zs(n,m,_,!$);return}}V_(n,i,m,o,c,h,_,E,k)}function rA(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],m=h.getSnapshot;h=h.value;try{if(!ur(m(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zs(n,i,o,c){i&=~lp,i&=~Ya,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var h=i;0<h;){var m=31-At(h),_=1<<m;c[m]=-1,h&=~_}o!==0&&Hr(n,o,i)}function Wd(){return(ct&6)===0?(Pc(0),!1):!0}function fp(){if($e!==null){if(ht===0)var n=$e.return;else n=$e,Bi=Ua=null,Rm(n),Go=null,_c=0,n=$e;for(;n!==null;)i_(n.alternate,n),n=n.return;$e=null}}function tl(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,wA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Wi=0,fp(),St=n,$e=o=Ui(n.current,null),Qe=i,ht=0,mr=null,js=!1,Wo=xn(n,i),op=!1,Zo=pr=lp=Ya=Ps=Ht=0,ir=Vc=null,cp=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var h=31-At(c),m=1<<h;i|=n[h],c&=~m}return Ji=i,_d(),o}function N_(n,i){Be=null,F.H=Ic,i===Ho||i===Id?(i=Hy(),ht=3):i===ym?(i=Hy(),ht=4):ht=i===Gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mr=i,$e===null&&(Ht=1,Bd(n,Rr(i,n.current)))}function R_(){var n=hr.current;return n===null?!0:(Qe&4194048)===Qe?kr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?n===kr:!1}function C_(){var n=F.H;return F.H=Ic,n===null?Ic:n}function D_(){var n=F.A;return F.A=tA,n}function Zd(){Ht=4,js||(Qe&4194048)!==Qe&&hr.current!==null||(Wo=!0),(Ps&134217727)===0&&(Ya&134217727)===0||St===null||zs(St,Qe,pr,!1)}function mp(n,i,o){var c=ct;ct|=2;var h=C_(),m=D_();(St!==n||Qe!==i)&&(Jd=null,tl(n,i)),i=!1;var _=Ht;e:do try{if(ht!==0&&$e!==null){var E=$e,k=mr;switch(ht){case 8:fp(),_=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(i=!0);var $=ht;if(ht=0,mr=null,nl(n,E,k,$),o&&Wo){_=0;break e}break;default:$=ht,ht=0,mr=null,nl(n,E,k,$)}}iA(),_=Ht;break}catch(Z){N_(n,Z)}while(!0);return i&&n.shellSuspendCounter++,Bi=Ua=null,ct=c,F.H=h,F.A=m,$e===null&&(St=null,Qe=0,_d()),_}function iA(){for(;$e!==null;)M_($e)}function sA(n,i){var o=ct;ct|=2;var c=C_(),h=D_();St!==n||Qe!==i?(Jd=null,Xd=Zt()+500,tl(n,i)):Wo=xn(n,i);e:do try{if(ht!==0&&$e!==null){i=$e;var m=mr;t:switch(ht){case 1:ht=0,mr=null,nl(n,i,m,1);break;case 2:case 9:if(Fy(m)){ht=0,mr=null,k_(i);break}i=function(){ht!==2&&ht!==9||St!==n||(ht=7),_i(n)},m.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Fy(m)?(ht=0,mr=null,k_(i)):(ht=0,mr=null,nl(n,i,m,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var E=$e;if(_?bv(_):E.stateNode.complete){ht=0,mr=null;var k=E.sibling;if(k!==null)$e=k;else{var $=E.return;$!==null?($e=$,eh($)):$e=null}break t}}ht=0,mr=null,nl(n,i,m,5);break;case 6:ht=0,mr=null,nl(n,i,m,6);break;case 8:fp(),Ht=6;break e;default:throw Error(r(462))}}aA();break}catch(Z){N_(n,Z)}while(!0);return Bi=Ua=null,F.H=c,F.A=h,ct=o,$e!==null?0:(St=null,Qe=0,_d(),Ht)}function aA(){for(;$e!==null&&!ms();)M_($e)}function M_(n){var i=n_(n.alternate,n,Ji);n.memoizedProps=n.pendingProps,i===null?eh(n):$e=i}function k_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Xb(o,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Xb(o,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:Rm(i);default:i_(o,i),i=$e=Dy(i,Ji),i=n_(o,i,Ji)}n.memoizedProps=n.pendingProps,i===null?eh(n):$e=i}function nl(n,i,o,c){Bi=Ua=null,Rm(i),Go=null,_c=0;var h=i.return;try{if(YS(n,h,i,o,Qe)){Ht=1,Bd(n,Rr(o,n.current)),$e=null;return}}catch(m){if(h!==null)throw $e=h,m;Ht=1,Bd(n,Rr(o,n.current)),$e=null;return}i.flags&32768?(et||c===1?n=!0:Wo||(Qe&536870912)!==0?n=!1:(js=n=!0,(c===2||c===9||c===3||c===6)&&(c=hr.current,c!==null&&c.tag===13&&(c.flags|=16384))),O_(i,n)):eh(i)}function eh(n){var i=n;do{if((i.flags&32768)!==0){O_(i,js);return}n=i.return;var o=JS(i.alternate,i,Ji);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);Ht===0&&(Ht=5)}function O_(n,i){do{var o=WS(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Ht=6,$e=null}function V_(n,i,o,c,h,m,_,E,k){n.cancelPendingCommit=null;do th();while(hn!==0);if((ct&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=nm,Ea(n,o,m,_,E,k),n===St&&($e=St=null,Qe=0),el=i,Us=n,Wi=o,up=m,dp=h,E_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,uA(Cn,function(){return z_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,h=oe.p,oe.p=2,_=ct,ct|=4;try{ZS(n,i,o)}finally{ct=_,oe.p=h,F.T=c}}hn=1,j_(),P_(),L_()}}function j_(){if(hn===1){hn=0;var n=Us,i=el,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var c=oe.p;oe.p=2;var h=ct;ct|=4;try{g_(i,n);var m=Ap,_=Ty(n.containerInfo),E=m.focusedElem,k=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&xy(E.ownerDocument.documentElement,E)){if(k!==null&&Jf(E)){var $=k.start,Z=k.end;if(Z===void 0&&(Z=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(Z,E.value.length);else{var se=E.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var J=K.getSelection(),Ee=E.textContent.length,De=Math.min(k.start,Ee),Tt=k.end===void 0?De:Math.min(k.end,Ee);!J.extend&&De>Tt&&(_=Tt,Tt=De,De=_);var U=vy(E,De),V=vy(E,Tt);if(U&&V&&(J.rangeCount!==1||J.anchorNode!==U.node||J.anchorOffset!==U.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var H=se.createRange();H.setStart(U.node,U.offset),J.removeAllRanges(),De>Tt?(J.addRange(H),J.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),J.addRange(H))}}}}for(se=[],J=E;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<se.length;E++){var re=se[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}fh=!!Sp,Ap=Sp=null}finally{ct=h,oe.p=c,F.T=o}}n.current=i,hn=2}}function P_(){if(hn===2){hn=0;var n=Us,i=el,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var c=oe.p;oe.p=2;var h=ct;ct|=4;try{d_(n,i.alternate,i)}finally{ct=h,oe.p=c,F.T=o}}hn=3}}function L_(){if(hn===4||hn===3){hn=0,Ye();var n=Us,i=el,o=Wi,c=E_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,el=Us=null,U_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Ls=null),Ut(o),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Bn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=F.T,h=oe.p,oe.p=2,F.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var E=c[_];m(E.value,{componentStack:E.stack})}}finally{F.T=i,oe.p=h}}(Wi&3)!==0&&th(),_i(n),h=n.pendingLanes,(o&261930)!==0&&(h&42)!==0?n===hp?jc++:(jc=0,hp=n):jc=0,Pc(0)}}function U_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,yc(i)))}function th(){return j_(),P_(),L_(),z_()}function z_(){if(hn!==5)return!1;var n=Us,i=up;up=0;var o=Ut(Wi),c=F.T,h=oe.p;try{oe.p=32>o?32:o,F.T=null,o=dp,dp=null;var m=Us,_=Wi;if(hn=0,el=Us=null,Wi=0,(ct&6)!==0)throw Error(r(331));var E=ct;if(ct|=4,x_(m.current),b_(m,m.current,_,o),ct=E,Pc(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Bn,m)}catch{}return!0}finally{oe.p=h,F.T=c,U_(n,i)}}function B_(n,i,o){i=Rr(o,i),i=Hm(n.stateNode,i,2),n=Ms(n,i,2),n!==null&&(qr(n,2),_i(n))}function ft(n,i,o){if(n.tag===3)B_(n,n,o);else for(;i!==null;){if(i.tag===3){B_(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ls===null||!Ls.has(c))){n=Rr(o,n),o=Fb(2),c=Ms(i,o,2),c!==null&&(qb(o,c,i,n),qr(c,2),_i(c));break}}i=i.return}}function pp(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new nA;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(o)||(op=!0,h.add(o),n=oA.bind(null,n,i,o),i.then(n,n))}function oA(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,St===n&&(Qe&o)===o&&(Ht===4||Ht===3&&(Qe&62914560)===Qe&&300>Zt()-Qd?(ct&2)===0&&tl(n,0):lp|=o,Zo===Qe&&(Zo=0)),_i(n)}function F_(n,i){i===0&&(i=Fr()),n=ja(n,i),n!==null&&(qr(n,i),_i(n))}function lA(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),F_(n,o)}function cA(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),F_(n,o)}function uA(n,i){return yt(n,i)}var nh=null,rl=null,gp=!1,rh=!1,yp=!1,Bs=0;function _i(n){n!==rl&&n.next===null&&(rl===null?nh=rl=n:rl=rl.next=n),rh=!0,gp||(gp=!0,hA())}function Pc(n,i){if(!yp&&rh){yp=!0;do for(var o=!1,c=nh;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var m=0;else{var _=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=h&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,$_(c,m))}else m=Qe,m=Mn(c,c===St?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||xn(c,m)||(o=!0,$_(c,m));c=c.next}while(o);yp=!1}}function dA(){q_()}function q_(){rh=gp=!1;var n=0;Bs!==0&&TA()&&(n=Bs);for(var i=Zt(),o=null,c=nh;c!==null;){var h=c.next,m=H_(c,i);m===0?(c.next=null,o===null?nh=h:o.next=h,h===null&&(rl=o)):(o=c,(n!==0||(m&3)!==0)&&(rh=!0)),c=h}hn!==0&&hn!==5||Pc(n),Bs!==0&&(Bs=0)}function H_(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-At(m),E=1<<_,k=h[_];k===-1?((E&o)===0||(E&c)!==0)&&(h[_]=ki(E,i)):k<=i&&(n.expiredLanes|=E),m&=~E}if(i=St,o=Qe,o=Mn(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Lr(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||xn(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Lr(c),Ut(o)){case 2:case 8:o=si;break;case 32:o=Cn;break;case 268435456:o=zr;break;default:o=Cn}return c=G_.bind(null,n),o=yt(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Lr(c),n.callbackPriority=2,n.callbackNode=null,2}function G_(n,i){if(hn!==0&&hn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(th()&&n.callbackNode!==o)return null;var c=Qe;return c=Mn(n,n===St?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(A_(n,c,i),H_(n,Zt()),n.callbackNode!=null&&n.callbackNode===o?G_.bind(null,n):null)}function $_(n,i){if(th())return null;A_(n,i,!0)}function hA(){EA(function(){(ct&6)!==0?yt(Di,dA):q_()})}function bp(){if(Bs===0){var n=Fo;n===0&&(n=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),Bs=n}return Bs}function K_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Io(""+n)}function Y_(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function fA(n,i,o,c,h){if(i==="submit"&&o&&o.stateNode===h){var m=K_((h[Ft]||null).action),_=c.submitter;_&&(i=(i=_[Ft]||null)?K_(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var E=new hi("action","action",null,c,h);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bs!==0){var k=_?Y_(h,_):new FormData(h);Lm(o,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(E.preventDefault(),k=_?Y_(h,_):new FormData(h),Lm(o,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var _p=0;_p<tm.length;_p++){var vp=tm[_p],mA=vp.toLowerCase(),pA=vp[0].toUpperCase()+vp.slice(1);Xr(mA,"on"+pA)}Xr(Sy,"onAnimationEnd"),Xr(Ay,"onAnimationIteration"),Xr(Iy,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(DS,"onTransitionRun"),Xr(MS,"onTransitionStart"),Xr(kS,"onTransitionCancel"),Xr(Ny,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Q_(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],h=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var _=c.length-1;0<=_;_--){var E=c[_],k=E.instance,$=E.currentTarget;if(E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=$;try{m(h)}catch(Z){bd(Z)}h.currentTarget=null,m=k}else for(_=0;_<c.length;_++){if(E=c[_],k=E.instance,$=E.currentTarget,E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=$;try{m(h)}catch(Z){bd(Z)}h.currentTarget=null,m=k}}}}function Ke(n,i){var o=i[Ue];o===void 0&&(o=i[Ue]=new Set);var c=n+"__bubble";o.has(c)||(X_(i,n,2,!1),o.add(c))}function xp(n,i,o){var c=0;i&&(c|=4),X_(o,n,c,i)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Tp(n){if(!n[ih]){n[ih]=!0,Me.forEach(function(o){o!=="selectionchange"&&(gA.has(o)||xp(o,!1,n),xp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ih]||(i[ih]=!0,xp("selectionchange",!1,i))}}function X_(n,i,o,c){switch(Sv(i)){case 2:var h=HA;break;case 8:h=GA;break;default:h=Pp}o=h.bind(null,i,o,n),h=void 0,!Na||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,o,{capture:!0,passive:h}):n.addEventListener(i,o,!0):h!==void 0?n.addEventListener(i,o,{passive:h}):n.addEventListener(i,o,!1)}function wp(n,i,o,c,h){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var E=c.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=c.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=en(E),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){c=m=_;continue e}E=E.parentNode}}c=c.return}Ts(function(){var $=m,Z=Sr(o),se=[];e:{var K=Ry.get(n);if(K!==void 0){var J=hi,Ee=n;switch(n){case"keypress":if(Ca(o)===0)break e;case"keydown":case"keyup":J=pd;break;case"focusin":Ee="focus",J=Ma;break;case"focusout":Ee="blur",J=Ma;break;case"beforeblur":case"afterblur":J=Ma;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=b;break;case Sy:case Ay:case Iy:J=ld;break;case Ny:J=I;break;case"scroll":case"scrollend":J=lc;break;case"wheel":J=Q;break;case"copy":case"cut":case"paste":J=cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Li;break;case"toggle":case"beforetoggle":J=ze}var De=(i&4)!==0,Tt=!De&&(n==="scroll"||n==="scrollend"),U=De?K!==null?K+"Capture":null:K;De=[];for(var V=$,H;V!==null;){var re=V;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||U===null||(re=$r(V,U),re!=null&&De.push(Uc(V,re,H))),Tt)break;V=V.return}0<De.length&&(K=new J(K,Ee,null,o,Z),se.push({event:K,listeners:De}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",K&&o!==sc&&(Ee=o.relatedTarget||o.fromElement)&&(en(Ee)||Ee[Te]))break e;if((J||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Ee=o.relatedTarget||o.toElement,J=$,Ee=Ee?en(Ee):null,Ee!==null&&(Tt=l(Ee),De=Ee.tag,Ee!==Tt||De!==5&&De!==27&&De!==6)&&(Ee=null)):(J=null,Ee=$),J!==Ee)){if(De=cc,re="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(De=Li,re="onPointerLeave",U="onPointerEnter",V="pointer"),Tt=J==null?K:te(J),H=Ee==null?K:te(Ee),K=new De(re,V+"leave",J,o,Z),K.target=Tt,K.relatedTarget=H,re=null,en(Z)===$&&(De=new De(U,V+"enter",Ee,o,Z),De.target=H,De.relatedTarget=Tt,re=De),Tt=re,J&&Ee)t:{for(De=yA,U=J,V=Ee,H=0,re=U;re;re=De(re))H++;re=0;for(var Re=V;Re;Re=De(Re))re++;for(;0<H-re;)U=De(U),H--;for(;0<re-H;)V=De(V),re--;for(;H--;){if(U===V||V!==null&&U===V.alternate){De=U;break t}U=De(U),V=De(V)}De=null}else De=null;J!==null&&J_(se,K,J,De,!1),Ee!==null&&Tt!==null&&J_(se,Tt,Ee,De,!0)}}e:{if(K=$?te($):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var it=my;else if(hy(K))if(py)it=NS;else{it=AS;var Ae=SS}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&Ao($.elementType)&&(it=my):it=IS;if(it&&(it=it(n,$))){fy(se,it,o,Z);break e}Ae&&Ae(n,K,$),n==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&nc(K,"number",K.value)}switch(Ae=$?te($):window,n){case"focusin":(hy(Ae)||Ae.contentEditable==="true")&&(Oo=Ae,Wf=$,mc=null);break;case"focusout":mc=Wf=Oo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,wy(se,o,Z);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":wy(se,o,Z)}var Fe;if(lt)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ko?ka(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(pi&&o.locale!=="ko"&&(ko||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ko&&(Fe=oc()):(di=Z,ac="value"in di?di.value:di.textContent,ko=!0)),Ae=sh($,Xe),0<Ae.length&&(Xe=new mi(Xe,n,null,o,Z),se.push({event:Xe,listeners:Ae}),Fe?Xe.data=Fe:(Fe=Mo(o),Fe!==null&&(Xe.data=Fe)))),(Fe=Ir?xS(n,o):TS(n,o))&&(Xe=sh($,"onBeforeInput"),0<Xe.length&&(Ae=new mi("onBeforeInput","beforeinput",null,o,Z),se.push({event:Ae,listeners:Xe}),Ae.data=Fe)),fA(se,n,$,o,Z)}Q_(se,i)})}function Uc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function sh(n,i){for(var o=i+"Capture",c=[];n!==null;){var h=n,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=$r(n,o),h!=null&&c.unshift(Uc(n,h,m)),h=$r(n,i),h!=null&&c.push(Uc(n,h,m))),n.tag===3)return c;n=n.return}return[]}function yA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function J_(n,i,o,c,h){for(var m=i._reactName,_=[];o!==null&&o!==c;){var E=o,k=E.alternate,$=E.stateNode;if(E=E.tag,k!==null&&k===c)break;E!==5&&E!==26&&E!==27||$===null||(k=$,h?($=$r(o,m),$!=null&&_.unshift(Uc(o,$,k))):h||($=$r(o,m),$!=null&&_.push(Uc(o,$,k)))),o=o.return}_.length!==0&&n.push({event:i,listeners:_})}var bA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function W_(n){return(typeof n=="string"?n:""+n).replace(bA,`
`).replace(_A,"")}function Z_(n,i){return i=W_(i),W_(n)===i}function xt(n,i,o,c,h,m){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||er(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&er(n,""+c);break;case"className":dn(n,"class",c);break;case"tabIndex":dn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(n,o,c);break;case"style":ic(n,c,m);break;case"data":if(i!=="object"){dn(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Io(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&xt(n,i,"name",h.name,h,null),xt(n,i,"formEncType",h.formEncType,h,null),xt(n,i,"formMethod",h.formMethod,h,null),xt(n,i,"formTarget",h.formTarget,h,null)):(xt(n,i,"encType",h.encType,h,null),xt(n,i,"method",h.method,h,null),xt(n,i,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Io(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Gr);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Io(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),$n(n,"popover",c);break;case"xlinkActuate":Mt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Mt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Mt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Mt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Mt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Mt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$n(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=sd.get(o)||o,$n(n,o,c))}}function Ep(n,i,o,c,h,m){switch(o){case"style":ic(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?er(n,c):(typeof c=="number"||typeof c=="bigint")&&er(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nt.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),m=n[Ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,h),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,h);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):$n(n,o,c)}}}function An(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:xt(n,i,m,_,o,null)}}h&&xt(n,i,"srcSet",o.srcSet,o,null),c&&xt(n,i,"src",o.src,o,null);return;case"input":Ke("invalid",n);var E=m=_=h=null,k=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":h=Z;break;case"type":_=Z;break;case"checked":k=Z;break;case"defaultChecked":$=Z;break;case"value":m=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:xt(n,i,c,Z,o,null)}}nd(n,m,E,k,$,_,h,!1);return;case"select":Ke("invalid",n),c=_=m=null;for(h in o)if(o.hasOwnProperty(h)&&(E=o[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":c=E;default:xt(n,i,h,E,o,null)}i=m,o=_,n.multiple=!!c,i!=null?bs(n,!!c,i,!1):o!=null&&bs(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),m=h=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":c=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:xt(n,i,_,E,o,null)}_s(n,c,h,m);return;case"option":for(k in o)o.hasOwnProperty(k)&&(c=o[k],c!=null)&&(k==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":xt(n,i,k,c,o,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Ke(Lc[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:xt(n,i,$,c,o,null)}return;default:if(Ao(i)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Ep(n,i,Z,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&xt(n,i,E,c,o,null))}function vA(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,E=null,k=null,$=null,Z=null;for(J in o){var se=o[J];if(o.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=se;default:c.hasOwnProperty(J)||xt(n,i,J,null,c,se)}}for(var K in c){var J=c[K];if(se=o[K],c.hasOwnProperty(K)&&(J!=null||se!=null))switch(K){case"type":m=J;break;case"name":h=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":_=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:J!==se&&xt(n,i,K,J,c,se)}}So(n,_,E,k,$,Z,m,h);return;case"select":J=_=E=K=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":J=k;default:c.hasOwnProperty(m)||xt(n,i,m,null,c,k)}for(h in c)if(m=c[h],k=o[h],c.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":K=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==k&&xt(n,i,h,m,c,k)}i=E,o=_,c=J,K!=null?bs(n,!!o,K,!1):!!c!=!!o&&(i!=null?bs(n,!!o,i,!0):bs(n,!!o,o?[]:"",!1));return;case"textarea":J=K=null;for(E in o)if(h=o[E],o.hasOwnProperty(E)&&h!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:xt(n,i,E,null,c,h)}for(_ in c)if(h=c[_],m=o[_],c.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":K=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&xt(n,i,_,h,c,m)}rd(n,K,J);return;case"option":for(var Ee in o)K=o[Ee],o.hasOwnProperty(Ee)&&K!=null&&!c.hasOwnProperty(Ee)&&(Ee==="selected"?n.selected=!1:xt(n,i,Ee,null,c,K));for(k in c)K=c[k],J=o[k],c.hasOwnProperty(k)&&K!==J&&(K!=null||J!=null)&&(k==="selected"?n.selected=K&&typeof K!="function"&&typeof K!="symbol":xt(n,i,k,K,c,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)K=o[De],o.hasOwnProperty(De)&&K!=null&&!c.hasOwnProperty(De)&&xt(n,i,De,null,c,K);for($ in c)if(K=c[$],J=o[$],c.hasOwnProperty($)&&K!==J&&(K!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:xt(n,i,$,K,c,J)}return;default:if(Ao(i)){for(var Tt in o)K=o[Tt],o.hasOwnProperty(Tt)&&K!==void 0&&!c.hasOwnProperty(Tt)&&Ep(n,i,Tt,void 0,c,K);for(Z in c)K=c[Z],J=o[Z],!c.hasOwnProperty(Z)||K===J||K===void 0&&J===void 0||Ep(n,i,Z,K,c,J);return}}for(var U in o)K=o[U],o.hasOwnProperty(U)&&K!=null&&!c.hasOwnProperty(U)&&xt(n,i,U,null,c,K);for(se in c)K=c[se],J=o[se],!c.hasOwnProperty(se)||K===J||K==null&&J==null||xt(n,i,se,K,c,J)}function ev(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var h=o[c],m=h.transferSize,_=h.initiatorType,E=h.duration;if(m&&E&&ev(_)){for(_=0,E=h.responseEnd,c+=1;c<o.length;c++){var k=o[c],$=k.startTime;if($>E)break;var Z=k.transferSize,se=k.initiatorType;Z&&ev(se)&&(k=k.responseEnd,_+=Z*(k<E?1:(E-$)/(k-$)))}if(--c,i+=8*(m+_)/(h.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Sp=null,Ap=null;function ah(n){return n.nodeType===9?n:n.ownerDocument}function tv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Ip(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Np=null;function TA(){var n=window.event;return n&&n.type==="popstate"?n===Np?!1:(Np=n,!0):(Np=null,!1)}var rv=typeof setTimeout=="function"?setTimeout:void 0,wA=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(n){return iv.resolve(null).then(n).catch(SA)}:rv;function SA(n){setTimeout(function(){throw n})}function Fs(n){return n==="head"}function sv(n,i){var o=i,c=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(h),ol(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")zc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,zc(o);for(var m=o.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[kn]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&zc(n.ownerDocument.body);o=h}while(o);ol(i)}function av(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Rp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rp(o),cn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function AA(n,i,o,c){for(;n.nodeType===1;){var h=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[kn])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Or(n.nextSibling),n===null)break}return null}function IA(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Or(n.nextSibling),n===null))return null;return n}function ov(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Or(n.nextSibling),n===null))return null;return n}function Cp(n){return n.data==="$?"||n.data==="$~"}function Dp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function NA(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Or(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Mp=null;function lv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Or(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function cv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function uv(n,i,o){switch(i=ah(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function zc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);cn(n)}var Vr=new Map,dv=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zi=oe.d;oe.d={f:RA,r:CA,D:DA,C:MA,L:kA,m:OA,X:jA,S:VA,M:PA};function RA(){var n=Zi.f(),i=Wd();return n||i}function CA(n){var i=tn(n);i!==null&&i.tag===5&&i.type==="form"?Nb(i):Zi.r(n)}var il=typeof document>"u"?null:document;function hv(n,i,o){var c=il;if(c&&typeof i=="string"&&i){var h=Zn(i);h='link[rel="'+n+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),dv.has(h)||(dv.add(h),n={rel:n,crossOrigin:o,href:i},c.querySelector(h)===null&&(i=c.createElement("link"),An(i,"link",n),_e(i),c.head.appendChild(i)))}}function DA(n){Zi.D(n),hv("dns-prefetch",n,null)}function MA(n,i){Zi.C(n,i),hv("preconnect",n,i)}function kA(n,i,o){Zi.L(n,i,o);var c=il;if(c&&n&&i){var h='link[rel="preload"][as="'+Zn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Zn(o.imageSizes)+'"]')):h+='[href="'+Zn(n)+'"]';var m=h;switch(i){case"style":m=sl(n);break;case"script":m=al(n)}Vr.has(m)||(n=T({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Vr.set(m,n),c.querySelector(h)!==null||i==="style"&&c.querySelector(Bc(m))||i==="script"&&c.querySelector(Fc(m))||(i=c.createElement("link"),An(i,"link",n),_e(i),c.head.appendChild(i)))}}function OA(n,i){Zi.m(n,i);var o=il;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Zn(c)+'"][href="'+Zn(n)+'"]',m=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=al(n)}if(!Vr.has(m)&&(n=T({rel:"modulepreload",href:n},i),Vr.set(m,n),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fc(m)))return}c=o.createElement("link"),An(c,"link",n),_e(c),o.head.appendChild(c)}}}function VA(n,i,o){Zi.S(n,i,o);var c=il;if(c&&n){var h=xe(c).hoistableStyles,m=sl(n);i=i||"default";var _=h.get(m);if(!_){var E={loading:0,preload:null};if(_=c.querySelector(Bc(m)))E.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Vr.get(m))&&kp(n,o);var k=_=c.createElement("link");_e(k),An(k,"link",n),k._p=new Promise(function($,Z){k.onload=$,k.onerror=Z}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,lh(_,i,c)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(m,_)}}}function jA(n,i){Zi.X(n,i);var o=il;if(o&&n){var c=xe(o).hoistableScripts,h=al(n),m=c.get(h);m||(m=o.querySelector(Fc(h)),m||(n=T({src:n,async:!0},i),(i=Vr.get(h))&&Op(n,i),m=o.createElement("script"),_e(m),An(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function PA(n,i){Zi.M(n,i);var o=il;if(o&&n){var c=xe(o).hoistableScripts,h=al(n),m=c.get(h);m||(m=o.querySelector(Fc(h)),m||(n=T({src:n,async:!0,type:"module"},i),(i=Vr.get(h))&&Op(n,i),m=o.createElement("script"),_e(m),An(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function fv(n,i,o,c){var h=(h=ge.current)?oh(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=sl(o.href),o=xe(h).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=sl(o.href);var m=xe(h).hoistableStyles,_=m.get(n);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=h.querySelector(Bc(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Vr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vr.set(n,o),m||LA(h,n,o,_.state))),i&&c===null)throw Error(r(528,""));return _}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=al(o),o=xe(h).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function sl(n){return'href="'+Zn(n)+'"'}function Bc(n){return'link[rel="stylesheet"]['+n+"]"}function mv(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function LA(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),An(i,"link",o),_e(i),n.head.appendChild(i))}function al(n){return'[src="'+Zn(n)+'"]'}function Fc(n){return"script[async]"+n}function pv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(c)return i.instance=c,_e(c),c;var h=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_e(c),An(c,"style",h),lh(c,o.precedence,n),i.instance=c;case"stylesheet":h=sl(o.href);var m=n.querySelector(Bc(h));if(m)return i.state.loading|=4,i.instance=m,_e(m),m;c=mv(o),(h=Vr.get(h))&&kp(c,h),m=(n.ownerDocument||n).createElement("link"),_e(m);var _=m;return _._p=new Promise(function(E,k){_.onload=E,_.onerror=k}),An(m,"link",c),i.state.loading|=4,lh(m,o.precedence,n),i.instance=m;case"script":return m=al(o.src),(h=n.querySelector(Fc(m)))?(i.instance=h,_e(h),h):(c=o,(h=Vr.get(m))&&(c=T({},o),Op(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),_e(h),An(h,"link",c),n.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,lh(c,o.precedence,n));return i.instance}function lh(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,m=h,_=0;_<c.length;_++){var E=c[_];if(E.dataset.precedence===i)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function kp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Op(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ch=null;function gv(n,i,o){if(ch===null){var c=new Map,h=ch=new Map;h.set(o,c)}else h=ch,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),h=0;h<o.length;h++){var m=o[h];if(!(m[kn]||m[Vt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=n+_;var E=c.get(_);E?E.push(m):c.set(_,[m])}}return c}function yv(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function UA(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function bv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function zA(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=sl(c.href),m=i.querySelector(Bc(h));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=uh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,_e(m);return}m=i.ownerDocument||i,c=mv(c),(h=Vr.get(h))&&kp(c,h),m=m.createElement("link"),_e(m);var _=m;_._p=new Promise(function(E,k){_.onload=E,_.onerror=k}),An(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=uh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Vp=0;function BA(n,i){return n.stylesheets&&n.count===0&&hh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&hh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&Vp===0&&(Vp=62500*xA());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&hh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Vp?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var dh=null;function hh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,dh=new Map,i.forEach(FA,n),dh=null,uh.call(n))}function FA(n,i){if(!(i.state.loading&4)){var o=dh.get(n);if(o)var c=o.get(null);else{o=new Map,dh.set(n,o);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}h=i.instance,_=h.getAttribute("data-precedence"),m=o.get(_)||c,m===c&&o.set(null,h),o.set(_,h),this.count++,c=uh.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),m?m.parentNode.insertBefore(h,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),i.state.loading|=4}}var qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function qA(n,i,o,c,h,m,_,E,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function _v(n,i,o,c,h,m,_,E,k,$,Z,se){return n=new qA(n,i,o,_,k,$,Z,se,E),i=1,m===!0&&(i|=24),m=dr(3,null,null,i),n.current=m,m.stateNode=n,i=mm(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:i},bm(m),n}function vv(n){return n?(n=Po,n):Po}function xv(n,i,o,c,h,m){h=vv(h),c.context===null?c.context=h:c.pendingContext=h,c=Ds(i),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Ms(n,c,i),o!==null&&(sr(o,n,i),xc(o,n,i))}function Tv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function jp(n,i){Tv(n,i),(n=n.alternate)&&Tv(n,i)}function wv(n){if(n.tag===13||n.tag===31){var i=ja(n,67108864);i!==null&&sr(i,n,67108864),jp(n,67108864)}}function Ev(n){if(n.tag===13||n.tag===31){var i=gr();i=gn(i);var o=ja(n,i);o!==null&&sr(o,n,i),jp(n,i)}}var fh=!0;function HA(n,i,o,c){var h=F.T;F.T=null;var m=oe.p;try{oe.p=2,Pp(n,i,o,c)}finally{oe.p=m,F.T=h}}function GA(n,i,o,c){var h=F.T;F.T=null;var m=oe.p;try{oe.p=8,Pp(n,i,o,c)}finally{oe.p=m,F.T=h}}function Pp(n,i,o,c){if(fh){var h=Lp(c);if(h===null)wp(n,i,c,mh,o),Av(n,c);else if(KA(h,n,i,o,c))c.stopPropagation();else if(Av(n,c),i&4&&-1<$A.indexOf(n)){for(;h!==null;){var m=tn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=qn(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var k=1<<31-At(_);E.entanglements[1]|=k,_&=~k}_i(m),(ct&6)===0&&(Xd=Zt()+500,Pc(0))}}break;case 31:case 13:E=ja(m,2),E!==null&&sr(E,m,2),Wd(),jp(m,2)}if(m=Lp(c),m===null&&wp(n,i,c,mh,o),m===h)break;h=m}h!==null&&c.stopPropagation()}else wp(n,i,c,null,o)}}function Lp(n){return n=Sr(n),Up(n)}var mh=null;function Up(n){if(mh=null,n=en(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=f(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return mh=n,null}function Sv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case Di:return 2;case si:return 8;case Cn:case wa:return 32;case zr:return 268435456;default:return 32}default:return 32}}var zp=!1,qs=null,Hs=null,Gs=null,Hc=new Map,Gc=new Map,$s=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(n,i){switch(n){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Hc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(i.pointerId)}}function $c(n,i,o,c,h,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},i!==null&&(i=tn(i),i!==null&&wv(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function KA(n,i,o,c,h){switch(i){case"focusin":return qs=$c(qs,n,i,o,c,h),!0;case"dragenter":return Hs=$c(Hs,n,i,o,c,h),!0;case"mouseover":return Gs=$c(Gs,n,i,o,c,h),!0;case"pointerover":var m=h.pointerId;return Hc.set(m,$c(Hc.get(m)||null,n,i,o,c,h)),!0;case"gotpointercapture":return m=h.pointerId,Gc.set(m,$c(Gc.get(m)||null,n,i,o,c,h)),!0}return!1}function Iv(n){var i=en(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Hn(n.priority,function(){Ev(o)});return}}else if(i===31){if(i=f(o),i!==null){n.blockedOn=i,Hn(n.priority,function(){Ev(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Lp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);sc=c,o.target.dispatchEvent(c),sc=null}else return i=tn(o),i!==null&&wv(i),n.blockedOn=o,!1;i.shift()}return!0}function Nv(n,i,o){ph(n)&&o.delete(i)}function YA(){zp=!1,qs!==null&&ph(qs)&&(qs=null),Hs!==null&&ph(Hs)&&(Hs=null),Gs!==null&&ph(Gs)&&(Gs=null),Hc.forEach(Nv),Gc.forEach(Nv)}function gh(n,i){n.blockedOn===i&&(n.blockedOn=null,zp||(zp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,YA)))}var yh=null;function Rv(n){yh!==n&&(yh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){yh===n&&(yh=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],h=n[i+2];if(typeof c!="function"){if(Up(c||o)===null)continue;break}var m=tn(o);m!==null&&(n.splice(i,3),i-=3,Lm(m,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function ol(n){function i(k){return gh(k,n)}qs!==null&&gh(qs,n),Hs!==null&&gh(Hs,n),Gs!==null&&gh(Gs,n),Hc.forEach(i),Gc.forEach(i);for(var o=0;o<$s.length;o++){var c=$s[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<$s.length&&(o=$s[0],o.blockedOn===null);)Iv(o),o.blockedOn===null&&$s.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],m=o[c+1],_=h[Ft]||null;if(typeof m=="function")_||Rv(o);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[Ft]||null)E=_.formAction;else if(Up(h)!==null)continue}else E=_.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),Rv(o)}}}function Cv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Bp(n){this._internalRoot=n}bh.prototype.render=Bp.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=gr();xv(o,c,n,i,null,null)},bh.prototype.unmount=Bp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;xv(n.current,2,null,n,null,null),Wd(),i[Te]=null}};function bh(n){this._internalRoot=n}bh.prototype.unstable_scheduleHydration=function(n){if(n){var i=gs();n={blockedOn:null,target:n,priority:i};for(var o=0;o<$s.length&&i!==0&&i<$s[o].priority;o++);$s.splice(o,0,n),o===0&&Iv(n)}};var Dv=e.version;if(Dv!=="19.2.4")throw Error(r(527,Dv,"19.2.4"));oe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var QA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Bn=_h.inject(QA),Bt=_h}catch{}}return Yc.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,c="",h=Lb,m=Ub,_=zb;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=_v(n,1,!1,null,null,o,c,null,h,m,_,Cv),n[Te]=i.current,Tp(n),new Bp(i)},Yc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var c=!1,h="",m=Lb,_=Ub,E=zb,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=_v(n,1,!0,i,o??null,c,h,k,m,_,E,Cv),i.context=vv(null),o=i.current,c=gr(),c=gn(c),h=Ds(c),h.callback=null,Ms(o,h,c),o=c,i.current.lanes=o,qr(i,o),_i(i),n[Te]=i.current,Tp(n),new bh(i)},Yc.version="19.2.4",Yc}var Bv;function oI(){if(Bv)return Hp.exports;Bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hp.exports=aI(),Hp.exports}var lI=oI();const cI="modulepreload",uI=function(s){return"/themesTaskmanager/"+s},Fv={},zu=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let p=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");a=p(t.map(y=>{if(y=uI(y),y in Fv)return;Fv[y]=!0;const v=y.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":cI,v||(w.as="script"),w.crossOrigin="",w.href=y,f&&w.setAttribute("nonce",f),document.head.appendChild(w),v)return new Promise((C,L)=>{w.addEventListener("load",C),w.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},dI=()=>{};var qv={};const YT=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},hI=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],f=s[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],u=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},QT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,f=u?s[a+1]:0,p=a+2<s.length,y=p?s[a+2]:0,v=l>>2,T=(l&3)<<4|f>>4;let w=(f&15)<<2|y>>6,C=y&63;p||(C=64,u||(w=64)),r.push(t[v],t[T],t[w],t[C])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(YT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):hI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],f=a<s.length?t[s.charAt(a)]:0;++a;const y=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||f==null||y==null||T==null)throw new fI;const w=l<<2|f>>4;if(r.push(w),y!==64){const C=f<<4&240|y>>2;if(r.push(C),T!==64){const L=y<<6&192|T;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class fI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mI=function(s){const e=YT(s);return QT.encodeByteArray(e,!0)},Hh=function(s){return mI(s).replace(/\./g,"")},XT=function(s){try{return QT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pI=()=>JT().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof qv>"u")return;const s=qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&XT(s[1]);return e&&JSON.parse(e)},yf=()=>{try{return dI()||pI()||gI()||yI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},WT=s=>yf()?.emulatorHosts?.[s],bI=s=>{const e=WT(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ZT=()=>yf()?.config,ew=s=>yf()?.[`_${s}`];class _I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wg(s){return(await fetch(s,{credentials:"include"})).ok}function vI(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Hh(JSON.stringify(t)),Hh(JSON.stringify(u)),""].join(".")}const lu={};function xI(){const s={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?s.emulator.push(e):s.prod.push(e);return s}function TI(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Hv=!1;function tw(s,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||lu[s]===e||lu[s]||Hv)return;lu[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=xI().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Hv=!0,u()},w}function v(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=TI(r),C=t("text"),L=document.getElementById(C)||document.createElement("span"),X=t("learnmore"),q=document.getElementById(X)||document.createElement("a"),G=t("preprendIcon"),ee=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Y=w.element;f(Y),v(q,X);const le=y();p(ee,G),Y.append(ee,L,q,le),document.body.appendChild(Y)}l?(L.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function nw(){const s=yf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function II(){const s=fn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function rw(){return!nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iw(){return!nw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function NI(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const RI="FirebaseError";class us extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=RI,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?CI(l,r):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new us(a,f,r)}}function CI(s,e){return s.replace(DI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const DI=/\{\$([^}]+)}/g;function MI(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function da(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],u=e[a];if(Gv(l)&&Gv(u)){if(!da(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Gv(s){return s!==null&&typeof s=="object"}function Fu(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function nu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function kI(s,e){const t=new OI(s,e);return t.subscribe.bind(t)}class OI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");VI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Yp),a.error===void 0&&(a.error=Yp),a.complete===void 0&&(a.complete=Yp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VI(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Yp(){}function mn(s){return s&&s._delegate?s._delegate:s}class uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xa="[DEFAULT]";class jI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _I;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LI(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(s){return s===Xa?void 0:s}function LI(s){return s.instantiationMode==="EAGER"}class UI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Je||(Je={}));const zI={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},BI=Je.INFO,FI={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},qI=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=FI[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zg{constructor(e){this.name=e,this._logLevel=BI,this._logHandler=qI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const HI=(s,e)=>e.some(t=>s instanceof t);let $v,Kv;function GI(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $I(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aw=new WeakMap,hg=new WeakMap,ow=new WeakMap,Qp=new WeakMap,e0=new WeakMap;function KI(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(ia(s.result)),a()},u=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&aw.set(t,s)}).catch(()=>{}),e0.set(e,s),e}function YI(s){if(hg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});hg.set(s,e)}let fg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return hg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ow.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ia(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function QI(s){fg=s(fg)}function XI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Xp(this),e,...t);return ow.set(r,e.sort?e.sort():[e]),ia(r)}:$I().includes(s)?function(...e){return s.apply(Xp(this),e),ia(aw.get(this))}:function(...e){return ia(s.apply(Xp(this),e))}}function JI(s){return typeof s=="function"?XI(s):(s instanceof IDBTransaction&&YI(s),HI(s,GI())?new Proxy(s,fg):s)}function ia(s){if(s instanceof IDBRequest)return KI(s);if(Qp.has(s))return Qp.get(s);const e=JI(s);return e!==s&&(Qp.set(s,e),e0.set(e,s)),e}const Xp=s=>e0.get(s);function WI(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),f=ia(u);return r&&u.addEventListener("upgradeneeded",p=>{r(ia(u.result),p.oldVersion,p.newVersion,ia(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const ZI=["get","getKey","getAll","getAllKeys","count"],e2=["put","add","delete","clear"],Jp=new Map;function Yv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=e2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||ZI.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&p.done]))[0]};return Jp.set(e,l),l}QI(s=>({...s,get:(e,t,r)=>Yv(e,t)||s.get(e,t,r),has:(e,t)=>!!Yv(e,t)||s.has(e,t)}));class t2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(n2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function n2(s){return s.getComponent()?.type==="VERSION"}const mg="@firebase/app",Qv="0.14.8";const ss=new Zg("@firebase/app"),r2="@firebase/app-compat",i2="@firebase/analytics-compat",s2="@firebase/analytics",a2="@firebase/app-check-compat",o2="@firebase/app-check",l2="@firebase/auth",c2="@firebase/auth-compat",u2="@firebase/database",d2="@firebase/data-connect",h2="@firebase/database-compat",f2="@firebase/functions",m2="@firebase/functions-compat",p2="@firebase/installations",g2="@firebase/installations-compat",y2="@firebase/messaging",b2="@firebase/messaging-compat",_2="@firebase/performance",v2="@firebase/performance-compat",x2="@firebase/remote-config",T2="@firebase/remote-config-compat",w2="@firebase/storage",E2="@firebase/storage-compat",S2="@firebase/firestore",A2="@firebase/ai",I2="@firebase/firestore-compat",N2="firebase",R2="12.9.0";const pg="[DEFAULT]",C2={[mg]:"fire-core",[r2]:"fire-core-compat",[s2]:"fire-analytics",[i2]:"fire-analytics-compat",[o2]:"fire-app-check",[a2]:"fire-app-check-compat",[l2]:"fire-auth",[c2]:"fire-auth-compat",[u2]:"fire-rtdb",[d2]:"fire-data-connect",[h2]:"fire-rtdb-compat",[f2]:"fire-fn",[m2]:"fire-fn-compat",[p2]:"fire-iid",[g2]:"fire-iid-compat",[y2]:"fire-fcm",[b2]:"fire-fcm-compat",[_2]:"fire-perf",[v2]:"fire-perf-compat",[x2]:"fire-rc",[T2]:"fire-rc-compat",[w2]:"fire-gcs",[E2]:"fire-gcs-compat",[S2]:"fire-fst",[I2]:"fire-fst-compat",[A2]:"fire-vertex","fire-js":"fire-js",[N2]:"fire-js-all"};const xu=new Map,D2=new Map,gg=new Map;function Xv(s,e){try{s.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Nl(s){const e=s.name;if(gg.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,s);for(const t of xu.values())Xv(t,s);for(const t of D2.values())Xv(t,s);return!0}function bf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function _r(s){return s==null?!1:s.settings!==void 0}const M2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new Bu("app","Firebase",M2);class k2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}const Kl=R2;function t0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:pg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw sa.create("bad-app-name",{appName:String(a)});if(t||(t=ZT()),!t)throw sa.create("no-options");const l=xu.get(a);if(l){if(da(t,l.options)&&da(r,l.config))return l;throw sa.create("duplicate-app",{appName:a})}const u=new UI(a);for(const p of gg.values())u.addComponent(p);const f=new k2(t,r,u);return xu.set(a,f),f}function n0(s=pg){const e=xu.get(s);if(!e&&s===pg&&ZT())return t0();if(!e)throw sa.create("no-app",{appName:s});return e}function O2(){return Array.from(xu.values())}function aa(s,e,t){let r=C2[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(u.join(" "));return}Nl(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const V2="firebase-heartbeat-database",j2=1,Tu="firebase-heartbeat-store";let Wp=null;function lw(){return Wp||(Wp=WI(V2,j2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Tu)}catch(t){console.warn(t)}}}}).catch(s=>{throw sa.create("idb-open",{originalErrorMessage:s.message})})),Wp}async function P2(s){try{const t=(await lw()).transaction(Tu),r=await t.objectStore(Tu).get(cw(s));return await t.done,r}catch(e){if(e instanceof us)ss.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});ss.warn(t.message)}}}async function Jv(s,e){try{const r=(await lw()).transaction(Tu,"readwrite");await r.objectStore(Tu).put(e,cw(s)),await r.done}catch(t){if(t instanceof us)ss.warn(t.message);else{const r=sa.create("idb-set",{originalErrorMessage:t?.message});ss.warn(r.message)}}}function cw(s){return`${s.name}!${s.options.appId}`}const L2=1024,U2=30;class z2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>U2){const a=q2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ss.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wv(),{heartbeatsToSend:t,unsentEntries:r}=B2(this._heartbeatsCache.heartbeats),a=Hh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ss.warn(e),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function B2(s,e=L2){const t=[];let r=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Zv(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Zv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class F2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sw()?NI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await P2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zv(s){return Hh(JSON.stringify({version:2,heartbeats:s})).length}function q2(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function H2(s){Nl(new uo("platform-logger",e=>new t2(e),"PRIVATE")),Nl(new uo("heartbeat",e=>new z2(e),"PRIVATE")),aa(mg,Qv,s),aa(mg,Qv,"esm2020"),aa("fire-js","")}H2("");var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oa,uw;(function(){var s;function e(S,A){function N(){}N.prototype=A.prototype,S.F=A.prototype,S.prototype=new N,S.prototype.constructor=S,S.D=function(O,D,j){for(var R=Array(arguments.length-2),me=2;me<arguments.length;me++)R[me-2]=arguments[me];return A.prototype[D].apply(O,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,A,N){N||(N=0);const O=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)O[D]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(D=0;D<16;++D)O[D]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=S.g[0],N=S.g[1],D=S.g[2];let j=S.g[3],R;R=A+(j^N&(D^j))+O[0]+3614090360&4294967295,A=N+(R<<7&4294967295|R>>>25),R=j+(D^A&(N^D))+O[1]+3905402710&4294967295,j=A+(R<<12&4294967295|R>>>20),R=D+(N^j&(A^N))+O[2]+606105819&4294967295,D=j+(R<<17&4294967295|R>>>15),R=N+(A^D&(j^A))+O[3]+3250441966&4294967295,N=D+(R<<22&4294967295|R>>>10),R=A+(j^N&(D^j))+O[4]+4118548399&4294967295,A=N+(R<<7&4294967295|R>>>25),R=j+(D^A&(N^D))+O[5]+1200080426&4294967295,j=A+(R<<12&4294967295|R>>>20),R=D+(N^j&(A^N))+O[6]+2821735955&4294967295,D=j+(R<<17&4294967295|R>>>15),R=N+(A^D&(j^A))+O[7]+4249261313&4294967295,N=D+(R<<22&4294967295|R>>>10),R=A+(j^N&(D^j))+O[8]+1770035416&4294967295,A=N+(R<<7&4294967295|R>>>25),R=j+(D^A&(N^D))+O[9]+2336552879&4294967295,j=A+(R<<12&4294967295|R>>>20),R=D+(N^j&(A^N))+O[10]+4294925233&4294967295,D=j+(R<<17&4294967295|R>>>15),R=N+(A^D&(j^A))+O[11]+2304563134&4294967295,N=D+(R<<22&4294967295|R>>>10),R=A+(j^N&(D^j))+O[12]+1804603682&4294967295,A=N+(R<<7&4294967295|R>>>25),R=j+(D^A&(N^D))+O[13]+4254626195&4294967295,j=A+(R<<12&4294967295|R>>>20),R=D+(N^j&(A^N))+O[14]+2792965006&4294967295,D=j+(R<<17&4294967295|R>>>15),R=N+(A^D&(j^A))+O[15]+1236535329&4294967295,N=D+(R<<22&4294967295|R>>>10),R=A+(D^j&(N^D))+O[1]+4129170786&4294967295,A=N+(R<<5&4294967295|R>>>27),R=j+(N^D&(A^N))+O[6]+3225465664&4294967295,j=A+(R<<9&4294967295|R>>>23),R=D+(A^N&(j^A))+O[11]+643717713&4294967295,D=j+(R<<14&4294967295|R>>>18),R=N+(j^A&(D^j))+O[0]+3921069994&4294967295,N=D+(R<<20&4294967295|R>>>12),R=A+(D^j&(N^D))+O[5]+3593408605&4294967295,A=N+(R<<5&4294967295|R>>>27),R=j+(N^D&(A^N))+O[10]+38016083&4294967295,j=A+(R<<9&4294967295|R>>>23),R=D+(A^N&(j^A))+O[15]+3634488961&4294967295,D=j+(R<<14&4294967295|R>>>18),R=N+(j^A&(D^j))+O[4]+3889429448&4294967295,N=D+(R<<20&4294967295|R>>>12),R=A+(D^j&(N^D))+O[9]+568446438&4294967295,A=N+(R<<5&4294967295|R>>>27),R=j+(N^D&(A^N))+O[14]+3275163606&4294967295,j=A+(R<<9&4294967295|R>>>23),R=D+(A^N&(j^A))+O[3]+4107603335&4294967295,D=j+(R<<14&4294967295|R>>>18),R=N+(j^A&(D^j))+O[8]+1163531501&4294967295,N=D+(R<<20&4294967295|R>>>12),R=A+(D^j&(N^D))+O[13]+2850285829&4294967295,A=N+(R<<5&4294967295|R>>>27),R=j+(N^D&(A^N))+O[2]+4243563512&4294967295,j=A+(R<<9&4294967295|R>>>23),R=D+(A^N&(j^A))+O[7]+1735328473&4294967295,D=j+(R<<14&4294967295|R>>>18),R=N+(j^A&(D^j))+O[12]+2368359562&4294967295,N=D+(R<<20&4294967295|R>>>12),R=A+(N^D^j)+O[5]+4294588738&4294967295,A=N+(R<<4&4294967295|R>>>28),R=j+(A^N^D)+O[8]+2272392833&4294967295,j=A+(R<<11&4294967295|R>>>21),R=D+(j^A^N)+O[11]+1839030562&4294967295,D=j+(R<<16&4294967295|R>>>16),R=N+(D^j^A)+O[14]+4259657740&4294967295,N=D+(R<<23&4294967295|R>>>9),R=A+(N^D^j)+O[1]+2763975236&4294967295,A=N+(R<<4&4294967295|R>>>28),R=j+(A^N^D)+O[4]+1272893353&4294967295,j=A+(R<<11&4294967295|R>>>21),R=D+(j^A^N)+O[7]+4139469664&4294967295,D=j+(R<<16&4294967295|R>>>16),R=N+(D^j^A)+O[10]+3200236656&4294967295,N=D+(R<<23&4294967295|R>>>9),R=A+(N^D^j)+O[13]+681279174&4294967295,A=N+(R<<4&4294967295|R>>>28),R=j+(A^N^D)+O[0]+3936430074&4294967295,j=A+(R<<11&4294967295|R>>>21),R=D+(j^A^N)+O[3]+3572445317&4294967295,D=j+(R<<16&4294967295|R>>>16),R=N+(D^j^A)+O[6]+76029189&4294967295,N=D+(R<<23&4294967295|R>>>9),R=A+(N^D^j)+O[9]+3654602809&4294967295,A=N+(R<<4&4294967295|R>>>28),R=j+(A^N^D)+O[12]+3873151461&4294967295,j=A+(R<<11&4294967295|R>>>21),R=D+(j^A^N)+O[15]+530742520&4294967295,D=j+(R<<16&4294967295|R>>>16),R=N+(D^j^A)+O[2]+3299628645&4294967295,N=D+(R<<23&4294967295|R>>>9),R=A+(D^(N|~j))+O[0]+4096336452&4294967295,A=N+(R<<6&4294967295|R>>>26),R=j+(N^(A|~D))+O[7]+1126891415&4294967295,j=A+(R<<10&4294967295|R>>>22),R=D+(A^(j|~N))+O[14]+2878612391&4294967295,D=j+(R<<15&4294967295|R>>>17),R=N+(j^(D|~A))+O[5]+4237533241&4294967295,N=D+(R<<21&4294967295|R>>>11),R=A+(D^(N|~j))+O[12]+1700485571&4294967295,A=N+(R<<6&4294967295|R>>>26),R=j+(N^(A|~D))+O[3]+2399980690&4294967295,j=A+(R<<10&4294967295|R>>>22),R=D+(A^(j|~N))+O[10]+4293915773&4294967295,D=j+(R<<15&4294967295|R>>>17),R=N+(j^(D|~A))+O[1]+2240044497&4294967295,N=D+(R<<21&4294967295|R>>>11),R=A+(D^(N|~j))+O[8]+1873313359&4294967295,A=N+(R<<6&4294967295|R>>>26),R=j+(N^(A|~D))+O[15]+4264355552&4294967295,j=A+(R<<10&4294967295|R>>>22),R=D+(A^(j|~N))+O[6]+2734768916&4294967295,D=j+(R<<15&4294967295|R>>>17),R=N+(j^(D|~A))+O[13]+1309151649&4294967295,N=D+(R<<21&4294967295|R>>>11),R=A+(D^(N|~j))+O[4]+4149444226&4294967295,A=N+(R<<6&4294967295|R>>>26),R=j+(N^(A|~D))+O[11]+3174756917&4294967295,j=A+(R<<10&4294967295|R>>>22),R=D+(A^(j|~N))+O[2]+718787259&4294967295,D=j+(R<<15&4294967295|R>>>17),R=N+(j^(D|~A))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.v=function(S,A){A===void 0&&(A=S.length);const N=A-this.blockSize,O=this.C;let D=this.h,j=0;for(;j<A;){if(D==0)for(;j<=N;)a(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<A;)if(O[D++]=S.charCodeAt(j++),D==this.blockSize){a(this,O),D=0;break}}else for(;j<A;)if(O[D++]=S[j++],D==this.blockSize){a(this,O),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var N=S.length-8;N<S.length;++N)S[N]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)S[A++]=this.g[N]>>>O&255;return S};function l(S,A){var N=f;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=A(S)}function u(S,A){this.h=A;const N=[];let O=!0;for(let D=S.length-1;D>=0;D--){const j=S[D]|0;O&&j==A||(N[D]=j,O=!1)}this.g=N}var f={};function p(S){return-128<=S&&S<128?l(S,function(A){return new u([A|0],A<0?-1:0)}):new u([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return T;if(S<0)return q(y(-S));const A=[];let N=1;for(let O=0;S>=N;O++)A[O]=S/N|0,N*=4294967296;return new u(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return q(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(A,8));let O=T;for(let j=0;j<S.length;j+=8){var D=Math.min(8,S.length-j);const R=parseInt(S.substring(j,j+D),A);D<8?(D=y(Math.pow(A,D)),O=O.j(D).add(y(R))):(O=O.j(N),O=O.add(y(R)))}return O}var T=p(0),w=p(1),C=p(16777216);s=u.prototype,s.m=function(){if(X(this))return-q(this).m();let S=0,A=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);S+=(O>=0?O:4294967296+O)*A,A*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(X(this))return"-"+q(this).toString(S);const A=y(Math.pow(S,6));var N=this;let O="";for(;;){const D=le(N,A).g;N=G(N,D.j(A));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(S);if(N=D,L(N))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function X(S){return S.h==-1}s.l=function(S){return S=G(this,S),X(S)?-1:L(S)?0:1};function q(S){const A=S.g.length,N=[];for(let O=0;O<A;O++)N[O]=~S.g[O];return new u(N,~S.h).add(w)}s.abs=function(){return X(this)?q(this):this},s.add=function(S){const A=Math.max(this.g.length,S.g.length),N=[];let O=0;for(let D=0;D<=A;D++){let j=O+(this.i(D)&65535)+(S.i(D)&65535),R=(j>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=R>>>16,j&=65535,R&=65535,N[D]=R<<16|j}return new u(N,N[N.length-1]&-2147483648?-1:0)};function G(S,A){return S.add(q(A))}s.j=function(S){if(L(this)||L(S))return T;if(X(this))return X(S)?q(this).j(q(S)):q(q(this).j(S));if(X(S))return q(this.j(q(S)));if(this.l(C)<0&&S.l(C)<0)return y(this.m()*S.m());const A=this.g.length+S.g.length,N=[];for(var O=0;O<2*A;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const j=this.i(O)>>>16,R=this.i(O)&65535,me=S.i(D)>>>16,de=S.i(D)&65535;N[2*O+2*D]+=R*de,ee(N,2*O+2*D),N[2*O+2*D+1]+=j*de,ee(N,2*O+2*D+1),N[2*O+2*D+1]+=R*me,ee(N,2*O+2*D+1),N[2*O+2*D+2]+=j*me,ee(N,2*O+2*D+2)}for(S=0;S<A;S++)N[S]=N[2*S+1]<<16|N[2*S];for(S=A;S<2*A;S++)N[S]=0;return new u(N,0)};function ee(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function Y(S,A){this.g=S,this.h=A}function le(S,A){if(L(A))throw Error("division by zero");if(L(S))return new Y(T,T);if(X(S))return A=le(q(S),A),new Y(q(A.g),q(A.h));if(X(A))return A=le(S,q(A)),new Y(q(A.g),A.h);if(S.g.length>30){if(X(S)||X(A))throw Error("slowDivide_ only works with positive integers.");for(var N=w,O=A;O.l(S)<=0;)N=ae(N),O=ae(O);var D=he(N,1),j=he(O,1);for(O=he(O,2),N=he(N,2);!L(O);){var R=j.add(O);R.l(S)<=0&&(D=D.add(N),j=R),O=he(O,1),N=he(N,1)}return A=G(S,D.j(A)),new Y(D,A)}for(D=T;S.l(A)>=0;){for(N=Math.max(1,Math.floor(S.m()/A.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=y(N),R=j.j(A);X(R)||R.l(S)>0;)N-=O,j=y(N),R=j.j(A);L(j)&&(j=w),D=D.add(j),S=G(S,R)}return new Y(D,S)}s.B=function(S){return le(this,S).h},s.and=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)&S.i(O);return new u(N,this.h&S.h)},s.or=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)|S.i(O);return new u(N,this.h|S.h)},s.xor=function(S){const A=Math.max(this.g.length,S.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)^S.i(O);return new u(N,this.h^S.h)};function ae(S){const A=S.g.length+1,N=[];for(let O=0;O<A;O++)N[O]=S.i(O)<<1|S.i(O-1)>>>31;return new u(N,S.h)}function he(S,A){const N=A>>5;A%=32;const O=S.g.length-N,D=[];for(let j=0;j<O;j++)D[j]=A>0?S.i(j+N)>>>A|S.i(j+N+1)<<32-A:S.i(j+N);return new u(D,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,uw=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,oa=u}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dw,ru,hw,Nh,yg,fw,mw,pw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var b=0;b<d.length;++b){var x=d[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,b){if(b)e:{var x=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in x))break e;x=x[B]}d=d[d.length-1],I=x[d],b=b(I),b!=I&&b!=null&&e(x,d,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(b){var x=[],I;for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&x.push([I,b[I]]);return x}});var l=l||{},u=this||self;function f(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function p(d,b,x){return d.call.apply(d.bind,arguments)}function y(d,b,x){return y=p,y.apply(null,arguments)}function v(d,b){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function T(d,b){function x(){}x.prototype=b.prototype,d.Z=b.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(I,B,Q){for(var pe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)pe[ze-2]=arguments[ze];return b.prototype[B].apply(I,pe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const b=d.length;if(b>0){const x=Array(b);for(let I=0;I<b;I++)x[I]=d[I];return x}return[]}function L(d,b){for(let I=1;I<arguments.length;I++){const B=arguments[I];var x=typeof B;if(x=x!="object"?x:B?Array.isArray(B)?"array":x:"null",x=="array"||x=="object"&&typeof B.length=="number"){x=d.length||0;const Q=B.length||0;d.length=x+Q;for(let pe=0;pe<Q;pe++)d[x+pe]=B[pe]}else d.push(B)}}class X{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function q(d){u.setTimeout(()=>{throw d},0)}function G(){var d=S;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class ee{constructor(){this.h=this.g=null}add(b,x){const I=Y.get();I.set(b,x),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new X(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,he=!1,S=new ee,A=()=>{const d=Promise.resolve(void 0);ae=()=>{d.then(N)}};function N(){for(var d;d=G();){try{d.h.call(d.g)}catch(x){q(x)}var b=Y;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}he=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,b),u.removeEventListener("test",x,b)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function me(d,b){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}T(me,D),me.prototype.init=function(d,b){const x=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(x=="mouseover"?b=d.fromElement:x=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),F=0;function oe(d,b,x,I,B){this.listener=d,this.proxy=null,this.src=b,this.type=x,this.capture=!!I,this.ha=B,this.key=++F,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d,b,x){for(const I in d)b.call(x,d[I],I,d)}function Pe(d,b){for(const x in d)b.call(void 0,d[x],x,d)}function M(d){const b={};for(const x in d)b[x]=d[x];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,b){let x,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(x in I)d[x]=I[x];for(let Q=0;Q<ne.length;Q++)x=ne[Q],Object.prototype.hasOwnProperty.call(I,x)&&(d[x]=I[x])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,b,x,I,B){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const pe=ge(d,b,I,B);return pe>-1?(b=d[pe],x||(b.fa=!1)):(b=new oe(b,this.src,Q,!!I,B),b.fa=x,d.push(b)),b};function ie(d,b){const x=b.type;if(x in d.g){var I=d.g[x],B=Array.prototype.indexOf.call(I,b,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(I,B,1),Q&&(be(b),d.g[x].length==0&&(delete d.g[x],d.h--))}}function ge(d,b,x,I){for(let B=0;B<d.length;++B){const Q=d[B];if(!Q.da&&Q.listener==b&&Q.capture==!!x&&Q.ha==I)return B}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),rt={};function Ge(d,b,x,I,B){if(Array.isArray(b)){for(let Q=0;Q<b.length;Q++)Ge(d,b[Q],x,I,B);return null}return x=wr(x),d&&d[de]?d.J(b,x,f(I)?!!I.capture:!1,B):wt(d,b,x,!1,I,B)}function wt(d,b,x,I,B,Q){if(!b)throw Error("Invalid event type");const pe=f(B)?!!B.capture:!!B;let ze=Rn(d);if(ze||(d[Ie]=ze=new ve(d)),x=ze.add(b,x,I,pe,Q),x.proxy)return x;if(I=Xn(),x.proxy=I,I.src=d,I.listener=x,d.addEventListener)j||(B=pe),B===void 0&&(B=!1),d.addEventListener(b.toString(),I,B);else if(d.attachEvent)d.attachEvent(Jn(b.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Xn(){function d(x){return b.call(d.src,d.listener,x)}const b=Ri;return d}function vn(d,b,x,I,B){if(Array.isArray(b))for(var Q=0;Q<b.length;Q++)vn(d,b[Q],x,I,B);else I=f(I)?!!I.capture:!!I,x=wr(x),d&&d[de]?(d=d.i,Q=String(b).toString(),Q in d.g&&(b=d.g[Q],x=ge(b,x,I,B),x>-1&&(be(b[x]),Array.prototype.splice.call(b,x,1),b.length==0&&(delete d.g[Q],d.h--)))):d&&(d=Rn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=ge(b,x,I,B)),(x=d>-1?b[d]:null)&&cr(x))}function cr(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[de])ie(b.i,d);else{var x=d.type,I=d.proxy;b.removeEventListener?b.removeEventListener(x,I,d.capture):b.detachEvent?b.detachEvent(Jn(x),I):b.addListener&&b.removeListener&&b.removeListener(I),(x=Rn(b))?(ie(x,d),x.h==0&&(x.src=null,b[Ie]=null)):be(d)}}}function Jn(d){return d in rt?rt[d]:rt[d]="on"+d}function Ri(d,b){if(d.da)d=!0;else{b=new me(b,this);const x=d.listener,I=d.ha||d.src;d.fa&&cr(d),d=x.call(I,b)}return d}function Rn(d){return d=d[Ie],d instanceof ve?d:null}var Ci="__closure_events_fn_"+(Math.random()*1e9>>>0);function wr(d){return typeof d=="function"?d:(d[Ci]||(d[Ci]=function(b){return d.handleEvent(b)}),d[Ci])}function Ct(){O.call(this),this.i=new ve(this),this.M=this,this.G=null}T(Ct,O),Ct.prototype[de]=!0,Ct.prototype.removeEventListener=function(d,b,x,I){vn(this,d,b,x,I)};function yt(d,b){var x,I=d.G;if(I)for(x=[];I;I=I.G)x.push(I);if(d=d.M,I=b.type||b,typeof b=="string")b=new D(b,d);else if(b instanceof D)b.target=b.target||d;else{var B=b;b=new D(I,d),ue(b,B)}B=!0;let Q,pe;if(x)for(pe=x.length-1;pe>=0;pe--)Q=b.g=x[pe],B=Lr(Q,I,!0,b)&&B;if(Q=b.g=d,B=Lr(Q,I,!0,b)&&B,B=Lr(Q,I,!1,b)&&B,x)for(pe=0;pe<x.length;pe++)Q=b.g=x[pe],B=Lr(Q,I,!1,b)&&B}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const x=d.g[b];for(let I=0;I<x.length;I++)be(x[I]);delete d.g[b],d.h--}}this.G=null},Ct.prototype.J=function(d,b,x,I){return this.i.add(String(d),b,!1,x,I)},Ct.prototype.K=function(d,b,x,I){return this.i.add(String(d),b,!0,x,I)};function Lr(d,b,x,I){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let B=!0;for(let Q=0;Q<b.length;++Q){const pe=b[Q];if(pe&&!pe.da&&pe.capture==x){const ze=pe.listener,Yt=pe.ha||pe.src;pe.fa&&ie(d.i,pe),B=ze.call(Yt,I)!==!1&&B}}return B&&!I.defaultPrevented}function ms(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(d,b||0)}function Ye(d){d.g=ms(()=>{d.g=null,d.i&&(d.i=!1,Ye(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Zt extends O{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ye(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(d){O.call(this),this.h=d,this.g={}}T(Ur,O);var Di=[];function si(d){Ve(d.g,function(b,x){this.g.hasOwnProperty(x)&&cr(b)},d),d.g={}}Ur.prototype.N=function(){Ur.Z.N.call(this),si(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=u.JSON.stringify,wa=u.JSON.parse,zr=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function ai(){}function Mi(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}T(Bt,D);function Dn(){D.call(this,"c")}T(Dn,D);var At={},ps=null;function Er(){return ps=ps||new Ct}At.Ia="serverreachability";function oi(d){D.call(this,At.Ia,d)}T(oi,D);function Fn(d){const b=Er();yt(b,new oi(b))}At.STAT_EVENT="statevent";function Br(d,b){D.call(this,At.STAT_EVENT,d),this.stat=b}T(Br,D);function Dt(d){const b=Er();yt(b,new Br(b,d))}At.Ja="timingevent";function qn(d,b){D.call(this,At.Ja,d),this.size=b}T(qn,D);function Mn(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},b)}function xn(){this.g=!0}xn.prototype.ua=function(){this.g=!1};function ki(d,b,x,I,B,Q){d.info(function(){if(d.g)if(Q){var pe="",ze=Q.split("&");for(let lt=0;lt<ze.length;lt++){var Yt=ze[lt].split("=");if(Yt.length>1){const jt=Yt[0];Yt=Yt[1];const Ir=jt.split("_");pe=Ir.length>=2&&Ir[1]=="type"?pe+(jt+"="+Yt+"&"):pe+(jt+"=redacted&")}}}else pe=null;else pe=Q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+b+`
`+x+`
`+pe})}function Fr(d,b,x,I,B,Q,pe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+b+`
`+x+`
`+Q+" "+pe})}function Wn(d,b,x,I){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ea(d,x)+(I?" "+I:"")})}function qr(d,b){d.info(function(){return"TIMEOUT: "+b})}xn.prototype.info=function(){};function Ea(d,b){if(!d.g)return b;if(!b)return null;try{const Q=JSON.parse(b);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var x=Q[d];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<I.length;pe++)I[pe]=""}}}}return Cn(Q)}catch{return b}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vi;function gn(){}T(gn,ai),gn.prototype.g=function(){return new XMLHttpRequest},Vi=new gn;function Ut(d){return encodeURIComponent(String(d))}function gs(d){var b=1;d=d.split(":");const x=[];for(;b>0&&d.length;)x.push(d.shift()),b--;return d.length&&x.push(d.join(":")),x}function Hn(d,b,x,I){this.j=d,this.i=b,this.l=x,this.S=I||1,this.V=new Ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gn}function Gn(){this.i=null,this.g="",this.h=!1}var Vt={},Ft={};function Te(d,b,x){d.M=1,d.A=Sa(Mt(b)),d.u=x,d.R=!0,Ue(d,null)}function Ue(d,b){d.F=Date.now(),kn(d),d.B=Mt(d.A);var x=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Ao(x.i,"t",I),d.C=0,x=d.j.L,d.h=new Gn,d.g=fd(d.j,x?b:null,!d.u),d.P>0&&(d.O=new Zt(y(d.Y,d,d.g),d.P)),b=d.V,x=d.g,I=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(Di[0]=B.toString()),B=Di);for(let Q=0;Q<B.length;Q++){const pe=Ge(x,B[Q],I||b.handleEvent,!1,b.h||b);if(!pe)break;b.g[pe.key]=pe}b=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Fn(),ki(d.i,d.v,d.B,d.l,d.S,d.u)}Hn.prototype.ba=function(d){d=d.target;const b=this.O;b&&Kr(d)==3?b.j():this.Y(d)},Hn.prototype.Y=function(d){try{if(d==this.g)e:{const ze=Kr(this.g),Yt=this.g.ya(),lt=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||ze!=4||Yt==7||(Yt==8||lt<=0?Fn(3):Fn(2)),en(this);var b=this.g.ca();this.X=b;var x=It(this);if(this.o=b==200,Fr(this.i,this.v,this.B,this.l,this.S,ze,b),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var Q=I;break t}}Q=null}if(d=Q)Wn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,d);else{this.o=!1,this.m=3,Dt(12),te(this),tn(this);break e}}if(this.R){d=!0;let jt;for(;!this.K&&this.C<x.length;)if(jt=li(this,x),jt==Ft){ze==4&&(this.m=4,Dt(14),d=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Vt){this.m=4,Dt(15),Wn(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Wn(this.i,this.l,jt,null),xe(this,jt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||x.length!=0||this.h.h||(this.m=1,Dt(16),d=!1),this.o=this.o&&d,!d)Wn(this.i,this.l,x,"[Invalid Chunked Response]"),te(this),tn(this);else if(x.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),uc(pe),pe.P=!0,Dt(11))}}else Wn(this.i,this.l,x,null),xe(this,x);ze==4&&te(this),this.o&&!this.K&&(ze==4?cd(this.j,this):(this.o=!1,kn(this)))}else Pi(this.g),b==400&&x.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),te(this),tn(this)}}}catch{}};function It(d){if(!bt(d))return d.g.la();const b=Tn(d.g);if(b==="")return"";let x="";const I=b.length,B=Kr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return te(d),tn(d),"";d.h.i=new u.TextDecoder}for(let Q=0;Q<I;Q++)d.h.h=!0,x+=d.h.i.decode(b[Q],{stream:!(B&&Q==I-1)});return b.length=0,d.h.g+=x,d.C=0,d.h.g}function bt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function li(d,b){var x=d.C,I=b.indexOf(`
`,x);return I==-1?Ft:(x=Number(b.substring(x,I)),isNaN(x)?Vt:(I+=1,I+x>b.length?Ft:(b=b.slice(I,I+x),d.C=I+x,b)))}Hn.prototype.cancel=function(){this.K=!0,te(this)};function kn(d){d.T=Date.now()+d.H,cn(d,d.H)}function cn(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Mn(y(d.aa,d),b)}function en(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Hn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(qr(this.i,this.B),this.M!=2&&(Fn(),Dt(17)),te(this),this.m=2,tn(this)):cn(this,this.T-d)};function tn(d){d.j.I==0||d.K||cd(d.j,d)}function te(d){en(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,si(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function xe(d,b){try{var x=d.j;if(x.I!=0&&(x.g==d||Ze(x.h,d))){if(!d.L&&Ze(x.h,d)&&x.I==3){try{var I=x.Ba.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Do(x),Es(x);else break e;Ma(x),Dt(18)}}else x.xa=B[1],0<x.xa-x.K&&B[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Mn(y(x.Va,x),6e3));Et(x.h)<=1&&x.ta&&(x.ta=void 0)}else mi(x,11)}else if((d.L||x.g==d)&&Do(x),!R(b))for(B=x.Ba.g.parse(b),b=0;b<B.length;b++){let lt=B[b];const jt=lt[0];if(!(jt<=x.K))if(x.K=jt,lt=lt[1],x.I==2)if(lt[0]=="c"){x.M=lt[1],x.ba=lt[2];const Ir=lt[3];Ir!=null&&(x.ka=Ir,x.j.info("VER="+x.ka));const pi=lt[4];pi!=null&&(x.za=pi,x.j.info("SVER="+x.za));const Yr=lt[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(I=1.5*Yr,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Qr=d.g;if(Qr){const ka=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var Q=I.h;Q.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(un(Q,Q.h),Q.h=null))}if(I.G){const Mo=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(I.wa=Mo,dt(I.J,I.G,Mo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var pe=d;if(I.na=hd(I,I.L?I.ba:null,I.W),pe.L){qe(I.h,pe);var ze=pe,Yt=I.O;Yt&&(ze.H=Yt),ze.D&&(en(ze),kn(ze)),I.g=pe}else od(I);x.i.length>0&&fi(x)}else lt[0]!="stop"&&lt[0]!="close"||mi(x,7);else x.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?mi(x,7):lc(x):lt[0]!="noop"&&x.l&&x.l.qa(lt),x.A=0)}}Fn(4)}catch{}}var _e=class{constructor(d,b){this.g=d,this.map=b}};function Me(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Et(d){return d.h?1:d.g?d.g.size:0}function Ze(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function un(d,b){d.g?d.g.add(b):d.h=b}function qe(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Me.prototype.cancel=function(){if(this.i=tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function tt(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const x of d.g.values())b=b.concat(x.G);return b}return C(d.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $n(d,b){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const I=d[x].indexOf("=");let B,Q=null;I>=0?(B=d[x].substring(0,I),Q=d[x].substring(I+1)):B=d[x],b(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function dn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof dn?(this.l=d.l,Kt(this,d.j),this.o=d.o,this.g=d.g,ys(this,d.u),this.h=d.h,tc(this,sd(d.i)),this.m=d.m):d&&(b=String(d).match(ot))?(this.l=!1,Kt(this,b[1]||"",!0),this.o=ci(b[2]||""),this.g=ci(b[3]||"",!0),ys(this,b[4]),this.h=ci(b[5]||"",!0),tc(this,b[6]||"",!0),this.m=ci(b[7]||"")):(this.l=!1,this.i=new _s(null,this.l))}dn.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(Aa(b,So,!0),":");var x=this.g;return(x||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Aa(b,So,!0),"@"),d.push(Ut(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Aa(x,x.charAt(0)=="/"?nc:nd,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Aa(x,rd)),d.join("")},dn.prototype.resolve=function(d){const b=Mt(this);let x=!!d.j;x?Kt(b,d.j):x=!!d.o,x?b.o=d.o:x=!!d.g,x?b.g=d.g:x=d.u!=null;var I=d.h;if(x)ys(b,d.u);else if(x=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=b.h.lastIndexOf("/");B!=-1&&(I=b.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let pe=0;pe<B.length;){const ze=B[pe++];ze=="."?I&&pe==B.length&&Q.push(""):ze==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),I&&pe==B.length&&Q.push("")):(Q.push(ze),I=!0)}I=Q.join("/")}else I=B}return x?b.h=I:x=d.i.toString()!=="",x?tc(b,sd(d.i)):x=!!d.m,x&&(b.m=d.m),b};function Mt(d){return new dn(d)}function Kt(d,b,x){d.j=x?ci(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function ys(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function tc(d,b,x){b instanceof _s?(d.i=b,Io(d.i,d.l)):(x||(b=Aa(b,bs)),d.i=new _s(b,d.l))}function dt(d,b,x){d.i.set(b,x)}function Sa(d){return dt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ci(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Aa(d,b,x){return typeof d=="string"?(d=encodeURI(d).replace(b,Zn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Zn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var So=/[#\/\?@]/g,nd=/[#\?:]/g,nc=/[#\?]/g,bs=/[#\?@]/g,rd=/#/g;function _s(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function er(d){d.g||(d.g=new Map,d.h=0,d.i&&$n(d.i,function(b,x){d.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}s=_s.prototype,s.add=function(d,b){er(this),this.i=null,d=vs(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(b),this.h+=1,this};function id(d,b){er(d),b=vs(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function rc(d,b){return er(d),b=vs(d,b),d.g.has(b)}s.forEach=function(d,b){er(this),this.g.forEach(function(x,I){x.forEach(function(B){d.call(b,B,I,this)},this)},this)};function ic(d,b){er(d);let x=[];if(typeof b=="string")rc(d,b)&&(x=x.concat(d.g.get(vs(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)x=x.concat(d[b]);return x}s.set=function(d,b){return er(this),this.i=null,d=vs(this,d),rc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},s.get=function(d,b){return d?(d=ic(this,d),d.length>0?String(d[0]):b):b};function Ao(d,b,x){id(d,b),x.length>0&&(d.i=null,d.g.set(vs(d,b),C(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let I=0;I<b.length;I++){var x=b[I];const B=Ut(x);x=ic(this,x);for(let Q=0;Q<x.length;Q++){let pe=B;x[Q]!==""&&(pe+="="+Ut(x[Q])),d.push(pe)}}return this.i=d.join("&")};function sd(d){const b=new _s;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function vs(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Io(d,b){b&&!d.j&&(er(d),d.i=null,d.g.forEach(function(x,I){const B=I.toLowerCase();I!=B&&(id(this,I),Ao(this,B,x))},d)),d.j=b}function Gr(d,b){const x=new xn;if(u.Image){const I=new Image;I.onload=v(Sr,x,"TestLoadImage: loaded",!0,b,I),I.onerror=v(Sr,x,"TestLoadImage: error",!1,b,I),I.onabort=v(Sr,x,"TestLoadImage: abort",!1,b,I),I.ontimeout=v(Sr,x,"TestLoadImage: timeout",!1,b,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else b(!1)}function sc(d,b){const x=new xn,I=new AbortController,B=setTimeout(()=>{I.abort(),Sr(x,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:I.signal}).then(Q=>{clearTimeout(B),Q.ok?Sr(x,"TestPingServer: ok",!0,b):Sr(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(B),Sr(x,"TestPingServer: error",!1,b)})}function Sr(d,b,x,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(x)}catch{}}function xs(){this.g=new zr}function ui(d){this.i=d.Sb||null,this.h=d.ab||!1}T(ui,ai),ui.prototype.g=function(){return new Ia(this.i,this.h)};function Ia(d,b){Ct.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ia,Ct),s=Ia.prototype,s.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,$r(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Ts(this):$r(this),this.readyState==3&&No(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Ts(this))},s.Na=function(d){this.g&&(this.response=d,Ts(this))},s.ga=function(){this.g&&Ts(this)};function Ts(d){d.readyState=4,d.l=null,d.j=null,d.B=null,$r(d)}s.setRequestHeader=function(d,b){this.A.append(d,b)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=b.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ar(d){let b="";return Ve(d,function(x,I){b+=I,b+=":",b+=x,b+=`\r
`}),b}function Na(d,b,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Ar(x),typeof d=="string"?x!=null&&Ut(x):dt(d,b,x))}function _t(d){Ct.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(_t,Ct);var di=/^https?$/i,ac=["POST","PUT"];s=_t.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,b,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vi.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(Q){Ra(this,Q);return}if(d=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)x.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())x.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(ac,b,void 0)>=0)||I||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,pe]of x)this.g.setRequestHeader(Q,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Ra(this,Q)}};function Ra(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,oc(d),ji(d)}function oc(d){d.A||(d.A=!0,yt(d,"complete"),yt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,yt(this,"complete"),yt(this,"abort"),ji(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),_t.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ca(this):this.Xa())},s.Xa=function(){Ca(this)};function Ca(d){if(d.h&&typeof l<"u"){if(d.v&&Kr(d)==4)setTimeout(d.Ca.bind(d),0);else if(yt(d,"readystatechange"),Kr(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var I;if(I=Q===0){let pe=String(d.D).match(ot)[1]||null;!pe&&u.self&&u.self.location&&(pe=u.self.location.protocol.slice(0,-1)),I=!di.test(pe?pe.toLowerCase():"")}x=I}if(x)yt(d,"complete"),yt(d,"success");else{d.o=6;try{var B=Kr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",oc(d)}}finally{ji(d)}}}}function ji(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,b||yt(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Kr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),wa(b)}};function Tn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(d){const b={};d=(d.g&&Kr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(R(d[I]))continue;var x=gs(d[I]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=b[B]||[];b[B]=Q,Q.push(x)}Pe(b,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(d,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||b}function ws(d){this.za=0,this.i=[],this.j=new xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,d),this.Za=hi("retryDelaySeedMs",1e4,d),this.Ta=hi("forwardChannelMaxRetries",2,d),this.va=hi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Me(d&&d.concurrentRequestLimit),this.Ba=new xs,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ws.prototype,s.ka=8,s.I=1,s.connect=function(d,b,x,I){Dt(0),this.W=d,this.H=b||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=hd(this,null,this.W),fi(this)};function lc(d){if(Ro(d),d.I==3){var b=d.V++,x=Mt(d.J);if(dt(x,"SID",d.M),dt(x,"RID",b),dt(x,"TYPE","terminate"),Da(d,x),b=new Hn(d,d.j,b),b.M=2,b.A=Sa(Mt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=b.A,x=!0),x||(b.g=fd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),kn(b)}dd(d)}function Es(d){d.g&&(uc(d),d.g.cancel(),d.g=null)}function Ro(d){Es(d),d.v&&(u.clearTimeout(d.v),d.v=null),Do(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function fi(d){if(!Nt(d.h)&&!d.m){d.m=!0;var b=d.Ea;ae||A(),he||(ae(),he=!0),S.add(b,d),d.D=0}}function Co(d,b){return Et(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Mn(y(d.Ea,d,b),ud(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Hn(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=M(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(b+=I,b>4096){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=ad(this,B,b),x=Mt(this.J),dt(x,"RID",d),dt(x,"CVER",22),this.G&&dt(x,"X-HTTP-Session-Id",this.G),Da(this,x),Q&&(this.R?b="headers="+Ut(Ar(Q))+"&"+b:this.u&&Na(x,this.u,Q)),un(this.h,B),this.Ra&&dt(x,"TYPE","init"),this.S?(dt(x,"$req",b),dt(x,"SID","null"),B.U=!0,Te(B,x,null)):Te(B,x,b),this.I=2}}else this.I==3&&(d?cc(this,d):this.i.length==0||Nt(this.h)||cc(this))};function cc(d,b){var x;b?x=b.l:x=d.V++;const I=Mt(d.J);dt(I,"SID",d.M),dt(I,"RID",x),dt(I,"AID",d.K),Da(d,I),d.u&&d.o&&Na(I,d.u,d.o),x=new Hn(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),b&&(d.i=b.G.concat(d.i)),b=ad(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),un(d.h,x),Te(x,I,b)}function Da(d,b){d.H&&Ve(d.H,function(x,I){dt(b,I,x)}),d.l&&Ve({},function(x,I){dt(b,I,x)})}function ad(d,b,x){x=Math.min(d.i.length,x);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let ze=-1;for(;;){const Yt=["count="+x];ze==-1?x>0?(ze=B[0].g,Yt.push("ofs="+ze)):ze=0:Yt.push("ofs="+ze);let lt=!0;for(let jt=0;jt<x;jt++){var Q=B[jt].g;const Ir=B[jt].map;if(Q-=ze,Q<0)ze=Math.max(0,B[jt].g-100),lt=!1;else try{Q="req"+Q+"_"||"";try{var pe=Ir instanceof Map?Ir:Object.entries(Ir);for(const[pi,Yr]of pe){let Qr=Yr;f(Yr)&&(Qr=Cn(Yr)),Yt.push(Q+pi+"="+encodeURIComponent(Qr))}}catch(pi){throw Yt.push(Q+"type="+encodeURIComponent("_badmap")),pi}}catch{I&&I(Ir)}}if(lt){pe=Yt.join("&");break e}}pe=void 0}return d=d.i.splice(0,x),b.G=d,pe}function od(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;ae||A(),he||(ae(),he=!0),S.add(b,d),d.A=0}}function Ma(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Mn(y(d.Da,d),ud(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,ld(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Mn(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Es(this),ld(this))};function uc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function ld(d){d.g=new Hn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Mt(d.na);dt(b,"RID","rpc"),dt(b,"SID",d.M),dt(b,"AID",d.K),dt(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&dt(b,"TO",d.ia),dt(b,"TYPE","xmlhttp"),Da(d,b),d.u&&d.o&&Na(b,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Sa(Mt(b)),x.u=null,x.R=!0,Ue(x,d)}s.Va=function(){this.C!=null&&(this.C=null,Es(this),Ma(this),Dt(19))};function Do(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function cd(d,b){var x=null;if(d.g==b){Do(d),uc(d),d.g=null;var I=2}else if(Ze(d.h,b))x=b.G,qe(d.h,b),I=1;else return;if(d.I!=0){if(b.o)if(I==1){x=b.u?b.u.length:0,b=Date.now()-b.F;var B=d.D;I=Er(),yt(I,new qn(I,x)),fi(d)}else od(d);else if(B=b.m,B==3||B==0&&b.X>0||!(I==1&&Co(d,b)||I==2&&Ma(d)))switch(x&&x.length>0&&(b=d.h,b.i=b.i.concat(x)),B){case 1:mi(d,5);break;case 4:mi(d,10);break;case 3:mi(d,6);break;default:mi(d,2)}}}function ud(d,b){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*b}function mi(d,b){if(d.j.info("Error code "+b),b==2){var x=y(d.bb,d),I=d.Ua;const B=!I;I=new dn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kt(I,"https"),Sa(I),B?Gr(I.toString(),x):sc(I.toString(),x)}else Dt(2);d.I=0,d.l&&d.l.pa(b),dd(d),Ro(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function dd(d){if(d.I=0,d.ja=[],d.l){const b=tt(d.h);(b.length!=0||d.i.length!=0)&&(L(d.ja,b),L(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function hd(d,b,x){var I=x instanceof dn?Mt(x):new dn(x);if(I.g!="")b&&(I.g=b+"."+I.g),ys(I,I.u);else{var B=u.location;I=B.protocol,b=b?b+"."+B.hostname:B.hostname,B=+B.port;const Q=new dn(null);I&&Kt(Q,I),b&&(Q.g=b),B&&ys(Q,B),x&&(Q.h=x),I=Q}return x=d.G,b=d.wa,x&&b&&dt(I,x,b),dt(I,"VER",d.ka),Da(d,I),I}function fd(d,b,x){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new _t(new ui({ab:x})):new _t(d.ma),b.Fa(d.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}s=md.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ss(){}Ss.prototype.g=function(d,b){return new Kn(d,b)};function Kn(d,b){Ct.call(this),this.g=new ws(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!R(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Li(this)}T(Kn,Ct),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){lc(this.g)},Kn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=Cn(d),d=x);b.i.push(new _e(b.Ya++,d)),b.I==3&&fi(b)},Kn.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Kn.Z.N.call(this)};function pd(d){Bt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const x in b){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}T(pd,Bt);function gd(){Dn.call(this),this.status=1}T(gd,Dn);function Li(d){this.g=d}T(Li,md),Li.prototype.ra=function(){yt(this.g,"a")},Li.prototype.qa=function(d){yt(this.g,new pd(d))},Li.prototype.pa=function(d){yt(this.g,new gd)},Li.prototype.oa=function(){yt(this.g,"b")},Ss.prototype.createWebChannel=Ss.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,pw=function(){return new Ss},mw=function(){return Er()},fw=At,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,Nh=Hr,Oi.COMPLETE="complete",hw=Oi,Mi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,ru=Mi,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,dw=_t}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let Yl="12.9.0";function G2(s){Yl=s}const ho=new Zg("@firebase/firestore");function gl(){return ho.logLevel}function ce(s,...e){if(ho.logLevel<=Je.DEBUG){const t=e.map(r0);ho.debug(`Firestore (${Yl}): ${s}`,...t)}}function Jt(s,...e){if(ho.logLevel<=Je.ERROR){const t=e.map(r0);ho.error(`Firestore (${Yl}): ${s}`,...t)}}function fo(s,...e){if(ho.logLevel<=Je.WARN){const t=e.map(r0);ho.warn(`Firestore (${Yl}): ${s}`,...t)}}function r0(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function we(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,gw(s,r,t)}function gw(s,e,t){let r=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Jt(r),new Error(r)}function Ne(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||gw(e,a,r)}function Se(s,e){return s}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class yw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class K2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Y2{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Si,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Si)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new yw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class Q2{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class X2{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Q2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class i0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=W2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(s,e){return s<e?-1:s>e?1:0}function bg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Zp(a)===Zp(l)?je(a,l):Zp(a)?1:-1}return je(s.length,e.length)}const Z2=55296,eN=57343;function Zp(s){const e=s.charCodeAt(0);return e>=Z2&&e<=eN}function Rl(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function bw(s){return s+"\0"}const nx="__name__";class vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=vi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=vi.isNumericId(e),a=vi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?vi.extractNumericId(e).compare(vi.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oa.fromString(e.substring(4,e.length-2))}}class ut extends vi{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends vi{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return tN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nx}static keyField(){return new zt([nx])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(r+=f,a++):(l(),a++)}if(l(),u)throw new fe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ut.fromString(e))}static fromName(e){return new ye(ut.fromString(e).popFirst(5))}static empty(){return new ye(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ut(e.slice()))}}function _w(s,e,t){if(!t)throw new fe(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nN(s,e,t,r){if(e===!0&&r===!0)throw new fe(W.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function rx(s){if(!ye.isDocumentKey(s))throw new fe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ix(s){if(ye.isDocumentKey(s))throw new fe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function _f(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function lr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new fe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_f(s);throw new fe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function rN(s,e){if(e<=0)throw new fe(W.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function ln(s,e){const t={typeString:s};return e&&(t.value=e),t}function qu(s,e){if(!vw(s))throw new fe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const u=s[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(W.INVALID_ARGUMENT,t);return!0}const sx=-62135596800,ax=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ax);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sx)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ax}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:ln("string",mt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new mt(0,0))}static max(){return new Ce(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cl=-1;class Gh{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function _g(s){return s.fields.find((e=>e.kind===2))}function Ja(s){return s.fields.filter((e=>e.kind!==2))}Gh.UNKNOWN_ID=-1;class Rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class wu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wu(0,Tr.min())}}function xw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new Tr(a,ye.empty(),e)}function Tw(s){return new Tr(s.readTime,s.key,Cl)}class Tr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tr(Ce.min(),ye.empty(),Cl)}static max(){return new Tr(Ce.max(),ye.empty(),Cl)}}function s0(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:je(s.largestBatchId,e.largestBatchId))}const ww="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ew{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ga(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==ww)throw s;ce("LocalStore","Unexpectedly lost primary lease")}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(p=>r(p)))})),u=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((v=>{u[y]=v,++f,f===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const br="SimpleDb";class vf{static open(e,t,r,a){try{return new vf(t,e.transaction(a,r))}catch(l){throw new cu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Si,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new cu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=a0(r.target.error);this.S.reject(new cu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(br,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sN(t)}}class la{static delete(e){return ce(br,"Removing database:",e),Za(JT().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!sw())return!1;if(la.F())return!0;const e=fn(),t=la.M(e),r=0<t&&t<10,a=Sw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,la.M(fn())===12.2&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(br,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new fe(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new fe(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new cu(e,u))},a.onupgradeneeded=l=>{ce(br,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ce(br,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const f=vf.open(this.db,e,l?"readonly":"readwrite",r),p=a(f).next((y=>(f.C(),y))).catch((y=>(f.abort(y),z.reject(y)))).toPromise();return p.catch((()=>{})),await f.D,p}catch(f){const p=f,y=p.name!=="FirebaseError"&&u<3;if(ce(br,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Sw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class iN{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Za(this.U.delete())}}class cu extends fe{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ya(s){return s.name==="IndexedDbTransactionError"}class sN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(br,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(br,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Za(r)}add(e){return ce(br,"ADD",this.store.name,e,e),Za(this.store.add(e))}get(e){return Za(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(br,"GET",this.store.name,e,t),t)))}delete(e){return ce(br,"DELETE",this.store.name,e),Za(this.store.delete(e))}count(){return ce(br,"COUNT",this.store.name),Za(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((u,f)=>{l.onerror=p=>{f(p.target.error)},l.onsuccess=p=>{u(p.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((f,p)=>{u.push(p)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){ce(br,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const u=a0(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():r()})):r()}}))}J(e,t){const r=[];return new z(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void a();const p=new iN(f),y=t(f.primaryKey,f.value,p);if(y instanceof z){const v=y.catch((T=>(p.done(),z.reject(T))));r.push(v)}p.isDone?a():p.G===null?f.continue():f.continue(p.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Za(s){return new z(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=a0(r.target.error);t(a)}}))}let ox=!1;function a0(s){const e=la.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ox||(ox=!0,setTimeout((()=>{throw r}),0)),r}}return s}const uu="IndexBackfiller";class aN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(uu,`Documents written: ${t}`)}catch(t){ya(t)?ce(uu,"Ignoring IndexedDB error during index backfill: ",t):await ga(t)}await this.re(6e4)}))}}class oN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ce(uu,`Processing collection: ${u}`),this.oe(e,u,a).next((f=>{a-=f,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((f=>(ce(uu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=Tw(l);s0(u,r)>0&&(r=u)})),new Tr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ar{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ar.ce=-1;const so=-1;function xf(s){return s==null}function Eu(s){return s===0&&1/s==-1/0}function Aw(s){return typeof s=="number"&&Number.isInteger(s)&&!Eu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const $h="";function zn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=lx(e)),e=lN(s.get(t),e);return lx(e)}function lN(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case $h:t+="";break;default:t+=l}}return t}function lx(s){return s+$h+""}function wi(s){const e=s.length;if(Ne(e>=2,64408,{path:s}),e===2)return Ne(s.charAt(0)===$h&&s.charAt(1)==="",56145,{path:s}),ut.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=s.indexOf($h,l);switch((u<0||u>t)&&we(50515,{path:s}),s.charAt(u+1)){case"":const f=s.substring(l,u);let p;a.length===0?p=f:(a+=f,p=a,a=""),r.push(p);break;case"":a+=s.substring(l,u),a+="\0";break;case"":a+=s.substring(l,u+1);break;default:we(61167,{path:s})}l=u+2}return new ut(r)}const Wa="remoteDocuments",Hu="owner",ll="owner",Su="mutationQueues",cN="userId",Zr="mutations",cx="batchId",ro="userMutationsIndex",ux=["userId","batchId"];function Ch(s,e){return[s,zn(e)]}function Iw(s,e,t){return[s,zn(e),t]}const uN={},Dl="documentMutations",Kh="remoteDocumentsV14",dN=["prefixPath","collectionGroup","readTime","documentId"],Dh="documentKeyIndex",hN=["prefixPath","collectionGroup","documentId"],Nw="collectionGroupIndex",fN=["collectionGroup","readTime","prefixPath","documentId"],Au="remoteDocumentGlobal",vg="remoteDocumentGlobalKey",Ml="targets",Rw="queryTargetsIndex",mN=["canonicalId","targetId"],kl="targetDocuments",pN=["targetId","path"],o0="documentTargetsIndex",gN=["path","targetId"],Yh="targetGlobalKey",ao="targetGlobal",Iu="collectionParents",yN=["collectionId","parent"],Ol="clientMetadata",bN="clientId",Tf="bundles",_N="bundleId",wf="namedQueries",vN="name",l0="indexConfiguration",xN="indexId",xg="collectionGroupIndex",TN="collectionGroup",du="indexState",wN=["indexId","uid"],Cw="sequenceNumberIndex",EN=["uid","sequenceNumber"],hu="indexEntries",SN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dw="documentKeyIndex",AN=["indexId","uid","orderedDocumentKey"],Ef="documentOverlays",IN=["userId","collectionPath","documentId"],Tg="collectionPathOverlayIndex",NN=["userId","collectionPath","largestBatchId"],Mw="collectionGroupOverlayIndex",RN=["userId","collectionGroup","largestBatchId"],c0="globals",CN="name",kw=[Su,Zr,Dl,Wa,Ml,Hu,ao,kl,Ol,Au,Iu,Tf,wf],DN=[...kw,Ef],Ow=[Su,Zr,Dl,Kh,Ml,Hu,ao,kl,Ol,Au,Iu,Tf,wf,Ef],Vw=Ow,u0=[...Vw,l0,du,hu],MN=u0,jw=[...u0,c0],kN=jw;class wg extends Ew{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pn(s,e){const t=Se(s);return la.O(t.le,e)}function dx(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ba(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Pw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Rt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=a??Nn.EMPTY,this.right=l??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Nn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Nn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hx(this.data.getIterator())}getIteratorFrom(e){return new hx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class hx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(s){return s.hasNext()?s.getNext():void 0}class or{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new or([])}unionWith(e){let t=new gt(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lw("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const ON=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(s){if(Ne(!!s,39018),typeof s=="string"){let e=0;const t=ON.exec(s);if(Ne(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(s.seconds),nanos:Lt(s.nanos)}}function Lt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function os(s){return typeof s=="string"?Wt.fromBase64String(s):Wt.fromUint8Array(s)}const Uw="server_timestamp",zw="__type__",Bw="__previous_value__",Fw="__local_write_time__";function d0(s){return(s?.mapValue?.fields||{})[zw]?.stringValue===Uw}function Sf(s){const e=s.mapValue.fields[Bw];return d0(e)?Sf(e):e}function Nu(s){const e=as(s.mapValue.fields[Fw].timestampValue);return new mt(e.seconds,e.nanos)}class VN{constructor(e,t,r,a,l,u,f,p,y,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v,this.apiKey=T}}const Ru="(default)";class mo{constructor(e,t){this.projectId=e,this.database=t||Ru}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===Ru}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function jN(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new fe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(s.options.projectId,e)}const h0="__type__",qw="__max__",ra={mapValue:{fields:{__type__:{stringValue:qw}}}},f0="__vector__",Vl="value",Mh={nullValue:"NULL_VALUE"};function ha(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?d0(s)?4:Hw(s)?9007199254740991:Af(s)?10:11:we(28295,{value:s})}function Ni(s,e){if(s===e)return!0;const t=ha(s);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Nu(s).isEqual(Nu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=as(a.timestampValue),f=as(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return os(a.bytesValue).isEqual(os(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return Lt(a.geoPointValue.latitude)===Lt(l.geoPointValue.latitude)&&Lt(a.geoPointValue.longitude)===Lt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Lt(a.integerValue)===Lt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Lt(a.doubleValue),f=Lt(l.doubleValue);return u===f?Eu(u)===Eu(f):isNaN(u)&&isNaN(f)}return!1})(s,e);case 9:return Rl(s.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(dx(u)!==dx(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Ni(u[p],f[p])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function Cu(s,e){return(s.values||[]).find((t=>Ni(t,e)))!==void 0}function fa(s,e){if(s===e)return 0;const t=ha(s),r=ha(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Lt(l.integerValue||l.doubleValue),p=Lt(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(s,e);case 3:return fx(s.timestampValue,e.timestampValue);case 4:return fx(Nu(s),Nu(e));case 5:return bg(s.stringValue,e.stringValue);case 6:return(function(l,u){const f=os(l),p=os(u);return f.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),p=u.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=je(f[y],p[y]);if(v!==0)return v}return je(f.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=je(Lt(l.latitude),Lt(u.latitude));return f!==0?f:je(Lt(l.longitude),Lt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return mx(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const f=l.fields||{},p=u.fields||{},y=f[Vl]?.arrayValue,v=p[Vl]?.arrayValue,T=je(y?.values?.length||0,v?.values?.length||0);return T!==0?T:mx(y,v)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ra.mapValue&&u===ra.mapValue)return 0;if(l===ra.mapValue)return 1;if(u===ra.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const w=bg(p[T],v[T]);if(w!==0)return w;const C=fa(f[p[T]],y[v[T]]);if(C!==0)return C}return je(p.length,v.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function fx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return je(s,e);const t=as(s),r=as(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function mx(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=fa(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function jl(s){return Eg(s)}function Eg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=as(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return os(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Eg(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${Eg(t.fields[u])}`;return a+"}"})(s.mapValue):we(61005,{value:s})}function kh(s){switch(ha(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(s);return e?16+kh(e):16;case 5:return 2*s.stringValue.length;case 6:return os(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+kh(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return ba(r.fields,((l,u)=>{a+=l.length+kh(u)})),a})(s.mapValue);default:throw we(13486,{value:s})}}function Du(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sg(s){return!!s&&"integerValue"in s}function Mu(s){return!!s&&"arrayValue"in s}function px(s){return!!s&&"nullValue"in s}function gx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Oh(s){return!!s&&"mapValue"in s}function Af(s){return(s?.mapValue?.fields||{})[h0]?.stringValue===f0}function fu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ba(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(s.arrayValue.values[t]);return e}return{...s}}function Hw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===qw}const Gw={mapValue:{fields:{[h0]:{stringValue:f0},[Vl]:{arrayValue:{}}}}};function PN(s){return"nullValue"in s?Mh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Du(mo.empty(),ye.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Af(s)?Gw:{mapValue:{}}:we(35942,{value:s})}function LN(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Du(mo.empty(),ye.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Gw:"mapValue"in s?Af(s)?{mapValue:{}}:ra:we(61959,{value:s})}function yx(s,e){const t=fa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function bx(s,e){const t=fa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=zt.emptyPath(),r={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=f.popLast()}u?r[f.lastSegment()]=fu(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ba(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Ln(fu(this.value))}}function $w(s){const e=[];return ba(s.fields,((t,r)=>{const a=new zt([t]);if(Oh(r)){const l=$w(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new or(e)}class Gt{constructor(e,t,r,a,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Gt(e,0,Ce.min(),Ce.min(),Ce.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,a){return new Gt(e,1,t,Ce.min(),r,a,0)}static newNoDocument(e,t){return new Gt(e,2,t,Ce.min(),Ce.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Ce.min(),Ce.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}function _x(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=fa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function vx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ni(s.position[t],e.position[t]))return!1;return!0}class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function UN(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Kw{}class We extends Kw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zN(e,t,r):t==="array-contains"?new qN(e,r):t==="in"?new Zw(e,r):t==="not-in"?new HN(e,r):t==="array-contains-any"?new GN(e,r):new We(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new BN(e,r):new FN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends Kw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pt(e,t)}matches(e){return Ll(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ll(s){return s.op==="and"}function Ag(s){return s.op==="or"}function m0(s){return Yw(s)&&Ll(s)}function Yw(s){for(const e of s.filters)if(e instanceof pt)return!1;return!0}function Ig(s){if(s instanceof We)return s.field.canonicalString()+s.op.toString()+jl(s.value);if(m0(s))return s.filters.map((e=>Ig(e))).join(",");{const e=s.filters.map((t=>Ig(t))).join(",");return`${s.op}(${e})`}}function Qw(s,e){return s instanceof We?(function(r,a){return a instanceof We&&r.op===a.op&&r.field.isEqual(a.field)&&Ni(r.value,a.value)})(s,e):s instanceof pt?(function(r,a){return a instanceof pt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,f)=>l&&Qw(u,a.filters[f])),!0):!1})(s,e):void we(19439)}function Xw(s,e){const t=s.filters.concat(e);return pt.create(t,s.op)}function Jw(s){return s instanceof We?(function(t){return`${t.field.canonicalString()} ${t.op} ${jl(t.value)}`})(s):s instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Jw).join(" ,")+"}"})(s):"Filter"}class zN extends We{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class BN extends We{constructor(e,t){super(e,"in",t),this.keys=Ww("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FN extends We{constructor(e,t){super(e,"not-in",t),this.keys=Ww("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ww(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class qN extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mu(t)&&Cu(t.arrayValue,this.value)}}class Zw extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class HN extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class GN extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Cu(this.value.arrayValue,r)))}}class $N{constructor(e,t=null,r=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function Ng(s,e=null,t=[],r=[],a=null,l=null,u=null){return new $N(s,e,t,r,a,l,u)}function po(s){const e=Se(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ig(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>jl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>jl(r))).join(",")),e.Te=t}return e.Te}function Gu(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!UN(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Qw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!vx(s.startAt,e.startAt)&&vx(s.endAt,e.endAt)}function Qh(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Xh(s,e){return s.filters.filter((t=>t instanceof We&&t.field.isEqual(e)))}function xx(s,e,t){let r=Mh,a=!0;for(const l of Xh(s,e)){let u=Mh,f=!0;switch(l.op){case"<":case"<=":u=PN(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=Mh}yx({value:r,inclusive:a},{value:u,inclusive:f})<0&&(r=u,a=f)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];yx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function Tx(s,e,t){let r=ra,a=!0;for(const l of Xh(s,e)){let u=ra,f=!0;switch(l.op){case">=":case">":u=LN(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=ra}bx({value:r,inclusive:a},{value:u,inclusive:f})>0&&(r=u,a=f)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];bx({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class Ql{constructor(e,t=null,r=[],a=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eE(s,e,t,r,a,l,u,f){return new Ql(s,e,t,r,a,l,u,f)}function $u(s){return new Ql(s)}function wx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function KN(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function tE(s){return s.collectionGroup!==null}function mu(s){const e=Se(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new gt(zt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ku(l,r))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new ku(zt.keyField(),r))}return e.Ie}function xr(s){const e=Se(s);return e.Ee||(e.Ee=YN(e,mu(s))),e.Ee}function YN(s,e){if(s.limitType==="F")return Ng(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ku(a.field,l)}));const t=s.endAt?new Pl(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Pl(s.startAt.position,s.startAt.inclusive):null;return Ng(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Rg(s,e){const t=s.filters.concat([e]);return new Ql(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function QN(s,e){const t=s.explicitOrderBy.concat([e]);return new Ql(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Jh(s,e,t){return new Ql(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function If(s,e){return Gu(xr(s),xr(e))&&s.limitType===e.limitType}function nE(s){return`${po(xr(s))}|lt:${s.limitType}`}function yl(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Jw(a))).join(", ")}]`),xf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>jl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>jl(a))).join(",")),`Target(${r})`})(xr(s))}; limitType=${s.limitType})`}function Ku(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of mu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(u,f,p){const y=_x(u,f,p);return u.inclusive?y<=0:y<0})(r.startAt,mu(r),a)||r.endAt&&!(function(u,f,p){const y=_x(u,f,p);return u.inclusive?y>=0:y>0})(r.endAt,mu(r),a))})(s,e)}function rE(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function iE(s){return(e,t)=>{let r=!1;for(const a of mu(s)){const l=XN(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function XN(s,e,t){const r=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,f){const p=u.data.field(l),y=f.data.field(l);return p!==null&&y!==null?fa(p,y):we(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:s.dir})}}class ds{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return Pw(this.inner)}size(){return this.innerSize}}const JN=new Rt(ye.comparator);function vr(){return JN}const sE=new Rt(ye.comparator);function iu(...s){let e=sE;for(const t of s)e=e.insert(t.key,t);return e}function aE(s){let e=sE;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ei(){return pu()}function oE(){return pu()}function pu(){return new ds((s=>s.toString()),((s,e)=>s.isEqual(e)))}const WN=new Rt(ye.comparator),ZN=new gt(ye.comparator);function He(...s){let e=ZN;for(const t of s)e=e.add(t);return e}const eR=new gt(je);function p0(){return eR}function g0(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function lE(s){return{integerValue:""+s}}function cE(s,e){return Aw(e)?lE(e):g0(s,e)}class Nf{constructor(){this._=void 0}}function tR(s,e,t){return s instanceof Ou?(function(a,l){const u={fields:{[zw]:{stringValue:Uw},[Fw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&d0(l)&&(l=Sf(l)),l&&(u.fields[Bw]=l),{mapValue:u}})(t,e):s instanceof Ul?dE(s,e):s instanceof zl?hE(s,e):(function(a,l){const u=uE(a,l),f=Ex(u)+Ex(a.Ae);return Sg(u)&&Sg(a.Ae)?lE(f):g0(a.serializer,f)})(s,e)}function nR(s,e,t){return s instanceof Ul?dE(s,e):s instanceof zl?hE(s,e):t}function uE(s,e){return s instanceof Bl?(function(r){return Sg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Ou extends Nf{}class Ul extends Nf{constructor(e){super(),this.elements=e}}function dE(s,e){const t=fE(e);for(const r of s.elements)t.some((a=>Ni(a,r)))||t.push(r);return{arrayValue:{values:t}}}class zl extends Nf{constructor(e){super(),this.elements=e}}function hE(s,e){let t=fE(e);for(const r of s.elements)t=t.filter((a=>!Ni(a,r)));return{arrayValue:{values:t}}}class Bl extends Nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ex(s){return Lt(s.integerValue||s.doubleValue)}function fE(s){return Mu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class mE{constructor(e,t){this.field=e,this.transform=t}}function rR(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof Ul&&a instanceof Ul||r instanceof zl&&a instanceof zl?Rl(r.elements,a.elements,Ni):r instanceof Bl&&a instanceof Bl?Ni(r.Ae,a.Ae):r instanceof Ou&&a instanceof Ou})(s.transform,e.transform)}class iR{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Rf{}function pE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cf(s.key,Un.none()):new Xl(s.key,s.data,Un.none());{const t=s.data,r=Ln.empty();let a=new gt(zt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new hs(s.key,r,new or(a.toArray()),Un.none())}}function sR(s,e,t){s instanceof Xl?(function(a,l,u){const f=a.value.clone(),p=Ax(a.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):s instanceof hs?(function(a,l,u){if(!Vh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Ax(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(gE(a)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gu(s,e,t,r){return s instanceof Xl?(function(l,u,f,p){if(!Vh(l.precondition,u))return f;const y=l.value.clone(),v=Ix(l.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof hs?(function(l,u,f,p){if(!Vh(l.precondition,u))return f;const y=Ix(l.fieldTransforms,p,u),v=u.data;return v.setAll(gE(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(s,e,t,r):(function(l,u,f){return Vh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(s,e,t)}function aR(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=uE(r.transform,a||null);l!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,l))}return t||null}function Sx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Rl(r,a,((l,u)=>rR(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Xl extends Rf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class hs extends Rf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gE(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Ax(s,e,t){const r=new Map;Ne(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,f=e.data.field(l.field);r.set(l.field,nR(u,f,t[a]))}return r}function Ix(s,e,t){const r=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);r.set(a.field,tR(l,u,e))}return r}class Cf extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yE extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&sR(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oE();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const p=pE(u,f);p!==null&&r.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((t,r)=>Sx(t,r)))&&Rl(this.baseMutations,e.baseMutations,((t,r)=>Sx(t,r)))}}class b0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return WN})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new b0(e,t,r,a)}}class _0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oR{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function lR(s){switch(s){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function bE(s){if(s===void 0)return Jt("GRPC error has no .code"),W.UNKNOWN;switch(s){case on.OK:return W.OK;case on.CANCELLED:return W.CANCELLED;case on.UNKNOWN:return W.UNKNOWN;case on.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case on.INTERNAL:return W.INTERNAL;case on.UNAVAILABLE:return W.UNAVAILABLE;case on.UNAUTHENTICATED:return W.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case on.NOT_FOUND:return W.NOT_FOUND;case on.ALREADY_EXISTS:return W.ALREADY_EXISTS;case on.PERMISSION_DENIED:return W.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case on.ABORTED:return W.ABORTED;case on.OUT_OF_RANGE:return W.OUT_OF_RANGE;case on.UNIMPLEMENTED:return W.UNIMPLEMENTED;case on.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:s})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function cR(){return new TextEncoder}const uR=new oa([4294967295,4294967295],0);function Nx(s){const e=cR().encode(s),t=new uw;return t.update(e),new Uint8Array(t.digest())}function Rx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new oa([t,r],0),new oa([a,l],0)]}class v0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(r<0)throw new su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oa.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(oa.fromNumber(r)));return a.compare(uR)===1&&(a=new oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Nx(e),[r,a]=Rx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new v0(l,a,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Nx(e),[r,a]=Rx(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yu{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yu(Ce.min(),a,new Rt(je),vr(),He())}}class Qu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qu(r,t,He(),He(),He())}}class jh{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class _E{constructor(e,t){this.targetId=e,this.Ce=t}}class vE{constructor(e,t,r=Wt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Cx{constructor(){this.ve=0,this.Fe=Dx(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),r=He();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:we(38017,{changeType:l})}})),new Qu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Dx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dR{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.He=Th(),this.Je=Th(),this.Ze=new Rt(je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Qh(l))if(r===0){const u=new ye(l.path);this.et(t,u,Gt.newNoDocument(u,Ce.min()))}else Ne(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=os(r).toUint8Array()}catch(p){if(p instanceof Lw)return fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new v0(u,a,l)}catch(p){return fo(p instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Qh(f.target)){const p=new ye(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Gt.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=He();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Yu(e,t,this.Ze,this.je,r);return this.je=vr(),this.He=Th(),this.Je=Th(),this.Ze=new Rt(je),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Cx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new gt(je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new gt(je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Th(){return new Rt(ye.comparator)}function Dx(){return new Rt(ye.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class pR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(s,e){return s.useProto3Json||xf(e)?e:{value:e}}function Fl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function gR(s,e){return Fl(s,e.toTimestamp())}function Qn(s){return Ne(!!s,49232),Ce.fromTimestamp((function(t){const r=as(t);return new mt(r.seconds,r.nanos)})(s))}function x0(s,e){return Dg(s,e).canonicalString()}function Dg(s,e){const t=(function(a){return new ut(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function TE(s){const e=ut.fromString(s);return Ne(DE(e),10190,{key:e.toString()}),e}function Wh(s,e){return x0(s.databaseId,e.path)}function oo(s,e){const t=TE(e);if(t.get(1)!==s.databaseId.projectId)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(SE(t))}function wE(s,e){return x0(s.databaseId,e)}function EE(s){const e=TE(s);return e.length===4?ut.emptyPath():SE(e)}function Mg(s){return new ut(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function SE(s){return Ne(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Mx(s,e,t){return{name:Wh(s,e),fields:t.value.mapValue.fields}}function yR(s,e,t){const r=oo(s,e.name),a=Qn(e.updateTime),l=e.createTime?Qn(e.createTime):Ce.min(),u=new Ln({mapValue:{fields:e.fields}}),f=Gt.newFoundDocument(r,a,l,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function bR(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(Ne(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Ne(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(y){const v=y.code===void 0?W.UNKNOWN:bE(y.code);return new fe(v,y.message||"")})(u);t=new vE(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=oo(s,r.document.name),l=Qn(r.document.updateTime),u=r.document.createTime?Qn(r.document.createTime):Ce.min(),f=new Ln({mapValue:{fields:r.document.fields}}),p=Gt.newFoundDocument(a,l,u,f),y=r.targetIds||[],v=r.removedTargetIds||[];t=new jh(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=oo(s,r.document),l=r.readTime?Qn(r.readTime):Ce.min(),u=Gt.newNoDocument(a,l),f=r.removedTargetIds||[];t=new jh([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=oo(s,r.document),l=r.removedTargetIds||[];t=new jh([],l,a,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new oR(a,l),f=r.targetId;t=new _E(f,u)}}return t}function Zh(s,e){let t;if(e instanceof Xl)t={update:Mx(s,e.key,e.value)};else if(e instanceof Cf)t={delete:Wh(s,e.key)};else if(e instanceof hs)t={update:Mx(s,e.key,e.data),updateMask:ER(e.fieldMask)};else{if(!(e instanceof yE))return we(16599,{dt:e.type});t={verify:Wh(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const f=u.transform;if(f instanceof Ou)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ul)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof zl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Bl)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:gR(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(s,e.precondition)),t}function kg(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Un.updateTime(Qn(l.updateTime)):l.exists!==void 0?Un.exists(l.exists):Un.none()})(e.currentDocument):Un.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,f){let p=null;if("setToServerValue"in f)Ne(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),p=new Ou;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];p=new Ul(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];p=new zl(v)}else"increment"in f?p=new Bl(u,f.increment):we(16584,{proto:f});const y=zt.fromServerFormat(f.fieldPath);return new mE(y,p)})(s,a))):[];if(e.update){e.update.name;const a=oo(s,e.update.name),l=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(p){const y=p.fieldPaths||[];return new or(y.map((v=>zt.fromServerFormat(v))))})(e.updateMask);return new hs(a,l,u,t,r)}return new Xl(a,l,t,r)}if(e.delete){const a=oo(s,e.delete);return new Cf(a,t)}if(e.verify){const a=oo(s,e.verify);return new yE(a,t)}return we(1463,{proto:e})}function _R(s,e){return s&&s.length>0?(Ne(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?Qn(a.updateTime):Qn(l);return u.isEqual(Ce.min())&&(u=Qn(l)),new iR(u,a.transformResults||[])})(t,e)))):[]}function AE(s,e){return{documents:[wE(s,e.path)]}}function IE(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wE(s,a);const l=(function(y){if(y.length!==0)return CE(pt.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(w){return{field:bl(w.field),direction:xR(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Cg(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function NE(s){let e=EE(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ne(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const w=RE(T);return w instanceof pt&&m0(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((w=>(function(L){return new ku(_l(L.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let w;return w=typeof T=="object"?T.value:T,xf(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(T){const w=!!T.before,C=T.values||[];return new Pl(C,w)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const w=!T.before,C=T.values||[];return new Pl(C,w)})(t.endAt)),eE(e,a,u,l,f,"F",p,y)}function vR(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RE(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=_l(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=_l(t.unaryFilter.field);return We.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return We.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_l(t.unaryFilter.field);return We.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(t){return We.create(_l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>RE(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(s):we(30097,{filter:s})}function xR(s){return hR[s]}function TR(s){return fR[s]}function wR(s){return mR[s]}function bl(s){return{fieldPath:s.canonicalString()}}function _l(s){return zt.fromServerFormat(s.fieldPath)}function CE(s){return s instanceof We?(function(t){if(t.op==="=="){if(gx(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NAN"}};if(px(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gx(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NAN"}};if(px(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(t.field),op:TR(t.op),value:t.value}}})(s):s instanceof pt?(function(t){const r=t.getFilters().map((a=>CE(a)));return r.length===1?r[0]:{compositeFilter:{op:wR(t.op),filters:r}}})(s):we(54877,{filter:s})}function ER(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function ME(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ts{constructor(e,t,r,a,l=Ce.min(),u=Ce.min(),f=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kE{constructor(e){this.yt=e}}function SR(s,e){let t;if(e.document)t=yR(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=yo(e.noDocument.readTime);t=Gt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=yo(e.unknownDocument.version);t=Gt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new mt(a[0],a[1]);return Ce.fromTimestamp(l)})(e.readTime)),t}function kx(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Wh(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Fl(l,u.version.toTimestamp()),createTime:Fl(l,u.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:go(e.version)}}return r}function ef(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function go(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yo(s){const e=new mt(s.seconds,s.nanoseconds);return Ce.fromTimestamp(e)}function eo(s,e){const t=(e.baseMutations||[]).map((l=>kg(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>kg(s.yt,l))),a=mt.fromMillis(e.localWriteTimeMs);return new y0(e.batchId,a,t,r)}function au(s){const e=yo(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?yo(s.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const u=l.documents.length;return Ne(u===1,1966,{count:u}),xr($u(EE(l.documents[0])))})(s.query):(function(l){return xr(NE(l))})(s.query),new ts(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Wt.fromBase64String(s.resumeToken))}function OE(s,e){const t=go(e.snapshotVersion),r=go(e.lastLimboFreeSnapshotVersion);let a;a=Qh(e.target)?AE(s.yt,e.target):IE(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:po(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function VE(s){const e=NE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jh(e,e.limit,"L"):e}function eg(s,e){return new _0(e.largestBatchId,kg(s.yt,e.overlayMutation))}function Ox(s,e){const t=e.path.lastSegment();return[s,zn(e.path.popLast()),t]}function Vx(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:go(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}class AR{getBundleMetadata(e,t){return jx(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:yo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return jx(e).put((function(a){return{bundleId:a.id,createTime:go(Qn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Px(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:VE(l.bundledQuery),readTime:yo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return Px(e).put((function(a){return{name:a.name,readTime:go(Qn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function jx(s){return pn(s,Tf)}function Px(s){return pn(s,wf)}class Df{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Df(e,r)}getOverlay(e,t){return Qc(e).get(Ox(this.userId,t)).next((r=>r?eg(this.serializer,r):null))}getOverlays(e,t){const r=Ei();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const f=new _0(t,u);a.push(this.bt(e,f))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(zn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Qc(e).X(Tg,f))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ei(),l=zn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Qc(e).H(Tg,u).next((f=>{for(const p of f){const y=eg(this.serializer,p);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ei();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qc(e).ee({index:Mw,range:f},((p,y,v)=>{const T=eg(this.serializer,y);l.size()<a||T.largestBatchId===u?(l.set(T.getKey(),T),u=T.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Qc(e).put((function(a,l,u){const[f,p,y]=Ox(l,u.mutation.key);return{userId:l,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Zh(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Qc(s){return pn(s,Ef)}class IR{St(e){return pn(e,c0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class to{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Lt(e.integerValue));else if("doubleValue"in e){const r=Lt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Eu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=as(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(os(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Hw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Af(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):we(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Vl,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Lt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}to.Wt=new to;const ul=255;function NR(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function Lx(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=NR(255&r[l]);if(a+=u,u!==8)break}return a})(s);return Math.ceil(e/8)}class RR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=Lx(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=Lx(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(ul),this.sn(255)}_n(){this.an(ul),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ul?(this.sn(ul),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ul?(this.an(ul),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class CR{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class DR{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xc{constructor(){this.cn=new RR,this.ascending=new CR(this.cn),this.descending=new DR(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class no{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new no(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Ph(this.Tn),directionalValue:Ph(this.In),orderedDocumentKey:Ph(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Ys(s,e){let t=s.hn-e.hn;return t!==0?t:(t=Ux(s.Tn,e.Tn),t!==0?t:(t=Ux(s.In,e.In),t!==0?t:ye.comparator(s.Pn,e.Pn)))}function Ux(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function Ph(s){return iw()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function zx(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class Bx{constructor(e){this.Vn=new gt(((t,r)=>zt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ne(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=_g(e);if(t!==void 0&&!this.pn(t))return!1;const r=Ja(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const p=r[l];if(!this.yn(f,p)||!this.wn(this.dn[u++],p))return!1}++l}for(;l<r.length;++l){const f=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new gt(zt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Rh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Rh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Rh(r.field,r.dir==="asc"?0:1)));return new Gh(Gh.UNKNOWN_ID,this.collectionId,t,wu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function jE(s){if(Ne(s instanceof We||s instanceof pt,20012),s instanceof We){if(s instanceof Zw){const t=s.value.arrayValue?.values?.map((r=>We.create(s.field,"==",r)))||[];return pt.create(t,"or")}return s}const e=s.filters.map((t=>jE(t)));return pt.create(e,s.op)}function MR(s){if(s.getFilters().length===0)return[];const e=jg(jE(s));return Ne(PE(e),7391),Og(e)||Vg(e)?[e]:e.getFilters()}function Og(s){return s instanceof We}function Vg(s){return s instanceof pt&&m0(s)}function PE(s){return Og(s)||Vg(s)||(function(t){if(t instanceof pt&&Ag(t)){for(const r of t.getFilters())if(!Og(r)&&!Vg(r))return!1;return!0}return!1})(s)}function jg(s){if(Ne(s instanceof We||s instanceof pt,34018),s instanceof We)return s;if(s.filters.length===1)return jg(s.filters[0]);const e=s.filters.map((r=>jg(r)));let t=pt.create(e,s.op);return t=tf(t),PE(t)?t:(Ne(t instanceof pt,64498),Ne(Ll(t),40251),Ne(t.filters.length>1,57927),t.filters.reduce(((r,a)=>T0(r,a))))}function T0(s,e){let t;return Ne(s instanceof We||s instanceof pt,38388),Ne(e instanceof We||e instanceof pt,25473),t=s instanceof We?e instanceof We?(function(a,l){return pt.create([a,l],"and")})(s,e):Fx(s,e):e instanceof We?Fx(e,s):(function(a,l){if(Ne(a.filters.length>0&&l.filters.length>0,48005),Ll(a)&&Ll(l))return Xw(a,l.getFilters());const u=Ag(a)?a:l,f=Ag(a)?l:a,p=u.filters.map((y=>T0(y,f)));return pt.create(p,"or")})(s,e),tf(t)}function Fx(s,e){if(Ll(e))return Xw(e,s.getFilters());{const t=e.filters.map((r=>T0(s,r)));return pt.create(t,"or")}}function tf(s){if(Ne(s instanceof We||s instanceof pt,11850),s instanceof We)return s;const e=s.getFilters();if(e.length===1)return tf(e[0]);if(Yw(s))return s;const t=e.map((a=>tf(a))),r=[];return t.forEach((a=>{a instanceof We?r.push(a):a instanceof pt&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:pt.create(r,s.op)}class kR{constructor(){this.Sn=new w0}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Tr.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class w0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new gt(ut.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new gt(ut.comparator)).toArray()}}const qx="IndexedDbIndexManager",wh=new Uint8Array(0);class OR{constructor(e,t){this.databaseId=t,this.Dn=new w0,this.Cn=new ds((r=>po(r)),((r,a)=>Gu(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:zn(a)};return Hx(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[bw(t),""],!1,!0);return Hx(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(wi(u.parent))}return r}))}addFieldIndex(e,t){const r=Jc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=hl(e);return l.next((f=>{u.put(Vx(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Jc(e),a=hl(e),l=dl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Jc(e),r=dl(e),a=hl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return z.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new Bx(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=dl(e);let a=!0;const l=new Map;return z.forEach(this.vn(t),(u=>this.Fn(e,u).next((f=>{a&&(a=!!f),l.set(u,f)})))).next((()=>{if(a){let u=He();const f=[];return z.forEach(l,((p,y)=>{ce(qx,`Using index ${(function(Y){return`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(p)} to execute ${po(t)}`);const v=(function(Y,le){const ae=_g(le);if(ae===void 0)return null;for(const he of Xh(Y,ae.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(y,p),T=(function(Y,le){const ae=new Map;for(const he of Ja(le))for(const S of Xh(Y,he.fieldPath))switch(S.op){case"==":case"in":ae.set(he.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ae.set(he.fieldPath.canonicalString(),S.value),Array.from(ae.values())}return null})(y,p),w=(function(Y,le){const ae=[];let he=!0;for(const S of Ja(le)){const A=S.kind===0?xx(Y,S.fieldPath,Y.startAt):Tx(Y,S.fieldPath,Y.startAt);ae.push(A.value),he&&(he=A.inclusive)}return new Pl(ae,he)})(y,p),C=(function(Y,le){const ae=[];let he=!0;for(const S of Ja(le)){const A=S.kind===0?Tx(Y,S.fieldPath,Y.endAt):xx(Y,S.fieldPath,Y.endAt);ae.push(A.value),he&&(he=A.inclusive)}return new Pl(ae,he)})(y,p),L=this.Mn(p,y,w),X=this.Mn(p,y,C),q=this.xn(p,y,T),G=this.On(p.indexId,v,L,w.inclusive,X,C.inclusive,q);return z.forEach(G,(ee=>r.Z(ee,t.limit).next((Y=>{Y.forEach((le=>{const ae=ye.fromSegments(le.documentKey);u.has(ae)||(u=u.add(ae),f.push(ae))}))}))))})).next((()=>f))}return z.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=MR(pt.create(e.filters,"and")).map((r=>Ng(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,f){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),y=p/(t!=null?t.length:1),v=[];for(let T=0;T<p;++T){const w=t?this.Nn(t[T/y]):wh,C=this.Bn(e,w,r[T%y],a),L=this.Ln(e,w,l[T%y],u),X=f.map((q=>this.Bn(e,w,q,!0)));v.push(...this.createRange(C,L,X))}return v}Bn(e,t,r,a){const l=new no(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new no(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new Bx(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const f of l)r.gn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return z.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(p){let y=new gt(zt.comparator),v=!1;for(const T of p.filters)for(const w of T.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?v=!0:y=y.add(w.field));for(const T of p.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Xc;for(const a of Ja(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);to.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new Xc;return to.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Xc;return to.Wt.Dt(Du(this.databaseId,t),r.ln((function(l){const u=Ja(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Xc);let l=0;for(const u of Ja(e)){const f=r[l++];for(const p of a)if(this.qn(t,u.fieldPath)&&Mu(f))a=this.Un(a,u,f);else{const y=p.ln(u.kind);to.Wt.Dt(f,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of a){const p=new Xc;p.seed(f.un()),to.Wt.Dt(u,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof We&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Jc(e),a=hl(e);return(t?r.H(xg,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return z.forEach(l,(f=>a.get([f.indexId,this.uid]).next((p=>{u.push((function(v,T){const w=T?new wu(T.sequenceNumber,new Tr(yo(T.readTime),new ye(wi(T.documentKey)),T.largestBatchId)):wu.empty(),C=v.fields.map((([L,X])=>new Rh(zt.fromServerFormat(L),X)));return new Gh(v.indexId,v.collectionGroup,C,w)})(f,p))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:je(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Jc(e),l=hl(e);return this.Wn(e).next((u=>a.H(xg,IDBKeyRange.bound(t,t)).next((f=>z.forEach(f,(p=>l.put(Vx(p.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?z.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),z.forEach(f,(p=>this.Qn(e,a,p).next((y=>{const v=this.Gn(l,p);return y.isEqual(v)?z.resolve():this.zn(e,l,p,y,v)})))))))}))}jn(e,t,r,a){return dl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return dl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=dl(e);let l=new gt(Ys);return a.ee({index:Dw,range:IDBKeyRange.only([r.indexId,this.uid,Ph(this.Kn(r,t))])},((u,f)=>{l=l.add(new no(r.indexId,t,zx(f.arrayValue),zx(f.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new gt(Ys);const a=this.kn(t,e);if(a==null)return r;const l=_g(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Mu(u))for(const f of u.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.Nn(f),a))}else r=r.add(new no(t.indexId,e.key,wh,a));return r}zn(e,t,r,a,l){ce(qx,"Updating index entries for document '%s'",t.key);const u=[];return(function(p,y,v,T,w){const C=p.getIterator(),L=y.getIterator();let X=cl(C),q=cl(L);for(;X||q;){let G=!1,ee=!1;if(X&&q){const Y=v(X,q);Y<0?ee=!0:Y>0&&(G=!0)}else X!=null?ee=!0:G=!0;G?(T(q),q=cl(L)):ee?(w(X),X=cl(C)):(X=cl(C),q=cl(L))}})(a,l,Ys,(f=>{u.push(this.jn(e,t,r,f))}),(f=>{u.push(this.Hn(e,t,r,f))})),z.waitFor(u)}Wn(e){let t=1;return hl(e).ee({index:Cw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,f)=>Ys(u,f))).filter(((u,f,p)=>!f||Ys(u,p[f-1])!==0));const a=[];a.push(e);for(const u of r){const f=Ys(u,e),p=Ys(u,t);if(f===0)a[0]=e.En();else if(f>0&&p<0)a.push(u),a.push(u.En());else if(p>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const f=a[u].An(this.uid,wh,ye.empty()),p=a[u+1].An(this.uid,wh,ye.empty());l.push(IDBKeyRange.bound(f,p))}return l}Jn(e,t){return Ys(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gx)}getMinOffset(e,t){return z.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||we(44426))))).next(Gx)}}function Hx(s){return pn(s,Iu)}function dl(s){return pn(s,hu)}function Jc(s){return pn(s,l0)}function hl(s){return pn(s,du)}function Gx(s){Ne(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;s0(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Tr(e.readTime,e.documentKey,t)}const $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function UE(s,e,t){const r=s.store(Zr),a=s.store(Dl),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const p=r.ee({range:u},((v,T,w)=>(f++,w.delete())));l.push(p.next((()=>{Ne(f===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const T=Iw(e,v.key.path,t.batchId);l.push(a.delete(T)),y.push(v.key)}return z.waitFor(l).next((()=>y))}function nf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw we(14731);e=s.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(LE,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Mf{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ne(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Mf(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).ee({index:ro,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=vl(e),u=Qs(e);return u.add({}).next((f=>{Ne(typeof f=="number",49019);const p=new y0(f,t,r,a),y=(function(C,L,X){const q=X.baseMutations.map((ee=>Zh(C.yt,ee))),G=X.mutations.map((ee=>Zh(C.yt,ee)));return{userId:L,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:q,mutations:G}})(this.serializer,this.userId,p),v=[];let T=new gt(((w,C)=>je(w.canonicalString(),C.canonicalString())));for(const w of a){const C=Iw(this.userId,w.key.path,f);T=T.add(w.key.path.popLast()),v.push(u.put(y)),v.push(l.put(C,uN))}return T.forEach((w=>{v.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Zn[f]=p.keys()})),z.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return Qs(e).get(t).next((r=>r?(Ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),eo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?z.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Qs(e).ee({index:ro,range:a},((u,f,p)=>{f.userId===this.userId&&(Ne(f.batchId>=r,47524,{Yn:r}),l=eo(this.serializer,f)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=so;return Qs(e).ee({index:ro,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,so],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).H(ro,t).next((r=>r.map((a=>eo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ch(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return vl(e).ee({range:a},((u,f,p)=>{const[y,v,T]=u,w=wi(v);if(y===this.userId&&t.path.isEqual(w))return Qs(e).get(T).next((C=>{if(!C)throw we(61480,{er:u,batchId:T});Ne(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:T}),l.push(eo(this.serializer,C))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(je);const a=[];return t.forEach((l=>{const u=Ch(this.userId,l.path),f=IDBKeyRange.lowerBound(u),p=vl(e).ee({range:f},((y,v,T)=>{const[w,C,L]=y,X=wi(C);w===this.userId&&l.path.isEqual(X)?r=r.add(L):T.done()}));a.push(p)})),z.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Ch(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new gt(je);return vl(e).ee({range:u},((p,y,v)=>{const[T,w,C]=p,L=wi(w);T===this.userId&&r.isPrefixOf(L)?L.length===a&&(f=f.add(C)):v.done()})).next((()=>this.tr(e,f)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Qs(e).get(l).next((u=>{if(u===null)throw we(35274,{batchId:l});Ne(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(eo(this.serializer,u))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return UE(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return vl(e).ee({range:r},((l,u,f)=>{if(l[0]===this.userId){const p=wi(l[1]);a.push(p)}else f.done()})).next((()=>{Ne(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return zE(e,this.userId,t)}ir(e){return BE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:so,lastStreamToken:""}))}}function zE(s,e,t){const r=Ch(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return vl(s).ee({range:l,Y:!0},((f,p,y)=>{const[v,T,w]=f;v===e&&T===a&&(u=!0),y.done()})).next((()=>u))}function Qs(s){return pn(s,Zr)}function vl(s){return pn(s,Dl)}function BE(s){return pn(s,Su)}class bo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new bo(0)}static ar(){return new bo(-1)}}class VR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new bo(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ce.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>fl(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ne(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return fl(e).ee(((u,f)=>{const p=au(f);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return fl(e).ee(((r,a)=>{const l=au(a);t(l)}))}ur(e){return Kx(e).get(Yh).next((t=>(Ne(t!==null,2888),t)))}cr(e,t){return Kx(e).put(Yh,t)}lr(e,t){return fl(e).put(OE(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=po(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return fl(e).ee({range:a,index:Rw},((u,f,p)=>{const y=au(f);Gu(t,y.target)&&(l=y,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Zs(e);return t.forEach((u=>{const f=zn(u.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,u))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=Zs(e);return z.forEach(t,(l=>{const u=zn(l.path);return z.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Zs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zs(e);let l=He();return a.ee({range:r,Y:!0},((u,f,p)=>{const y=wi(u[1]),v=new ye(y);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=zn(t.path),a=IDBKeyRange.bound([r],[bw(r)],!1,!0);let l=0;return Zs(e).ee({index:o0,Y:!0,range:a},(([u,f],p,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return fl(e).get(t).next((r=>r?au(r):null))}}function fl(s){return pn(s,Ml)}function Kx(s){return pn(s,ao)}function Zs(s){return pn(s,kl)}const Yx="LruGarbageCollector",FE=1048576;function Qx([s,e],[t,r]){const a=je(s,t);return a===0?je(e,r):a}class jR{constructor(e){this.Pr=e,this.buffer=new gt(Qx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(Yx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?ce(Yx,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Ar(3e5)}))}}class PR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(ar.ce);const r=new jR(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve($x)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,u=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(r=T,f=Date.now(),this.removeTargets(e,r,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(y=Date.now(),gl()<=Je.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function HE(s,e){return new PR(s,e)}class LR{constructor(e,t){this.db=e,this.garbageCollector=HE(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Eh(e,r)}removeReference(e,t,r){return Eh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Eh(e,t)}wr(e,t){return(function(a,l){let u=!1;return BE(a).te((f=>zE(a,f,l).next((p=>(p&&(u=!0),z.resolve(!p)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,f)=>{if(f<=t){const p=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Ce.min()),Zs(e).delete((function(T){return[0,zn(T.path)]})(u)))))}));a.push(p)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Eh(e,t)}yr(e,t){const r=Zs(e);let a,l=ar.ce;return r.ee({index:o0},(([u,f],{path:p,sequenceNumber:y})=>{u===0?(l!==ar.ce&&t(new ye(wi(a)),l),l=y,a=p):l=ar.ce})).next((()=>{l!==ar.ce&&t(new ye(wi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eh(s,e){return Zs(s).put((function(r,a){return{targetId:0,path:zn(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class GE{constructor(){this.changes=new ds((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qa(e).put(r)}removeEntry(e,t,r){return Qa(e).delete((function(l,u){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],ef(u),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Gt.newInvalidDocument(t);return Qa(e).ee({index:Dh,range:IDBKeyRange.only(Wc(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Gt.newInvalidDocument(t)};return Qa(e).ee({index:Dh,range:IDBKeyRange.only(Wc(t))},((a,l)=>{r={document:this.Sr(t,l),size:nf(l)}})).next((()=>r))}getEntries(e,t){let r=vr();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=vr(),a=new Rt(ye.comparator);return this.Cr(e,t,((l,u)=>{const f=this.Sr(l,u);r=r.insert(l,f),a=a.insert(l,nf(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return z.resolve();let a=new gt(Wx);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Wc(a.first()),Wc(a.last())),u=a.getIterator();let f=u.getNext();return Qa(e).ee({index:Dh,range:l},((p,y,v)=>{const T=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&Wx(f,T)<0;)r(f,null),f=u.getNext();f&&f.isEqual(T)&&(r(f,y),f=u.hasNext()?u.getNext():null),f?v.j(Wc(f)):v.done()})).next((()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qa(e).H(IDBKeyRange.bound(f,p,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let v=vr();for(const T of y){const w=this.Sr(ye.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);w.isFoundDocument()&&(Ku(t,w)||a.has(w.key))&&(v=v.insert(w.key,w))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=vr();const u=Jx(t,r),f=Jx(t,Tr.max());return Qa(e).ee({index:Nw,range:IDBKeyRange.bound(u,f,!0)},((p,y,v)=>{const T=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(T.key,T),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new zR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Xx(e).get(vg).next((t=>(Ne(!!t,20021),t)))}br(e,t){return Xx(e).put(vg,t)}Sr(e,t){if(t){const r=SR(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Gt.newInvalidDocument(e)}}function $E(s){return new UR(s)}class zR extends GE{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new ds((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new gt(((l,u)=>je(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),u.isValidDocument()){const p=kx(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=nf(p);r+=y-f.size,t.push(this.Mr.addEntry(e,l,p))}else if(r-=f.size,this.trackRemovals){const p=kx(this.Mr.serializer,u.convertToNoDocument(Ce.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function Xx(s){return pn(s,Au)}function Qa(s){return pn(s,Kh)}function Wc(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jx(s,e){const t=e.documentKey.path.toArray();return[s,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Wx(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=je(t[l],r[l]),a)return a;return a=je(t.length,r.length),a||(a=je(t[t.length-2],r[r.length-2]),a||je(t[t.length-1],r[r.length-1]))}class BR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KE{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&gu(r.mutation,a,or.empty(),mt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,He()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=He()){const a=Ei();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=iu();return l.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ei();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,He())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,a){let l=vr();const u=pu(),f=(function(){return pu()})();return t.forEach(((p,y)=>{const v=r.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof hs)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),gu(v.mutation,y,v.mutation.getFieldMask(),mt.now())):u.set(y.key,or.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>f.set(y,new BR(v,u.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=pu();let a=new Rt(((u,f)=>u-f)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=r.get(p)||or.empty();v=f.applyToLocalView(y,v),r.set(p,v);const T=(a.get(f.batchId)||He()).add(p);a=a.insert(f.batchId,T)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,T=oE();v.forEach((w=>{if(!l.has(w)){const C=pE(t.get(w),r.get(w));C!==null&&T.set(w,C),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return z.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return KN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(Ei());let f=Cl,p=l;return u.next((y=>z.forEach(y,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,He()))).next((v=>({batchId:f,changes:aE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=iu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((f=>z.forEach(f,(p=>{const y=(function(T,w){return new Ql(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((v=>{v.forEach(((T,w)=>{u=u.insert(T,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Gt.newInvalidDocument(v)))}));let f=iu();return u.forEach(((p,y)=>{const v=l.get(p);v!==void 0&&gu(v.mutation,y,or.empty(),mt.now()),Ku(t,y)&&(f=f.insert(p,y))})),f}))}}class FR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Qn(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:VE(a.bundledQuery),readTime:Qn(a.readTime)}})(t)),z.resolve()}}class qR{constructor(){this.overlays=new Rt(ye.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ei();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=Ei(),l=t.length+1,u=new ye(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Rt(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=Ei(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Ei(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=a)););return z.resolve(f)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new _0(t,r));let l=this.Lr.get(t);l===void 0&&(l=He(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class HR{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class E0{constructor(){this.kr=new gt(bn.Kr),this.qr=new gt(bn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new bn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new ut([])),r=new bn(t,e),a=new bn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new ut([])),r=new bn(t,e),a=new bn(t,e+1);let l=He();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new bn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class GR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new gt(bn.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new y0(l,t,r,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new bn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return z.resolve(u)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?so:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),a=new bn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gt(je);return t.forEach((a=>{const l=new bn(a,0),u=new bn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(f=>{r=r.add(f.Hr)}))})),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new bn(new ye(l),0);let f=new gt(je);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(f=f.add(p.Hr)),!0)}),u),z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ne(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,(a=>{const l=new bn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new bn(t,0),a=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $R{constructor(e){this.ti=e,this.docs=(function(){return new Rt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=vr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Gt.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=vr();const u=t.path,f=new ye(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||s0(Tw(v),r)<=0||(a.has(v.key)||Ku(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){we(9500)}ni(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KR(this)}getSize(e){return z.resolve(this.size)}}class KR extends GE{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class YR{constructor(e){this.persistence=e,this.ri=new ds((t=>po(t)),Gu),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new E0,this.targetCount=0,this.oi=bo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}}class S0{constructor(e,t){this._i={},this.overlays={},this.ai=new ar(0),this.ui=!1,this.ui=!0,this.ci=new HR,this.referenceDelegate=e(this),this.li=new YR(this),this.indexManager=new kR,this.remoteDocumentCache=(function(a){return new $R(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new kE(t),this.Pi=new FR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new GR(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new QR(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class QR extends Ew{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ri=new E0,this.Ai=null}static Vi(e){return new kf(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class rf{constructor(e,t){this.persistence=e,this.fi=new ds((r=>zn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=HE(this,t)}static Vi(e,t){return new rf(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return z.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(r++,l.removeEntry(u,Ce.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class XR{constructor(e){this.serializer=e}k(e,t,r,a){const l=new vf("createOrUpgrade",t);r<1&&a>=1&&((function(p){p.createObjectStore(Hu)})(e),(function(p){p.createObjectStore(Su,{keyPath:cN}),p.createObjectStore(Zr,{keyPath:cx,autoIncrement:!0}).createIndex(ro,ux,{unique:!0}),p.createObjectStore(Dl)})(e),Zx(e),(function(p){p.createObjectStore(Wa)})(e));let u=z.resolve();return r<3&&a>=3&&(r!==0&&((function(p){p.deleteObjectStore(kl),p.deleteObjectStore(Ml),p.deleteObjectStore(ao)})(e),Zx(e)),u=u.next((()=>(function(p){const y=p.store(ao),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return y.put(Yh,v)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(p,y){return y.store(Zr).H().next((T=>{p.deleteObjectStore(Zr),p.createObjectStore(Zr,{keyPath:cx,autoIncrement:!0}).createIndex(ro,ux,{unique:!0});const w=y.store(Zr),C=T.map((L=>w.put(L)));return z.waitFor(C)}))})(e,l)))),u=u.next((()=>{(function(p){p.createObjectStore(Ol,{keyPath:bN})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(p){p.createObjectStore(Au)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(p){p.createObjectStore(Tf,{keyPath:_N})})(e),(function(p){p.createObjectStore(wf,{keyPath:vN})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(p){const y=p.createObjectStore(Ef,{keyPath:IN});y.createIndex(Tg,NN,{unique:!1}),y.createIndex(Mw,RN,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(p){const y=p.createObjectStore(Kh,{keyPath:dN});y.createIndex(Dh,hN),y.createIndex(Nw,fN)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Wa)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(p){p.createObjectStore(l0,{keyPath:xN,autoIncrement:!0}).createIndex(xg,TN,{unique:!1}),p.createObjectStore(du,{keyPath:wN}).createIndex(Cw,EN,{unique:!1}),p.createObjectStore(hu,{keyPath:SN}).createIndex(Dw,AN,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(du).clear()})).next((()=>{t.objectStore(hu).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(p){p.createObjectStore(c0,{keyPath:CN})})(e)}))),r<18&&a>=18&&iw()&&(u=u.next((()=>{t.objectStore(du).clear()})).next((()=>{t.objectStore(hu).clear()}))),u}pi(e){let t=0;return e.store(Wa).ee(((r,a)=>{t+=nf(a)})).next((()=>{const r={byteSize:t};return e.store(Au).put(vg,r)}))}gi(e){const t=e.store(Su),r=e.store(Zr);return t.H().next((a=>z.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,so],[l.userId,l.lastAcknowledgedBatchId]);return r.H(ro,u).next((f=>z.forEach(f,(p=>{Ne(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=eo(this.serializer,p);return UE(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(kl),r=e.store(Wa);return e.store(ao).get(Yh).next((a=>{const l=[];return r.ee(((u,f)=>{const p=new ut(u),y=(function(T){return[0,zn(T)]})(p);l.push(t.get(y).next((v=>v?z.resolve():(T=>t.put({targetId:0,path:zn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>z.waitFor(l)))}))}wi(e,t){e.createObjectStore(Iu,{keyPath:yN});const r=t.store(Iu),a=new w0,l=u=>{if(a.add(u)){const f=u.lastSegment(),p=u.popLast();return r.put({collectionId:f,parent:zn(p)})}};return t.store(Wa).ee({Y:!0},((u,f)=>{const p=new ut(u);return l(p.popLast())})).next((()=>t.store(Dl).ee({Y:!0},(([u,f,p],y)=>{const v=wi(f);return l(v.popLast())}))))}bi(e){const t=e.store(Ml);return t.ee(((r,a)=>{const l=au(a),u=OE(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(Wa),a=[];return r.ee(((l,u)=>{const f=t.store(Kh),p=(function(T){return T.document?new ye(ut.fromString(T.document.name).popFirst(5)):T.noDocument?ye.fromSegments(T.noDocument.path):T.unknownDocument?ye.fromSegments(T.unknownDocument.path):we(36783)})(u).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(f.put(y))})).next((()=>z.waitFor(a)))}Di(e,t){const r=t.store(Zr),a=$E(this.serializer),l=new S0(kf.Vi,this.serializer.yt);return r.H().next((u=>{const f=new Map;return u.forEach((p=>{let y=f.get(p.userId)??He();eo(this.serializer,p).keys().forEach((v=>y=y.add(v))),f.set(p.userId,y)})),z.forEach(f,((p,y)=>{const v=new _n(y),T=Df.wt(this.serializer,v),w=l.getIndexManager(v),C=Mf.wt(v,this.serializer,w,l.referenceDelegate);return new KE(a,C,T,w).recalculateAndSaveOverlaysForDocumentKeys(new wg(t,ar.ce),p).next()}))}))}}function Zx(s){s.createObjectStore(kl,{keyPath:pN}).createIndex(o0,gN,{unique:!0}),s.createObjectStore(Ml,{keyPath:"targetId"}).createIndex(Rw,mN,{unique:!0}),s.createObjectStore(ao)}const Xs="IndexedDbPersistence",tg=18e5,ng=5e3,rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JR="main";class A0{constructor(e,t,r,a,l,u,f,p,y,v,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=f,this.Fi=y,this.Mi=v,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=w=>Promise.resolve(),!A0.v())throw new fe(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LR(this,a),this.Ki=t+JR,this.serializer=new kE(p),this.qi=new la(this.Ki,this.xi,new XR(this.serializer)),this.ci=new IR,this.li=new VR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$E(this.serializer),this.Pi=new AR,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Jt(Xs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(W.FAILED_PRECONDITION,rg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ar(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ya(e))return ce(Xs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Xs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Zc(e).get(ll).next((t=>z.resolve(this.Xi(t))))}Yi(e){return Sh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,tg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=pn(t,Ol);return r.H().next((a=>{const l=this.ns(a,tg),u=a.filter((f=>l.indexOf(f)===-1));return z.forEach(u,(f=>r.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?z.resolve(!0):Zc(e).get(ll).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,ng)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new fe(W.FAILED_PRECONDITION,rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sh(e).H().next((r=>this.ns(r,ng).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Xs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Hu,Ol],(e=>{const t=new wg(e,ar.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Sh(e).H().next((t=>this.ns(t,tg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Mf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OR(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Df.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(Xs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?kN:p===17?jw:p===16?MN:p===15?u0:p===14?Vw:p===13?Ow:p===12?DN:p===11?kw:void we(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(f=>(u=new wg(f,this.ai?this.ai.next():ar.ce),t==="readwrite-primary"?this.ji(u).next((p=>!!p||this.Hi(u))).next((p=>{if(!p)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new fe(W.FAILED_PRECONDITION,ww);return r(u)})).next((p=>this.Zi(u).next((()=>p)))):this.Ps(u).next((()=>r(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ps(e){return Zc(e).get(ll).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,ng)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(W.FAILED_PRECONDITION,rg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zc(e).put(ll,t)}static v(){return la.v()}Ji(e){const t=Zc(e);return t.get(ll).next((r=>this.Xi(r)?(ce(Xs,"Releasing primary lease."),t.delete(ll)):z.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Jt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;rw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ce(Xs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Jt(Xs,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zc(s){return pn(s,Hu)}function Sh(s){return pn(s,Ol)}function YE(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class I0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=He(),a=He();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new I0(e,t.fromCache,r,a)}}class WR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QE{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return rw()?8:Sw(fn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new WR;return this.ys(e,t,u).next((f=>{if(l.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(gl()<=Je.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(gl()<=Je.DEBUG&&ce("QueryEngine","Query:",yl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(gl()<=Je.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):z.resolve())}gs(e,t){if(wx(t))return z.resolve(null);let r=xr(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Jh(t,null,"F"),r=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=He(...l);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.bs(t,f);return this.Ss(t,y,u,p.readTime)?this.gs(e,Jh(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,r,a){return wx(t)||a.isEqual(Ce.min())?z.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?z.resolve(null):(gl()<=Je.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),yl(t)),this.Ds(e,u,t,xw(a,Cl)).next((f=>f)))}))}bs(e,t){let r=new gt(iE(e));return t.forEach(((a,l)=>{Ku(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return gl()<=Je.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",yl(t)),this.fs.getDocumentsMatchingQuery(e,t,Tr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const N0="LocalStore",ZR=3e8;class eC{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Rt(je),this.Fs=new ds((l=>po(l)),Gu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KE(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function XE(s,e,t,r){return new eC(s,e,t,r)}async function JE(s,e){const t=Se(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],f=[];let p=He();for(const y of a){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:f})))}))}))}function tC(s,e){const t=Se(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,v){const T=y.batch,w=T.keys();let C=z.resolve();return w.forEach((L=>{C=C.next((()=>v.getEntry(p,L))).next((X=>{const q=y.docVersions.get(L);Ne(q!==null,48541),X.version.compareTo(q)<0&&(T.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),v.addEntry(X)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let p=He();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function WE(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function nC(s,e){const t=Se(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((v,T)=>{const w=a.get(T);if(!w)return;f.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let C=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(Wt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),a=a.insert(T,C),(function(X,q,G){return X.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=ZR?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(w,C,v)&&f.push(t.li.updateTargetData(l,C))}));let p=vr(),y=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(rC(l,u,e.documentUpdates).next((v=>{p=v.Bs,y=v.Ls}))),!r.isEqual(Ce.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(v)}return z.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.vs=a,l)))}function rC(s,e,t){let r=He(),a=He();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let u=vr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):ce(N0,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Bs:u,Ls:a}}))}function iC(s,e){const t=Se(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=so),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sf(s,e){const t=Se(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ts(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ql(s,e,t){const r=Se(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!ya(u))throw u;ce(N0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Pg(s,e,t){const r=Se(s);let a=Ce.min(),l=He();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,v){const T=Se(p),w=T.Fs.get(v);return w!==void 0?z.resolve(T.vs.get(w)):T.li.getTargetData(y,v)})(r,u,xr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,f.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Ce.min(),t?l:He()))).next((f=>(t1(r,rE(e),f),{documents:f,ks:l})))))}function ZE(s,e){const t=Se(s),r=Se(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function e1(s,e){const t=Se(s),r=t.Ms.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,xw(r,Cl),Number.MAX_SAFE_INTEGER))).then((a=>(t1(t,e,a),a)))}function t1(s,e,t){let r=s.Ms.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}const n1="firestore_clients";function eT(s,e){return`${n1}_${s}_${e}`}const r1="firestore_mutations";function tT(s,e,t){let r=`${r1}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const i1="firestore_targets";function ig(s,e){return`${i1}_${s}_${e}`}const xi="SharedClientState";class af{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new fe(a.error.code,a.error.message))),u?new af(e,t,a.state,l):(Jt(xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new fe(r.error.code,r.error.message))),l?new yu(e,r.state,a):(Jt(xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class of{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=p0();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=Aw(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new of(e,l):(Jt(xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class R0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new R0(t.clientId,t.onlineState):(Jt(xi,`Failed to parse online state: ${e}`),null)}}class Lg{constructor(){this.activeTargetIds=p0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sg{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Rt(je),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=eT(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Lg),this.eo=new RegExp(`^${n1}_${u}_([^_]*)$`),this.no=new RegExp(`^${r1}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${i1}_${u}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(eT(this.persistenceKey,r));if(a){const l=of.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ig(this.persistenceKey,e));if(a){const l=yu.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ig(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(xi,"READ",e,t),t}setItem(e,t){ce(xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(xi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(xi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=ar.ce;if(l!=null)try{const f=JSON.parse(l);Ne(typeof f=="number",30636,{yo:l}),u=f}catch(f){Jt(xi,"Failed to read sequence number from WebStorage",f)}return u})(t.newValue);r!==ar.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new af(this.currentUser,e,t,r),l=tT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=tT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=ig(this.persistenceKey,e),l=new yu(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return of.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return af.$s(new _n(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return yu.$s(a,t)}_o(e){return R0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(xi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],f=[];return l.forEach((p=>{a.has(p)||u.push(p)})),a.forEach((p=>{l.has(p)||f.push(p)})),this.syncEngine.Co(u,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=p0();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class s1{constructor(){this.vo=new Lg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Lg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sC{Mo(e){}shutdown(){}}const nT="ConnectivityMonitor";class rT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(nT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(nT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ah=null;function Ug(){return Ah===null?Ah=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ah++,"0x"+Ah.toString(16)}const ag="RestConnection",aC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class oC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Ru?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=Ug(),f=this.Qo(e,t.toUriEncodedString());ce(ag,`Sending RPC '${e}' ${u}:`,f,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:y}=new URL(f),v=wo(y);return this.zo(e,f,p,r,v).then((T=>(ce(ag,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw fo(ag,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",r),T}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=aC[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class lC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Vn="WebChannelConnection",eu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Tl extends oC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Tl.c_){const e=mw();eu(e,fw.STAT_EVENT,(t=>{t.stat===yg.PROXY?ce(Vn,"STAT_EVENT: detected buffering proxy"):t.stat===yg.NOPROXY&&ce(Vn,"STAT_EVENT: detected no buffering proxy")})),Tl.c_=!0}}zo(e,t,r,a,l){const u=Ug();return new Promise(((f,p)=>{const y=new dw;y.setWithCredentials(!0),y.listenOnce(hw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Nh.NO_ERROR:const T=y.getResponseJson();ce(Vn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Nh.TIMEOUT:ce(Vn,`RPC '${e}' ${u} timed out`),p(new fe(W.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const w=y.getStatus();if(ce(Vn,`RPC '${e}' ${u} failed with status:`,w,"response text:",y.getResponseText()),w>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C?.error;if(L&&L.status&&L.message){const X=(function(G){const ee=G.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ee)>=0?ee:W.UNKNOWN})(L.status);p(new fe(X,L.message))}else p(new fe(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Vn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ce(Vn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Ug(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=l.join("");ce(Vn,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=u.createWebChannel(y,f);this.I_(v);let T=!1,w=!1;const C=new lC({Ho:L=>{w?ce(Vn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(T||(ce(Vn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),T=!0),ce(Vn,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Jo:()=>v.close()});return eu(v,ru.EventType.OPEN,(()=>{w||(ce(Vn,`RPC '${e}' stream ${a} transport opened.`),C.i_())})),eu(v,ru.EventType.CLOSE,(()=>{w||(w=!0,ce(Vn,`RPC '${e}' stream ${a} transport closed`),C.o_(),this.E_(v))})),eu(v,ru.EventType.ERROR,(L=>{w||(w=!0,fo(Vn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),C.o_(new fe(W.UNAVAILABLE,"The operation could not be completed")))})),eu(v,ru.EventType.MESSAGE,(L=>{if(!w){const X=L.data[0];Ne(!!X,16349);const q=X,G=q?.error||q[0]?.error;if(G){ce(Vn,`RPC '${e}' stream ${a} received error:`,G);const ee=G.status;let Y=(function(he){const S=on[he];if(S!==void 0)return bE(S)})(ee),le=G.message;ee==="NOT_FOUND"&&le.includes("database")&&le.includes("does not exist")&&le.includes(this.databaseId.database)&&fo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Y===void 0&&(Y=W.INTERNAL,le="Unknown error status: "+ee+" with message "+G.message),w=!0,C.o_(new fe(Y,le)),v.close()}else ce(Vn,`RPC '${e}' stream ${a} received:`,X),C.__(X)}})),Tl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pw()}}function cC(s){return new Tl(s)}function a1(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function Of(s){return new pR(s,!0)}Tl.c_=!1;class o1{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const iT="PersistentStream";class l1{constructor(e,t,r,a,l,u,f,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Jt(t.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new fe(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(iT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(iT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uC extends l1{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=bR(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Qn(u.readTime):Ce.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Mg(this.serializer),t.addTarget=(function(l,u){let f;const p=u.target;if(f=Qh(p)?{documents:AE(l,p)}:{query:IE(l,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=xE(l,u.resumeToken);const y=Cg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Fl(l,u.snapshotVersion.toTimestamp());const y=Cg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const r=vR(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Mg(this.serializer),t.removeTarget=e,this.K_(t)}}class dC extends l1{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_R(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Mg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Zh(this.serializer,r)))};this.K_(t)}}class hC{}class fC extends hC{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Dg(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(W.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Dg(t,r),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mC(s,e,t,r){return new fC(s,e,t,r)}class pC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _o="RemoteStore";class gC{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Eo(this)&&(ce(_o,"Restarting streams for network reachability change."),await(async function(p){const y=Se(p);y.Ea.add(4),await Xu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Vf(y)})(this))}))})),this.Va=new pC(r,a)}}async function Vf(s){if(Eo(s))for(const e of s.Ra)await e(!0)}async function Xu(s){for(const e of s.Ra)await e(!1)}function jf(s,e){const t=Se(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),M0(t)?D0(t):Wl(t).O_()&&C0(t,e))}function Hl(s,e){const t=Se(s),r=Wl(t);t.Ia.delete(e),r.O_()&&c1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Eo(t)&&t.Va.set("Unknown"))}function C0(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(s).Z_(e)}function c1(s,e){s.da.$e(e),Wl(s).X_(e)}function D0(s){s.da=new dR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Wl(s).start(),s.Va.ua()}function M0(s){return Eo(s)&&!Wl(s).x_()&&s.Ia.size>0}function Eo(s){return Se(s).Ea.size===0}function u1(s){s.da=void 0}async function yC(s){s.Va.set("Online")}async function bC(s){s.Ia.forEach(((e,t)=>{C0(s,e)}))}async function _C(s,e){u1(s),M0(s)?(s.Va.ha(e),D0(s)):s.Va.set("Unknown")}async function vC(s,e,t){if(s.Va.set("Online"),e instanceof vE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(s,e)}catch(r){ce(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(s,r)}else if(e instanceof jh?s.da.Xe(e):e instanceof _E?s.da.st(e):s.da.tt(e),!t.isEqual(Ce.min()))try{const r=await WE(s.localStore);t.compareTo(r)>=0&&await(function(l,u){const f=l.da.Tt(u);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,y)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),c1(l,p);const T=new ts(v.target,p,y,v.sequenceNumber);C0(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(s,t)}catch(r){ce(_o,"Failed to raise snapshot:",r),await lf(s,r)}}async function lf(s,e,t){if(!ya(e))throw e;s.Ea.add(1),await Xu(s),s.Va.set("Offline"),t||(t=()=>WE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ce(_o,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Vf(s)}))}function d1(s,e){return e().catch((t=>lf(s,t,e)))}async function Jl(s){const e=Se(s),t=ma(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:so;for(;xC(e);)try{const a=await iC(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,TC(e,a)}catch(a){await lf(e,a)}h1(e)&&f1(e)}function xC(s){return Eo(s)&&s.Ta.length<10}function TC(s,e){s.Ta.push(e);const t=ma(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function h1(s){return Eo(s)&&!ma(s).x_()&&s.Ta.length>0}function f1(s){ma(s).start()}async function wC(s){ma(s).ra()}async function EC(s){const e=ma(s);for(const t of s.Ta)e.ea(t.mutations)}async function SC(s,e,t){const r=s.Ta.shift(),a=b0.from(r,e,t);await d1(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Jl(s)}async function AC(s,e){e&&ma(s).Y_&&await(async function(r,a){if((function(u){return lR(u)&&u!==W.ABORTED})(a.code)){const l=r.Ta.shift();ma(r).B_(),await d1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Jl(r)}})(s,e),h1(s)&&f1(s)}async function sT(s,e){const t=Se(s);t.asyncQueue.verifyOperationInProgress(),ce(_o,"RemoteStore received new credentials");const r=Eo(t);t.Ea.add(3),await Xu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vf(t)}async function zg(s,e){const t=Se(s);e?(t.Ea.delete(2),await Vf(t)):e||(t.Ea.add(2),await Xu(t),t.Va.set("Unknown"))}function Wl(s){return s.ma||(s.ma=(function(t,r,a){const l=Se(t);return l.sa(),new uC(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:yC.bind(null,s),Yo:bC.bind(null,s),t_:_C.bind(null,s),J_:vC.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),M0(s)?D0(s):s.Va.set("Unknown")):(await s.ma.stop(),u1(s))}))),s.ma}function ma(s){return s.fa||(s.fa=(function(t,r,a){const l=Se(t);return l.sa(),new dC(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:wC.bind(null,s),t_:AC.bind(null,s),ta:EC.bind(null,s),na:SC.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Jl(s)):(await s.fa.stop(),s.Ta.length>0&&(ce(_o,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class k0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,f=new k0(e,t,u,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(s,e){if(Jt("AsyncQueue",`${e}: ${s}`),ya(s))return new fe(W.UNAVAILABLE,`${e}: ${s}`);throw s}class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=iu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aT{constructor(){this.ga=new Rt(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Gl{constructor(e,t,r,a,l,u,f,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Gl(e,t,wl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class IC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class NC{constructor(){this.queries=oT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Se(t),l=a.queries;a.queries=oT(),l.forEach(((u,f)=>{for(const p of f.ba)p.onError(r)}))})(this,new fe(W.ABORTED,"Firestore shutting down"))}}function oT(){return new ds((s=>nE(s)),If)}async function V0(s,e){const t=Se(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new IC,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=O0(u,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&P0(t)}async function j0(s,e){const t=Se(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function RC(s,e){const t=Se(s);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.ba)f.Fa(a)&&(r=!0);u.wa=a}}r&&P0(t)}function CC(s,e,t){const r=Se(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function P0(s){s.Ca.forEach((e=>{e.next()}))}var Bg,lT;(lT=Bg||(Bg={})).Ma="default",lT.Cache="cache";class L0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}class m1{constructor(e){this.key=e}}class p1{constructor(e){this.key=e}}class DC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=iE(e),this.tu=new wl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new aT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,T)=>{const w=a.get(v),C=Ku(this.query,T)?T:null,L=!!w&&this.mutatedKeys.has(w.key),X=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let q=!1;w&&C?w.data.isEqual(C.data)?L!==X&&(r.track({type:3,doc:C}),q=!0):this.su(w,C)||(r.track({type:2,doc:C}),q=!0,(p&&this.eu(C,p)>0||y&&this.eu(C,y)<0)&&(f=!0)):!w&&C?(r.track({type:0,doc:C}),q=!0):w&&!C&&(r.track({type:1,doc:w}),q=!0,(p||y)&&(f=!0)),q&&(C?(u=u.add(C),l=X?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(C,L){const X=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:q})}};return X(C)-X(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,y=p!==this.Xa;return this.Xa=p,u.length!==0||y?{snapshot:new Gl(this.query,e.tu,l,u,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new p1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new m1(r))})),t}cu(e){this.Za=e.ks,this.Ya=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zl="SyncEngine";class MC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kC{constructor(e){this.key=e,this.hu=!1}}class OC{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ds((f=>nE(f)),If),this.Iu=new Map,this.Eu=new Set,this.Ru=new Rt(ye.comparator),this.Au=new Map,this.Vu=new E0,this.du={},this.mu=new Map,this.fu=bo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VC(s,e,t=!0){const r=Pf(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await g1(r,e,t,!0),a}async function jC(s,e){const t=Pf(s);await g1(t,e,!0,!1)}async function g1(s,e,t,r){const a=await sf(s.localStore,xr(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await U0(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&jf(s.remoteStore,a),f}async function U0(s,e,t,r,a){s.pu=(T,w,C)=>(async function(X,q,G,ee){let Y=q.view.ru(G);Y.Ss&&(Y=await Pg(X.localStore,q.query,!1).then((({documents:S})=>q.view.ru(S,Y))));const le=ee&&ee.targetChanges.get(q.targetId),ae=ee&&ee.targetMismatches.get(q.targetId)!=null,he=q.view.applyChanges(Y,X.isPrimaryClient,le,ae);return Fg(X,q.targetId,he.au),he.snapshot})(s,T,w,C);const l=await Pg(s.localStore,e,!0),u=new DC(e,l.ks),f=u.ru(l.documents),p=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),y=u.applyChanges(f,s.isPrimaryClient,p);Fg(s,t,y.au);const v=new MC(e,t,u);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function PC(s,e,t){const r=Se(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!If(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ql(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Hl(r.remoteStore,a.targetId),$l(r,a.targetId)})).catch(ga)):($l(r,a.targetId),await ql(r.localStore,a.targetId,!0))}async function LC(s,e){const t=Se(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hl(t.remoteStore,r.targetId))}async function UC(s,e,t){const r=q0(s);try{const a=await(function(u,f){const p=Se(u),y=mt.now(),v=f.reduce(((C,L)=>C.add(L.key)),He());let T,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=vr(),X=He();return p.xs.getEntries(C,v).next((q=>{L=q,L.forEach(((G,ee)=>{ee.isValidDocument()||(X=X.add(G))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,L))).next((q=>{T=q;const G=[];for(const ee of f){const Y=aR(ee,T.get(ee.key).overlayedDocument);Y!=null&&G.push(new hs(ee.key,Y,$w(Y.value.mapValue),Un.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,G,f)})).next((q=>{w=q;const G=q.applyToLocalDocumentSet(T,X);return p.documentOverlayCache.saveOverlays(C,q.batchId,G)}))})).then((()=>({batchId:w.batchId,changes:aE(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,f,p){let y=u.du[u.currentUser.toKey()];y||(y=new Rt(je)),y=y.insert(f,p),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await _a(r,a.changes),await Jl(r.remoteStore)}catch(a){const l=O0(a,"Failed to persist write");t.reject(l)}}async function y1(s,e){const t=Se(s);try{const r=await nC(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Ne(u.hu,14607):a.removedDocuments.size>0&&(Ne(u.hu,42227),u.hu=!1))})),await _a(t,r,e)}catch(r){await ga(r)}}function cT(s,e,t){const r=Se(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const p=Se(u);p.onlineState=f;let y=!1;p.queries.forEach(((v,T)=>{for(const w of T.ba)w.va(f)&&(y=!0)})),y&&P0(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zC(s,e,t){const r=Se(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new Rt(ye.comparator);u=u.insert(l,Gt.newNoDocument(l,Ce.min()));const f=He().add(l),p=new Yu(Ce.min(),new Map,new Rt(je),u,f);await y1(r,p),r.Ru=r.Ru.remove(l),r.Au.delete(e),F0(r)}else await ql(r.localStore,e,!1).then((()=>$l(r,e,t))).catch(ga)}async function BC(s,e){const t=Se(s),r=e.batch.batchId;try{const a=await tC(t.localStore,e);B0(t,r,null),z0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _a(t,a)}catch(a){await ga(a)}}async function FC(s,e,t){const r=Se(s);try{const a=await(function(u,f){const p=Se(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Ne(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);B0(r,e,t),z0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _a(r,a)}catch(a){await ga(a)}}function z0(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function B0(s,e,t){const r=Se(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function $l(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||b1(s,r)}))}function b1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Hl(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),F0(s))}function Fg(s,e,t){for(const r of t)r instanceof m1?(s.Vu.addReference(r.key,e),qC(s,r)):r instanceof p1?(ce(Zl,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||b1(s,r.key)):we(19791,{wu:r})}function qC(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(ce(Zl,"New document in limbo: "+t),s.Eu.add(r),F0(s))}function F0(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(ut.fromString(e)),r=s.fu.next();s.Au.set(r,new kC(t)),s.Ru=s.Ru.insert(t,r),jf(s.remoteStore,new ts(xr($u(t.path)),r,"TargetPurposeLimboResolution",ar.ce))}}async function _a(s,e,t){const r=Se(s),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,p)=>{u.push(r.pu(p,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(y){a.push(y);const v=I0.Es(p.targetId,y);l.push(v)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(p,y){const v=Se(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>z.forEach(y,(w=>z.forEach(w.Ts,(C=>v.persistence.referenceDelegate.addReference(T,w.targetId,C))).next((()=>z.forEach(w.Is,(C=>v.persistence.referenceDelegate.removeReference(T,w.targetId,C)))))))))}catch(T){if(!ya(T))throw T;ce(N0,"Failed to update sequence numbers: "+T)}for(const T of y){const w=T.targetId;if(!T.fromCache){const C=v.vs.get(w),L=C.snapshotVersion,X=C.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(w,X)}}})(r.localStore,l))}async function HC(s,e){const t=Se(s);if(!t.currentUser.isEqual(e)){ce(Zl,"User change. New user:",e.toKey());const r=await JE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new fe(W.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _a(t,r.Ns)}}function GC(s,e){const t=Se(s),r=t.Au.get(e);if(r&&r.hu)return He().add(r.key);{let a=He();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}async function $C(s,e){const t=Se(s),r=await Pg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Fg(t,e.targetId,a.au),a}async function KC(s,e){const t=Se(s);return e1(t.localStore,e).then((r=>_a(t,r)))}async function YC(s,e,t,r){const a=Se(s),l=await(function(f,p){const y=Se(f),v=Se(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(T=>v.Xn(T,p).next((w=>w?y.localDocuments.getDocuments(T,w):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Jl(a.remoteStore):t==="acknowledged"||t==="rejected"?(B0(a,e,r||null),z0(a,e),(function(f,p){Se(Se(f).mutationQueue).nr(p)})(a.localStore,e)):we(6720,"Unknown batchState",{bu:t}),await _a(a,l)):ce(Zl,"Cannot apply mutation batch with id: "+e)}async function QC(s,e){const t=Se(s);if(Pf(t),q0(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await uT(t,r.toArray());t.gu=!0,await zg(t.remoteStore,!0);for(const l of a)jf(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>($l(t,u),ql(t.localStore,u,!0)))),Hl(t.remoteStore,u)})),await a,await uT(t,r),(function(u){const f=Se(u);f.Au.forEach(((p,y)=>{Hl(f.remoteStore,y)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Rt(ye.comparator)})(t),t.gu=!1,await zg(t.remoteStore,!1)}}async function uT(s,e,t){const r=Se(s),a=[],l=[];for(const u of e){let f;const p=r.Iu.get(u);if(p&&p.length!==0){f=await sf(r.localStore,xr(p[0]));for(const y of p){const v=r.Tu.get(y),T=await $C(r,v);T.snapshot&&l.push(T.snapshot)}}else{const y=await ZE(r.localStore,u);f=await sf(r.localStore,y),await U0(r,_1(y),u,!1,f.resumeToken)}a.push(f)}return r.Pu.J_(l),a}function _1(s){return eE(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function XC(s){return(function(t){return Se(Se(t).persistence).hs()})(Se(s).localStore)}async function JC(s,e,t,r){const a=Se(s);if(a.gu)return void ce(Zl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await e1(a.localStore,rE(l[0])),f=Yu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Wt.EMPTY_BYTE_STRING);await _a(a,u,f);break}case"rejected":await ql(a.localStore,e,!0),$l(a,e,r);break;default:we(64155,t)}}async function WC(s,e,t){const r=Pf(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Zl,"Adding an already active target "+a);continue}const l=await ZE(r.localStore,a),u=await sf(r.localStore,l);await U0(r,_1(l),u.targetId,!1,u.resumeToken),jf(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await ql(r.localStore,a,!1).then((()=>{Hl(r.remoteStore,a),$l(r,a)})).catch(ga)}}function Pf(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=y1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zC.bind(null,e),e.Pu.J_=RC.bind(null,e.eventManager),e.Pu.yu=CC.bind(null,e.eventManager),e}function q0(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FC.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return XE(this.persistence,new QE,e.initialUser,this.serializer)}Cu(e){return new S0(kf.Vi,this.serializer)}Du(e){return new s1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class ZC extends Vu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ne(this.persistence.referenceDelegate instanceof rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new S0((r=>rf.Vi(r,t)),this.serializer)}}class v1 extends Vu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await q0(this.xu.syncEngine),await Jl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return XE(this.persistence,new QE,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new qE(r,e.asyncQueue,t)}Mu(e,t){const r=new oN(t,this.persistence);return new aN(e.asyncQueue,r)}Cu(e){const t=YE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new A0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,a1(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new s1}}class eD extends v1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof sg&&(this.sharedClientState.syncEngine={So:YC.bind(null,t),Do:JC.bind(null,t),Co:WC.bind(null,t),hs:XC.bind(null,t),bo:KC.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await QC(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=a1();if(!sg.v(t))throw new fe(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ju{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HC.bind(null,this.syncEngine),await zg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NC})()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),r=cC(e.databaseInfo);return mC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,f){return new gC(r,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>cT(this.syncEngine,t,0)),(function(){return rT.v()?new rT:new sC})())}createSyncEngine(e,t){return(function(a,l,u,f,p,y,v){const T=new OC(a,l,u,f,p,y);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Se(t);ce(_o,"RemoteStore shutting down."),r.Ea.add(5),await Xu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ju.provider={build:()=>new ju};class H0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const pa="FirestoreClient";class tD{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=_n.UNAUTHENTICATED,this.clientId=i0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ce(pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=O0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function og(s,e){s.asyncQueue.verifyOperationInProgress(),ce(pa,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await JE(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function dT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await nD(s);ce(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>sT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>sT(e.remoteStore,a))),s._onlineComponents=e}async function nD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ce(pa,"Using user provided OfflineComponentProvider");try{await og(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),await og(s,new Vu)}}else ce(pa,"Using default OfflineComponentProvider"),await og(s,new ZC(void 0));return s._offlineComponents}async function x1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ce(pa,"Using user provided OnlineComponentProvider"),await dT(s,s._uninitializedComponentsProvider._online)):(ce(pa,"Using default OnlineComponentProvider"),await dT(s,new ju))),s._onlineComponents}function rD(s){return x1(s).then((e=>e.syncEngine))}async function cf(s){const e=await x1(s),t=e.eventManager;return t.onListen=VC.bind(null,e.syncEngine),t.onUnlisten=PC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LC.bind(null,e.syncEngine),t}function iD(s,e,t,r){const a=new H0(r),l=new L0(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>V0(await cf(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>j0(await cf(s),l)))}}function sD(s,e,t={}){const r=new Si;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,y){const v=new H0({next:w=>{v.Nu(),u.enqueueAndForget((()=>j0(l,T)));const C=w.docs.has(f);!C&&w.fromCache?y.reject(new fe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&p&&p.source==="server"?y.reject(new fe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),T=new L0($u(f.path),v,{includeMetadataChanges:!0,Ka:!0});return V0(l,T)})(await cf(s),s.asyncQueue,e,t,r))),r.promise}function aD(s,e,t={}){const r=new Si;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,y){const v=new H0({next:w=>{v.Nu(),u.enqueueAndForget((()=>j0(l,T))),w.fromCache&&p.source==="server"?y.reject(new fe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),T=new L0(f,v,{includeMetadataChanges:!0,Ka:!0});return V0(l,T)})(await cf(s),s.asyncQueue,e,t,r))),r.promise}function oD(s,e){const t=new Si;return s.asyncQueue.enqueueAndForget((async()=>UC(await rD(s),e,t))),t.promise}function T1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const lD="ComponentProvider",hT=new Map;function cD(s,e,t,r,a){return new VN(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,T1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const w1="firestore.googleapis.com",fT=!0;class mT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w1,this.ssl=fT}else this.host=e.host,this.ssl=e.ssl??fT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FE)throw new fe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $2;switch(r.type){case"firstParty":return new X2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=hT.get(t);r&&(ce(lD,"Removing Datastore"),hT.delete(t),r.terminate())})(this),Promise.resolve()}}function uD(s,e,t,r={}){s=lr(s,Lf);const a=wo(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${t}`;a&&(Wg(`https://${f}`),tw("Firestore",!0)),l.host!==w1&&l.host!==f&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:a,emulatorOptions:r};if(!da(p,u)&&(s._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=_n.MOCK_USER;else{y=vI(r.mockUserToken,s._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new fe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new _n(T)}s._authCredentials=new K2(new yw(y,v))}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class $t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qu(t,$t._jsonSchema))return new $t(e,r||null,new ye(ut.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class ca extends fs{constructor(e,t,r){super(e,t,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ye(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function In(s,e,...t){if(s=mn(s),_w("collection","path",e),s instanceof Lf){const r=ut.fromString(e,...t);return ix(r),new ca(s,null,r)}{if(!(s instanceof $t||s instanceof ca))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ut.fromString(e,...t));return ix(r),new ca(s.firestore,null,r)}}function at(s,e,...t){if(s=mn(s),arguments.length===1&&(e=i0.newId()),_w("doc","path",e),s instanceof Lf){const r=ut.fromString(e,...t);return rx(r),new $t(s,null,new ye(r))}{if(!(s instanceof $t||s instanceof ca))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ut.fromString(e,...t));return rx(r),new $t(s.firestore,s instanceof ca?s.converter:null,new ye(r))}}const pT="AsyncQueue";class gT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o1(this,"async_queue_retry"),this._c=()=>{const r=Lh();r&&ce(pT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;ce(pT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Jt("INTERNAL UNHANDLED ERROR: ",yT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=k0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:yT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ls extends Lf{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new gT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gT(e),this._firestoreClient=void 0,await e}}}function dD(s,e,t){t||(t=Ru);const r=bf(s,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(da(l,e))return a;throw new fe(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FE)throw new fe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wo(e.host)&&Wg(e.host),r.initialize({options:e,instanceIdentifier:t})}function E1(s,e){const t=typeof s=="object"?s:n0(),r=typeof s=="string"?s:Ru,a=bf(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=bI("firestore");l&&uD(a,...l)}return a}function Uf(s){if(s._terminated)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||hD(s),s._firestoreClient}function hD(s){const e=s._freezeSettings(),t=cD(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new tD(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(Wt.fromBase64String(e))}catch(t){throw new fe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:ln("string",jr._jsonSchemaVersion),bytes:ln("string")};class G0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zf{constructor(e){this._methodName=e}}class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(qu(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:ln("string",Ai._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class ri{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ri(e.vectorValues);throw new fe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:ln("string",ri._jsonSchemaVersion),vectorValues:ln("object")};const fD=/^__.*__$/;class mD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class S1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:s})}}class $0{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(A1(this.dataSource)&&fD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Of(e)}createContext(e,t,r,a=!1){return new $0({dataSource:e,methodName:t,targetDoc:r,path:zt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(s){const e=s._freezeSettings(),t=Of(s._databaseId);return new pD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function I1(s,e,t,r,a,l={}){const u=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);Y0("Data must be an object, but it was:",u,r);const f=N1(r,u);let p,y;if(l.merge)p=new or(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const w=vo(e,T,t);if(!u.contains(w))throw new fe(W.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);D1(v,w)||v.push(w)}p=new or(v),y=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=u.fieldTransforms;return new mD(new Ln(f),p,y)}class Ff extends zf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}class K0 extends zf{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Bl(e.serializer,cE(e.serializer,this.Vc));return new mE(e.path,t)}isEqual(e){return e instanceof K0&&this.Vc===e.Vc}}function gD(s,e,t,r){const a=s.createContext(1,e,t);Y0("Data must be an object, but it was:",a,r);const l=[],u=Ln.empty();ba(r,((p,y)=>{const v=C1(e,p,t);y=mn(y);const T=a.childContextForFieldPath(v);if(y instanceof Ff)l.push(v);else{const w=Ju(y,T);w!=null&&(l.push(v),u.set(v,w))}}));const f=new or(l);return new S1(u,f,a.fieldTransforms)}function yD(s,e,t,r,a,l){const u=s.createContext(1,e,t),f=[vo(e,r,t)],p=[a];if(l.length%2!=0)throw new fe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(vo(e,l[w])),p.push(l[w+1]);const y=[],v=Ln.empty();for(let w=f.length-1;w>=0;--w)if(!D1(y,f[w])){const C=f[w];let L=p[w];L=mn(L);const X=u.childContextForFieldPath(C);if(L instanceof Ff)y.push(C);else{const q=Ju(L,X);q!=null&&(y.push(C),v.set(C,q))}}const T=new or(y);return new S1(v,T,u.fieldTransforms)}function bD(s,e,t,r=!1){return Ju(t,s.createContext(r?4:3,e))}function Ju(s,e){if(R1(s=mn(s)))return Y0("Unsupported field value:",e,s),N1(s,e);if(s instanceof zf)return(function(r,a){if(!A1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const f of r){let p=Ju(f,a.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cE(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=mt.fromDate(r);return{timestampValue:Fl(a.serializer,l)}}if(r instanceof mt){const l=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(a.serializer,l)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:xE(a.serializer,r._byteString)};if(r instanceof $t){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:x0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof ri)return(function(u,f){const p=u instanceof ri?u.toArray():u;return{mapValue:{fields:{[h0]:{stringValue:f0},[Vl]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw f.createError("VectorValues must only contain numeric values.");return g0(f.serializer,v)}))}}}}}})(r,a);if(ME(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${_f(r)}`)})(s,e)}function N1(s,e){const t={};return Pw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(s,((r,a)=>{const l=Ju(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function R1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof mt||s instanceof Ai||s instanceof jr||s instanceof $t||s instanceof zf||s instanceof ri||ME(s))}function Y0(s,e,t){if(!R1(t)||!vw(t)){const r=_f(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function vo(s,e,t){if((e=mn(e))instanceof G0)return e._internalPath;if(typeof e=="string")return C1(s,e);throw uf("Field path arguments must be of type string or ",s,!1,void 0,t)}const _D=new RegExp("[~\\*/\\[\\]]");function C1(s,e,t){if(e.search(_D)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new G0(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function uf(s,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${r}`),u&&(p+=` in document ${a}`),p+=")"),new fe(W.INVALID_ARGUMENT,f+s+p)}function D1(s,e){return s.some((t=>t.isEqual(e)))}class vD{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ba(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Vl].arrayValue?.values?.map((r=>Lt(r.doubleValue)));return new ri(t)}convertGeoPoint(e){return new Ai(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=as(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ne(DE(r),9688,{name:e});const a=new mo(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||Jt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Q0 extends vD{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function ml(s){return new K0("increment",s)}const bT="@firebase/firestore",_T="4.11.0";function vT(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class M1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(vo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xD extends M1{data(){return super.data()}}function k1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new fe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class J0 extends X0{}function Ti(s,e,...t){let r=[];e instanceof X0&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((p=>p instanceof W0)).length,f=l.filter((p=>p instanceof qf)).length;if(u>1||u>0&&f>0)throw new fe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class qf extends J0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qf(e,t,r)}_apply(e){const t=this._parse(e);return O1(e._query,t),new fs(e.firestore,e.converter,Rg(e._query,t))}_parse(e){const t=Bf(e.firestore);return(function(l,u,f,p,y,v,T){let w;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){wT(T,v);const L=[];for(const X of T)L.push(TT(p,l,X));w={arrayValue:{values:L}}}else w=TT(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||wT(T,v),w=bD(f,u,T,v==="in"||v==="not-in");return We.create(y,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ws(s,e,t){const r=e,a=vo("where",s);return qf._create(a,r,t)}class W0 extends X0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new W0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const p of f)O1(u,p),u=Rg(u,p)})(e._query,t),new fs(e.firestore,e.converter,Rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Z0 extends J0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Z0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(l,u)})(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,QN(e._query,t))}}function El(s,e="asc"){const t=e,r=vo("orderBy",s);return Z0._create(r,t)}class ey extends J0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ey(e,t,r)}_apply(e){return new fs(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function xT(s){return rN("limit",s),ey._create("limit",s,"F")}function TT(s,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new fe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(e)&&t.indexOf("/")!==-1)throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!ye.isDocumentKey(r))throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Du(s,new ye(r))}if(t instanceof $t)return Du(s,t._key);throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(t)}.`)}function wT(s,e){if(!Array.isArray(s)||s.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O1(s,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function V1(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class TD{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=AD(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function wD(s){return new TD(s)}class ED{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ju.provider,this._offlineComponentProvider={build:t=>new v1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class SD{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ju.provider,this._offlineComponentProvider={build:t=>new eD(t,e?.cacheSizeBytes)}}}function AD(s){return new ED(s?.forceOwnership)}function ID(){return new SD}class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends M1{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:ln("string",lo._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class Uh extends lo{data(e={}){return super.data(e)}}class co{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ou(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Uh(this._firestore,this._userDataWriter,r.key,r,new ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const p=new Uh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Uh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ou(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:ND(f.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ND(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:ln("string",co._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};function Hf(s){s=lr(s,$t);const e=lr(s.firestore,ls),t=Uf(e);return sD(t,s._key).then((r=>j1(e,s,r)))}function lg(s){s=lr(s,fs);const e=lr(s.firestore,ls),t=Uf(e),r=new Q0(e);return k1(s._query),aD(t,s._query).then((a=>new co(e,r,s,a)))}function ua(s,e,t){s=lr(s,$t);const r=lr(s.firestore,ls),a=V1(s.converter,e,t),l=Bf(r);return Gf(r,[I1(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Un.none())])}function yr(s,e,t,...r){s=lr(s,$t);const a=lr(s.firestore,ls),l=Bf(a);let u;return u=typeof(e=mn(e))=="string"||e instanceof G0?yD(l,"updateDoc",s._key,e,t,r):gD(l,"updateDoc",s._key,e),Gf(a,[u.toMutation(s._key,Un.exists(!0))])}function xl(s){return Gf(lr(s.firestore,ls),[new Cf(s._key,Un.none())])}function bu(s,e){const t=lr(s.firestore,ls),r=at(s),a=V1(s.converter,e),l=Bf(s.firestore);return Gf(t,[I1(l,"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then((()=>r))}function ei(s,...e){s=mn(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||vT(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(vT(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,f;if(s instanceof $t)u=lr(s.firestore,ls),f=$u(s._key.path),l={next:y=>{e[r]&&e[r](j1(u,s,y))},error:e[r+1],complete:e[r+2]};else{const y=lr(s,fs);u=lr(y.firestore,ls),f=y._query;const v=new Q0(u);l={next:T=>{e[r]&&e[r](new co(u,v,y,T))},error:e[r+1],complete:e[r+2]},k1(s._query)}const p=Uf(u);return iD(p,f,a,l)}function Gf(s,e){const t=Uf(s);return oD(t,e)}function j1(s,e,t){const r=t.docs.get(e._key),a=new Q0(s);return new lo(s,a,e._key,r,new ou(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){G2(Kl),Nl(new uo("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new ls(new Y2(r.getProvider("auth-internal")),new J2(u,r.getProvider("app-check-internal")),jN(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),aa(bT,_T,e),aa(bT,_T,"esm2020")})();var RD="firebase",CD="12.9.0";aa(RD,CD,"app");function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DD=P1,L1=new Bu("auth","Firebase",P1());const df=new Zg("@firebase/auth");function MD(s,...e){df.logLevel<=Je.WARN&&df.warn(`Auth (${Kl}): ${s}`,...e)}function zh(s,...e){df.logLevel<=Je.ERROR&&df.error(`Auth (${Kl}): ${s}`,...e)}function Pr(s,...e){throw ny(s,...e)}function ii(s,...e){return ny(s,...e)}function ty(s,e,t){const r={...DD(),[e]:t};return new Bu("auth","Firebase",r).create(e,{appName:s.name})}function is(s){return ty(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kD(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pr(s,"argument-error"),ty(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ny(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return L1.create(s,...e)}function ke(s,e,...t){if(!s)throw ny(e,...t)}function ns(s){const e="INTERNAL ASSERTION FAILED: "+s;throw zh(e),new Error(e)}function cs(s,e){s||ns(e)}function qg(){return typeof self<"u"&&self.location?.href||""}function OD(){return ET()==="http:"||ET()==="https:"}function ET(){return typeof self<"u"&&self.location?.protocol||null}function VD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||SI()||"connection"in navigator)?navigator.onLine:!0}function jD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,cs(t>e,"Short delay should be less than long delay!"),this.isMobile=wI()||AI()}get(){return VD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ry(s,e){cs(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class U1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UD=new Wu(3e4,6e4);function va(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function xa(s,e,t,r,a={}){return z1(s,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=Fu({key:s.config.apiKey,...u}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...l};return EI()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&wo(s.emulatorConfig.host)&&(y.credentials="include"),U1.fetch()(await B1(s,s.config.apiHost,t,f),y)})}async function z1(s,e,t){s._canInitEmulator=!1;const r={...PD,...e};try{const a=new BD(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ih(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(s,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Ih(s,"email-already-in-use",u);if(p==="USER_DISABLED")throw Ih(s,"user-disabled",u);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ty(s,v,y);Pr(s,v)}}catch(a){if(a instanceof us)throw a;Pr(s,"network-request-failed",{message:String(a)})}}async function Zu(s,e,t,r,a={}){const l=await xa(s,e,t,r,a);return"mfaPendingCredential"in l&&Pr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function B1(s,e,t,r){const a=`${e}${t}?${r}`,l=s,u=l.config.emulator?ry(s.config,a):`${s.config.apiScheme}://${a}`;return LD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function zD(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),UD.get())})}}function Ih(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ii(s,e,r);return a.customData._tokenResponse=t,a}function ST(s){return s!==void 0&&s.enterprise!==void 0}class FD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qD(s,e){return xa(s,"GET","/v2/recaptchaConfig",va(s,e))}async function HD(s,e){return xa(s,"POST","/v1/accounts:delete",e)}async function hf(s,e){return xa(s,"POST","/v1/accounts:lookup",e)}function _u(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GD(s,e=!1){const t=mn(s),r=await t.getIdToken(e),a=iy(r);ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:_u(cg(a.auth_time)),issuedAtTime:_u(cg(a.iat)),expirationTime:_u(cg(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function cg(s){return Number(s)*1e3}function iy(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const a=XT(t);return a?JSON.parse(a):(zh("Failed to decode base64 JWT payload"),null)}catch(a){return zh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function AT(s){const e=iy(s);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof us&&$D(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function $D({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class KD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ff(s){const e=s.auth,t=await s.getIdToken(),r=await Pu(s,hf(e,{idToken:t}));ke(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?F1(a.providerUserInfo):[],u=QD(s.providerData,l),f=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!u?.length,y=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(s,v)}async function YD(s){const e=mn(s);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QD(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function F1(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function XD(s,e){const t=await z1(s,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await B1(s,a,"/v1/token",`key=${l}`),f=await s._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:r};return s.emulatorConfig&&wo(s.emulatorConfig.host)&&(p.credentials="include"),U1.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JD(s,e){return xa(s,"POST","/v2/accounts:revokeToken",va(s,e))}class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=AT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await XD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Sl;return r&&(ke(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(ke(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(ke(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return ns("not implemented")}}function Js(s,e){ke(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new KD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GD(this,e)}reload(){return YD(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Pu(this,HD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:w,isAnonymous:C,providerData:L,stsTokenManager:X}=t;ke(T&&X,e,"internal-error");const q=Sl.fromJSON(this.name,X);ke(typeof T=="string",e,"internal-error"),Js(r,e.name),Js(a,e.name),ke(typeof w=="boolean",e,"internal-error"),ke(typeof C=="boolean",e,"internal-error"),Js(l,e.name),Js(u,e.name),Js(f,e.name),Js(p,e.name),Js(y,e.name),Js(v,e.name);const G=new ni({uid:T,auth:e,email:a,emailVerified:w,displayName:r,isAnonymous:C,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:q,createdAt:y,lastLoginAt:v});return L&&Array.isArray(L)&&(G.providerData=L.map(ee=>({...ee}))),p&&(G._redirectEventId=p),G}static async _fromIdTokenResponse(e,t,r=!1){const a=new Sl;a.updateFromServerResponse(t);const l=new ni({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ff(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?F1(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,f=new Sl;f.updateFromIdToken(r);const p=new ni({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,y),p}}const IT=new Map;function rs(s){cs(s instanceof Function,"Expected a class definition");let e=IT.get(s);return e?(cs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,IT.set(s,e),e)}class q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q1.type="NONE";const NT=q1;function Bh(s,e,t){return`firebase:${s}:${e}:${t}`}class Al{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Bh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Bh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hf(this.auth,{idToken:e}).catch(()=>{});return t?ni._fromGetAccountInfoResponse(this.auth,t,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Al(rs(NT),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||rs(NT);const u=Bh(r,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(u);if(v){let T;if(typeof v=="string"){const w=await hf(e,{idToken:v}).catch(()=>{});if(!w)break;T=await ni._fromGetAccountInfoResponse(e,w,v)}else T=ni._fromJSON(e,v);y!==l&&(f=T),l=y;break}}catch{}const p=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Al(l,e,r):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Al(l,e,r))}}function RT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q1(e))return"Blackberry";if(X1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||$1(e))&&!e.includes("edge/"))return"Chrome";if(Y1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function H1(s=fn()){return/firefox\//i.test(s)}function G1(s=fn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $1(s=fn()){return/crios\//i.test(s)}function K1(s=fn()){return/iemobile/i.test(s)}function Y1(s=fn()){return/android/i.test(s)}function Q1(s=fn()){return/blackberry/i.test(s)}function X1(s=fn()){return/webos/i.test(s)}function sy(s=fn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function WD(s=fn()){return sy(s)&&!!window.navigator?.standalone}function ZD(){return II()&&document.documentMode===10}function J1(s=fn()){return sy(s)||Y1(s)||X1(s)||Q1(s)||/windows phone/i.test(s)||K1(s)}function W1(s,e=[]){let t;switch(s){case"Browser":t=RT(fn());break;case"Worker":t=`${RT(fn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${r}`}class e4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function t4(s,e={}){return xa(s,"GET","/v2/passwordPolicy",va(s,e))}const n4=6;class r4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??n4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class i4{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CT(this),this.idTokenSubscription=new CT(this),this.beforeStateQueue=new e4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hf(this,{idToken:e}),r=await ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_r(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(r=f.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(is(this));const t=e?mn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t4(this),t=new r4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await JD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&MD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ta(s){return mn(s)}class CT{constructor(e){this.auth=e,this.observer=null,this.addObserver=kI(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s4(s){$f=s}function Z1(s){return $f.loadJS(s)}function a4(){return $f.recaptchaEnterpriseScript}function o4(){return $f.gapiScript}function l4(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class c4{constructor(){this.enterprise=new u4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class u4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const d4="recaptcha-enterprise",eS="NO_RECAPTCHA";class h4{constructor(e){this.type=d4,this.auth=Ta(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{qD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new FD(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{f(p)})})}function a(l,u,f){const p=window.grecaptcha;ST(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(eS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c4().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!t&&ST(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=a4();p.length!==0&&(p+=f),Z1(p).then(()=>{a(f,l,u)}).catch(y=>{u(y)})}}).catch(f=>{u(f)})})}}async function DT(s,e,t,r=!1,a=!1){const l=new h4(s);let u;if(a)u=eS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Gg(s,e,t,r,a){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await DT(s,e,t,t==="getOobCode");return r(s,l)}else return r(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await DT(s,e,t,t==="getOobCode");return r(s,u)}else return Promise.reject(l)})}function f4(s,e){const t=bf(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(da(l,e??{}))return a;Pr(a,"already-initialized")}return t.initialize({options:e})}function m4(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(rs);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function p4(s,e,t){const r=Ta(s);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=tS(e),{host:u,port:f}=g4(e),p=f===null?"":`:${f}`,y={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(da(y,r.config.emulator)&&da(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,wo(u)?(Wg(`${l}//${u}${p}`),tw("Auth",!0)):y4()}function tS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function g4(s){const e=tS(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:MT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:MT(u)}}}function MT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function y4(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function b4(s,e){return xa(s,"POST","/v1/accounts:signUp",e)}async function _4(s,e){return Zu(s,"POST","/v1/accounts:signInWithPassword",va(s,e))}async function v4(s,e){return Zu(s,"POST","/v1/accounts:signInWithEmailLink",va(s,e))}async function x4(s,e){return Zu(s,"POST","/v1/accounts:signInWithEmailLink",va(s,e))}class Lu extends ay{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Lu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Lu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,t,"signInWithPassword",_4);case"emailLink":return v4(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,r,"signUpPassword",b4);case"emailLink":return x4(e,{idToken:t,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Il(s,e){return Zu(s,"POST","/v1/accounts:signInWithIdp",va(s,e))}const T4="http://localhost";class xo extends ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new xo(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Il(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Il(e,t)}buildRequest(){const e={requestUri:T4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}function w4(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E4(s){const e=tu(nu(s)).link,t=e?tu(nu(e)).deep_link_id:null,r=tu(nu(s)).deep_link_id;return(r?tu(nu(r)).link:null)||r||t||e||s}class oy{constructor(e){const t=tu(nu(e)),r=t.apiKey??null,a=t.oobCode??null,l=w4(t.mode??null);ke(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=E4(e);try{return new oy(t)}catch{return null}}}class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,t){return Lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=oy.parseLink(t);return ke(r,"argument-error"),Lu._fromEmailAndCode(e,r.code,r.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ed extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends ed{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";ea.PROVIDER_ID="facebook.com";class ti extends ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ti.credential(t,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";class ta extends ed{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";class na extends ed{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return na.credential(t,r)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";async function S4(s,e){return Zu(s,"POST","/v1/accounts:signUp",va(s,e))}class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ni._fromIdTokenResponse(e,r,a),u=kT(r);return new To({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=kT(r);return new To({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function kT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class mf extends us{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new mf(e,t,r,a)}}function nS(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(s,l,e,r):l})}async function A4(s,e,t=!1){const r=await Pu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return To._forOperation(s,"link",r)}async function I4(s,e,t=!1){const{auth:r}=s;if(_r(r.app))return Promise.reject(is(r));const a="reauthenticate";try{const l=await Pu(s,nS(r,a,e,s),t);ke(l.idToken,r,"internal-error");const u=iy(l.idToken);ke(u,r,"internal-error");const{sub:f}=u;return ke(s.uid===f,r,"user-mismatch"),To._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Pr(r,"user-mismatch"),l}}async function rS(s,e,t=!1){if(_r(s.app))return Promise.reject(is(s));const r="signIn",a=await nS(s,r,e),l=await To._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function N4(s,e){return rS(Ta(s),e)}async function iS(s){const e=Ta(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R4(s,e,t){if(_r(s.app))return Promise.reject(is(s));const r=Ta(s),u=await Gg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S4).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&iS(s),p}),f=await To._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function C4(s,e,t){return _r(s.app)?Promise.reject(is(s)):N4(mn(s),ec.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iS(s),r})}function D4(s,e,t,r){return mn(s).onIdTokenChanged(e,t,r)}function M4(s,e,t){return mn(s).beforeAuthStateChanged(e,t)}function k4(s,e,t,r){return mn(s).onAuthStateChanged(e,t,r)}function O4(s){return mn(s).signOut()}const pf="__sak";class sS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const V4=1e3,j4=10;class aS extends sS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);ZD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,j4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},V4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aS.type="LOCAL";const P4=aS;class oS extends sS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oS.type="SESSION";const lS=oS;function L4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(u).map(async y=>y(t.origin,l)),p=await L4(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];function cy(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class U4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const y=cy("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(T){const w=T;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ii(){return window}function z4(s){Ii().location.href=s}function cS(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function B4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F4(){return navigator?.serviceWorker?.controller||null}function q4(){return cS()?self:null}const uS="firebaseLocalStorageDb",H4=1,gf="firebaseLocalStorage",dS="fbase_key";class td{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(s,e){return s.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function G4(){const s=indexedDB.deleteDatabase(uS);return new td(s).toPromise()}function $g(){const s=indexedDB.open(uS,H4);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(gf,{keyPath:dS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(gf)?e(r):(r.close(),await G4(),e(await $g()))})})}async function OT(s,e,t){const r=Yf(s,!0).put({[dS]:e,value:t});return new td(r).toPromise()}async function $4(s,e){const t=Yf(s,!1).get(e),r=await new td(t).toPromise();return r===void 0?null:r.value}function VT(s,e){const t=Yf(s,!0).delete(e);return new td(t).toPromise()}const K4=800,Y4=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Y4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(q4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await B4(),!this.activeServiceWorker)return;this.sender=new U4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await OT(e,pf,"1"),await VT(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>OT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>VT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Yf(a,!1).getAll();return new td(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const Q4=hS;new Wu(3e4,6e4);function fS(s,e){return e?rs(e):(ke(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class uy extends ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X4(s){return rS(s.auth,new uy(s),s.bypassAuthState)}function J4(s){const{auth:e,user:t}=s;return ke(t,e,"internal-error"),I4(t,new uy(s),s.bypassAuthState)}async function W4(s){const{auth:e,user:t}=s;return ke(t,e,"internal-error"),A4(t,new uy(s),s.bypassAuthState)}class mS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X4;case"linkViaPopup":case"linkViaRedirect":return W4;case"reauthViaPopup":case"reauthViaRedirect":return J4;default:Pr(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Z4=new Wu(2e3,1e4);async function e5(s,e,t){if(_r(s.app))return Promise.reject(ii(s,"operation-not-supported-in-this-environment"));const r=Ta(s);kD(s,e,ly);const a=fS(r,t);return new io(r,"signInViaPopup",e,a).executeNotNull()}class io extends mS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z4.get())};e()}}io.currentPopupAction=null;const t5="pendingRedirect",Fh=new Map;class n5 extends mS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const r=await r5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r5(s,e){const t=a5(e),r=s5(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function i5(s,e){Fh.set(s._key(),e)}function s5(s){return rs(s._redirectPersistence)}function a5(s){return Bh(t5,s.config.apiKey,s.name)}async function o5(s,e,t=!1){if(_r(s.app))return Promise.reject(is(s));const r=Ta(s),a=fS(r,e),u=await new n5(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const l5=600*1e3;class c5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ii(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jT(e))}saveEventToCache(e){this.cachedEventUids.add(jT(e)),this.lastProcessedEventTime=Date.now()}}function jT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function pS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function u5(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(s);default:return!1}}async function d5(s,e={}){return xa(s,"GET","/v1/projects",e)}const h5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f5=/^https?/;async function m5(s){if(s.config.emulator)return;const{authorizedDomains:e}=await d5(s);for(const t of e)try{if(p5(t))return}catch{}Pr(s,"unauthorized-domain")}function p5(s){const e=qg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!f5.test(t))return!1;if(h5.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const g5=new Wu(3e4,6e4);function PT(){const s=Ii().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function y5(s){return new Promise((e,t)=>{function r(){PT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PT(),t(ii(s,"network-request-failed"))},timeout:g5.get()})}if(Ii().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ii().gapi?.load)r();else{const a=l4("iframefcb");return Ii()[a]=()=>{gapi.load?r():t(ii(s,"network-request-failed"))},Z1(`${o4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw qh=null,e})}let qh=null;function b5(s){return qh=qh||y5(s),qh}const _5=new Wu(5e3,15e3),v5="__/auth/iframe",x5="emulator/auth/iframe",T5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E5(s){const e=s.config;ke(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?ry(e,x5):`https://${s.config.authDomain}/${v5}`,r={apiKey:e.apiKey,appName:s.name,v:Kl},a=w5.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Fu(r).slice(1)}`}async function S5(s){const e=await b5(s),t=Ii().gapi;return ke(t,s,"internal-error"),e.open({where:document.body,url:E5(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T5,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=ii(s,"network-request-failed"),f=Ii().setTimeout(()=>{l(u)},_5.get());function p(){Ii().clearTimeout(f),a(r)}r.ping(p).then(p,()=>{l(u)})}))}const A5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I5=500,N5=600,R5="_blank",C5="http://localhost";class LT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D5(s,e,t,r=I5,a=N5){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const p={...A5,width:r.toString(),height:a.toString(),top:l,left:u},y=fn().toLowerCase();t&&(f=$1(y)?R5:t),H1(y)&&(e=e||C5,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[C,L])=>`${w}${C}=${L},`,"");if(WD(y)&&f!=="_self")return M5(e||"",f),new LT(null);const T=window.open(e||"",f,v);ke(T,s,"popup-blocked");try{T.focus()}catch{}return new LT(T)}function M5(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const k5="__/auth/handler",O5="emulator/auth/handler",V5=encodeURIComponent("fac");async function UT(s,e,t,r,a,l){ke(s.config.authDomain,s,"auth-domain-config-required"),ke(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Kl,eventId:a};if(e instanceof ly){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",MI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof ed){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await s._getAppCheckToken(),y=p?`#${V5}=${encodeURIComponent(p)}`:"";return`${j5(s)}?${Fu(f).slice(1)}${y}`}function j5({config:s}){return s.emulator?ry(s,O5):`https://${s.authDomain}/${k5}`}const ug="webStorageSupport";class P5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lS,this._completeRedirectFn=o5,this._overrideRedirectResult=i5}async _openPopup(e,t,r,a){cs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await UT(e,t,r,qg(),a);return D5(e,l,cy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await UT(e,t,r,qg(),a);return z4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(cs(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await S5(e),r=new c5(e);return t.register("authEvent",a=>(ke(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ug,{type:ug},a=>{const l=a?.[0]?.[ug];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=m5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J1()||G1()||sy()}}const L5=P5;var zT="@firebase/auth",BT="1.12.0";class U5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function z5(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B5(s){Nl(new uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(s)},y=new i4(r,a,l,p);return m4(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nl(new uo("auth-internal",e=>{const t=Ta(e.getProvider("auth").getImmediate());return(r=>new U5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(zT,BT,z5(s)),aa(zT,BT,"esm2020")}const F5=300,q5=ew("authIdTokenMaxAge")||F5;let FT=null;const H5=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>q5)return;const a=t?.token;FT!==a&&(FT=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gS(s=n0()){const e=bf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=f4(s,{popupRedirectResolver:L5,persistence:[Q4,P4,lS]}),r=ew("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=H5(l.toString());M4(t,u,()=>u(t.currentUser)),D4(t,f=>u(f))}}const a=WT("auth");return a&&p4(t,`http://${a}`),t}function G5(){return document.getElementsByTagName("head")?.[0]??document}s4({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=ii("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",G5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B5("Browser");const $5={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},yS=t0($5),Oe=E1(yS),qT=gS(yS);new ti;const dy=s=>s?typeof s=="number"?s:s.val?dy(s.val):Number(s.value)||Number(s.coins)||Number(s.lofiCoins)||0:0,HT=async s=>{try{const e=at(Oe,"users",s,"data","wallet"),t=await Hf(e);return t.exists()?dy(t.data()):0}catch(e){throw console.error("Error en servicio getWalletBalance:",e),e}},K5=async(s,e)=>{const t=typeof e=="object"?dy(e):Number(e),r=at(Oe,"users",s,"data","wallet");return await ua(r,{val:{value:t,coins:t,lofiCoins:t},value:t,coins:t,lofiCoins:t}),t},Y5=s=>{const[e,t]=P.useState(0),[r,a]=P.useState(!0),l=P.useRef(null),u=P.useRef(null);P.useEffect(()=>{if(!s?.uid)return;(async()=>{try{a(!0);const T=await HT(s.uid);t(T),u.current=T}catch{console.error("Fall la carga de billetera")}finally{a(!1)}})()},[s]);const f=P.useCallback(v=>{s?.uid&&(t(v),u.current=v,l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const T=u.current;await K5(s.uid,T),console.log(" Saldo guardado en Firebase:",T)}catch{console.error("Error guardando saldo, revertimos...");const w=await HT(s.uid);t(w)}},2e3))},[s]);return{balance:e,loading:r,updateBalance:f,addCoins:v=>f(e+v),spendCoins:v=>e>=v?(f(e-v),!0):!1}},Q5={apiKey:"AIzaSyADgIdomw9VmyRWyDJrB5kIGwLXke0FSAo",authDomain:"task-manager-tl.firebaseapp.com",projectId:"task-manager-tl",storageBucket:"task-manager-tl.firebasestorage.app",messagingSenderId:"1042228665130",appId:"1:1042228665130:web:69f8244f16145e6cc65c53",measurementId:"G-WLH41TME67"},Kg=O2().length>0?n0():t0(Q5);let Yg;try{Yg=dD(Kg,{localCache:wD({tabManager:ID()})})}catch{Yg=E1(Kg)}const vu=gS(Kg);new ti;const X5=()=>{const[s,e]=P.useState(null),[t,r]=P.useState(!0);return P.useEffect(()=>{const a=k4(vu,l=>{e(l),r(!1)});return()=>a()},[]),{user:s,loading:t}},es=(s,e,t,r)=>{const[a,l]=P.useState(t),[u,f]=P.useState(!0),p=P.useCallback(()=>r?at(Yg,"users",r.uid,s,e):null,[r,s,e]);return P.useEffect(()=>{const v=p();if(!v){f(!1);return}const T=ei(v,w=>{f(!1),w.exists()?l(w.data().val):l(t)},w=>{console.error("Firestore read error",w),f(!1)});return()=>T()},[p]),[a,async v=>{const T=p();if(T){l(v);try{await ua(T,{val:v},{merge:!0})}catch(w){console.error("Error writing to Firestore",w)}}},u]},J5=[{name:"Seba y Estefania",date:"12-08"},{name:"Bianca",date:"12-18"},{name:"Mica",date:"08-01"},{name:"Arturo",date:"04-01"},{name:"Mica",date:"11-21"},{name:"Angie",date:"11-19"},{name:"Dana",date:"08-28"},{name:"Luciano",date:"07-07"}],bS=["Tienda Lujosa","Clara Tienda","Clara Tierra","Bella Divina"],_S=["Columna CONFIRMADO","Columna POR UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Chat en vivo (filtro Pendiente)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","Facebook/Instagram Comments & Chats","Meeting"],Qg={"Tienda Lujosa":"CALL Pending Orders","Clara Tienda":"CALL Pending Orders","Clara Tierra":"CALL Pending Orders","Bella Divina":"CALL Pending Orders"},W5=s=>{const[e,t]=es("data","tasks",[],s),[r,a]=P.useState(""),[l,u]=P.useState(null),f=P.useRef(e);P.useEffect(()=>{f.current=e},[e]);const[,p]=P.useState(0);P.useEffect(()=>{const S=setInterval(()=>{f.current&&f.current.some(A=>A.running)&&p(A=>A+1)},1e3);return()=>clearInterval(S)},[]);const y=P.useCallback(()=>{const S=Date.now();return e.map(A=>A.running?{...A,elapsedTime:A.elapsedTime+(S-A.lastTime)}:A)},[e]),v=P.useCallback(S=>{const A=[],N=new Set(e.map(D=>D.name.toLowerCase()));let O=0;return S.forEach((D,j)=>{const{shopInput:R,taskName:me}=D,de=`${me} [${R}]`;if(N.has(de.toLowerCase())){O++;return}const F=!_S.includes(me)&&!Object.values(Qg).includes(me),oe={id:Date.now()+j+Math.random(),name:de,rawTaskName:me,shop:R,quantity:null,elapsedTime:0,running:!1,lastTime:null,isCustom:F};A.push(oe),N.add(de.toLowerCase())}),A.length>0?(t([...e,...A]),a(""),!0):(O>0&&a("Esas tareas ya existen en la lista."),!1)},[e,t]),T=P.useCallback(S=>v([S]),[v]),w=P.useCallback(S=>t(e.filter(A=>A.id!==S)),[e,t]),C=P.useCallback(()=>{t([]),a("")},[t]),L=P.useCallback(S=>{const A=Date.now(),N=e.map(O=>O.running&&O.id!==S?{...O,running:!1,elapsedTime:O.elapsedTime+(A-O.lastTime),lastTime:null}:O.id===S?O.running?{...O,running:!1,elapsedTime:O.elapsedTime+(A-O.lastTime),lastTime:null}:{...O,running:!0,lastTime:A}:O);t(N)},[e,t]),X=P.useCallback(()=>{let S=!1,A=null;const N=Date.now(),O=e.map(D=>D.running?(S=!0,A=D.id,{...D,running:!1,elapsedTime:D.elapsedTime+(N-D.lastTime),lastTime:null}):D);if(!S){u({text:"No hay tareas activas.",taskIdToResume:null});return}t(O),u({text:"Tareas detenidas.",taskIdToResume:A})},[e,t]),q=P.useCallback(()=>{!l||l.taskIdToResume===null||(L(l.taskIdToResume),u(null))},[l,L]),G=P.useCallback(()=>{u(null)},[]),ee=P.useCallback(S=>{t(e.map(A=>A.id===S?{...A,elapsedTime:0,running:!1,lastTime:null,quantity:null}:A))},[e,t]),Y=P.useCallback((S,A)=>{t(e.map(N=>{if(N.id===S){const O=A.rawTaskName!==void 0?A.rawTaskName:N.rawTaskName,D=A.shop!==void 0?A.shop:N.shop,j=O?`${O} [${D}]`:N.name;return{...N,...A,rawTaskName:O,shop:D,name:j}}return N}))},[e,t]),le=P.useCallback(()=>t([...e].sort((S,A)=>S.shop.localeCompare(A.shop))),[e,t]),ae=P.useCallback((S,A)=>{if(!S||S.length===0)return;const N=Math.floor(A/S.length),O=A%S.length;let D=!1;const j=e.map(R=>{if(S.includes(R.id)){let me=N;D||(me+=O,D=!0);const de=Math.max(0,R.elapsedTime+me);return{...R,elapsedTime:de}}return R});t(j)},[e,t]),he=P.useCallback((S,A,N)=>{if(typeof S=="number"){const de=S;if(e.length===0)return;const F=Math.floor(de/e.length),oe=de%e.length;let be=!1;const Ve=e.map((Pe,M)=>{let ne=F;be||(ne+=oe,be=!0);const ue=Math.max(0,Pe.elapsedTime+ne);return{...Pe,elapsedTime:ue}});t(Ve);return}let O=0;const D=S.toString().trim();if(D.includes(":")){const de=D.split(":"),F=parseInt(de[0]||"0",10),oe=parseInt(de[1]||"0",10);O=F*3600*1e3+oe*60*1e3}else{const de=parseFloat(D);isNaN(de)||(O=de*60*1e3)}const j=e.reduce((de,F)=>de+F.elapsedTime,0),R=O-j;if(Math.abs(R)<1e3)return;let me=[...e];if(A==="all"){if(me.length===0)return;const de=me.length,F=Math.floor(R/de),oe=R%de;me=me.map((be,Ve)=>{let Pe=F+(Ve===0?oe:0),M=Math.max(0,be.elapsedTime+Pe);return{...be,elapsedTime:M}})}else A==="single"&&N&&(me=me.map(de=>{if(de.id===N){let F=Math.max(0,de.elapsedTime+R);return{...de,elapsedTime:F}}return de}));t(me)},[e,t]);return{tasks:y(),errorMessage:r,setErrorMessage:a,addTask:T,addMultipleTasks:v,deleteTask:w,deleteAllTasks:C,toggleTimer:L,updateTaskDetails:Y,sortTasksByShop:le,resetTaskTimer:ee,stopAllTimers:X,statusMessage:l,resumeStoppedTimers:q,clearStatusMessage:G,syncTasksTime:he,distributeTasksTime:ae}},jn={seasonal_valentines:{id:"seasonal_valentines",name:"valentines",label:" San Valentn",hidden:!0,type:"theme",bodyBg:"bg-pink-950",rawBg:"radial-gradient(circle at 50% 10%, #be185d 0%, #831843 40%, #000000 100%)",cardBg:"bg-pink-900/60 backdrop-blur-md shadow-[0_0_40px_rgba(236,72,153,0.3)] border border-pink-500/30",primaryText:"text-pink-100",secondaryText:"text-pink-200",accentText:"text-white font-bold drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]",inputBorder:"border-pink-500 focus:border-pink-300 bg-pink-900/50",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-400 hover:to-rose-400 text-white shadow-lg shadow-pink-900/50",buttonAdd:"bg-rose-600 hover:bg-rose-700 text-white shadow-md",modalBg:"bg-pink-950 border-pink-500",customCss:`cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%23ec4899" stroke="white" stroke-width="1.5" stroke-linejoin="round"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg>') 0 0, auto !important;`,activeEffects:["valentine_hearts"]},seasonal_halloween:{id:"seasonal_halloween",name:"halloween",label:" Halloween",hidden:!0,type:"theme",bodyBg:"bg-gray-950",rawBg:"linear-gradient(to bottom, #1a0b00 0%, #000000 100%)",cardBg:"bg-[#0a0a0a] shadow-2xl border border-orange-600/50",primaryText:"text-orange-500",secondaryText:"text-gray-400",accentText:"text-yellow-400 font-bold tracking-widest",inputBorder:"border-gray-700 focus:border-orange-500 bg-gray-900",shopSelectBorder:"border-orange-500",buttonAction:"bg-purple-700 hover:bg-purple-800 text-white border border-orange-500 shadow-[0_0_15px_rgba(255,165,0,0.4)]",buttonAdd:"bg-orange-600 hover:bg-orange-700 text-white",modalBg:"bg-gray-900 border-orange-600",activeEffects:["ghost","spiderweb"]},seasonal_christmas:{id:"seasonal_christmas",name:"christmas",label:" Navidad",hidden:!0,type:"theme",bodyBg:"bg-red-950",rawBg:"linear-gradient(to bottom, #022c22 0%, #14532d 100%)",cardBg:"bg-green-900/90 backdrop-blur-sm border border-yellow-400/30",primaryText:"text-white",secondaryText:"text-gray-200",accentText:"text-yellow-300 font-bold",inputBorder:"border-red-400 focus:border-yellow-300 bg-red-900/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-yellow-500 hover:bg-yellow-600 text-green-900 font-bold shadow-lg",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-green-900 border-yellow-400",activeEffects:["snow","lights"]},seasonal_bianca_bday:{id:"seasonal_bianca_bday",name:"biancaBday",label:" Cumple Bianca",hidden:!0,type:"theme",bodyBg:"bg-black",rawBg:"radial-gradient(circle at top right, #4c1d95, #000)",cardBg:"bg-gray-900/90 backdrop-blur-sm shadow-2xl shadow-purple-500/30 border border-purple-500/50",primaryText:"text-purple-400",secondaryText:"text-pink-300",accentText:"text-pink-400 font-bold animate-pulse",inputBorder:"border-gray-700 focus:border-purple-500 bg-gray-800",shopSelectBorder:"border-pink-400",buttonAction:"bg-purple-600 hover:bg-purple-700 text-white shadow-[0_0_15px_rgba(192,132,252,0.5)]",buttonAdd:"bg-red-600 hover:bg-red-700 text-white",modalBg:"bg-gray-900 border-pink-500",activeEffects:["mickey_confetti"]},seasonal_party:{id:"seasonal_party",name:"party",label:" Cumpleaos",hidden:!0,type:"theme",bodyBg:"bg-slate-900",cardBg:"bg-gray-900/80 backdrop-blur-sm border border-fuchsia-500/30",primaryText:"text-fuchsia-400",secondaryText:"text-gray-200",accentText:"text-cyan-400 font-bold",inputBorder:"border-gray-600 focus:border-fuchsia-500 bg-gray-800",shopSelectBorder:"border-cyan-500",buttonAction:"bg-gradient-to-r from-fuchsia-600 to-cyan-600 text-white",buttonAdd:"bg-fuchsia-600 hover:bg-fuchsia-700 text-white",modalBg:"bg-gray-900 border-fuchsia-500",activeEffects:["mickey_confetti"]},default:{id:"default",name:"default",label:" Default Nexus",type:"theme",price:0,bodyBg:"bg-gradient-to-b from-slate-900 via-[#0f172a] to-[#020617]",cardBg:"bg-slate-800/95 backdrop-blur-sm border border-slate-700 shadow-xl",primaryText:"text-slate-100 tracking-wide",secondaryText:"text-slate-400",accentText:"text-blue-400 font-semibold drop-shadow-sm",inputBorder:"border-slate-600 focus:border-blue-500 bg-slate-950/50",shopSelectBorder:"border-blue-500/30",buttonAction:"bg-blue-600 hover:bg-blue-500 text-white shadow-md border border-blue-500/20",buttonAdd:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-md",modalBg:"bg-slate-900 border-slate-700",activeEffects:[]},lofi:{id:"lofi",name:"lofi",label:" Lofi Chill",type:"theme",price:500,bodyBg:"bg-black",cardBg:"bg-[#1a120e]/85 backdrop-blur-xl border border-[#d1c4e9]/30 shadow-2xl",primaryText:"text-[#efebe9]",secondaryText:"text-[#a1887f]",accentText:"text-[#d1c4e9] font-bold",inputBorder:"border-[#5d4037] bg-[#3e2723]/50",shopSelectBorder:"border-[#d1c4e9]/40",buttonAction:"bg-[#3e2723] hover:bg-[#4e342e] text-[#efebe9] border border-[#d1c4e9]/30",buttonAdd:"bg-[#d97706] text-white",modalBg:"bg-[#1a120e] border-[#d1c4e9]/40",activeEffects:["lofi_notes","cozy_lights","rain"]},neon:{id:"neon",name:"neon",label:" Neon Metropolis",type:"theme",price:650,bodyBg:"bg-black",rawBg:null,cardBg:"bg-black/80 backdrop-blur-xl border-2 border-cyan-500/50 shadow-[0_0_50px_rgba(6,182,212,0.4)]",primaryText:"text-cyan-400 font-mono tracking-widest uppercase",secondaryText:"text-fuchsia-400",accentText:"text-yellow-300 font-bold",inputBorder:"border-cyan-600 bg-slate-900/90",shopSelectBorder:"border-cyan-500",buttonAction:"bg-cyan-700 hover:bg-cyan-600 text-white border border-cyan-400",buttonAdd:"bg-fuchsia-700 hover:bg-fuchsia-600 text-white",modalBg:"bg-slate-900 border-2 border-cyan-500",activeEffects:["neon_grid","rain"]},neko:{id:"neko",name:"neko",label:" Neko Cafe",type:"theme",price:600,bodyBg:"bg-pink-50",rawBg:null,cardBg:"bg-white/60 backdrop-blur-xl border-4 border-pink-300 shadow-xl rounded-[2rem]",primaryText:"text-pink-600 font-sans font-bold",secondaryText:"text-orange-400",accentText:"text-pink-500 font-bold",inputBorder:"border-pink-300 bg-white/80 rounded-xl",shopSelectBorder:"border-pink-400",buttonAction:"bg-gradient-to-r from-pink-400 to-orange-300 text-white rounded-full shadow-lg",buttonAdd:"bg-pink-500 text-white rounded-full",modalBg:"bg-pink-50 border-pink-300",customCss:`body { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23f472b6" stroke="white" stroke-width="2"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto !important; }`,activeEffects:["neko_pattern","valentine_hearts"]},winter:{id:"winter",name:"winter",label:" Winter",type:"theme",price:200,bodyBg:"bg-black",rawBg:"linear-gradient(to bottom, #020617 0%, #0f172a 60%, #1e3a8a 100%)",cardBg:"bg-slate-900/50 backdrop-blur-lg border border-cyan-200/20 shadow-[0_0_30px_rgba(165,243,252,0.15)]",primaryText:"text-cyan-50",secondaryText:"text-blue-200",accentText:"text-cyan-300 drop-shadow-[0_0_10px_rgba(103,232,249,0.8)]",inputBorder:"border-blue-400/30",shopSelectBorder:"border-cyan-400/50",buttonAction:"bg-cyan-900/80 hover:bg-cyan-800 text-white border border-cyan-500/40",buttonAdd:"bg-blue-700 hover:bg-blue-600 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)]",modalBg:"bg-slate-900 border-cyan-500",activeEffects:["snow_effect"]},crimson:{id:"crimson",name:"crimson",label:" Crimson",type:"theme",price:250,bodyBg:"bg-black",rawBg:"radial-gradient(circle, transparent 0%, #000000 80%), linear-gradient(to bottom, #450a0a 0%, #000000 100%)",cardBg:"bg-red-950/30 backdrop-blur-md border border-red-800/60 shadow-[0_0_40px_rgba(185,28,28,0.3)]",primaryText:"text-red-100 font-serif tracking-wide",secondaryText:"text-red-400",accentText:"text-red-600 font-bold drop-shadow-[0_0_10px_rgba(220,38,38,0.8)]",inputBorder:"border-red-900/60",shopSelectBorder:"border-red-500/40",buttonAction:"bg-red-950 hover:bg-red-900 text-white border border-red-800",buttonAdd:"bg-red-800 hover:bg-red-700 text-white shadow-lg",modalBg:"bg-black border-red-900",activeEffects:["mystic_fog"]},royal:{id:"royal",name:"royal",label:" Royal",type:"theme",price:500,bodyBg:"bg-black",rawBg:"radial-gradient(ellipse at center, #713f12 0%, #312e81 40%, #020617 100%)",cardBg:"bg-indigo-950/60 backdrop-blur-xl border-2 border-yellow-500/70 shadow-[0_0_50px_rgba(234,179,8,0.4)]",primaryText:"text-indigo-50 font-serif",secondaryText:"text-yellow-200/60",accentText:"text-yellow-400 font-bold uppercase tracking-widest",inputBorder:"border-yellow-600/50",shopSelectBorder:"border-yellow-400",buttonAction:"bg-indigo-900 hover:bg-indigo-800 text-yellow-100 border border-yellow-600",buttonAdd:"bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-white border border-yellow-300 shadow-[0_0_20px_rgba(234,179,8,0.5)]",modalBg:"bg-indigo-950 border-yellow-500",activeEffects:["golden_dust"]},forest:{id:"forest",name:"forest",label:" Forest",type:"theme",price:150,bodyBg:"bg-black",rawBg:"linear-gradient(180deg, #052e16 0%, #020617 100%)",cardBg:"bg-[#064e3b]/40 backdrop-blur-sm border border-green-700/50 shadow-2xl",primaryText:"text-emerald-100",secondaryText:"text-emerald-500",accentText:"text-green-400 drop-shadow-[0_0_10px_rgba(74,222,128,0.5)]",inputBorder:"border-green-800",shopSelectBorder:"border-green-500/40",buttonAction:"bg-green-900 hover:bg-green-800 text-white border border-green-700",buttonAdd:"bg-emerald-700 hover:bg-emerald-600 text-white shadow-lg",modalBg:"bg-gray-900 border-green-800",activeEffects:["mystic_fog","forest_flora"]},beach:{name:"Lanterns: Fuego",emoji:"",price:1200,category:"theme",description:"Atardecer carmes. Pasin y calidez.",rawBg:"linear-gradient(180deg, #240b0b 0%, #751010 40%, #d94f04 70%, #ffca28 100%)",cardBg:"bg-[#3b0a0a]/60 backdrop-blur-md border border-orange-500/30 shadow-[0_0_40px_rgba(255,69,0,0.3)]",primaryText:"text-orange-50 font-bold",secondaryText:"text-orange-200",accentText:"text-yellow-400",itemBg:"bg-red-950/40 hover:bg-red-900/60 border-l-2 border-orange-500",buttonAction:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white",borderClass:"border-l-4 border-orange-500",activeEffects:["lanterns"],customCss:`
            @keyframes warm-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: warm-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #ffca28; }
        `},beach_night:{name:"Lanterns: Mstico",emoji:"",price:1200,category:"theme",description:"Noche profunda y magia arcana.",rawBg:"linear-gradient(180deg, #020024 0%, #090979 40%, #2a004e 100%)",cardBg:"bg-[#1a0b2e]/60 backdrop-blur-md border border-purple-500/30 shadow-[0_0_40px_rgba(147,51,234,0.3)]",primaryText:"text-purple-100 font-bold",secondaryText:"text-indigo-200",accentText:"text-pink-400",itemBg:"bg-indigo-950/40 hover:bg-indigo-900/60 border-l-2 border-purple-500",buttonAction:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",borderClass:"border-l-4 border-purple-500",activeEffects:["lanterns"],customCss:`
            @keyframes night-breeze { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
            body { background-size: 200% 200% !important; animation: night-breeze 25s ease-in-out infinite; }
            ::-webkit-scrollbar-thumb { background: #d8b4fe; }
            
            /* TRUCO: Cambiamos el color de las linternas rojas a rosadas/violetas con un filtro */
            .lantern-item { filter: hue-rotate(280deg) drop-shadow(0 0 10px #d8b4fe) !important; }
        `},beach_spirit:{name:"Lanterns: Zen",emoji:"",price:1200,category:"theme",description:"Bosque sagrado. Luces fatuas y serenidad.",rawBg:"linear-gradient(180deg, #011810 0%, #064e3b 40%, #115e59 70%, #0f393b 100%)",cardBg:"bg-[#062c1b]/70 backdrop-blur-md border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.2)]",primaryText:"text-emerald-50 font-medium tracking-widest",secondaryText:"text-emerald-200/80",accentText:"text-teal-300 drop-shadow-[0_0_8px_rgba(45,212,191,0.8)]",itemBg:"bg-emerald-950/50 hover:bg-emerald-900/70 border-l-2 border-emerald-400 transition-all",buttonAction:"bg-gradient-to-r from-teal-700 to-emerald-600 hover:from-teal-600 hover:to-emerald-500 text-white shadow-lg shadow-emerald-900/40",borderClass:"border-l-4 border-emerald-500",activeEffects:["lanterns","forest_flora"],customCss:`
            /* Animacin de respiracin lenta para el fondo */
            @keyframes forest-breath { 
                0% { background-position: 0% 50%; } 
                50% { background-position: 100% 50%; } 
                100% { background-position: 0% 50%; } 
            }
            body { 
                background-size: 200% 200% !important; 
                animation: forest-breath 30s ease-in-out infinite; 
            }
            ::-webkit-scrollbar-thumb { background: #34d399; }

            /* TRUCO: Linternas color "Luz Fatu" (Verde espectral) + Desenfoque leve */
            .lantern-item { 
                filter: hue-rotate(85deg) brightness(1.2) drop-shadow(0 0 15px #34d399) !important; 
                opacity: 0.8; 
            }
        `},galaxy:{id:"galaxy",name:"galaxy",label:" Galaxy",type:"theme",price:300,bodyBg:"bg-black",rawBg:"radial-gradient(circle at 20% 10%, #4c1d95 0%, #000000 40%), radial-gradient(circle at 80% 90%, #1e3a8a 0%, #000000 40%), linear-gradient(to bottom, #020617, #000000)",cardBg:"bg-[#0f172a]/70 backdrop-blur-xl border border-purple-500/30 shadow-[0_0_50px_rgba(124,58,237,0.2)]",primaryText:"text-purple-50 tracking-wide",secondaryText:"text-blue-200/70",accentText:"text-cyan-400 font-bold drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]",inputBorder:"border-purple-800/60 focus:border-cyan-400",shopSelectBorder:"border-cyan-500/50",buttonAction:"bg-indigo-900/80 hover:bg-indigo-800 text-cyan-50 border border-indigo-500",buttonAdd:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-[0_0_20px_rgba(147,51,234,0.4)]",modalBg:"bg-[#020617] border-purple-500/40",activeEffects:["mystic_fog","shooting_stars"]},border_default:{id:"border_default",type:"border",label:"Sin Borde",borderClass:""},border_blue:{id:"border_blue",type:"border",label:" Azul Elctrico",price:200,customCss:`
            .app-card { 
                border: 4px solid #3b82f6 !important; 
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.6) !important;
            }
        `},border_red:{id:"border_red",type:"border",label:" Rojo Pasin",price:200,customCss:`
            .app-card { 
                border: 4px solid #ef4444 !important; 
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.6) !important;
            }
        `},border_green:{id:"border_green",type:"border",label:" Verde Matrix",price:200,customCss:`
            .app-card { 
                border: 4px solid #22c55e !important; 
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.6) !important;
            }
        `},border_neon:{id:"border_neon",type:"border",label:" Ultra Nen",borderClass:"border-[3px] border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.6)]",customCss:`
            .app-card { animation: border-pulse-neon 2s infinite alternate; }
            @keyframes border-pulse-neon {
                0% { box-shadow: 0 0 10px #06b6d4, inset 0 0 5px #06b6d4; border-color: #06b6d4; }
                100% { box-shadow: 0 0 25px #d946ef, inset 0 0 10px #d946ef; border-color: #d946ef; }
            }
        `},border_rgb:{id:"border_rgb",type:"border",label:" RGB Gamer",borderClass:"border-[5px] border-transparent",customCss:`
            .app-card {
                border-image: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000) 1;
                /* Sin animaciones locas que muevan el DOM */
            }
        `},border_glitch:{id:"border_glitch",type:"border",label:" Cyber Glitch",borderClass:"border-2 border-white",customCss:`
            .app-card { animation: glitch-border 3s infinite; box-shadow: 5px 0 0 #ff00ff, -5px 0 0 #00ffff; }
            @keyframes glitch-border {
                0% { transform: translate(0); }
                20% { transform: translate(-2px, 2px); }
                40% { transform: translate(-2px, -2px); }
                60% { transform: translate(2px, 2px); }
                80% { transform: translate(2px, -2px); }
                100% { transform: translate(0); }
            }
        `},border_electric:{id:"border_electric",type:"border",label:" Electro Shock",borderClass:"border-2 border-yellow-300",customCss:`
            .app-card { animation: shock-border 0.5s infinite alternate; }
            @keyframes shock-border {
                0% { box-shadow: 0 0 5px #facc15, 0 0 10px #3b82f6; border-color: #facc15; }
                100% { box-shadow: 0 0 20px #3b82f6, 0 0 40px #facc15; border-color: #ffffff; }
            }
        `},border_fire:{id:"border_fire",type:"border",label:" Fuego Mstico",borderClass:"border-4 border-orange-500",customCss:`
            .app-card { box-shadow: 0 -5px 20px rgba(239, 68, 68, 0.8), 0 0 10px rgba(249, 115, 22, 0.8) inset; animation: fire-pulse 2s infinite alternate; }
            @keyframes fire-pulse { 0% { border-color: #ef4444; } 100% { border-color: #f97316; } }
        `},border_gold:{id:"border_gold",type:"border",label:" Marco de Oro",price:2500,borderClass:"border-[8px] border-double border-yellow-500 shadow-[inset_0_0_20px_rgba(234,179,8,0.3)]",customCss:`
            .app-card { 
                border-image: linear-gradient(45deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c) 1; 
                border-width: 6px; 
                border-style: solid; 
            }
        `},border_wood:{id:"border_wood",type:"border",label:" Marco Rstico",borderClass:"border-[12px] border-[#5c3a21] shadow-2xl",customCss:`
            .app-card { 
                border-image: url("https://www.transparenttextures.com/patterns/wood-pattern.png") 30 round;
                border-radius: 0 !important; 
                box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 5px 5px 15px rgba(0,0,0,0.5);
            }
        `}},Z5=s=>{if(s<0)return"00:00:00";const e=Math.floor(s/1e3),t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return`${t}:${r}:${a}`},Uu=()=>{const s=new Date,e=s.getTimezoneOffset();return new Date(s.getTime()-e*60*1e3).toISOString().split("T")[0]},dk=s=>{if(!s)return 0;const e=s.match(/Hours worked: (\d+)h (\d+)m/)||s.match(/Tiempo Total: (\d+)h (\d+)m/);if(e){const t=parseInt(e[1],10),r=parseInt(e[2],10);return t+r/60}return 0},eM=()=>{const s=new Date,e=new Date(s);e.setDate(s.getDate()+7);const t=e.getFullYear(),r=new Date(t,0,1),a=(e-r)/864e5,l=Math.ceil((a+r.getDay()+1)/7);return`${t}-W${String(l).padStart(2,"0")}`},Xg=()=>{const s=new Date,e=new Date(s.getFullYear(),0,1),t=Math.ceil(((s-e)/864e5+e.getDay()+1)/7);return`${s.getFullYear()}-W${t}`},tM=(s,e,t,r)=>{const a=P.useMemo(()=>(Xg(),e.filter(p=>!0).reduce((p,y)=>p+(y.hours||0),0)),[e]),l=P.useMemo(()=>{const f=Uu(),[p,y,v]=f.split("-"),T=parseInt(y),w=parseInt(v);if(r&&jn[r])return jn[r];if(T===2&&w>=13&&w<=14)return jn.seasonal_valentines||jn.default;if(T===10&&w===31)return jn.seasonal_halloween||jn.default;if(T===12&&(w===24||w===25))return jn.seasonal_christmas||jn.default;const C=s.find(L=>L.date===`${y}-${v}`);return C?C.name==="Bianca"?jn.seasonal_bianca_bday||jn.seasonal_party:jn.seasonal_party||jn.default:jn.default},[r,s,e]),u=P.useMemo(()=>{if(l.id==="seasonal_valentines")return" Feliz San Valentn! ";if(l.id==="seasonal_halloween")return" Dulce o Truco! ";if(l.id==="seasonal_christmas")return" Feliz Navidad! ";const f=Uu().split("-").slice(1).join("-"),p=s.find(y=>y.date===f);return p?` Feliz Cumpleaos, ${p.name}! `:""},[l,s]);return{strategy:l,message:u,weeklyHoursWorked:a,isUnlocked:!0}},nM=async(s,e,t,r)=>{if(!s)throw new Error("No user");const a=e.reduce((C,L)=>{const X=L.running?Date.now()-L.lastTime:0;return C+L.elapsedTime+X},0),l=e.map(C=>{const L=parseInt(C.quantity)||0,X=C.running?Date.now()-C.lastTime:0,q=C.elapsedTime+X,G=q/36e5,ee=G>0?(L/G).toFixed(2):"0.00";return{id:C.id,name:C.rawTaskName||C.text,category:C.category||"General",count:L,timeMs:q,speed:ee}}),u=r?.team||"default",f=r?.name||s.displayName||s.email,p=new Date().toLocaleString("es-AR"),y={uid:s.uid,userName:f,team:u,date:t,lastUpdated:Date.now(),metrics:{totalTasks:e.reduce((C,L)=>C+(parseInt(L.quantity)||0),0),totalTimeMs:a,globalSpeed:a>0?(e.reduce((C,L)=>C+(parseInt(L.quantity)||0),0)/(a/36e5)).toFixed(2):"0.00"},taskBreakdown:l,timestampStr:p};await ua(at(Oe,"daily_reports",`${s.uid}_${t}`),y);const v=a/(1e3*60*60);return{totalReward:Math.floor(v*10)+15,reportData:y}},rM=(s,e,t)=>{e||(e=new Date().toISOString().split("T")[0]);const[r,a,l]=e.split("-"),u=new Date(Number(r),Number(a)-1,Number(l)),f={weekday:"long",year:"numeric",month:"long",day:"numeric"},p=u.toLocaleDateString("en-US",f),y=C=>{if(!C)return"0h 0m";const L=Math.floor(C/36e5),X=Math.floor(C%36e5/6e4);return`${L}h ${X}m`};let v=0;const T={};s.forEach(C=>{let L=C.elapsedTime||0;C.running&&C.lastTime&&(L+=Date.now()-C.lastTime),v+=L;const X=C.shop||C.category||"General";T[X]||(T[X]=[]),T[X].push({name:C.text||C.name||"Tarea sin nombre",qty:parseInt(C.count||C.quantity)||0,timeStr:y(L)})});let w=`End of Day Report: ${p}
`;return w+=`Hours worked: ${y(v)}

`,w+=`Today I worked on the following tasks:
`,Object.keys(T).sort().forEach(C=>{w+=`--- ${C} ---
`,T[C].forEach(L=>{const X=L.qty>0?` (${L.qty} orders)`:"";w+=`${L.name}${X}: ${L.timeStr}
`})}),w},iM=(s,e,t,r,a)=>{const[l,u]=P.useState(!1);return{handleGenerate:async(p,y,v)=>{u(!0);try{t();const T=`${s.uid}_${p}`,w=at(Oe,"daily_reports",T),L=(await Hf(w)).exists(),{totalReward:X,reportData:q}=await nM(s,e,p,a),G=rM(e,p,y);s&&p&&await yr(w,{report:G,date:p,content:G}).catch(ee=>{console.warn("Actualizacin secundaria:",ee)}),!L&&X>0?(r(X),alert(` Reporte NUEVO guardado.
 Ganaste: ${X} Lofi Coins!`)):alert(` Reporte ACTUALIZADO correctamente.
(No se otorgan monedas por editar reportes existentes)`),v&&v(G,q)}catch(T){console.error("Error generando reporte:",T),alert("Error al generar el reporte. Revisa la consola.")}finally{u(!1)}},isProcessing:l}},sM=({processedData:s,detectedTasks:e,taskGoals:t,selectedTeam:r,isLoading:a,selectedTaskFilter:l,setSelectedTaskFilter:u,viewMode:f,setViewMode:p,filterDate:y,setFilterDate:v,expandedReportId:T,fetchTeamData:w,toggleRow:C,formatTime:L,getPerformanceColor:X})=>g.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[g.jsxs("div",{className:"flex flex-col xl:flex-row items-center justify-between gap-4 bg-slate-900 border border-white/10 p-4 rounded-xl shadow-xl",children:[g.jsxs("div",{className:"flex items-center gap-3 w-full xl:w-auto bg-black/30 p-1.5 rounded-lg border border-white/5",children:[g.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase px-2",children:"Filtrar:"}),g.jsxs("select",{value:l,onChange:q=>u(q.target.value),className:"bg-transparent text-white text-xs font-bold outline-none w-full xl:w-64 cursor-pointer hover:text-indigo-400 transition-colors",children:[g.jsx("option",{value:"ALL",className:"bg-slate-900",children:" TODAS LAS TAREAS"}),e.map(q=>g.jsx("option",{value:q,className:"bg-slate-900",children:q},q))]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full xl:w-auto",children:[g.jsx("div",{className:"flex bg-black/30 rounded-lg p-1 border border-white/5",children:["daily","weekly","monthly"].map(q=>g.jsx("button",{onClick:()=>p(q),className:`px-3 py-1.5 rounded text-[10px] font-bold uppercase transition-all ${f===q?"bg-indigo-600 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:{daily:"Da",weekly:"Semana",monthly:"Mes"}[q]},q))}),g.jsxs("div",{className:"relative group",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx("span",{className:"text-indigo-400 text-xs",children:""})}),g.jsx("input",{type:"date",value:y,onChange:q=>v(q.target.value),className:"bg-black/30 border border-white/10 text-white text-xs font-bold rounded-lg py-2 pl-9 pr-3 outline-none focus:border-indigo-500 transition-all cursor-pointer hover:bg-black/50"})]}),g.jsx("button",{onClick:w,disabled:a,className:"bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all shadow-lg active:scale-95 border border-indigo-400/50",children:a?"...":""})]})]}),g.jsx("div",{className:"bg-slate-900/50 backdrop-blur border border-white/5 rounded-2xl overflow-hidden shadow-2xl",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-black/40 text-slate-400 text-[10px] uppercase tracking-wider border-b border-white/5",children:[g.jsx("th",{className:"p-5 font-bold",children:"Agente"}),g.jsx("th",{className:"p-5 font-bold text-center",children:"Tareas"}),g.jsx("th",{className:"p-5 font-bold text-center text-indigo-400",children:"Velocidad"}),g.jsx("th",{className:"p-5 font-bold text-center",children:"Tiempo"}),g.jsx("th",{className:"p-5 font-bold text-center",children:"Estado"}),g.jsx("th",{className:"p-5 text-right",children:"Accin"})]})}),g.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:s.length>0?s.map(q=>{let G=q.metrics.totalTasks,ee=q.metrics.globalSpeed,Y=q.metrics.totalTimeMs,le="text-slate-300";if(l!=="ALL"){const ae=q.taskBreakdown.find(he=>he.name===l);if(ae){G=ae.count,ee=ae.speed,Y=ae.timeMs;let he=t[l];he===void 0&&(he=-1),le=X(ee,he)}else G=0,ee="0.00",Y=0,le="text-slate-600"}else le="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-bold";return g.jsxs(tI.Fragment,{children:[g.jsxs("tr",{className:"hover:bg-white/[0.03] transition-colors group cursor-pointer",onClick:()=>C(q.id),children:[g.jsxs("td",{className:"p-5 font-medium text-slate-200 flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-800 border border-white/5 flex items-center justify-center text-xs text-indigo-400 font-bold",children:q.userName?.charAt(0)||"?"}),g.jsxs("div",{children:[g.jsx("div",{children:q.userName}),r==="ALL_TEAMS"&&g.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:q.team})]})]}),g.jsx("td",{className:"p-5 text-center font-mono text-slate-300",children:G}),g.jsxs("td",{className:"p-5 text-center",children:[g.jsx("span",{className:`text-lg ${le}`,children:ee}),g.jsx("span",{className:"text-[10px] text-slate-600 ml-1",children:"/h"})]}),g.jsx("td",{className:"p-5 text-center text-slate-500 font-mono",children:L(Y)}),g.jsx("td",{className:"p-5 text-center",children:g.jsx("span",{className:"bg-green-900/30 text-green-400 text-[10px] px-2 py-1 rounded border border-green-500/20",children:"ACTIVO"})}),g.jsx("td",{className:"p-5 text-right",children:g.jsx("button",{className:"text-[10px] bg-white/5 hover:bg-white/10 text-slate-400 px-3 py-1.5 rounded transition-all",children:T===q.id?"Cerrar ":"Ver "})})]}),T===q.id&&g.jsx("tr",{className:"bg-black/30",children:g.jsx("td",{colSpan:6,className:"p-4",children:g.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 border border-white/5 shadow-inner",children:[g.jsx("h4",{className:"text-xs font-bold text-slate-500 mb-3 uppercase flex items-center gap-2",children:" Desglose Detallado"}),q.taskBreakdown?.length>0?g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"text-slate-600 border-b border-white/5 text-left",children:[g.jsx("th",{className:"pb-2 pl-2",children:"Tarea"}),g.jsx("th",{className:"pb-2 text-center",children:"Cant."}),g.jsx("th",{className:"pb-2 text-center",children:"Tiempo"}),g.jsx("th",{className:"pb-2 text-right pr-4",children:"Rendimiento"})]})}),g.jsx("tbody",{className:"divide-y divide-white/5",children:q.taskBreakdown.map((ae,he)=>{let S=t[ae.name];S===void 0&&(S=-1);const A=X(ae.speed,S),N=S===-1;return g.jsxs("tr",{className:`text-slate-300 hover:bg-white/5 transition-colors ${l===ae.name?"bg-indigo-900/20":""}`,children:[g.jsx("td",{className:"py-2 pl-2 font-medium",children:ae.name}),g.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:ae.count}),g.jsx("td",{className:"py-2 text-center font-mono text-slate-500",children:L(ae.timeMs)}),g.jsxs("td",{className:"py-2 text-right pr-4",children:[g.jsxs("span",{className:A,children:[ae.speed," /h"]}),g.jsx("span",{className:"text-[9px] text-slate-600 ml-1",children:N?"":`(Meta: ${S})`})]})]},he)})})]}):g.jsx("p",{className:"text-xs text-slate-500 italic",children:"Sin datos."})]})})})]},q.id)}):g.jsx("tr",{children:g.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-500 text-sm italic border-t border-white/5",children:a?"Cargando datos...":"No hay actividad registrada en este periodo."})})})]})})})]}),aM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],dg=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],oM={Lunes:"Monday",Martes:"Tuesday",Mircoles:"Wednesday",Jueves:"Thursday",Viernes:"Friday",Sbado:"Saturday",Domingo:"Sunday"},lM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],cM=({squad:s,weeklyPlan:e,setWeeklyPlan:t,agentSchedules:r,visibleShops:a,nextWeekId:l,targetWeek:u,setTargetWeek:f})=>{const[p,y]=P.useState("kanban"),[v,T]=P.useState("Lunes"),[w,C]=P.useState(null),L=(G,ee)=>{C(ee),G.dataTransfer.setData("agent",JSON.stringify(ee))},X=async(G,ee,Y)=>{G.preventDefault();try{const le=JSON.parse(G.dataTransfer.getData("agent")),ae={...e};ae[v]||(ae[v]={}),ae[v][ee]||(ae[v][ee]={}),ae[v][ee][Y]||(ae[v][ee][Y]=[]);const he=ae[v][ee][Y];le.id==="ALL"?s.forEach(S=>{he.find(A=>A.id===S.id)||he.push({id:S.id,name:S.name||S.email})}):he.find(S=>S.id===le.id)||he.push({id:le.id,name:le.name||le.email}),t(ae),await ua(at(Oe,"weekly_plans",l),{weekId:l,plan:ae,updatedAt:Date.now()},{merge:!0})}catch(le){console.error(le),alert("Error de permisos.")}},q=async(G,ee,Y)=>{const le={...e};le[v][G][ee]=le[v][G][ee].filter(ae=>ae.id!==Y),t(le);try{await ua(at(Oe,"weekly_plans",l),{plan:le},{merge:!0})}catch(ae){console.error(ae)}};return g.jsxs("div",{className:"flex flex-col h-[85vh] animate-fadeIn gap-4",children:[g.jsx("div",{className:"flex flex-wrap gap-4 justify-between items-center bg-slate-900/50 p-2 rounded-xl border border-white/5",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[g.jsxs("button",{onClick:()=>y("kanban"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${p==="kanban"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[g.jsx("span",{children:""})," Asignar"]}),g.jsxs("button",{onClick:()=>y("table"),className:`px-3 py-1.5 rounded-md text-xs font-bold uppercase transition-all flex items-center gap-2 ${p==="table"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:[g.jsx("span",{children:""})," Planilla"]})]}),g.jsx("div",{className:"w-px h-6 bg-white/10"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 hidden sm:block",children:"Editando:"}),g.jsxs("div",{className:"flex bg-black/30 p-1 rounded-lg border border-white/5",children:[g.jsx("button",{onClick:()=>f("current"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="current"?"bg-teal-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Semana Actual"}),g.jsx("button",{onClick:()=>f("next"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${u==="next"?"bg-purple-600 text-white shadow":"text-slate-400 hover:text-white"}`,children:"Prxima Semana"})]}),g.jsxs("span",{className:"text-[9px] font-mono text-slate-600 border border-white/5 px-2 py-1 rounded bg-black/20",title:"ID de la semana en base de datos",children:["ID: ",l]})]})]})}),p==="kanban"&&g.jsxs("div",{className:"flex gap-6 flex-1 overflow-hidden",children:[g.jsxs("div",{className:"w-64 min-w-[250px] bg-slate-900 border border-white/10 rounded-xl p-4 overflow-y-auto flex flex-col gap-2",children:[g.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Mi Squad"}),g.jsxs("div",{draggable:!0,onDragStart:G=>L(G,{id:"ALL",name:"TODOS"}),className:"bg-yellow-600 hover:bg-yellow-500 text-white p-3 rounded-lg cursor-grab active:cursor-grabbing font-bold text-center border border-yellow-400 shadow-lg mb-4 flex items-center justify-center gap-2",children:[g.jsx("span",{children:""})," ASIGNAR A TODOS"]}),s.map(G=>{const ee=oM[v],Y=r[G.id],le=v,ae=Y?Y[ee]||Y[le]:null;let he=g.jsx("span",{className:"text-[9px] text-slate-600",children:"?"});return ae&&(ae.off?he=g.jsx("span",{className:"text-[9px] bg-red-900/40 text-red-400 px-1 rounded font-bold border border-red-500/20",children:"OFF"}):he=g.jsxs("span",{className:"text-[9px] bg-green-900/40 text-green-400 px-1 rounded font-bold border border-green-500/20",children:[ae.hours,"h"]})),g.jsxs("div",{draggable:!0,onDragStart:S=>L(S,{id:G.id,name:G.name||G.email}),className:"bg-slate-800 hover:bg-slate-700 p-3 rounded-lg cursor-grab active:cursor-grabbing border border-white/5 flex items-center gap-3 transition-colors",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center font-bold text-xs text-white",children:(G.name||G.email).substring(0,2).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm truncate font-medium text-slate-300",children:G.name||G.email}),g.jsx("div",{className:"flex justify-end",children:he})]})]},G.id)})]}),g.jsxs("div",{className:"flex-1 flex flex-col bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[g.jsx("div",{className:"flex bg-black/40 border-b border-white/10",children:dg.map(G=>g.jsx("button",{onClick:()=>T(G),className:`flex-1 py-3 text-xs font-bold uppercase transition-colors ${v===G?"bg-indigo-600 text-white":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:G},G))}),g.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#0b0e14]",children:g.jsxs("table",{className:"w-full border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left p-3 text-slate-500 text-xs uppercase w-48 min-w-[200px] border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:"Tarea"}),a.map(G=>g.jsx("th",{className:"p-3 text-indigo-400 text-xs uppercase border-l border-white/5 min-w-[180px] text-center border-b border-white/10 sticky top-0 bg-[#0b0e14] z-10",children:G},G))]})}),g.jsx("tbody",{children:aM.map(G=>g.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[g.jsx("td",{className:"p-3 text-xs font-medium text-slate-300",children:G}),a.map(ee=>g.jsx("td",{onDragOver:Y=>Y.preventDefault(),onDrop:Y=>X(Y,G,ee),className:"p-2 border-l border-white/5 min-h-[50px] relative hover:bg-white/5 transition-colors",children:g.jsx("div",{className:"min-h-[40px] rounded p-1 flex flex-wrap gap-1",children:e[v]?.[G]?.[ee]?.map(Y=>g.jsxs("div",{className:"bg-indigo-600/30 text-indigo-200 border border-indigo-500/40 text-[10px] px-2 py-1 rounded flex items-center gap-1 font-bold shadow-sm",children:[Y.name," ",g.jsx("button",{onClick:()=>q(G,ee,Y.id),className:"ml-1 text-indigo-400 hover:text-red-400 font-bold",children:""})]},Y.id))})},ee))]},G))})]})})]})]}),p==="table"&&g.jsxs("div",{className:"flex-1 bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[g.jsxs("div",{className:"p-4 bg-black/20 border-b border-white/10 flex justify-between items-center",children:[g.jsx("h3",{className:"font-bold text-green-400 flex items-center gap-2",children:" Disponibilidad Global"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 bg-green-900/50 border border-green-500/30 rounded"}),g.jsx("span",{className:"text-xs text-slate-400",children:"Disponible"}),g.jsx("div",{className:"w-3 h-3 bg-red-900/50 border border-red-500/30 rounded ml-2"}),g.jsx("span",{className:"text-xs text-slate-400",children:"Franco (OFF)"})]})]}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsxs("table",{className:"w-full text-left border-collapse",children:[g.jsx("thead",{className:"bg-[#0b0e14] sticky top-0 z-10",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 w-64 bg-[#0b0e14] sticky left-0 z-20 border-r border-white/5",children:"Agente"}),dg.map(G=>g.jsx("th",{className:"p-4 text-xs font-bold text-slate-400 uppercase border-b border-white/10 text-center min-w-[100px]",children:G},G))]})}),g.jsxs("tbody",{className:"divide-y divide-white/5 text-sm",children:[s.map(G=>{const ee=r[G.id];return g.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[g.jsxs("td",{className:"p-4 bg-slate-900 sticky left-0 z-10 border-r border-white/5",children:[g.jsx("div",{className:"font-bold text-white",children:G.name||G.email}),g.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:G.team})]}),lM.map((Y,le)=>{const ae=dg[le],he=ee?.[Y]||ee?.[ae];let S=g.jsx("span",{className:"text-slate-700",children:"-"}),A="";return he&&(he.off?(S=g.jsx("span",{className:"font-bold text-[10px]",children:"OFF"}),A="bg-red-900/20 text-red-400 border border-red-500/10"):he.hours&&(S=g.jsxs("span",{className:"font-mono font-bold",children:[he.hours,"hs"]}),A="bg-green-900/20 text-green-400 border border-green-500/10")),g.jsx("td",{className:"p-1 text-center border-l border-white/5",children:g.jsx("div",{className:`h-8 flex items-center justify-center rounded ${A} mx-1`,children:S})},Y)})]},G.id)}),s.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:8,className:"p-10 text-center text-slate-500 italic",children:"No hay agentes en este equipo."})})]})]})})]})]})},uM=({newsList:s,newNewsText:e,setNewNewsText:t,newNewsType:r,setNewNewsType:a,addNews:l,deleteNews:u})=>g.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[g.jsx("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 mb-6",children:g.jsxs("div",{className:"flex gap-4",children:[g.jsx("input",{value:e,onChange:f=>t(f.target.value),placeholder:"Mensaje...",className:"flex-1 bg-black/30 border border-white/10 rounded-lg p-3 text-white outline-none"}),g.jsxs("select",{value:r,onChange:f=>a(f.target.value),className:"bg-black/30 border border-white/10 rounded-lg p-3 text-white",children:[g.jsx("option",{value:"info",children:"Info"}),g.jsx("option",{value:"critical",children:"Crtico"}),g.jsx("option",{value:"party",children:"Fiesta"})]}),g.jsx("button",{onClick:l,className:"bg-indigo-600 px-6 rounded-lg font-bold hover:bg-indigo-500",children:"Publicar"})]})}),g.jsx("div",{className:"space-y-3",children:s.map(f=>g.jsxs("div",{className:"flex justify-between items-center bg-slate-900/50 p-4 rounded-xl border border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase ${f.type==="critical"?"bg-red-900 text-red-300":f.type==="party"?"bg-yellow-900 text-yellow-300":"bg-blue-900 text-blue-300"}`,children:f.type}),g.jsx("span",{className:"text-sm",children:f.text})]}),g.jsx("button",{onClick:()=>u(f.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Borrar"})]},f.id))})]}),dM=({quizzes:s,editingQuiz:e,setEditingQuiz:t,saveQuiz:r,deleteQuiz:a,toggleQuiz:l})=>g.jsx("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:e?g.jsx(hM,{quiz:e,onSave:r,onCancel:()=>t(null)}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>t({title:"",reward:100,questions:[],version:1}),className:"bg-green-600 px-4 py-2 rounded-lg font-bold text-sm mb-6",children:"+ Nuevo Mdulo"}),g.jsx("div",{className:"grid gap-4",children:s.map(u=>g.jsxs("div",{className:"bg-slate-900 p-5 rounded-xl border border-white/10 flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg",children:u.title}),g.jsxs("div",{className:"text-xs text-slate-500",children:["Reward: ",u.reward," | v",u.version]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>t(u),className:"text-indigo-400 text-xs bg-indigo-900/30 px-3 py-1 rounded",children:"Edit"}),g.jsx("button",{onClick:()=>l(u),className:`text-xs px-3 py-1 rounded ${u.active?"bg-green-900/30 text-green-400":"bg-slate-700 text-slate-400"}`,children:u.active?"Activo":"Inactivo"}),g.jsx("button",{onClick:()=>a(u.id),className:"text-red-400 text-xs bg-red-900/30 px-3 py-1 rounded",children:"Del"})]})]},u.id))})]})}),hM=({quiz:s,onSave:e,onCancel:t})=>{const[r,a]=P.useState(s),[l,u]=P.useState(!1),f=()=>a({...r,questions:[...r.questions||[],{text:"",options:["",""],correct:0}]}),p=(v,T,w)=>{const C=[...r.questions];C[v]={...C[v],[T]:w},a({...r,questions:C})},y=(v,T,w)=>{const C=[...r.questions];C[v].options[T]=w,a({...r,questions:C})};return g.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-white/10 space-y-4 animate-fadeIn",children:[g.jsx("h2",{className:"font-bold text-xl border-b border-white/10 pb-2",children:"Editor de Mdulo"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("input",{value:r.title,onChange:v=>a({...r,title:v.target.value}),placeholder:"Ttulo",className:"bg-black/30 border border-white/10 p-2 rounded text-white"}),g.jsx("input",{type:"number",value:r.reward,onChange:v=>a({...r,reward:parseInt(v.target.value)}),placeholder:"Reward",className:"bg-black/30 border border-white/10 p-2 rounded text-white"})]}),s.id&&g.jsxs("label",{className:"flex items-center gap-2 text-yellow-200 text-xs",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:v=>u(v.target.checked)})," Actualizacin Mayor (Reinicia progress)"]}),g.jsxs("div",{className:"space-y-4",children:[r.questions?.map((v,T)=>g.jsxs("div",{className:"bg-black/20 p-4 rounded border border-white/5",children:[g.jsx("input",{value:v.text,onChange:w=>p(T,"text",w.target.value),placeholder:"Pregunta",className:"w-full bg-transparent border-b border-white/10 mb-2 font-bold"}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:v.options.map((w,C)=>g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"radio",checked:v.correct===C,onChange:()=>p(T,"correct",C)}),g.jsx("input",{value:w,onChange:L=>y(T,C,L.target.value),className:"bg-white/5 rounded px-2 text-xs w-full"})]},C))})]},T)),g.jsx("button",{onClick:f,className:"w-full py-2 border border-dashed border-white/20 text-slate-400 text-xs rounded",children:"+ Pregunta"})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>e({...r,isMajorUpdate:l}),className:"flex-1 bg-green-600 py-2 rounded font-bold",children:"Guardar"}),g.jsx("button",{onClick:t,className:"bg-slate-700 px-4 rounded",children:"Cancelar"})]})]})},fM=({activeTab:s,showArchived:e,setShowArchived:t,fetchIdeas:r,filteredIdeas:a,generateMondaySummary:l,handleSaveAnalysis:u,handleIdeaVerdict:f,handleArchiveIdea:p,handleDeleteIdea:y,handleRestoreIdea:v,handleAnalysisChange:T})=>g.jsxs("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:s==="ideas"?" Laboratorio de Ideas":" Tickets de Soporte & Bugs"}),g.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Estado: ",g.jsx("span",{className:"text-indigo-400 font-bold",children:e?"ARCHIVADOS":"ACTIVOS"})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[s==="ideas"&&g.jsx("button",{onClick:l,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-500 transition-colors shadow-lg flex items-center gap-2 border border-indigo-400/50",children:" RESUMEN"}),g.jsx("button",{onClick:()=>t(!e),className:`px-3 py-2 rounded-lg text-[10px] font-bold uppercase transition-all border ${e?"bg-slate-700 text-white border-slate-500":"bg-black/40 text-slate-500 border-slate-700 hover:text-white"}`,children:e?" Ver Activos":" Ver Archivados"}),g.jsx("button",{onClick:r,className:"bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg text-xs text-slate-300 border border-white/10",children:""})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(w=>{const C=w.status==="approved",L=w.status==="rejected",X=w.status==="new",q=w.type==="dev";return g.jsxs("div",{className:`bg-slate-900 border rounded-xl p-5 flex flex-col gap-3 relative group transition-all animate-fadeIn hover:shadow-xl ${q?"border-purple-500/20 shadow-[0_0_10px_rgba(147,51,234,0.05)]":"border-white/10"}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h4",{className:`font-bold text-sm ${q?"text-purple-300 font-mono":"text-white"}`,children:w.userName}),q&&g.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded border bg-purple-900/30 text-purple-300 border-purple-500/30",children:"BUG/DEV"})]}),g.jsx("p",{className:"text-[10px] text-slate-500 font-mono mt-1",children:w.timestampStr})]}),C&&g.jsx("span",{className:"text-[10px] bg-green-900/30 text-green-400 px-2 py-1 rounded border border-green-500/20 font-bold",children:" APROBADA"}),L&&g.jsx("span",{className:"text-[10px] bg-red-900/30 text-red-400 px-2 py-1 rounded border border-red-500/20 font-bold",children:" RECHAZADA"}),X&&g.jsx("span",{className:"text-[10px] bg-yellow-900/30 text-yellow-500 px-2 py-1 rounded border border-yellow-500/20 font-bold",children:" PENDIENTE"})]}),g.jsxs("div",{className:`p-4 rounded-lg border min-h-[80px] ${q?"bg-black/60 border-purple-900/30 font-mono text-xs text-green-400":"bg-black/30 border-white/5 text-sm text-slate-300 italic"}`,children:['"',w.content,'"']}),!q&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-green-500 font-bold",children:"PROS"}),g.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-green-500 outline-none h-16 resize-none",value:w.analysis?.pros||"",onChange:G=>T(w.id,"pros",G.target.value)})]}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute top-2 left-2 text-[10px] text-red-500 font-bold",children:"CONS"}),g.jsx("textarea",{className:"w-full bg-slate-950 border border-white/10 rounded p-2 pt-6 text-xs text-slate-300 focus:border-red-500 outline-none h-16 resize-none",value:w.analysis?.cons||"",onChange:G=>T(w.id,"cons",G.target.value)})]})]}),g.jsxs("div",{className:"flex gap-2 mt-auto pt-4 border-t border-white/5",children:[!q&&g.jsx("button",{onClick:()=>u(w.id,w.analysis),className:"flex-1 bg-white/5 hover:bg-white/10 text-slate-400 text-xs font-bold py-2 rounded transition-colors",children:" Guardar"}),X&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>f(w,"approved"),className:"flex-1 bg-green-600/20 hover:bg-green-600 hover:text-white text-green-400 text-xs font-bold py-2 rounded transition-colors border border-green-600/30",children:" Aprobar"}),g.jsx("button",{onClick:()=>f(w,"rejected"),className:"w-10 flex items-center justify-center bg-red-600/20 hover:bg-red-600 hover:text-white text-red-400 font-bold rounded transition-colors border border-red-600/30",children:""})]}),(C||L)&&!e&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>p(w.id),className:"w-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-400 font-bold rounded transition-colors border border-slate-600",title:"Archivar",children:""}),g.jsx("button",{onClick:()=>y(w.id),className:"w-10 flex items-center justify-center bg-red-900/20 hover:bg-red-900/80 text-red-500 hover:text-white font-bold rounded transition-colors border border-red-900/30",title:"Eliminar",children:""})]}),e&&g.jsx("button",{onClick:()=>v(w.id),className:"w-full flex items-center justify-center bg-blue-900/30 hover:bg-blue-600 text-blue-400 hover:text-white font-bold py-2 rounded transition-colors border border-blue-500/20",children:" Restaurar"})]})]},w.id)})})]}),mM=({usersList:s,editingUserId:e,setEditingUserId:t,editForm:r,setEditForm:a,setPointsToSend:l,handleGivePoints:u,saveUserChanges:f,startEditingUser:p})=>g.jsx("div",{className:"max-w-7xl mx-auto animate-fadeIn",children:g.jsx("div",{className:"bg-slate-900 border border-white/10 rounded-xl overflow-hidden shadow-xl",children:g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{className:"bg-black/30 text-slate-400 text-[10px] uppercase font-bold",children:g.jsxs("tr",{className:"border-b border-white/5",children:[g.jsx("th",{className:"p-4",children:"Usuario"}),g.jsx("th",{className:"p-4",children:"Rol Actual"}),g.jsx("th",{className:"p-4",children:"Equipo"}),g.jsx("th",{className:"p-4 text-right",children:"Gestin"})]})}),g.jsx("tbody",{className:"divide-y divide-white/5 text-sm",children:s.map(y=>g.jsxs("tr",{className:"hover:bg-white/[0.02]",children:[g.jsxs("td",{className:"p-4",children:[g.jsx("div",{className:"font-bold text-white",children:y.name}),g.jsx("div",{className:"text-xs text-slate-500",children:y.email})]}),e===y.id?g.jsxs(g.Fragment,{children:[g.jsx("td",{className:"p-4",children:g.jsxs("select",{value:r.role,onChange:v=>a({...r,role:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"agent",children:"Agente"}),g.jsx("option",{value:"team_leader",children:"TL"}),g.jsx("option",{value:"admin",children:"Admin"}),g.jsx("option",{value:"tester",children:"Tester"})]})}),g.jsx("td",{className:"p-4",children:g.jsxs("select",{value:r.team,onChange:v=>a({...r,team:v.target.value}),className:"bg-slate-950 border border-white/10 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"default",children:"Default"}),g.jsx("option",{value:"team1",children:"Team 1"}),g.jsx("option",{value:"team2",children:"Team 2"})]})}),g.jsxs("td",{className:"p-4 text-right flex items-center justify-end gap-2",children:[g.jsxs("div",{className:"flex items-center bg-black/20 rounded-lg p-1 border border-white/5",children:[g.jsx("input",{type:"number",placeholder:"Bonus",className:"w-16 bg-transparent text-xs text-yellow-400 text-center outline-none",onChange:v=>l(v.target.value)}),g.jsx("button",{onClick:()=>u(y.id),className:"bg-yellow-600 text-black px-2 py-1 rounded text-[10px] font-bold hover:bg-yellow-500",children:" ENVIAR"})]}),g.jsx("button",{onClick:()=>f(y.id),className:"text-green-400 text-xs font-bold hover:underline ml-2",children:"GUARDAR"}),g.jsx("button",{onClick:()=>t(null),className:"text-red-400 text-xs font-bold hover:underline ml-2",children:"CANCELAR"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("td",{className:"p-4",children:g.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded border ${y.role==="admin"?"bg-purple-900/30 text-purple-300 border-purple-500/30":y.role==="team_leader"?"bg-blue-900/30 text-blue-300 border-blue-500/30":"bg-slate-800 text-slate-400 border-slate-700"}`,children:y.role})}),g.jsx("td",{className:"p-4 text-xs text-slate-400",children:y.team}),g.jsx("td",{className:"p-4 text-right",children:g.jsx("button",{onClick:()=>p(y),className:"text-indigo-400 text-xs font-bold hover:text-white transition-colors",children:"EDITAR "})})]})]},y.id))})]})})}),pM=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],gM=({isOpen:s,onClose:e,scheduleRequests:t,pendingIdeas:r,handleApproveRequest:a,handleRejectRequest:l,onNavigate:u})=>{const[f,p]=P.useState("schedule");return s?g.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-fadeIn",children:g.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-2xl shadow-2xl flex flex-col max-h-[85vh]",children:[g.jsxs("div",{className:"p-5 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-slate-900 to-slate-800",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsx("h3",{className:"text-lg font-bold text-white",children:"Centro de Notificaciones"})]}),g.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:""})]}),g.jsxs("div",{className:"flex border-b border-white/5 bg-black/20",children:[g.jsxs("button",{onClick:()=>p("schedule"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${f==="schedule"?"border-yellow-500 text-yellow-400 bg-yellow-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Horarios (",t.length,")"]}),g.jsxs("button",{onClick:()=>p("ideas"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wide transition-all border-b-2 ${f==="ideas"?"border-indigo-500 text-indigo-400 bg-indigo-500/5":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[" Ideas (",r.length,")"]})]}),g.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4 custom-scrollbar bg-[#0b0e14]",children:[f==="schedule"&&g.jsx(g.Fragment,{children:t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[g.jsx("span",{className:"text-2xl mb-2",children:""}),g.jsx("p",{className:"text-sm",children:"Todo al da."})]}):t.map(y=>{const v=y.type==="urgent",T=!!y.currentSchedule;return g.jsxs("div",{className:`bg-white/5 border rounded-xl p-4 flex flex-col gap-3 ${v?"border-orange-500/30":"border-white/5"}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-white flex items-center gap-2",children:[y.userName," ",v&&g.jsx("span",{className:"text-[9px] bg-orange-600 text-white px-1.5 py-0.5 rounded animate-pulse",children:"URGENTE"})]}),g.jsx("p",{className:`text-xs mt-1 font-bold ${v?"text-orange-400":"text-blue-300"}`,children:y.message||"Solicitud de cambio"}),g.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Semana ID: ",y.weekId]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>a(y),className:"bg-green-600 hover:bg-green-500 px-3 py-1.5 rounded text-xs font-bold text-white shadow-lg",children:" APROBAR"}),g.jsx("button",{onClick:()=>l(y.id),className:"bg-red-900/50 hover:bg-red-600 px-3 py-1.5 rounded text-xs font-bold text-red-200 hover:text-white border border-red-500/30",children:" RECHAZAR"})]})]}),g.jsxs("div",{className:"bg-black/20 p-3 rounded-lg space-y-2",children:[T&&GT(y.currentSchedule,"ACTUAL",!0),GT(y.proposedSchedule,T?"NUEVO":"HORARIO")]})]},y.id)})}),f==="ideas"&&g.jsx(g.Fragment,{children:r.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[g.jsx("span",{className:"text-2xl mb-2",children:""}),g.jsx("p",{className:"text-sm",children:"Sin ideas nuevas."})]}):r.map(y=>g.jsxs("div",{className:"bg-indigo-900/10 border border-indigo-500/20 rounded-xl p-4 flex justify-between items-center hover:bg-indigo-900/20 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-10 w-10 bg-indigo-600/20 text-indigo-400 rounded-full flex items-center justify-center text-xl border border-indigo-500/30",children:""}),g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-indigo-200 text-sm",children:[g.jsx("span",{className:"text-white",children:y.userName})," tuvo una nueva idea"]}),g.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:y.timestampStr}),g.jsxs("p",{className:"text-xs text-slate-400 italic mt-1 line-clamp-1",children:['"',y.content,'"']})]})]}),g.jsx("button",{onClick:()=>u("ideas"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded-lg shadow-lg border border-indigo-400/50 flex items-center gap-2 transition-all active:scale-95",children:"VER EN LAB "})]},y.id))})]})]})}):null},GT=(s,e,t=!1)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-16 text-[9px] font-bold text-right uppercase ${t?"text-slate-500":"text-indigo-300"}`,children:e}),g.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1",children:pM.map(r=>{const a=s?.[r];if(!a)return g.jsxs("div",{className:"text-center opacity-20",children:[g.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r);const l=t?"text-slate-500 bg-slate-800/50":"text-red-300 bg-red-900/30 font-bold",u=t?"text-slate-400 bg-slate-800/50":"text-green-300 bg-green-900/30 font-bold";return a.off?g.jsxs("div",{className:`text-center rounded p-1 ${l}`,children:[g.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),g.jsx("div",{className:"text-[9px]",children:"OFF"})]},r):a.hours>0?g.jsxs("div",{className:`text-center rounded p-1 ${u}`,children:[g.jsx("div",{className:"text-[8px] opacity-70",children:r.substring(0,2)}),g.jsxs("div",{className:"text-[9px]",children:[a.hours,"h"]})]},r):g.jsxs("div",{className:"text-center opacity-20",children:[g.jsx("div",{className:"text-[8px]",children:r.substring(0,2)}),"-"]},r)})})]}),pl=[{name:"yellow",bg:"bg-[#fff59d] text-yellow-900",tab:"bg-[#fff59d]",btn:"bg-yellow-400"},{name:"green",bg:"bg-[#c5e1a5] text-green-900",tab:"bg-[#c5e1a5]",btn:"bg-green-400"},{name:"blue",bg:"bg-[#90caf9] text-blue-900",tab:"bg-[#90caf9]",btn:"bg-blue-400"},{name:"pink",bg:"bg-[#f48fb1] text-pink-900",tab:"bg-[#f48fb1]",btn:"bg-pink-400"},{name:"purple",bg:"bg-[#ce93d8] text-purple-900",tab:"bg-[#ce93d8]",btn:"bg-purple-400"},{name:"white",bg:"bg-[#eeeeee] text-slate-800",tab:"bg-[#eeeeee]",btn:"bg-slate-200"}],vS=({user:s})=>{const[e,t]=P.useState(!1),[r,a]=P.useState([]),[l,u]=P.useState(null),[f,p]=P.useState(!1),[y,v]=P.useState(null),[T,w]=P.useState(null),[C,L]=P.useState(""),q=(()=>{try{const ie=localStorage.getItem(`nexus_notes_config_${s?.uid}`);return ie?JSON.parse(ie):null}catch{return null}})(),[G,ee]=P.useState(q?.position||{x:window.innerWidth-80,y:window.innerHeight-200}),[Y,le]=P.useState(q?.size||{width:340,height:450}),[ae,he]=P.useState(!1),[S,A]=P.useState({x:0,y:0}),[N,O]=P.useState({x:0,y:0}),D=P.useRef(null),j=P.useRef(null);P.useEffect(()=>{if(!s)return;const ie=In(Oe,`users/${s.uid}/quick_notes`),ge=Ti(ie,El("createdAt","asc")),Ie=ei(ge,rt=>{const Ge=rt.docs.map(wt=>({id:wt.id,...wt.data()}));a(Ge),Ge.length>0?u(wt=>Ge.find(vn=>vn.id===wt)?wt:Ge[Ge.length-1].id):u(null)});return()=>Ie()},[s]);const R=(ie,ge)=>{if(!s)return;const Ie={position:ie,size:ge};localStorage.setItem(`nexus_notes_config_${s.uid}`,JSON.stringify(Ie))},me=ie=>{ie.button===0&&(he(!0),O({x:ie.clientX,y:ie.clientY}),A({x:ie.clientX-G.x,y:ie.clientY-G.y}))},de=ie=>{if(ae&&(he(!1),Math.sqrt(Math.pow(ie.clientX-N.x,2)+Math.pow(ie.clientY-N.y,2))>5?R(G,Y):t(Ie=>!Ie)),e&&D.current){const ge=D.current.offsetWidth,Ie=D.current.offsetHeight;if(ge!==Y.width||Ie!==Y.height){const rt={width:ge,height:Ie};le(rt),R(G,rt)}}};P.useEffect(()=>{const ie=ge=>{ae&&(ge.preventDefault(),ee({x:ge.clientX-S.x,y:ge.clientY-S.y}))};return(ae||e)&&(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",de)),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",de)}},[ae,S,N,e,G,Y]);const F=async()=>{const ie=await bu(In(Oe,`users/${s.uid}/quick_notes`),{title:"Nueva Nota",text:"",color:"yellow",createdAt:Date.now(),updatedAt:Date.now()});u(ie.id),w(ie.id),L("Nueva Nota"),p(!1)},oe=async(ie,ge,Ie)=>{const rt=at(Oe,`users/${s.uid}/quick_notes`,ie);await yr(rt,{[ge]:Ie,updatedAt:Date.now()})},be=async(ie,ge)=>{ie.stopPropagation(),window.confirm("Borrar nota?")&&await xl(at(Oe,`users/${s.uid}/quick_notes`,ge))},Ve=(ie,ge)=>{ie.stopPropagation(),w(ge.id),L(ge.title||"Nota")},Pe=async ie=>{C.trim()!==""&&await oe(ie,"title",C),w(null)},M=(ie,ge)=>{ie.key==="Enter"&&Pe(ge)},ne=(ie,ge)=>{ie.trim()&&(navigator.clipboard.writeText(ie.trim()),v(ge),setTimeout(()=>v(null),1e3))},ue=r.find(ie=>ie.id===l),ve=ue&&pl.find(ie=>ie.name===ue.color)||pl[0];return s?g.jsxs(g.Fragment,{children:[e&&g.jsxs("div",{ref:D,className:"fixed z-[90] flex flex-col animate-fadeIn shadow-2xl rounded-xl overflow-hidden border border-white/20",style:{left:G.x-Y.width+50,top:G.y-Y.height-10,width:`${Y.width}px`,height:`${Y.height}px`,resize:"both",minWidth:"280px",minHeight:"200px"},onMouseDown:ie=>ie.stopPropagation(),children:[g.jsxs("div",{className:"flex bg-[#2d3748] overflow-x-auto custom-scrollbar-hide cursor-move items-end pt-1 px-1 gap-1 h-9 flex-shrink-0",title:"Arrastrar widget",children:[r.map((ie,ge)=>{const Ie=ie.id===l,rt=ie.id===T,Ge=pl.find(wt=>wt.name===ie.color)||pl[0];return g.jsxs("div",{onClick:()=>!rt&&u(ie.id),onDoubleClick:wt=>Ve(wt,ie),className:`group relative flex items-center justify-between min-w-[100px] max-w-[140px] h-8 px-3 rounded-t-lg text-xs font-bold select-none transition-all ${Ie?`${Ge.tab} text-slate-900`:"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[rt?g.jsx("input",{autoFocus:!0,value:C,onChange:wt=>L(wt.target.value),onBlur:()=>Pe(ie.id),onKeyDown:wt=>M(wt,ie.id),className:"w-full bg-transparent outline-none border-b border-black/50 text-slate-900 px-0 py-0"}):g.jsx("span",{className:"truncate mr-4 w-full",title:"Doble clic para editar",children:ie.title||`Nota ${ge+1}`}),!rt&&g.jsx("button",{onClick:wt=>be(wt,ie.id),className:`absolute right-1 top-1.5 w-5 h-5 flex items-center justify-center rounded-full hover:bg-black/10 text-[10px] ${Ie?"text-black/50":"text-white/30 hidden group-hover:flex"}`,children:""})]},ie.id)}),g.jsx("button",{onClick:F,className:"h-7 w-7 mb-0.5 flex items-center justify-center rounded-lg bg-slate-800 text-slate-400 hover:text-white hover:bg-indigo-600 transition-colors flex-shrink-0",children:"+"})]}),ue&&g.jsxs("div",{className:`flex justify-between items-center px-3 py-1 border-b border-black/5 ${ve.bg}`,children:[g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>p(!1),className:`p-1 rounded hover:bg-black/10 transition-colors ${f?"text-black/40":"text-black font-bold bg-black/5"}`,title:"Modo Edicin",children:""}),g.jsx("button",{onClick:()=>p(!0),className:`p-1 rounded hover:bg-black/10 transition-colors ${f?"text-blue-600 font-bold bg-blue-500/10":"text-black/40"}`,title:"Modo Snippets (Copiar al clic)",children:""})]}),g.jsx("div",{className:"flex gap-1",children:pl.map(ie=>g.jsx("button",{onClick:()=>oe(ue.id,"color",ie.name),className:`w-3 h-3 rounded-full border border-black/10 ${ie.btn} hover:scale-125 transition-transform`},ie.name))})]}),g.jsxs("div",{className:`flex-1 flex flex-col relative ${ue?ve.bg:"bg-slate-800"} overflow-hidden`,children:[ue?g.jsxs(g.Fragment,{children:[!f&&g.jsx("textarea",{className:"flex-1 w-full h-full bg-transparent resize-none outline-none p-4 text-sm font-medium placeholder-black/30 leading-relaxed custom-scrollbar",placeholder:"Escribe aqu... (Un rengln = Un botn en modo )",value:ue.text,onChange:ie=>{const ge=r.map(Ie=>Ie.id===ue.id?{...Ie,text:ie.target.value}:Ie);a(ge)},onBlur:ie=>oe(ue.id,"text",ie.target.value),autoFocus:!0}),f&&g.jsx("div",{className:"flex-1 w-full h-full overflow-y-auto p-2 custom-scrollbar space-y-1",children:ue.text.trim()===""?g.jsx("div",{className:"text-center mt-10 text-black/40 text-xs italic",children:"Escribe algo en modo  para ver tus snippets aqu."}):ue.text.split(`
`).map((ie,ge)=>{if(!ie.trim())return g.jsx("div",{className:"h-2"},ge);const Ie=y===ge;return g.jsxs("div",{onClick:()=>ne(ie,ge),className:`
                                                            group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-all text-sm font-medium border border-black/5
                                                            ${Ie?"bg-green-500 text-white shadow-md transform scale-[1.02]":"bg-white/40 hover:bg-white/80 hover:shadow-sm text-slate-800"}
                                                        `,children:[g.jsx("span",{className:"truncate",children:ie}),g.jsx("span",{className:`text-[10px] font-bold ${Ie?"text-white":"text-transparent group-hover:text-black/30"}`,children:Ie?"COPIADO!":"COPIAR"})]},ge)})})]}):g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500",children:[g.jsx("span",{className:"text-3xl mb-2",children:""}),g.jsx("p",{className:"text-xs",children:"Sin notas abiertas."}),g.jsx("button",{onClick:F,className:"mt-3 text-xs bg-indigo-600 px-3 py-1.5 rounded-lg text-white hover:bg-indigo-500",children:"Crear una"})]}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none z-0",children:g.jsx("span",{className:"text-black/50 text-[8px] rotate-45",children:""})})]})]}),g.jsx("div",{ref:j,onMouseDown:me,className:`fixed z-[100] w-14 h-14 rounded-full shadow-[0_0_20px_rgba(250,204,21,0.4)] flex items-center justify-center border-2 border-white/20 cursor-grab active:cursor-grabbing transition-transform hover:scale-110 ${e?"bg-yellow-400 text-black rotate-12":"bg-slate-800 text-yellow-400 hover:bg-slate-700"}`,style:{left:G.x,top:G.y,touchAction:"none"},title:"Notas Rpidas (Arrastra para mover)",children:g.jsx("span",{className:"text-2xl pointer-events-none",children:""})})]}):null},yM=["Columna CONFIRMADO","Columna UPSELL","Columna DATOS ENTREGA","Columna RESPONDER","Columna REMINDER","Chat en vivo (filtro Pendiente)","Columna LATE VERIFICATION","Chat en vivo (filtro Abiertos)","Ordenes confirmadas sheet (CHECK info)","CHAT Pending Orders","CALL Pending Orders","Facebook/Instagram Comments & Chats"],bM=()=>{const s=new Date,e=new Date(s.getFullYear(),0,1),t=Math.ceil(((s-e)/864e5+e.getDay()+1)/7);return`${s.getFullYear()}-W${t.toString().padStart(2,"0")}`},_M=({onLogout:s,currentUserTeam:e,isAdmin:t})=>{const r=P.useMemo(()=>{const te={team1:["Tienda Lujosa","Clara Tienda","Bella Divina"],team2:["Clara Tierra"],all:["Tienda Lujosa","Clara Tienda","Bella Divina","Clara Tierra"]};return t?te.all:te[e?.replace("_","")||"team1"]||te.team1},[e,t]),[a,l]=P.useState("planner"),[u,f]=P.useState("current"),p=P.useMemo(()=>u==="next"?eM():bM(),[u]),[y,v]=P.useState([]),[T,w]=P.useState({}),[C,L]=P.useState({}),[X,q]=P.useState([]),[G,ee]=P.useState([]),[Y,le]=P.useState(!1),[ae,he]=P.useState([]),[S,A]=P.useState(new Date().toISOString().split("T")[0]),[N,O]=P.useState("daily"),[D,j]=P.useState("ALL"),[R,me]=P.useState(e),[de,F]=P.useState(null),[oe,be]=P.useState(!1),[Ve,Pe]=P.useState([]),[M,ne]=P.useState(yM),[ue,ve]=P.useState(()=>{try{return JSON.parse(localStorage.getItem("specificTaskGoals"))||{}}catch{return{}}}),[ie,ge]=P.useState(!1),[Ie,rt]=P.useState(""),[Ge,wt]=P.useState([]),[Xn,vn]=P.useState(""),[cr,Jn]=P.useState("info"),[Ri,Rn]=P.useState([]),[Ci,wr]=P.useState(null),[Ct,yt]=P.useState([]),[Lr,ms]=P.useState(!1),[Ye,Zt]=P.useState(!1),[Ur,Di]=P.useState(""),[si,Cn]=P.useState(!1),[wa,zr]=P.useState(!1),[ai,Mi]=P.useState(""),[Bn,Bt]=P.useState("monday"),[Dn,At]=P.useState([]),[ps,Er]=P.useState(null),[oi,Fn]=P.useState({role:"",team:""}),[Br,Dt]=P.useState(0);P.useEffect(()=>{(async()=>{const _e=(await lg(In(Oe,"users"))).docs.map(tt=>({id:tt.id,...tt.data()}));At(_e),v(_e),w({});try{const tt=at(Oe,"weekly_plans",p),ot=await Hf(tt);ot.exists()&&w(ot.data().plan||{})}catch(tt){console.error(tt)}const Me=Ti(In(Oe,"weekly_schedules"),Ws("weekId","==",p)),Nt=ei(Me,tt=>{const ot={};tt.docs.forEach($n=>{const dn=$n.data();dn.uid&&(ot[dn.uid]=dn.schedule)}),L(ot)}),Et=ei(Ti(In(Oe,"schedule_requests"),Ws("status","==","pending")),tt=>q(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),Ze=ei(Ti(In(Oe,"monday_ideas"),Ws("status","==","new")),tt=>ee(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),un=ei(Ti(In(Oe,"news_ticker"),El("createdAt","desc")),tt=>wt(tt.docs.map(ot=>({id:ot.id,...ot.data()})))),qe=ei(In(Oe,"training_modules"),tt=>Rn(tt.docs.map(ot=>({id:ot.id,...ot.data()}))));return a==="dashboard"&&qn(),(a==="ideas"||a==="dev")&&Mn(),()=>{Nt(),Et(),Ze(),un(),qe()}})()},[a,p,S,R,N]);const qn=async()=>{be(!0),he([]),Pe([]);try{const te=xn(),xe=In(Oe,"daily_reports"),_e=[Ws("date",">=",te.start),Ws("date","<=",te.end),El("date","desc")];R!=="ALL_TEAMS"&&_e.push(Ws("team","==",R)),_e.push(limit(100));const Me=Ti(xe,..._e),Et=(await lg(Me)).docs.map(qe=>({id:qe.id,...qe.data()}));he(Et);const Ze={};Et.forEach(qe=>{Ze[qe.uid]||(Ze[qe.uid]={id:qe.uid,uid:qe.uid,userName:qe.userName||"Usuario Desconocido",team:qe.team||"Sin Equipo",totalTasks:0,totalTimeMs:0,taskBreakdownMap:{},lastUpdate:qe.timestampStr||qe.date});const tt=Ze[qe.uid];tt.totalTasks+=qe.metrics?.totalTasks||0,tt.totalTimeMs+=qe.metrics?.totalTimeMs||0,qe.timestampStr>tt.lastUpdate&&(tt.lastUpdate=qe.timestampStr),Array.isArray(qe.taskBreakdown)&&qe.taskBreakdown.forEach(ot=>{const $n=ot.name||ot.text||"Tarea Genrica";tt.taskBreakdownMap[$n]||(tt.taskBreakdownMap[$n]={count:0,timeMs:0}),tt.taskBreakdownMap[$n].count+=ot.count||1,tt.taskBreakdownMap[$n].timeMs+=ot.elapsedTime||ot.timeMs||0})});const un=Object.values(Ze).map(qe=>{const tt=Object.entries(qe.taskBreakdownMap).map(([dn,Mt])=>{const Kt=Mt.timeMs/36e5;return{name:dn,count:Mt.count,timeMs:Mt.timeMs,speed:Kt>0?(Mt.count/Kt).toFixed(2):"0.00"}}),ot=qe.totalTimeMs/36e5,$n=ot>0?(qe.totalTasks/ot).toFixed(2):"0.00";return{...qe,metrics:{totalTasks:qe.totalTasks,totalTimeMs:qe.totalTimeMs,globalSpeed:$n},taskBreakdown:tt,timestampStr:qe.lastUpdate}});Pe(un)}catch(te){console.error("Error cargando reportes:",te)}finally{be(!1)}},Mn=async()=>{ms(!0);try{let te=Ti(In(Oe,"monday_ideas"),El("timestamp","desc")),_e=(await lg(te)).docs.map(Me=>({id:Me.id,...Me.data()}));t||(_e=_e.filter(Me=>Me.type!=="dev")),yt(_e)}catch(te){console.error(te)}ms(!1)},xn=()=>{const[te,xe,_e]=S.split("-"),Me=new Date(parseInt(te),parseInt(xe)-1,parseInt(_e)),Nt=Et=>`${Et.getFullYear()}-${String(Et.getMonth()+1).padStart(2,"0")}-${String(Et.getDate()).padStart(2,"0")}`;if(N==="daily")return{start:S,end:S};if(N==="weekly"){const Et=Me.getDay(),Ze=Me.getDate()-Et+(Et===0?-6:1),un=new Date(Me);un.setDate(Ze);const qe=new Date(un);return qe.setDate(un.getDate()+6),{start:Nt(un),end:Nt(qe),startDateObj:un,endDateObj:qe}}if(N==="monthly"){const Et=new Date(Me.getFullYear(),Me.getMonth(),1),Ze=new Date(Me.getFullYear(),Me.getMonth()+1,0);return{start:Nt(Et),end:Nt(Ze),startDateObj:Et,endDateObj:Ze}}return{start:S,end:S}},ki=(te,xe)=>{if(xe===-1||xe===void 0)return"text-blue-400 font-normal italic";const _e=parseFloat(te)||0,Me=parseFloat(xe)||1;return _e>=Me?"text-green-400 font-bold":_e>=Me*.7?"text-yellow-400 font-bold":"text-red-500 font-bold"},Fr=te=>F(de===te?null:te),Wn=te=>{if(!te)return"0h 0m";const xe=Math.floor(te/36e5),_e=Math.floor(te%36e5/6e4);return`${xe}h ${_e}m`},qr=()=>{const te=xn();let xe=Ct;if(a==="ideas"?xe=xe.filter(_e=>_e.type==="monday"):a==="dev"&&(xe=xe.filter(_e=>_e.type==="dev")),N!=="daily"){const _e=te.startDateObj?te.startDateObj.getTime():0,Me=te.endDateObj?te.endDateObj.getTime():9999999999999;xe=xe.filter(Nt=>Nt.timestamp>=_e&&Nt.timestamp<=Me)}return xe=xe.filter(_e=>si?_e.isArchived:!_e.isArchived),xe},Ea=async()=>{Xn&&(await bu(In(Oe,"news_ticker"),{text:Xn,type:cr,createdAt:Date.now()}),vn(""))},Hr=async te=>{await xl(at(Oe,"news_ticker",te))},Oi=async te=>{const xe={...te,active:!0,version:te.version||1};te.id?(te.isMajorUpdate&&(xe.version+=1),await yr(at(Oe,"training_modules",te.id),xe)):await bu(In(Oe,"training_modules"),xe),wr(null)},Vi=async te=>{window.confirm("Borrar?")&&await xl(at(Oe,"training_modules",te))},gn=async te=>{await yr(at(Oe,"training_modules",te.id),{active:!te.active})},Ut=async()=>{if(!ai.trim())return;const te=qT.currentUser;if(!te)return;const _e=new Date().toLocaleString("es-AR"),Me={uid:te.uid,userName:te.displayName||"Admin",team:e||"admin",content:ai,type:Bn,timestamp:Date.now(),timestampStr:_e,analysis:{pros:"",cons:""},status:"new",isArchived:!1};await bu(In(Oe,"monday_ideas"),Me),Mi(""),zr(!1),Mn()},gs=async(te,xe)=>{xe==="approved"?(await yr(at(Oe,"monday_ideas",te.id),{status:"approved"}),await ua(at(Oe,"users",te.uid,"data","wallet"),{val:{value:ml(50),coins:ml(50),lofiCoins:ml(50)}},{merge:!0}),alert("Aprobada +50")):await yr(at(Oe,"monday_ideas",te.id),{status:"rejected"}),yt(_e=>_e.map(Me=>Me.id===te.id?{...Me,status:xe}:Me))},Hn=async te=>{window.confirm("Archivar?")&&(await yr(at(Oe,"monday_ideas",te),{isArchived:!0}),yt(xe=>xe.map(_e=>_e.id===te?{..._e,isArchived:!0}:_e)))},Gn=async te=>{await yr(at(Oe,"monday_ideas",te),{isArchived:!1}),yt(xe=>xe.map(_e=>_e.id===te?{..._e,isArchived:!1}:_e))},Vt=async te=>{window.confirm("Eliminar?")&&(await xl(at(Oe,"monday_ideas",te)),yt(xe=>xe.filter(_e=>_e.id!==te)))},Ft=async(te,xe)=>{await yr(at(Oe,"monday_ideas",te),{analysis:xe}),alert("Guardado")},Te=(te,xe,_e)=>{yt(Me=>Me.map(Nt=>Nt.id===te?{...Nt,analysis:{...Nt.analysis||{pros:"",cons:""},[xe]:_e}}:Nt))},Ue=()=>{const te=Ct.filter(Me=>Me.type==="monday"&&!Me.isArchived&&Me.status==="approved");if(te.length===0){alert("Sin ideas aprobadas.");return}const xe=xn();let _e=` *RESUMEN*
 ${xe.start} - ${xe.end}

`;te.forEach((Me,Nt)=>{_e+=` *#${Nt+1}* (${Me.userName})
"${Me.content}"

`}),Di(_e),Zt(!0)},It=te=>{Er(te.id),Fn({role:te.role||"agent",team:te.team||"default"})},bt=async te=>{try{await yr(at(Oe,"users",te),oi),At(xe=>xe.map(_e=>_e.id===te?{..._e,...oi}:_e)),Er(null),alert("Guardado")}catch{alert("Error")}},li=async te=>{const xe=parseInt(Br);xe&&(await ua(at(Oe,"users",te,"data","wallet"),{val:{value:ml(xe),coins:ml(xe),lofiCoins:ml(xe)}},{merge:!0}),alert(`Enviados ${xe}`),Dt(0))},kn=async te=>{try{await ua(at(Oe,"weekly_schedules",`${te.uid}_${te.weekId}`),{uid:te.uid,userName:te.userName,weekId:te.weekId,schedule:te.proposedSchedule,updatedAt:Date.now()}),await xl(at(Oe,"schedule_requests",te.id)),alert(" Aprobada")}catch{alert("Error")}},cn=async te=>{window.confirm("Rechazar?")&&await xl(at(Oe,"schedule_requests",te))},en=te=>{l(te),le(!1)},tn=X.length+G.length;return g.jsxs("div",{className:"min-h-screen w-full bg-slate-950 text-white font-inter animate-fadeIn pb-20 relative overflow-x-hidden selection:bg-indigo-500 selection:text-white",children:[g.jsx("div",{className:"absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/30 via-slate-950 to-black pointer-events-none"}),g.jsx("div",{className:"relative z-10 w-full bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 shadow-2xl",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:g.jsx("span",{className:"text-xl",children:""})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold uppercase",children:"Nexus Control"}),g.jsx("p",{className:"text-[10px] text-slate-400 font-mono tracking-widest uppercase",children:t?"Admin":"Team Leader"})]})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("button",{onClick:()=>le(!0),className:`px-4 py-2 rounded-lg text-xs font-bold border transition-all flex items-center gap-2 relative ${tn>0?"bg-indigo-600 text-white border-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse":"bg-slate-800 text-slate-400 border-white/5"}`,children:[g.jsx("span",{children:""}),tn>0&&g.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[9px] border border-slate-900 shadow-sm",children:tn})]}),g.jsx("button",{onClick:()=>ge(!0),className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 text-xs font-bold border border-white/5 flex items-center gap-2",children:" METAS"}),g.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold border border-blue-500/20",children:" ATRS"})]})]})}),g.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto p-4 md:p-8",children:[g.jsx("div",{className:"flex flex-wrap gap-2 mb-8 p-1 bg-slate-900/50 backdrop-blur rounded-xl border border-white/5 w-fit",children:["dashboard","planner","news","academy","ideas",t?"dev":null,t?"users":null].filter(Boolean).map(te=>g.jsx("button",{onClick:()=>l(te),className:`px-5 py-2.5 rounded-lg font-bold text-xs uppercase tracking-wide transition-all ${a===te?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:{dashboard:" Reportes",planner:" Planner",news:" Noticias",academy:" Academy",ideas:" Ideas",dev:" Dev",users:" Usuarios"}[te]},te))}),a==="dashboard"&&g.jsx(sM,{processedData:Ve,detectedTasks:M,taskGoals:ue,selectedTeam:R,isLoading:oe,selectedTaskFilter:D,setSelectedTaskFilter:j,viewMode:N,setViewMode:O,filterDate:S,setFilterDate:A,expandedReportId:de,fetchTeamData:qn,toggleRow:Fr,formatTime:Wn,getPerformanceColor:ki}),a==="planner"&&g.jsx(cM,{squad:y,weeklyPlan:T,setWeeklyPlan:w,agentSchedules:C,visibleShops:r,nextWeekId:p,targetWeek:u,setTargetWeek:f}),a==="news"&&g.jsx(uM,{newsList:Ge,newNewsText:Xn,setNewNewsText:vn,newNewsType:cr,setNewNewsType:Jn,addNews:Ea,deleteNews:Hr}),a==="academy"&&g.jsx(dM,{quizzes:Ri,editingQuiz:Ci,setEditingQuiz:wr,saveQuiz:Oi,deleteQuiz:Vi,toggleQuiz:gn}),(a==="ideas"||a==="dev")&&g.jsx(fM,{activeTab:a,showArchived:si,setShowArchived:Cn,fetchIdeas:Mn,filteredIdeas:qr(),generateMondaySummary:Ue,handleSaveAnalysis:Ft,handleIdeaVerdict:gs,handleArchiveIdea:Hn,handleDeleteIdea:Vt,handleRestoreIdea:Gn,handleAnalysisChange:Te}),a==="users"&&t&&g.jsx(mM,{usersList:Dn,editingUserId:ps,setEditingUserId:Er,editForm:oi,setEditForm:Fn,setPointsToSend:Dt,handleGivePoints:li,saveUserChanges:bt,startEditingUser:It})]}),g.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50",children:[g.jsx("button",{onClick:()=>{Bt("dev"),zr(!0)},className:"flex items-center justify-center w-12 h-12 bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-lg border border-white/20",children:""}),g.jsx("button",{onClick:()=>{Bt("monday"),zr(!0)},className:"flex items-center justify-center w-14 h-14 bg-yellow-500 hover:bg-yellow-400 text-black rounded-full shadow-lg font-bold text-xl border border-white/20",children:""})]}),wa&&g.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:g.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nueva Idea"}),g.jsx("textarea",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-4 text-white text-sm h-40",value:ai,onChange:te=>Mi(te.target.value)}),g.jsxs("div",{className:"flex gap-2 mt-4",children:[g.jsx("button",{onClick:Ut,className:"flex-1 bg-indigo-600 py-2 rounded font-bold",children:"Enviar"}),g.jsx("button",{onClick:()=>zr(!1),className:"px-4 bg-slate-700 rounded",children:"X"})]})]})}),Ye&&g.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/90 p-4",children:g.jsxs("div",{className:"bg-slate-900 w-full max-w-2xl h-[80vh] flex flex-col",children:[g.jsx("textarea",{readOnly:!0,value:Ur,className:"flex-1 bg-slate-950 p-6 text-green-400 font-mono"}),g.jsx("button",{onClick:()=>Zt(!1),className:"py-3 bg-slate-800 text-white font-bold",children:"Cerrar"})]})}),ie&&g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 p-4",children:g.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-lg p-6 max-h-[80vh] overflow-y-auto",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Metas"}),g.jsx("div",{className:"space-y-2",children:M.map(te=>g.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[g.jsx("span",{children:te}),g.jsx("input",{type:"number",value:ue[te]||"",onChange:xe=>ve({...ue,[te]:xe.target.value}),className:"bg-black/40 w-16 text-center text-green-400"})]},te))}),g.jsx("button",{onClick:()=>ge(!1),className:"mt-4 w-full bg-indigo-600 py-2 rounded font-bold",children:"Listo"})]})}),g.jsx(vS,{user:qT.currentUser}),g.jsx(gM,{isOpen:Y,onClose:()=>le(!1),scheduleRequests:X,pendingIdeas:G,handleApproveRequest:kn,handleRejectRequest:cn,onNavigate:en})]})},vM=()=>{const[s,e]=P.useState(!1),[t,r]=P.useState(""),[a,l]=P.useState(""),[u,f]=P.useState(""),[p,y]=P.useState(!1),v=async()=>{f(""),y(!0);const w=new ti;try{await e5(vu,w)}catch(C){console.error("Google Auth Error:",C),C.code==="auth/unauthorized-domain"?f(`Dominio no autorizado. Agrega "${window.location.hostname}" en Firebase Console.`):C.code==="auth/popup-closed-by-user"?f("Ventana cerrada por el usuario."):f("Error al iniciar con Google. Verifica la consola."),y(!1)}},T=async w=>{w.preventDefault(),f(""),y(!0);try{s?await R4(vu,t,a):await C4(vu,t,a)}catch(C){console.error("Email Auth Error:",C);let L="Error de autenticacin.";C.code==="auth/wrong-password"&&(L="Contrasea incorrecta."),C.code==="auth/user-not-found"&&(L="Usuario no encontrado."),C.code==="auth/email-already-in-use"&&(L="El correo ya est registrado."),C.code==="auth/weak-password"&&(L="La contrasea es muy dbil."),f(L),y(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-4",children:g.jsxs("div",{className:"w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-700",children:[g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2",children:"Bienvenido"}),g.jsx("p",{className:"text-gray-400 text-sm",children:"Task Manager TL - Secured"})]}),g.jsx("button",{onClick:v,disabled:p,className:"w-full bg-white text-gray-900 font-bold py-3 rounded-lg flex items-center justify-center gap-3 hover:bg-gray-100 transition shadow-md mb-6",children:p?"Cargando...":g.jsxs(g.Fragment,{children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Iniciar con Google"]})}),g.jsxs("div",{className:"relative flex py-2 items-center mb-6",children:[g.jsx("div",{className:"flex-grow border-t border-gray-600"}),g.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs",children:"O usa tu correo"}),g.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),g.jsxs("form",{onSubmit:T,className:"space-y-4",children:[g.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:w=>r(w.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),g.jsx("input",{type:"password",placeholder:"Contrasea",value:a,onChange:w=>l(w.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),u&&g.jsx("p",{className:"text-red-400 text-xs text-center font-bold bg-red-900/50 p-2 rounded",children:u}),g.jsx("button",{type:"submit",disabled:p,className:`w-full py-3 rounded-lg font-bold text-white transition shadow-lg ${s?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:p?"Procesando...":s?"Registrarse":"Iniciar Sesin"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsx("button",{onClick:()=>e(!s),className:"text-sm text-gray-400 hover:text-white underline",children:s?"Ya tienes cuenta? Inicia sesin":"No tienes cuenta? Regstrate"})})]}),g.jsx("div",{className:"bg-gray-700/30 p-4 text-center border-t border-gray-700",children:g.jsx("p",{className:"text-xs text-gray-500",children:" Tus datos se guardan seguros en Firebase"})})]})})},xM="/themesTaskmanager/assets/logo-C6jEf1_1.png",TM=({coins:s,onOpenShop:e})=>{const t=typeof s=="number"?s:0;return g.jsx("div",{className:"fixed top-5 left-1/2 transform -translate-x-1/2 z-50 animate-slideDown",children:g.jsxs("div",{className:"flex items-center gap-1 p-1.5 bg-[#0f172a]/80 backdrop-blur-xl border border-white/10 rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.5)]",children:[g.jsxs("div",{className:"flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 pr-6",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-[#d1c4e9] flex items-center justify-center overflow-hidden border border-white/20 shadow-inner",children:g.jsx("img",{src:xM,alt:"Coin",className:"w-full h-full object-cover transform scale-[1.7]"})}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Lofi Coins"}),g.jsx("span",{className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-300 leading-tight tabular-nums",children:t.toLocaleString()})]})]}),g.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),g.jsxs("button",{onClick:e,className:"group relative w-10 h-10 flex items-center justify-center rounded-full bg-transparent hover:bg-white/10 transition-all duration-300",title:"Abrir Tienda",children:[g.jsx("span",{className:"text-xl filter drop-shadow-md group-hover:scale-110 transition-transform",children:""}),g.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Tienda"})]})]})})},wM=({themeClasses:s,celebrationMessage:e})=>{const t=s.name==="halloween"?"[text-shadow:0_0_8px_rgba(255,165,0,0.6)]":s.name==="party"?"[text-shadow:0_0_10px_rgba(217,70,239,0.7)]":s.name==="biancaBday"?"[text-shadow:0_0_12px_rgba(236,72,153,0.6)]":"",[r,a]=s.iconPair||[null,null],l=s.name==="lofi",u=()=>{confirm("Seguro que quieres cerrar sesin?")&&O4(vu)};return g.jsxs("div",{className:"text-center mb-4 flex flex-col items-center relative",children:[g.jsx("button",{onClick:u,className:"absolute top-0 right-0 text-xs bg-red-900/50 hover:bg-red-800 text-red-200 px-2 py-1 rounded border border-red-800 transition",children:"Salir"}),l&&g.jsx("div",{className:"mb-2 animate-bounce-slow",children:g.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Logo",className:"w-32 h-32 object-cover rounded-full border-4 border-[#C084FC] shadow-lg hover:scale-105 transition-transform duration-500",onError:f=>{f.target.onerror=null,f.target.style.display="none"}})}),g.jsxs("h1",{className:`text-4xl font-extrabold transition-colors duration-500 ${s.primaryText} ${s.titleFont} ${t}`,children:[r&&g.jsx("span",{className:"inline-block transform -rotate-12 scale-110 mr-2 text-3xl",children:r}),l?"Task Manager":"Task Manager TL",a&&g.jsx("span",{className:"inline-block transform rotate-12 scale-110 ml-2 text-3xl",children:a})]}),l&&g.jsx("div",{className:"mt-2 bg-[#FDFCDC] text-[#2E1065] px-3 py-1 rounded-full text-xs font-bold font-lofidex tracking-widest uppercase border border-[#C084FC] shadow-md flex items-center gap-1 animate-pulse",children:g.jsx("span",{children:" Powered by LofiDex "})}),e&&g.jsx("p",{className:`mt-2 text-lg font-semibold animate-pulse ${s.accentText}`,children:e})]})},EM=({message:s,resumeAction:e,dismissAction:t})=>{if(!s)return null;const r=s.taskIdToResume!==null,a=r?"bg-green-700/80":"bg-yellow-700/80",l=r?"border-green-400":"border-yellow-400";return g.jsx("div",{className:"fixed top-0 left-0 w-full p-4 z-[60] backdrop-blur-sm transition-all duration-300 transform translate-y-0",children:g.jsxs("div",{className:`max-w-xl mx-auto p-4 rounded-xl shadow-2xl flex flex-col sm:flex-row items-center justify-between gap-3 ${a} border ${l} text-white`,children:[g.jsx("p",{className:"font-semibold text-center sm:text-left flex-grow",children:s.text}),g.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[s.taskIdToResume!==null&&g.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-bold rounded-full bg-blue-500 hover:bg-blue-600 transition duration-200 shadow-md",children:" Reanudar Tarea "}),g.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-bold rounded-full bg-gray-600 hover:bg-gray-700 transition duration-200",children:" Cerrar "})]})]})})},SM=({addTask:s,addMultipleTasks:e,errorMessage:t,setErrorMessage:r,themeClasses:a})=>{const[l,u]=P.useState(""),[f,p]=P.useState([]),[y,v]=P.useState(""),[T,w]=P.useState(!1);P.useEffect(()=>{p([]),l&&w(!0)},[l]);const C=P.useMemo(()=>{let Y=[..._S];return l&&Qg[l]&&(Y=[Qg[l],...Y]),Y},[l]),L=Y=>{u(Y.target.value)},X=Y=>{l&&p(le=>le.includes(Y)?le.filter(ae=>ae!==Y):[...le,Y])},q=Y=>{if(Y.preventDefault(),!l){r("Primero selecciona una tienda.");return}if(f.length===0){r("Selecciona al menos una tarea.");return}const le=[];f.forEach(ae=>{let he=ae;if(ae==="OTHER_CUSTOM_TASK"){if(!y.trim())return;he=y.trim()}le.push({shopInput:l,taskName:he,quantity:null})}),e?e(le)&&(p([]),v(""),r("")):(le.forEach(ae=>s(ae)),p([]),r(""))},G="bg-gray-800 text-white",ee=f.includes("OTHER_CUSTOM_TASK");return g.jsxs("form",{onSubmit:q,className:"flex flex-col gap-4",children:[g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsxs("select",{value:l,onChange:L,className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.accentText} ${a.shopSelectBorder} rounded-full focus:outline-none transition-all font-semibold appearance-none cursor-pointer`,required:!0,children:[g.jsx("option",{value:"",disabled:!0,className:G,children:"--- Seleccionar Tienda ---"}),bS.map(Y=>g.jsx("option",{value:Y,className:G,children:Y},Y))]}),l&&g.jsxs("div",{className:"flex flex-col gap-2 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center px-2",children:[g.jsx("span",{className:`text-xs uppercase font-bold tracking-widest ${a.secondaryText} opacity-70`,children:"Tareas Disponibles"}),g.jsx("button",{type:"button",onClick:()=>w(!T),className:`text-[10px] font-bold px-2 py-1 rounded border border-gray-600 ${a.secondaryText} hover:bg-gray-700 transition`,children:T?"OCULTAR ":"MOSTRAR "})]}),T&&g.jsx("div",{className:`p-3 rounded-xl border ${a.inputBorder} ${a.cardBg} max-h-60 overflow-y-auto task-scroll`,children:g.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[C.map(Y=>{const le=f.includes(Y);return g.jsx("button",{type:"button",onClick:()=>X(Y),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                                    ${le?"bg-green-600 text-white border-green-400 shadow-md transform scale-105":`bg-transparent ${a.secondaryText} ${a.inputBorder} hover:bg-gray-700 hover:text-white`}`,children:Y},Y)}),g.jsx("button",{type:"button",onClick:()=>X("OTHER_CUSTOM_TASK"),className:`text-xs px-3 py-2 rounded-lg font-medium transition-all border 
                                            ${ee?"bg-purple-600 text-white border-purple-400 shadow-md":"bg-transparent text-purple-300 border-purple-900/50 hover:bg-purple-900/20"}`,children:"+ Otra"})]})})]}),ee&&T&&g.jsx("input",{type:"text",value:y,onChange:Y=>v(Y.target.value),placeholder:"Nombre de la tarea personalizada...",className:`flex-1 px-5 py-3 border-2 ${a.cardBg} ${a.secondaryText} ${a.inputBorder} rounded-full focus:outline-none transition-all animate-pulse`,required:!0})]}),t&&g.jsx("p",{className:"text-red-400 font-medium bg-red-900/50 p-3 rounded-xl text-center border border-red-500/30",children:t}),g.jsx("button",{type:"submit",className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${a.buttonAdd} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!l||f.length===0,children:f.length>1?`Agregar ${f.length} Tareas`:"Agregar Tarea"})]})},AM=({task:s,toggleTimer:e,deleteTask:t,updateTaskDetails:r,themeClasses:a,resetTaskTimer:l,celebrationThemeName:u})=>{const[f,p]=P.useState(!1),[y,v]=P.useState(""),[T,w]=P.useState(!1),[C,L]=P.useState(s.quantity||""),[X,q]=P.useState(!1),[G,ee]=P.useState(s.shop),[Y,le]=P.useState(!1),[ae,he]=P.useState(s.rawTaskName),[S,A]=P.useState(!1),[N,O]=P.useState(!1),D=Z5(s.elapsedTime);P.useEffect(()=>{f&&v(D)},[f]);const j=s.isCustom,R=()=>{const M=y.split(":").map(Number);if(M.length===3&&!M.some(isNaN)){const ne=(M[0]*3600+M[1]*60+M[2])*1e3;r(s.id,{elapsedTime:ne,lastTime:s.running?Date.now():null})}p(!1)},me=()=>{r(s.id,{quantity:parseInt(C)||0}),w(!1)},de=()=>{G&&r(s.id,{shop:G}),q(!1)},F=()=>{const M=ae.trim()||"Tarea sin Nombre";r(s.id,{rawTaskName:M}),le(!1)},oe=()=>{l(s.id),A(!1)},be=()=>{t(s.id),O(!1)},Ve=s.running?u==="biancaBday"?"border-l-4 border-pink-400":"border-l-4 border-green-500":"border-l-4 border-gray-600",Pe=s.running?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200";return g.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-3 sm:gap-4 sm:p-4 rounded-xl shadow-md transition-all duration-300 ${a.itemBg} ${Ve}`,children:[g.jsxs("div",{className:"flex flex-col gap-1 min-w-0 flex-grow",children:[X?g.jsx("select",{value:G,onChange:M=>ee(M.target.value),onBlur:de,className:`px-2 py-1 border-b-2 bg-gray-900 focus:outline-none w-full sm:w-40 rounded ${a.accentText} border-pink-500 text-xs sm:text-sm font-bold`,autoFocus:!0,children:bS.map(M=>g.jsx("option",{value:M,children:M},M))}):g.jsx("span",{className:`font-bold text-xs sm:text-sm uppercase tracking-wider opacity-80 cursor-pointer hover:text-white transition-colors ${a.accentText}`,onClick:()=>{ee(s.shop),q(!0)},children:s.shop||"Sin Tienda"}),Y&&j?g.jsx("input",{type:"text",value:ae,onChange:M=>he(M.target.value),onBlur:F,onKeyPress:M=>M.key==="Enter"&&F(),className:`font-medium text-base sm:text-lg border-b-2 bg-transparent focus:outline-none w-full ${a.secondaryText} border-pink-500`,autoFocus:!0}):g.jsx("span",{className:`font-medium text-base sm:text-lg break-words ${j?"cursor-pointer hover:underline decoration-dashed":""} ${a.secondaryText}`,onClick:()=>{j&&(he(s.rawTaskName),le(!0))},children:s.rawTaskName||s.name}),g.jsx("div",{className:"flex items-center gap-3 mt-1",children:T?g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"Cant:"}),g.jsx("input",{type:"number",value:C,onChange:M=>L(M.target.value),onBlur:me,onKeyPress:M=>M.key==="Enter"&&me(),className:`font-mono text-sm sm:text-base border-b-2 bg-gray-800/50 focus:outline-none w-16 sm:w-20 text-center rounded px-1 ${a.primaryText} border-blue-500`,autoFocus:!0})]}):g.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/40 px-2 py-1 rounded-lg border border-gray-700/50",children:[g.jsx("span",{className:`font-mono text-sm sm:text-base cursor-pointer hover:text-white transition-colors ${a.secondaryText}`,onClick:()=>{L(s.quantity||""),w(!0)},children:s.quantity?`${s.quantity} rdenes`:"0 rdenes"}),g.jsx("button",{onClick:M=>{M.stopPropagation(),r(s.id,{quantity:(s.quantity||0)+1})},className:`text-[10px] font-bold px-2 py-0.5 rounded shadow-sm transition-transform active:scale-95 ${Pe}`,children:" +1 "})]})})]}),g.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-4 w-full sm:w-auto flex-shrink-0 pt-2 sm:pt-0 border-t border-gray-700/30 sm:border-none mt-2 sm:mt-0",children:[f?g.jsx("input",{type:"text",value:y,onChange:M=>v(M.target.value),onBlur:R,onKeyPress:M=>M.key==="Enter"&&R(),className:`font-mono text-xl sm:text-2xl border-b-2 bg-gray-900 focus:outline-none w-28 sm:w-32 text-center rounded ${a.primaryText} border-blue-500 tracking-widest`,autoFocus:!0}):g.jsx("span",{className:`font-mono text-xl sm:text-2xl cursor-pointer hover:scale-105 transition-transform tracking-widest ${s.running?"text-green-400 font-bold":a.primaryText}`,onClick:()=>{p(!0)},children:D}),g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("button",{onClick:()=>e(s.id),className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-bold transition-all shadow-lg active:scale-95 ${s.running?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-green-600 hover:bg-green-500"}`,children:s.running?g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),g.jsxs("div",{className:"flex flex-col gap-1",children:[S?g.jsx("button",{onClick:oe,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Conf?"}):g.jsx("button",{onClick:()=>{A(!0),O(!1)},className:"text-gray-500 hover:text-gray-300 transition",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2A8.001 8.001 0 0019.418 15m0 0H15"})})}),N?g.jsx("button",{onClick:be,className:"text-red-500 hover:text-red-400 text-xs font-bold bg-red-900/30 px-2 py-1 rounded",children:"Borrar?"}):g.jsx("button",{onClick:()=>{O(!0),A(!1)},className:"text-gray-500 hover:text-red-500 transition",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]})},IM=({reports:s=[],selectedDate:e,onSelectDate:t,themeClasses:r})=>{const[a,l]=P.useState(new Date),u=P.useMemo(()=>{const C=a.getFullYear(),L=a.getMonth();return new Date(C,L+1,0).getDate()},[a]),f=P.useMemo(()=>{const C=a.getFullYear(),L=a.getMonth();return new Date(C,L,1).getDay()},[a]),p=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],y=["D","L","M","M","J","V","S"],v=()=>{l(new Date(a.getFullYear(),a.getMonth()-1,1))},T=()=>{l(new Date(a.getFullYear(),a.getMonth()+1,1))},w=()=>{const C=[];for(let L=0;L<f;L++)C.push(g.jsx("div",{className:"h-10 w-10"},`empty-${L}`));for(let L=1;L<=u;L++){const X=new Date(a.getFullYear(),a.getMonth(),L),q=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(X.getDate()).padStart(2,"0")}`,G=e===q,ee=Array.isArray(s)&&s.some(he=>he.id===q),Y=q===Uu();let le="hover:bg-gray-600/50",ae=r.secondaryText;G?(le=r.calendarActive||"bg-blue-600 text-white",ae="text-white font-bold"):Y&&(le="border border-gray-500 bg-gray-700/50"),C.push(g.jsxs("div",{onClick:()=>t(q),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${le} ${ae}`,children:[g.jsx("span",{className:"text-sm z-10",children:L}),ee&&g.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${r.calendarDot||"bg-yellow-400"}`})]},L))}return C};return g.jsxs("div",{className:`p-4 rounded-xl shadow-lg ${r.itemBg} transition-colors duration-500`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("button",{onClick:v,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:"<"}),g.jsxs("span",{className:`font-bold text-lg ${r.primaryText}`,children:[p[a.getMonth()]," ",a.getFullYear()]}),g.jsx("button",{onClick:T,className:`p-1 rounded-full hover:bg-gray-600/50 ${r.primaryText}`,children:">"})]}),g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:y.map((C,L)=>g.jsx("div",{className:`text-xs font-bold opacity-70 ${r.secondaryText}`,children:C},L))}),g.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:w()})]})},hk=({reports:s=[],selectedDates:e,onToggleDate:t,onBatchUpdate:r,themeClasses:a})=>{const[l,u]=P.useState(new Date),f=P.useMemo(()=>{const G=l.getFullYear(),ee=l.getMonth();return new Date(G,ee+1,0).getDate()},[l]),p=P.useMemo(()=>{const G=l.getFullYear(),ee=l.getMonth();return new Date(G,ee,1).getDay()},[l]),y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],v=["D","L","M","M","J","V","S"],T=()=>{u(new Date(l.getFullYear(),l.getMonth()-1,1))},w=()=>{u(new Date(l.getFullYear(),l.getMonth()+1,1))},C=()=>{const G=l.getFullYear(),ee=l.getMonth(),Y=[];for(let le=1;le<=f;le++)Y.push(`${G}-${String(ee+1).padStart(2,"0")}-${String(le).padStart(2,"0")}`);return Y},L=()=>{r&&r(C(),"add")},X=()=>{r&&r(C(),"remove")},q=()=>{const G=[];for(let ee=0;ee<p;ee++)G.push(g.jsx("div",{className:"h-10 w-10"},`empty-${ee}`));for(let ee=1;ee<=f;ee++){const Y=new Date(l.getFullYear(),l.getMonth(),ee),le=`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`,ae=e.includes(le),he=Array.isArray(s)&&s.some(N=>N.id===le);let S="hover:bg-gray-600/50",A=a.secondaryText;ae&&(S="bg-green-600 text-white font-bold border border-green-400",A="text-white"),G.push(g.jsxs("div",{onClick:()=>t(le),className:`h-10 w-10 flex flex-col items-center justify-center rounded-full cursor-pointer transition-all relative ${S} ${A}`,children:[g.jsx("span",{className:"text-sm z-10",children:ee}),he&&g.jsx("div",{className:`absolute bottom-1 w-1.5 h-1.5 rounded-full ${ae?"bg-white":a.calendarDot||"bg-yellow-400"}`})]},ee))}return G};return g.jsxs("div",{className:`p-4 rounded-xl shadow-lg border transition-colors duration-500 ${a.cardBg} ${a.inputBorder}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("button",{onClick:T,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:"<"}),g.jsxs("span",{className:`font-bold text-lg ${a.primaryText}`,children:[y[l.getMonth()]," ",l.getFullYear()]}),g.jsx("button",{onClick:w,className:`p-1 rounded-full hover:bg-gray-600/50 ${a.primaryText}`,children:">"})]}),g.jsxs("div",{className:"flex gap-2 mb-3 justify-center",children:[g.jsx("button",{onClick:L,className:"text-xs px-3 py-1 bg-green-700 hover:bg-green-600 text-white rounded-full transition",children:"Todos"}),g.jsx("button",{onClick:X,className:"text-xs px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-full transition",children:"Ninguno"})]}),g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:v.map(G=>g.jsx("div",{className:`text-xs font-bold opacity-70 ${a.secondaryText}`,children:G},G))}),g.jsx("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:q()})]})},$T=({content:s,themeClasses:e,placeholder:t})=>{const[r,a]=P.useState(!1),l=()=>{if(s)if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(s).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)});else{const u=document.createElement("textarea");u.value=s,document.body.appendChild(u),u.select();try{document.execCommand("copy"),a(!0),setTimeout(()=>a(!1),2e3)}catch(f){console.error("Fallback copy failed",f)}document.body.removeChild(u)}};return g.jsxs("div",{className:"relative w-full group",children:[g.jsx("div",{className:`w-full p-5 rounded-xl font-mono text-sm whitespace-pre-wrap transition-colors duration-500 ${e.itemBg} ${e.secondaryText} min-h-[100px]`,children:s||g.jsx("p",{className:"text-center opacity-70 italic pt-8",children:t})}),s&&g.jsx("button",{onClick:l,className:`absolute top-2 right-2 px-3 py-1 text-xs font-bold rounded transition-all duration-200 shadow-md flex items-center gap-1 ${r?"bg-green-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"}`,title:"Copiar reporte",children:r?g.jsxs(g.Fragment,{children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copiado!"]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copiar"]})})]})},NM=({isUnlocked:s,weeklyHours:e,targetHours:t,setTargetHours:r,onClaimBonus:a,bonusClaimed:l})=>{const u=Math.min(e/t*100,100),f=e>=t;return g.jsxs("div",{className:"mb-6 bg-black/40 rounded-xl p-4 border border-gray-700/50 backdrop-blur-sm shadow-inner transition-all hover:border-gray-600/50",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-gray-400",children:"Meta Semanal"}),g.jsx("input",{type:"number",value:t,onChange:p=>r(Number(p.target.value)),className:"w-12 bg-gray-800 border border-gray-600 rounded text-center text-xs text-white focus:border-purple-500 outline-none transition-colors",min:"1"}),g.jsx("span",{className:"text-xs text-gray-500",children:"hrs"})]}),g.jsxs("div",{className:"text-xs font-mono text-white",children:[g.jsx("span",{className:f?"text-green-400 font-bold":"",children:e.toFixed(1)}),g.jsx("span",{className:"text-gray-500",children:" / "}),g.jsx("span",{children:t})," hrs"]})]}),g.jsx("div",{className:"h-3 w-full bg-gray-800 rounded-full overflow-hidden border border-gray-700 mb-3 relative group shadow-inner",children:g.jsx("div",{className:`h-full transition-all duration-1000 ease-out relative ${f?"bg-gradient-to-r from-green-500 to-emerald-400":"bg-gradient-to-r from-purple-600 to-blue-500"}`,style:{width:`${u}%`},children:g.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/20 animate-pulse"})})}),g.jsx("div",{className:"flex justify-center items-center mt-2",children:f?l?g.jsxs("div",{className:"text-[10px] sm:text-xs font-bold text-green-400 flex items-center gap-1 bg-green-900/20 px-4 py-1.5 rounded-full border border-green-500/30 animate-fade-in",children:[g.jsx("span",{children:""})," Recompensa Semanal Cobrada"]}):g.jsxs("button",{onClick:a,className:"w-full sm:w-auto text-xs font-bold text-white bg-gradient-to-r from-amber-500 to-yellow-600 hover:from-amber-400 hover:to-yellow-500 px-6 py-2 rounded-full shadow-[0_0_15px_rgba(245,158,11,0.4)] animate-bounce border border-yellow-300/50 transition-all hover:scale-105 active:scale-95 flex justify-center items-center gap-2",children:[g.jsx("span",{children:""})," RECLAMAR 100 MONEDAS!"]}):g.jsxs("span",{className:"text-[10px] text-gray-500 italic flex items-center gap-1",children:[g.jsx("span",{children:""})," Faltan ",(t-e).toFixed(1)," hrs para tu bonus."]})})]})},RM=({onClick:s})=>{const[e,t]=P.useState(!0);return P.useEffect(()=>{const r=setTimeout(()=>t(!1),1e4);return()=>clearTimeout(r)},[]),g.jsxs("div",{className:"fixed bottom-4 left-4 sm:bottom-6 sm:left-6 z-50 group",children:[e&&g.jsx("div",{className:"absolute -top-3 -right-4 bg-red-600 text-white text-[10px] font-extrabold px-2 py-0.5 rounded-full shadow-lg wiggle-animation z-50 border-2 border-white tracking-widest transition-opacity duration-1000",children:" NUEVO! "}),g.jsxs("button",{onClick:s,className:"relative w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-green-600 hover:bg-green-500 text-white shadow-2xl flex items-center justify-center border-4 border-gray-900 transition-transform duration-300 active:scale-95 hover:scale-110 overflow-hidden",title:"Calcular Salario",children:[g.jsx("div",{className:"shine-bar"}),g.jsx("span",{className:"text-xl sm:text-3xl font-bold relative z-10",children:"$"})]})]})},CM=({news:s})=>!s||s.length===0?null:g.jsx("div",{className:"fixed top-0 left-0 w-full z-50 bg-black/80 border-b border-white/10 h-8 flex items-center backdrop-blur-sm",children:g.jsx("div",{className:"marquee-container w-full",children:g.jsx("div",{className:"marquee-content flex gap-8",children:s.map(e=>g.jsxs("span",{className:`text-xs font-bold font-mono px-4 ${e.type==="critical"?"text-red-400 animate-pulse":e.type==="party"?"text-yellow-400":"text-blue-400"}`,children:[e.type==="critical"&&""," ",e.type==="party"&&""," ",e.type==="info"&&""," ",e.text]},e.id))})})}),DM=({isLeader:s,onOpenDashboard:e,onOpenIdeas:t,onOpenAvailability:r,setIdeaType:a})=>g.jsxs(g.Fragment,{children:[s&&g.jsx("button",{onClick:e,className:"fixed top-12 right-4 z-50 bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:" LDER"}),g.jsxs("button",{onClick:()=>{a("dev"),t()},className:"fixed bottom-20 right-4 z-50 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"BUGS / IDEAS APP"})]}),g.jsxs("button",{onClick:()=>{a("monday"),t()},className:"fixed bottom-4 right-4 z-50 bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2.5 rounded-full shadow-lg text-xs font-bold transition-transform active:scale-95 flex items-center gap-2",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"IDEAS LUNES"})]}),g.jsxs("button",{onClick:r,className:"fixed bottom-36 right-4 z-50 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 rounded-full font-bold shadow-lg text-xs flex items-center gap-2",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"hidden sm:inline",children:"DISPONIBILIDAD"})]})]}),MM=({isOpen:s,onClose:e,onGenerate:t,tasks:r,distributeTasksTime:a,themeClasses:l,selectedReportDate:u,setSelectedReportDate:f,pastReports:p=[]})=>{const y=P.useRef(null),[v,T]=P.useState(!1),[w,C]=P.useState(""),[L,X]=P.useState("00:00:00"),[q,G]=P.useState([]),ee=P.useMemo(()=>r.reduce((me,de)=>{const F=de.running?Date.now()-de.lastTime:0;return me+de.elapsedTime+F},0),[r,s]);if(P.useEffect(()=>{const me=Math.floor(ee/36e5).toString().padStart(2,"0"),de=Math.floor(ee%36e5/6e4).toString().padStart(2,"0"),F=Math.floor(ee%6e4/1e3).toString().padStart(2,"0");X(`${me}:${de}:${F}`)},[ee]),!s)return null;const Y=me=>{if(!me)return"DD/MM/YYYY";const[de,F,oe]=me.split("-");return`${oe}/${F}/${de}`},le=me=>{if(!me)return 0;const de=me.split(":").map(Number);let F=0,oe=0,be=0;return de.length===3?[F,oe,be]=de:de.length===2&&([F,oe]=de),(F*3600+oe*60+be)*1e3},ae=me=>{const de=Math.abs(me),F=Math.floor(de/36e5).toString().padStart(2,"0"),oe=Math.floor(de%36e5/6e4).toString().padStart(2,"0"),be=Math.floor(de%6e4/1e3).toString().padStart(2,"0");return`${me<0?"-":""}${F}:${oe}:${be}`},S=le(w)-ee,A=()=>{if(y.current)try{y.current.showPicker()}catch{y.current.focus(),y.current.click()}},N=()=>{Array.isArray(p)&&p.some(de=>de.id===u)?T(!0):t()},O=me=>{let de=me.target.value.replace(/\D/g,"");de.length>6&&(de=de.slice(0,6)),de.length>4?de=de.replace(/^(\d{2})(\d{2})(\d{0,2})/,"$1:$2:$3"):de.length>2&&(de=de.replace(/^(\d{2})(\d{0,2})/,"$1:$2")),C(de)},D=me=>{G(de=>de.includes(me)?de.filter(F=>F!==me):[...de,me])},j=()=>{q.length===r.length?G([]):G(r.map(me=>me.id))},R=()=>{if(S===0)return;if(q.length===0){alert("Por favor selecciona al menos una tarea.");return}a(q,S);const me=S>0?"repartido":"descontado";alert(`Se han ${me} ${ae(Math.abs(S))} entre las ${q.length} tareas seleccionadas.`)};return g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:g.jsx("div",{className:`relative w-full max-w-lg p-6 rounded-2xl shadow-2xl ${l.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content max-h-[90vh] overflow-y-auto flex flex-col`,children:v?g.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[g.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:""}),g.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Cuidado!"}),g.jsx("p",{className:"text-gray-300 mb-6",children:"Ya existe un reporte para esta fecha."}),g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsx("button",{onClick:()=>t(),className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Sobreescribir"}),g.jsx("button",{onClick:()=>T(!1),className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:`text-xl font-bold mb-4 text-center ${l.primaryText}`,children:"Preparar Reporte"}),g.jsx("div",{className:"mb-4 flex justify-center",children:g.jsxs("div",{onClick:A,className:"relative group cursor-pointer border border-cyan-500/30 bg-black/40 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-black/60 transition-colors",children:[g.jsx("span",{className:"text-white font-mono pointer-events-none select-none",children:Y(u)}),g.jsx("span",{className:"text-cyan-400 pointer-events-none",children:""}),g.jsx("input",{ref:y,type:"date",value:u,onChange:me=>f(me.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})}),g.jsxs("div",{className:"bg-black/30 p-4 rounded-xl border border-white/10 mb-4",children:[g.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Sincronizacin"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{className:"text-center p-2 bg-black/20 rounded-lg",children:[g.jsx("label",{className:"text-[10px] text-gray-500 block",children:"TIEMPO APP"}),g.jsx("span",{className:"text-lg font-mono font-bold text-white",children:L})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("label",{className:"text-[10px] text-cyan-400 block mb-1",children:"WEBWORK (HH:MM:SS)"}),g.jsx("input",{type:"text",value:w,onChange:O,placeholder:"00:00:00",maxLength:8,className:`w-full bg-black/50 border ${l.inputBorder} text-cyan-300 text-lg font-mono p-1 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-cyan-500`})]})]}),w.length>=4&&g.jsx("div",{className:`text-center mb-4 text-sm font-bold py-1 rounded ${S>0?"bg-green-900/30 text-green-400":S<0?"bg-red-900/30 text-red-400":"text-gray-500"}`,children:S>0?`Faltan cargar: ${ae(S)}`:S<0?`Te pasaste por: ${ae(S)}`:"Sincronizado!"}),S!==0&&g.jsxs("div",{className:"animate-fadeIn",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("p",{className:"text-xs text-gray-400",children:S>0?"Elige dnde SUMAR tiempo:":"Elige dnde RESTAR tiempo:"}),g.jsx("button",{onClick:j,className:"text-[10px] text-cyan-400 hover:text-cyan-300 underline",children:q.length===r.length?"Deseleccionar":"Todos"})]}),g.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar border border-white/5 rounded-lg bg-black/20 p-2 space-y-1",children:r.map(me=>g.jsxs("div",{onClick:()=>D(me.id),className:`flex items-center gap-3 p-2 rounded cursor-pointer transition-colors ${q.includes(me.id)?S>0?"bg-emerald-900/30 border border-emerald-500/30":"bg-red-900/30 border border-red-500/30":"hover:bg-white/5 border border-transparent"}`,children:[g.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${q.includes(me.id)?S>0?"bg-emerald-500 border-emerald-500":"bg-red-500 border-red-500":"border-gray-600"}`,children:q.includes(me.id)&&g.jsx("span",{className:"text-black text-[10px] font-bold",children:""})}),g.jsx("div",{className:"flex-1 min-w-0",children:g.jsx("p",{className:"text-sm text-gray-200 truncate",children:me.text||me.name})}),g.jsx("span",{className:"text-xs font-mono text-gray-500",children:ae(me.elapsedTime)})]},me.id))}),g.jsxs("p",{className:"text-[10px] text-center mt-2 text-cyan-200/70",children:[S>0?"Se sumarn":"Se restarn"," ",g.jsx("span",{className:"font-bold",children:q.length>0?ae(Math.abs(S/q.length)):"00:00:00"})," ",S>0?"a":"de"," cada tarea seleccionada."]})]}),g.jsx("button",{onClick:R,disabled:w.length<4||S!==0&&q.length===0,className:`w-full mt-4 py-3 rounded-xl font-bold uppercase tracking-wider transition-all shadow-lg flex items-center justify-center gap-2 ${S===0?"bg-gray-700 text-gray-400 cursor-not-allowed":S>0?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-900/50":"bg-red-600 hover:bg-red-500 text-white shadow-red-900/50"}`,children:S>0?" Repartir (Sumar)":S<0?" Recortar (Restar)":"Perfecto"})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:N,className:`flex-1 py-3 rounded-full font-bold text-white shadow-lg ${l.buttonAction}`,children:"Generar Reporte"}),g.jsx("button",{onClick:e,className:"px-6 py-3 rounded-full font-bold text-gray-300 bg-gray-700 hover:bg-gray-600",children:"Cancelar"})]})]})})})},kM=({isOpen:s,onClose:e,onConfirm:t,themeClasses:r})=>s?g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:g.jsx("div",{className:`relative w-full max-w-sm p-6 rounded-2xl shadow-2xl ${r.modalBg||"bg-gray-800 border-gray-600"} border-2 modal-content`,children:g.jsxs("div",{className:"flex flex-col items-center text-center animate-pulse",children:[g.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-3 border-2 border-red-500",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),g.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"Empezar Da Nuevo?"}),g.jsxs("p",{className:`${r.secondaryText||"text-gray-300"} mb-6 text-sm`,children:["Ests a punto de borrar ",g.jsx("strong",{children:"todas las tareas"})," de la lista. ",g.jsx("br",{}),g.jsx("br",{})," ",g.jsx("span",{className:"text-xs opacity-70",children:"Asegrate de haber generado tu E.O.D.R. antes de continuar. Esta accin no se puede deshacer."})]}),g.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[g.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-lg",children:"S, Limpiar Todo"}),g.jsx("button",{onClick:e,className:"w-full py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition",children:"Cancelar"})]})]})})}):null,OM=()=>{const s=Array.from({length:50}).map((e,t)=>{const r={left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${Math.random()*10+5}s`,opacity:Math.random()*.7+.3,width:`${Math.random()*6+2}px`,height:`${Math.random()*6+2}px`};return g.jsx("div",{className:"snowflake absolute top-[-10px] bg-white rounded-full blur-[1px]",style:r},t)});return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[g.jsx("style",{children:`
                @keyframes snowfall {
                    0% { transform: translateY(-10vh) translateX(0); }
                    100% { transform: translateY(110vh) translateX(20px); }
                }
                .snowflake {
                    animation: snowfall linear infinite;
                }
            `}),s]})},VM=()=>{const s=P.useMemo(()=>{const e=["#ffb700","#ff6a00","#ff8c00","#ffd700","#ff4500"];return Array.from({length:30}).map((t,r)=>({key:r,left:`${Math.random()*100}vw`,top:`${Math.random()*120}vh`,size:`${Math.random()*400+150}px`,color:e[Math.floor(Math.random()*e.length)],opacity:Math.random()*.3+.3,duration:`${Math.random()*15+15}s`,delay:`-${Math.random()*20}s`,blur:`${Math.random()*60+40}px`}))},[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-plus-lighter",children:[g.jsx("style",{children:`
                @keyframes float-pulse {
                    0%, 100% { transform: translate(0, 0) scale(1); opacity: var(--base-opacity); }
                    50% { transform: translate(var(--tx), var(--ty)) scale(1.2); opacity: calc(var(--base-opacity) + 0.2); }
                }
                .cozy-orb {
                    position: absolute;
                    border-radius: 50%;
                    animation: float-pulse infinite ease-in-out alternate;
                    --tx: ${(Math.random()-.5)*100}px;
                    --ty: ${(Math.random()-.5)*100}px;
                }
            `}),s.map(e=>g.jsx("div",{className:"cozy-orb",style:{left:e.left,top:e.top,width:e.size,height:e.size,backgroundColor:e.color,"--base-opacity":e.opacity,animationDuration:e.duration,animationDelay:e.delay,filter:`blur(${e.blur})`}},e.key))]})},jM=()=>g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen opacity-30",children:[g.jsx("style",{children:`
                @keyframes fog-drift {
                    0% { background-position: 0 0; }
                    100% { background-position: 200% 0; }
                }
                .fog-layer {
                    position: absolute;
                    width: 300%;
                    height: 100%;
                    background-image: url('https://www.transparenttextures.com/patterns/foggy-birds.png'); /* Textura sutil de niebla */
                    background-size: cover;
                    opacity: 0.4;
                    animation: fog-drift 240s linear infinite;
                }
                 .fog-layer.two {
                    animation-direction: reverse;
                    animation-duration: 180s;
                    opacity: 0.2;
                }
            `}),g.jsx("div",{className:"fog-layer"}),g.jsx("div",{className:"fog-layer two"})]}),PM=`
    @keyframes firefly-move {
        0%, 100% { transform: translate(0, 0); opacity: 0; }
        25% { opacity: 1; }
        50% { transform: translate(50px, -50px); opacity: 0.5; }
        75% { transform: translate(-30px, 30px); opacity: 1; }
    }
    
    @keyframes flora-fall {
        0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
        10% { opacity: 0.8; }
        100% { transform: translateY(110vh) rotate(360deg) translateX(50px); opacity: 0; }
    }

    .firefly {
        position: absolute;
        background: #bef264;
        border-radius: 50%;
        box-shadow: 0 0 10px #bef264;
        animation: firefly-move ease-in-out infinite;
    }

    .flora-particle {
        position: absolute;
        top: -20px;
        border-radius: 4px 10px;
        animation: flora-fall linear infinite;
    }
`,KT=()=>{const s=P.useMemo(()=>Array.from({length:20}).map((t,r)=>({key:`fly-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*10+10}s`,delay:`-${Math.random()*10}s`,opacity:Math.random()*.5+.3})),[]),e=P.useMemo(()=>{const t=["#86efac","#4ade80","#fbcfe8","#fdf2f8"];return Array.from({length:15}).map((r,a)=>({key:`leaf-${a}`,left:`${Math.random()*100}vw`,size:`${Math.random()*8+4}px`,color:t[Math.floor(Math.random()*t.length)],duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*10}s`,rotation:Math.random()*360}))},[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:PM}}),s.map(t=>g.jsx("div",{className:"firefly",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDuration:t.duration,animationDelay:t.delay}},t.key)),e.map(t=>g.jsx("div",{className:"flora-particle",style:{left:t.left,width:t.size,height:t.size,backgroundColor:t.color,animationDuration:t.duration,animationDelay:t.delay}},t.key))]})},LM=`
    /* Fondo de estrellas parpadeantes */
    @keyframes twinkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
    }

    /* Meteorito cruzando la pantalla */
    @keyframes shooting {
        0% { transform: translateX(0) translateY(0) rotate(315deg); opacity: 1; }
        70% { opacity: 1; }
        100% { transform: translateX(-100vw) translateY(100vh) rotate(315deg); opacity: 0; }
    }

    .star-static {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle infinite ease-in-out;
    }

    .shooting-star {
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 2px;
        background: linear-gradient(90deg, rgba(255,255,255,1), transparent);
        animation: shooting 4s linear infinite;
        opacity: 0;
    }
    
    /* Cabeza del meteorito */
    .shooting-star::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #4c1d95;
    }
`,UM=()=>{const s=P.useMemo(()=>Array.from({length:50}).map((t,r)=>({key:`s-${r}`,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*2+1}px`,delay:`${Math.random()*5}s`,duration:`${Math.random()*3+2}s`})),[]),e=P.useMemo(()=>Array.from({length:3}).map((t,r)=>({key:`m-${r}`,top:`${Math.random()*50}vh`,right:`${Math.random()*20-20}vw`,delay:`${Math.random()*10+2}s`,duration:`${Math.random()*2+3}s`})),[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:LM}}),s.map(t=>g.jsx("div",{className:"star-static",style:{left:t.left,top:t.top,width:t.size,height:t.size,animationDelay:t.delay,animationDuration:t.duration}},t.key)),e.map(t=>g.jsx("div",{className:"shooting-star",style:{top:t.top,right:t.right,animationDelay:t.delay,animationDuration:t.duration}},t.key))]})},zM=`
    @keyframes float-up {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.8; }
        90% { opacity: 0.8; }
        100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    .gold-particle {
        position: absolute;
        background: radial-gradient(circle, #fcd34d 0%, #b45309 100%); /* Degradado dorado */
        border-radius: 50%;
        box-shadow: 0 0 5px #f59e0b;
        animation: float-up linear infinite;
    }
`,BM=()=>{const s=P.useMemo(()=>Array.from({length:30}).map((e,t)=>({key:`gold-${t}`,left:`${Math.random()*100}vw`,size:`${Math.random()*4+2}px`,duration:`${Math.random()*15+10}s`,delay:`-${Math.random()*20}s`})),[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:zM}}),s.map(e=>g.jsx("div",{className:"gold-particle",style:{left:e.left,width:e.size,height:e.size,animationDuration:e.duration,animationDelay:e.delay}},e.key))]})},FM=`
    @keyframes float-music {
        0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0; }
        10% { opacity: 0.6; }
        50% { transform: translateY(50vh) translateX(20px) rotate(10deg); opacity: 0.8; }
        100% { transform: translateY(-10vh) translateX(-20px) rotate(-10deg); opacity: 0; }
    }

    .music-note {
        position: absolute;
        color: #d1c4e9; /* Lila suave de tu marca */
        text-shadow: 0 0 10px rgba(209, 196, 233, 0.5);
        font-family: 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
        user-select: none;
        animation: float-music linear infinite;
    }
`,qM=()=>{const s=P.useMemo(()=>{const e=["","","",""];return Array.from({length:15}).map((t,r)=>({key:`note-${r}`,symbol:e[Math.floor(Math.random()*e.length)],left:`${Math.random()*95}vw`,size:`${Math.random()*20+15}px`,duration:`${Math.random()*10+15}s`,delay:`-${Math.random()*20}s`,opacity:Math.random()*.4+.2}))},[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden mix-blend-screen",children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:FM}}),s.map(e=>g.jsx("div",{className:"music-note",style:{left:e.left,fontSize:e.size,animationDuration:e.duration,animationDelay:e.delay,opacity:e.opacity},children:e.symbol},e.key))]})},HM=()=>{const s=P.useMemo(()=>Array.from({length:60}).map((e,t)=>({key:t,left:`${Math.random()*100}vw`,height:`${Math.random()*20+10}px`,duration:`${Math.random()*.5+.5}s`,delay:`${Math.random()*2}s`})),[]);return g.jsx("div",{className:"w-full h-full absolute top-0 left-0 overflow-hidden",children:s.map(e=>g.jsx("div",{className:"rain-drop",style:{left:e.left,height:e.height,"--duration":e.duration,"--delay":e.delay}},e.key))})},GM=()=>g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"spider-web",children:[g.jsx("div",{className:"line1"}),g.jsx("div",{className:"line2"})]}),g.jsxs("div",{className:"spider-web",style:{left:"auto",right:0,transform:"scaleX(-1)"},children:[g.jsx("div",{className:"line1"}),g.jsx("div",{className:"line2"})]})]}),$M=()=>{const s=P.useRef(null),[e,t]=P.useState(!1),r=()=>{s.current&&(e?s.current.pause():s.current.play().catch(a=>console.log("Audio play failed",a)),t(!e))};return g.jsxs("div",{className:"fixed top-4 right-4 z-50",children:[g.jsx("audio",{ref:s,loop:!0,src:"https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3"}),g.jsx("button",{onClick:r,className:"bg-black/50 hover:bg-black/70 text-white p-2 rounded-full backdrop-blur-md border border-white/20 transition-all shadow-lg group hover:scale-110 active:scale-95 duration-300",children:g.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center rounded-full overflow-hidden",children:[g.jsx("img",{src:"https://i.imgur.com/0YBh5gg.png",alt:"LofiDex Cup",className:`w-full h-full object-cover ${e?"animate-pulse":"opacity-80 grayscale"}`,onError:a=>{a.target.onerror=null,a.target.src="https://placehold.co/100x100?text="}}),!e&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-xs bg-black/40 rounded-full",children:"OFF"})]})})]})},KM=()=>{const s=P.useRef(null);return P.useEffect(()=>{const e=s.current,t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%",a=14,l=e.width/a,u=Array(Math.floor(l)).fill(1),p=setInterval(()=>{t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#0F0",t.font=`${a}px monospace`;for(let v=0;v<u.length;v++){const T=r[Math.floor(Math.random()*r.length)];t.fillText(T,v*a,u[v]*a),u[v]*a>e.height&&Math.random()>.975&&(u[v]=0),u[v]++}},33),y=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",y),()=>{clearInterval(p),window.removeEventListener("resize",y)}},[]),g.jsx("canvas",{ref:s,className:"fixed top-0 left-0 w-full h-full z-0 pointer-events-none opacity-50"})},YM=()=>{const s=P.useMemo(()=>Array.from({length:25}).map((e,t)=>({id:t,left:`${Math.random()*100}%`,duration:`${15+Math.random()*20}s`,delay:`-${Math.random()*20}s`,scale:.6+Math.random()*.6})),[]);return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[1] overflow-hidden",children:[g.jsx("style",{children:`
                    @keyframes lanternFloatUp {
                        0% {
                            transform: translateY(105vh) rotate(-5deg);
                            opacity: 0;
                        }
                        10% {
                            opacity: 0.9;
                        }
                        50% {
                            transform: translateY(50vh) rotate(5deg);
                            opacity: 1;
                        }
                        90% {
                            opacity: 0.8;
                        }
                        100% {
                            transform: translateY(-20vh) rotate(-5deg);
                            opacity: 0;
                        }
                    }

                    .lantern-item {
                        position: absolute;
                        top: 0; /* Posicionamos arriba para usar vh relativo hacia abajo */
                        will-change: transform, opacity;
                        filter: drop-shadow(0 0 15px rgba(255, 160, 50, 0.6)); /* Brillo naranja */
                    }
                `}),s.map(e=>g.jsx("div",{className:"lantern-item",style:{left:e.left,fontSize:`${e.scale*2.5}rem`,animationName:"lanternFloatUp",animationDuration:e.duration,animationDelay:e.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},children:""},e.id))]})},QM=()=>g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:[[...Array(5)].map((s,e)=>g.jsx("svg",{viewBox:"0 0 100 125",className:"fixed bottom-[-150px] fill-white/10 drop-shadow-[0_0_15px_rgba(200,220,255,0.6)] animate-floatGhost",style:{left:`${Math.random()*80+10}vw`,width:`${Math.random()*50+50}px`,animationDuration:`${Math.random()*15+10}s`,animationDelay:`${Math.random()*10}s`},children:g.jsx("path",{d:"M10 115 C 10 115, 10 95, 20 95 C 30 95, 30 115, 30 115 C 30 115, 30 95, 40 95 C 50 95, 50 115, 50 115 C 50 115, 50 95, 60 95 C 70 95, 70 115, 70 115 C 70 115, 70 95, 80 95 C 90 95, 90 115, 90 115 L 90 60 C 90 20, 50 10, 50 10 C 50 10, 10 20, 10 60 Z M 30 60 C 35 60, 35 50, 30 50 C 25 50, 25 60, 30 60 Z M 70 60 C 75 60, 75 50, 70 50 C 65 50, 65 60, 70 60 Z"})},e)),g.jsx("style",{children:`
            @keyframes floatGhost { 
                0% { transform: translateY(0) scale(1); opacity: 0; } 
                20% { opacity: 0.6; } 
                100% { transform: translateY(-120vh) scale(1.1); opacity: 0; } 
            } 
            .animate-floatGhost { 
                animation-name: floatGhost; 
                animation-timing-function: ease-in-out; 
                animation-iteration-count: infinite; 
            }
        `})]}),XM=()=>g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(30)].map((s,e)=>g.jsx("div",{className:"absolute rounded-full bg-pink-400 animate-pulse",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,width:`${Math.random()*4+1}px`,height:`${Math.random()*4+1}px`,opacity:Math.random()*.6+.2,animationDuration:`${Math.random()*3+2}s`,boxShadow:"0 0 6px 2px rgba(244, 114, 182, 0.4)"}},`dust-${e}`)),[...Array(15)].map((s,e)=>g.jsx("div",{className:"absolute text-pink-300 opacity-40 animate-floatUp",style:{top:`${Math.random()*100+10}%`,left:`${Math.random()*100}%`,fontSize:`${Math.random()*10+10}px`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,textShadow:"0 0 5px rgba(236, 72, 153, 0.5)"},children:["","",""][Math.floor(Math.random()*3)]},`heart-${e}`)),g.jsx("style",{children:`
                @keyframes floatUp {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    20% { opacity: 0.6; }
                    80% { opacity: 0.6; }
                    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
                }
                .animate-floatUp {
                    animation-name: floatUp;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
             `})]}),JM=()=>{const s=["#f44336","#4caf50","#2196f3","#ffeb3b"];return g.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:[...Array(40)].map((e,t)=>g.jsx("div",{className:"absolute rounded-full animate-pulse",style:{top:`${Math.random()*100}vh`,left:`${Math.random()*100}vw`,width:"10px",height:"10px",backgroundColor:s[t%s.length],boxShadow:`0 0 15px 5px ${s[t%s.length]}66`,animationDuration:"2s",animationDelay:`${Math.random()}s`}},t))})},WM=()=>g.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-[#050a14]",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-slate-900 to-[#2a0a3b]"}),g.jsx("div",{className:"absolute top-[20%] left-1/2 -translate-x-1/2 w-[50vh] h-[50vh] rounded-full bg-gradient-to-t from-fuchsia-600 to-yellow-400 blur-[60px] opacity-60"}),g.jsx("div",{className:"cyber-grid"}),g.jsx("div",{className:"city-skyline"}),g.jsx("style",{children:`
                .cyber-grid {
                    position: absolute;
                    width: 200%;
                    height: 100%;
                    bottom: -50%;
                    left: -50%;
                    background-image: 
                        linear-gradient(rgba(6, 182, 212, 0.5) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(6, 182, 212, 0.5) 1px, transparent 1px);
                    background-size: 50px 50px;
                    transform: perspective(300px) rotateX(60deg);
                    animation: gridMove 4s linear infinite;
                    box-shadow: 0 0 150px rgba(6, 182, 212, 0.3);
                }

                .city-skyline {
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    height: 25%;
                    background: repeating-linear-gradient(
                        90deg,
                        #000 0px,
                        #000 15px,
                        transparent 15px,
                        transparent 25px
                    );
                    opacity: 0.8;
                    filter: drop-shadow(0 0 15px #d946ef);
                    z-index: -1;
                }

                @keyframes gridMove {
                    0% { transform: perspective(300px) rotateX(60deg) translateY(0); }
                    100% { transform: perspective(300px) rotateX(60deg) translateY(50px); }
                }
            `})]}),ZM=()=>g.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden bg-pink-50",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-200 via-orange-100 to-purple-200 animate-gradient-xy opacity-80"}),[...Array(15)].map((s,e)=>g.jsx("div",{className:"absolute text-pink-300/40 animate-float-neko",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,fontSize:`${Math.random()*3+2}rem`,animationDuration:`${Math.random()*10+10}s`,animationDelay:`${Math.random()*5}s`,transform:`rotate(${Math.random()*45}deg)`},children:""},e)),g.jsx("style",{children:`
                @keyframes gradient-xy {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                }
                .animate-gradient-xy {
                    background-size: 200% 200%;
                    animation: gradient-xy 15s ease infinite;
                }
                @keyframes float-neko {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    50% { opacity: 0.6; }
                    100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
                }
                .animate-float-neko {
                    animation-name: float-neko;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                }
            `})]}),ek=()=>{const s=["","","","","","","",""];return g.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden font-sans",children:[[...Array(35)].map((e,t)=>g.jsx("div",{className:"absolute animate-fallTopToBottom opacity-70",style:{left:Math.random()*100+"%",top:"-10%",fontSize:Math.random()*1.5+1+"rem",animationDuration:Math.random()*5+4+"s",animationDelay:Math.random()*5+"s",transform:`rotate(${Math.random()*360}deg)`},children:s[Math.floor(Math.random()*s.length)]},t)),g.jsx("style",{children:"@keyframes fallTopToBottom { 0% { transform: translateY(0); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(110vh); opacity: 0; } } .animate-fallTopToBottom { animation-name: fallTopToBottom; animation-timing-function: linear; animation-iteration-count: infinite; }"})]})},tk=({themeClasses:s,activeEffect:e})=>{const t={lofi_notes:qM,cozy_lights:VM,lanterns:YM,mystic_fog:jM,forest:KT,forest_flora:KT,golden_dust:BM,shooting_stars:UM,snow_effect:OM,matrix_effect:KM,ghost:QM,valentine_hearts:XM,lights:JM,rain:HM,neon_grid:WM,neko_pattern:ZM,mickey_confetti:ek};P.useEffect(()=>{const a=document.body;a.style.background="",a.style.backgroundImage="",a.style.cursor="";const l=document.getElementById("theme-custom-css");if(l&&l.remove(),a.className=`${s.bodyBg||"bg-gray-900"} min-h-screen transition-colors duration-500`,s.rawBg&&(a.style.background=s.rawBg,a.style.backgroundAttachment="fixed",a.style.backgroundSize="cover"),s.customCss){const u=document.createElement("style");u.id="theme-custom-css",u.innerHTML=`body { ${s.customCss} }`,document.head.appendChild(u)}else if(s.name==="neko"){const u=`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ff69b4" stroke="white" stroke-width="1.5"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto`;a.style.cursor=u}},[s]);const r=()=>{const a=[...s.activeEffects||[]];return e&&!a.includes(e)&&a.push(e),g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),a.map(l=>{const u=t[l];return u?g.jsx(u,{},l):null})]})};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 pointer-events-none -z-10 mix-blend-overlay opacity-[0.05]",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),g.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:r()}),s.name==="lofi"&&g.jsx($M,{})]})},nk=P.lazy(()=>zu(()=>import("./SalaryCalculatorModal-DOcaClTE.js"),[])),rk=P.lazy(()=>zu(()=>import("./IdeasModal-BXCZ32MT.js"),[])),ik=P.lazy(()=>zu(()=>import("./MarketplaceModal-BsmxcCBM.js"),[])),sk=P.lazy(()=>zu(()=>import("./QuizModal-BZ4VFCFZ.js"),[])),ak=P.lazy(()=>zu(()=>import("./AvailabilityModal-CNwXhKuJ.js"),[])),ok=()=>{const{user:s,loading:e}=X5(),[t,r]=P.useState(null),[a,l]=P.useState(!1);if(P.useEffect(()=>{s&&(async()=>{try{const p=at(Oe,"users",s.uid),y=await Hf(p);if(y.exists())r(y.data());else{const v={uid:s.uid,email:s.email,userName:s.displayName||s.email.split("@")[0],role:"agent",team:"default",createdAt:Date.now(),photoURL:s.photoURL||null};await setDoc(p,v),r(v),console.log("Perfil de usuario fantasma creado automticamente.")}}catch(p){console.error("Error fetching/creating user role",p)}})()},[s]),e)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:"Loading Nexus OS..."});if(!s)return g.jsx(vM,{});const u=t&&(t.role==="admin"||t.role==="team_leader");return u&&a?g.jsx(_M,{onLogout:()=>l(!1),currentUserTeam:t.team||"default",isAdmin:t.role==="admin"}):g.jsx(lk,{user:s,loading:e,isLeader:u,onOpenDashboard:()=>l(!0),userProfile:t})},lk=({user:s,loading:e,isLeader:t,onOpenDashboard:r,userProfile:a})=>{const l=s,{balance:u,addCoins:f,spendCoins:p}=Y5(s),[y,v]=es("config","hourlyRate","",l?s:null),[T,w]=es("config","weeklyGoal",10,l?s:null),[C,L]=es("data","inventory",["default"],l?s:null);es("data","lastLoginBonus",null,l?s:null);const[X,q]=es("data","lastWeeklyBonus","",l?s:null),[G,ee]=es("config","pet",null,l?s:null),[Y,le]=es("config","effect",null,l?s:null),[ae,he]=es("config","border",null,l?s:null),[S,A]=P.useState("tasks"),[N,O]=P.useState(""),[D,j]=P.useState(Uu()),[R,me]=P.useState(Uu()),[de,F]=P.useState([]),[oe,be]=P.useState(null),Ve=P.useRef(!1);P.useEffect(()=>{a&&!Ve.current&&(a.currentSkin&&be(a.currentSkin),Ve.current=!0)},[a]);const[Pe,M]=P.useState(!1),[ne,ue]=P.useState(!1),[ve,ie]=P.useState(!1),[ge,Ie]=P.useState(!1),[rt,Ge]=P.useState(!1),[wt,Xn]=P.useState(!1),[vn,cr]=P.useState(null),[Jn,Ri]=P.useState([]),[Rn,Ci]=P.useState([]),[wr,Ct]=P.useState({}),[yt,Lr]=P.useState("monday"),ms=tM(J5,de,be,oe),{strategy:Ye,message:Zt,isUnlocked:Ur,weeklyHoursWorked:Di}=ms,si=W5(l?s:null),{tasks:Cn,addTask:wa,addMultipleTasks:zr,deleteTask:ai,deleteAllTasks:Mi,toggleTimer:Bn,updateTaskDetails:Bt,resetTaskTimer:Dn,stopAllTimers:At,statusMessage:ps,resumeStoppedTimers:Er,clearStatusMessage:oi,syncTasksTime:Fn,errorMessage:Br,setErrorMessage:Dt,distributeTasksTime:qn,sortTasksByShop:Mn}=si,{handleGenerate:xn}=iM(s,Cn,At,f,a),ki=async(Te,Ue={})=>{try{await bu(In(Oe,"app_analytics"),{eventName:Te,uid:s.uid,timestamp:Date.now(),data:Ue})}catch(It){console.error("Log error",It)}};P.useEffect(()=>{if(!s)return;const Te=Ti(In(Oe,"news_ticker"),El("createdAt","desc"),xT(5)),Ue=ei(Te,cn=>Ri(cn.docs.map(en=>({id:en.id,...en.data()})))),It=ei(Ti(In(Oe,"training_modules"),Ws("active","==",!0)),cn=>Ci(cn.docs.map(en=>({id:en.id,...en.data()})))),bt=ei(at(Oe,"users",s.uid),cn=>{cn.exists()&&Ct(cn.data().quizProgress||{})}),li=Ti(In(Oe,"daily_reports"),Ws("uid","==",s.uid),El("date","desc"),xT(45)),kn=ei(li,cn=>{const en=cn.docs.map(tn=>{const te=tn.data();let xe=te.date;if(!xe&&tn.id.includes("_")){const Me=tn.id.match(/(\d{4}-\d{2}-\d{2})/);Me&&(xe=Me[0])}if(!xe&&te.timestamp&&(xe=new Date(te.timestamp).toLocaleDateString("en-CA")),!xe)return null;let _e=te.report||te.content||te.text||te.body;if(!_e&&te.taskBreakdown){const Me=Array.isArray(te.taskBreakdown)?te.taskBreakdown:[],Nt=Ze=>{if(!Ze||isNaN(Ze))return"00:00:00";const un=Math.floor(Ze/1e3%60),qe=Math.floor(Ze/(1e3*60)%60);return`${Math.floor(Ze/(1e3*60*60)).toString().padStart(2,"0")}:${qe.toString().padStart(2,"0")}:${un.toString().padStart(2,"0")}`},Et=Me.reduce((Ze,un)=>Ze+(un.elapsedTime||0),0);_e=` REPORTE RECUPERADO (${xe})

 Tiempo Total Real: ${Nt(Et)}
 Tareas Realizadas: ${Me.length}
-----------------------------------
`,Me.length>0?_e+=Me.map(Ze=>` ${Ze.name||Ze.text||"Tarea"} (${Ze.timeFormatted||Nt(Ze.elapsedTime)})`).join(`
`):_e+="Sin detalles."}return{id:xe,content:_e||"Datos ilegibles"}}).filter(Boolean);F(en)},cn=>console.warn("Index warning:",cn));return()=>{Ue(),It(),bt(),kn()}},[s]),P.useEffect(()=>{if(s&&Ye.name){const Te=setTimeout(()=>{yr(at(Oe,"users",s.uid),{currentSkin:Ye.name}).catch(Ue=>console.log("Skin sync skip",Ue))},2e3);return()=>clearTimeout(Te)}},[Ye.name,s]);const Fr=P.useMemo(()=>{if(Rn.length===0)return{isGraduated:!1,isRusted:!1};let Te=0,Ue=!1;return Rn.forEach(It=>{const bt=wr[It.id];bt&&bt.passed&&(Te++,bt.version<It.version&&(Ue=!0))}),{isGraduated:Te===Rn.length,isRusted:Ue}},[Rn,wr]);P.useEffect(()=>{const Te="min-h-screen transition-colors duration-500",Ue=`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ff69b4" stroke="%23ffffff" stroke-width="1.5"><path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M7 5C5.9 5 5 5.9 5 7C5 8.1 5.9 9 7 9C8.1 9 9 8.1 9 7C9 5.9 8.1 5 7 5M17 5C15.9 5 15 5.9 15 7C15 8.1 15.9 9 17 9C18.1 9 19 8.1 19 7C19 5.9 18.1 5 17 5M12 8C9.5 8 7.3 9.3 6.1 11.4C5.5 12.4 6.2 13.7 7.3 13.9L8.5 14.1C9.6 14.3 10.7 14.3 11.8 14.1L16.5 13.2C17.7 13 18.5 11.9 18.1 10.8C17.3 9.2 14.9 8 12 8Z"/></svg>') 16 16, auto`;Ye.rawBg?(document.body.className=Te,document.body.style.background=Ye.rawBg,document.body.style.backgroundAttachment="fixed",document.body.style.backgroundSize="cover"):(document.body.className=`${Ye.bodyBg||"bg-gray-900"} ${Te}`,document.body.style.background=""),Ye.name==="neko"?document.body.style.cursor=Ue:document.body.style.cursor="auto"},[Ye]);const Wn=async Te=>{const Ue=vn.id,It=vn.version||1;try{await yr(at(Oe,"users",s.uid),{[`quizProgress.${Ue}`]:{passed:!0,version:It,completedAt:Date.now()}}),f(Te),alert(` FELICIDADES!
Has completado el mdulo.`),ki("QUIZ_COMPLETE",{quizId:vn.id,reward:Te}),cr(null)}catch(bt){console.error(bt)}},qr=()=>{const Te=Ye?.name||"default";xn(R,Te,(Ue,It)=>{O(Ue);const bt={id:R,content:Ue};F(li=>[bt,...li.filter(kn=>kn.id!==R)]),M(!1)})},Ea=()=>{const Te=Xg();if(X===Te){alert("Ya has cobrado!");return}f(100),q(Te),alert(` FELICIDADES!
Meta semanal cumplida. +100 Coins.`)},Hr=X===Xg(),Oi=()=>Ie(!1),Vi=Te=>{if(p(Te.price)){const Ue=[...C||[],Te.id];L(Ue),yr(at(Oe,"users",s.uid),{walletBalance:u-Te.price,inventory:Ue}).catch(It=>console.error(It)),ki("SHOP_BUY",{item:Te.id}),alert("Item adquirido correctamente!")}else alert("No tienes suficientes Lofi Coins.")},gn=P.useRef(null),Ut=P.useRef(null),gs=Te=>{switch(gn.current&&(clearTimeout(gn.current),gn.current=null,Ut.current=null),Te.category){case"theme":be(Te.id);break;case"pet":ee(G===Te.id?null:Te.id);break;case"effect":le(Y===Te.id?null:Te.id);break;case"border":he(ae===Te.id?null:Te.id);break;default:be(Te.id)}},Hn=Te=>{let Ue=Te.category,It,bt;if(Ue==="theme")It=oe,bt=be;else if(Ue==="border")It=ae,bt=he;else if(Ue==="effect")It=Y,bt=le;else return;gn.current?Ut.current&&Ut.current.category!==Ue&&(Ut.current.setter(Ut.current.value),Ut.current={category:Ue,value:It,setter:bt}):Ut.current={category:Ue,value:It,setter:bt},gn.current&&clearTimeout(gn.current),bt(Te.id),gn.current=setTimeout(()=>{Ut.current&&Ut.current.category===Ue&&bt(Ut.current.value),gn.current=null,Ut.current=null},7e3)},Gn=()=>{if(!ae)return"";const Te=jn[ae];return Te?Te.borderClass:""};P.useEffect(()=>{if(ae&&jn[ae]?.customCss){const Te=document.createElement("style");return Te.id="border-custom-css",Te.innerHTML=jn[ae].customCss,document.head.appendChild(Te),()=>{const Ue=document.getElementById("border-custom-css");Ue&&Ue.remove()}}},[ae]);const Vt=Ye.name==="halloween"?"glow-card":"",Ft=P.useMemo(()=>{const Te=de.find(Ue=>Ue.id===D);return Te?Te.content:null},[de,D]);return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.05] z-0 mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/stardust.png")'}}),g.jsx(CM,{news:Jn}),Fr.isGraduated&&g.jsxs("div",{className:"fixed top-12 left-4 z-40 flex flex-col items-center animate-fadeIn",children:[g.jsx("div",{className:`text-4xl ${Fr.isRusted?"grad-badge-rust":"grad-badge-glow"}`,title:Fr.isRusted?"Certificacin Vencida":"Agente Certificado",children:""}),Fr.isRusted&&g.jsx("span",{className:"text-[9px] bg-red-600 text-white px-1 rounded animate-bounce",children:"UPDATE"})]}),g.jsx(DM,{isLeader:t,onOpenDashboard:r,onOpenIdeas:()=>Ge(!0),onOpenAvailability:()=>Xn(!0),setIdeaType:Lr}),g.jsxs(P.Suspense,{fallback:g.jsx("div",{className:"fixed inset-0 z-[200] pointer-events-none"}),children:[g.jsx(rk,{isOpen:rt,onClose:()=>Ge(!1),user:s,userProfile:a,initialType:yt}),g.jsx(ak,{isOpen:wt,onClose:()=>Xn(!1),user:s,userProfile:a,addCoins:f,logEvent:ki}),vn&&g.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:g.jsx(sk,{isOpen:!0,quiz:vn,onClose:()=>cr(null),onComplete:Wn,user:s})}),g.jsx(nk,{isOpen:ne,onClose:()=>ue(!1),pastReports:de,hourlyRate:y,setHourlyRate:v,themeClasses:Ye}),g.jsx(ik,{isOpen:ge,onClose:Oi,userCoins:u,ownedItems:C,currentTheme:Ye.name,activePet:G,activeBorder:ae,activeEffect:Y,onBuy:Vi,onEquip:gs,onPreview:Hn})]}),g.jsx("div",{className:"relative z-50",children:g.jsx(vS,{user:s})}),g.jsx(tk,{themeClasses:Ye,activeEffect:Y}),g.jsx(EM,{message:ps,resumeAction:Er,dismissAction:oi}),g.jsx(TM,{coins:u||0,onOpenShop:()=>Ie(!0)}),g.jsx(RM,{onClick:()=>ue(!0)}),g.jsx(MM,{isOpen:Pe,onClose:()=>M(!1),onGenerate:qr,tasks:Cn,syncTasksTime:Fn,distributeTasksTime:qn,themeClasses:Ye,selectedReportDate:R,setSelectedReportDate:me,pastReports:de}),g.jsx(kM,{isOpen:ve,onClose:()=>ie(!1),onConfirm:()=>{Mi(),ie(!1),M(!1)},themeClasses:Ye}),g.jsx("div",{className:"app-container relative z-10 flex flex-col items-center justify-center py-10 mt-8",children:g.jsx("div",{className:"relative w-11/12 max-w-xl mt-8",children:g.jsxs("div",{className:`w-full rounded-2xl shadow-2xl p-4 sm:p-8 pt-8 sm:pt-12 transition-all duration-500 ${Ye.cardBg} min-h-[85vh] relative ${Vt} ${Gn()} app-card`,children:[Ye.activeEffects&&Ye.activeEffects.includes("spiderweb")&&g.jsx(GM,{}),g.jsxs("div",{className:"relative z-20 space-y-6 h-full flex flex-col",children:[g.jsx(wM,{themeClasses:Ye,celebrationMessage:Zt}),Rn.length>0&&g.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Rn.map(Te=>{const Ue=wr[Te.id],It=Ue?.passed,bt=It&&Ue.version<Te.version;return It&&!bt?null:g.jsxs("button",{onClick:()=>cr(Te),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap border ${bt?"bg-red-900/30 border-red-500 text-red-300":"bg-indigo-900/30 border-indigo-500 text-indigo-300"}`,children:[g.jsx("span",{children:""})," ",bt?"UPDATE:":"NUEVO:"," ",Te.title," (+",Te.reward,")"]},Te.id)})}),g.jsx(NM,{isUnlocked:Ur,weeklyHours:Di,targetHours:T,setTargetHours:w,onClaimBonus:Ea,bonusClaimed:Hr}),g.jsxs("div",{className:"flex justify-center gap-4 border-b border-white/10 pb-2 mb-2",children:[g.jsx("button",{onClick:()=>A("tasks"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="tasks"?"bg-white/20 text-white":"text-slate-400"}`,children:" TAREAS"}),g.jsx("button",{onClick:()=>A("history"),className:`px-4 py-2 rounded-lg font-bold text-sm ${S==="history"?"bg-white/20 text-white":"text-slate-400"}`,children:" HISTORIAL"})]}),S==="tasks"&&g.jsxs("div",{className:"flex-1 flex flex-col gap-4 animate-fadeIn",children:[g.jsx(SM,{addTask:wa,addMultipleTasks:zr,errorMessage:Br,setErrorMessage:Dt,themeClasses:Ye}),Cn.length>0&&g.jsxs("div",{className:"flex items-center justify-between gap-3 px-1 mb-1 animate-fadeIn",children:[g.jsxs("button",{onClick:Mn,className:"px-4 py-2 bg-slate-700/50 hover:bg-slate-600 text-slate-300 text-xs font-bold uppercase tracking-wider rounded-full border border-slate-600 hover:border-slate-400 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[g.jsx("span",{children:""})," Ordenar por Tienda"]}),g.jsxs("button",{onClick:()=>ie(!0),className:"px-4 py-2 bg-red-900/30 hover:bg-red-800 text-red-400 hover:text-red-100 text-xs font-bold uppercase tracking-wider rounded-full border border-red-900 hover:border-red-500 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[g.jsx("span",{children:""})," Limpiar Todo"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto task-scroll pr-2 space-y-3 min-h-[50vh] max-h-[65vh] border border-white/5 rounded-xl p-2 bg-black/10",children:Cn.length>0?Cn.map(Te=>g.jsx(AM,{task:Te,toggleTimer:Bn,deleteTask:ai,updateTaskDetails:Bt,themeClasses:Ye,resetTaskTimer:Dn,celebrationThemeName:Ye.name},Te.id)):g.jsx("p",{className:`text-center italic mt-10 ${Ye.secondaryText}`,children:"No hay tareas activas."})}),g.jsxs("div",{className:"flex flex-col items-center w-full bg-black/20 p-4 rounded-xl border border-white/5 mt-auto",children:[g.jsx("button",{type:"button",onClick:()=>M(!0),className:`px-6 py-3 rounded-full font-semibold transition duration-300 shadow-lg w-full sm:w-auto ${Ye.buttonAction}`,children:"Generar E.O.D.R."}),g.jsx($T,{content:N,themeClasses:Ye,placeholder:"El reporte aparecer aqu..."})]})]}),S==="history"&&g.jsx("div",{className:"flex-1 flex flex-col gap-6 animate-fadeIn",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("h2",{className:`text-2xl font-bold text-center ${Ye.primaryText}`,children:"Calendario de Reportes"}),g.jsx(IM,{reports:de,selectedDate:D,onSelectDate:j,themeClasses:Ye}),g.jsxs("h3",{className:`font-bold mb-2 text-center ${Ye.accentText}`,children:["Reporte del: ",D.split("-").reverse().join("/")]}),g.jsx($T,{content:Ft,themeClasses:Ye,placeholder:"No hay reporte guardado para este da."})]})})]})]})})})]})};lI.createRoot(document.getElementById("root")).render(g.jsx(P.StrictMode,{children:g.jsx(ok,{})}));export{hk as M,Uu as a,In as b,ck as c,Oe as d,lg as e,bu as f,JA as g,eM as h,at as i,g as j,Hf as k,xM as m,El as o,dk as p,Ti as q,P as r,ua as s,Y5 as u,Ws as w};
